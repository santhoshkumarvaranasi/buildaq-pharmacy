var RK=Object.create;var Pf=Object.defineProperty,FK=Object.defineProperties,LK=Object.getOwnPropertyDescriptor,BK=Object.getOwnPropertyDescriptors,VK=Object.getOwnPropertyNames,_b=Object.getOwnPropertySymbols,UK=Object.getPrototypeOf,f1=Object.prototype.hasOwnProperty,eB=Object.prototype.propertyIsEnumerable;var J3=(i,t,e)=>t in i?Pf(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,ge=(i,t)=>{for(var e in t||={})f1.call(t,e)&&J3(i,e,t[e]);if(_b)for(var e of _b(t))eB.call(t,e)&&J3(i,e,t[e]);return i},Nt=(i,t)=>FK(i,BK(t));var zK=(i,t)=>{var e={};for(var n in i)f1.call(i,n)&&t.indexOf(n)<0&&(e[n]=i[n]);if(i!=null&&_b)for(var n of _b(i))t.indexOf(n)<0&&eB.call(i,n)&&(e[n]=i[n]);return e};var D=(i,t)=>()=>(i&&(t=i(i=0)),t);var os=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),Ei=(i,t)=>{for(var e in t)Pf(i,e,{get:t[e],enumerable:!0})},tB=(i,t,e,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of VK(t))!f1.call(i,r)&&r!==e&&Pf(i,r,{get:()=>t[r],enumerable:!(n=LK(t,r))||n.enumerable});return i};var g1=(i,t,e)=>(e=i!=null?RK(UK(i)):{},tB(t||!i||!i.__esModule?Pf(e,"default",{value:i,enumerable:!0}):e,i)),iB=i=>tB(Pf({},"__esModule",{value:!0}),i);var oe=(i,t,e)=>new Promise((n,r)=>{var o=c=>{try{a(e.next(c))}catch(l){r(l)}},s=c=>{try{a(e.throw(c))}catch(l){r(l)}},a=c=>c.done?n(c.value):Promise.resolve(c.value).then(o,s);a((e=e.apply(i,t)).next())});function $o(i){throw new Error(`'${i}' not yet implemented or not found in the registry. This kernel may not be supported by the tfjs backend you have chosen`)}var Fx,ap,sk=D(()=>{"use strict";Fx=class{constructor(t,e){this.backend=t,this.dataMover=e,this.data=new WeakMap,this.dataIdsCount=0}get(t){return this.data.has(t)||this.dataMover.moveData(this.backend,t),this.data.get(t)}set(t,e){this.dataIdsCount++,this.data.set(t,e)}has(t){return this.data.has(t)}delete(t){return this.dataIdsCount--,this.data.delete(t)}numDataIds(){return this.dataIdsCount}},ap=class{refCount(t){return $o("refCount")}incRef(t){return $o("incRef")}timerAvailable(){return!0}time(t){return $o("time")}read(t){return $o("read")}readSync(t){return $o("readSync")}readToGPU(t,e){return $o("readToGPU")}numDataIds(){return $o("numDataIds")}disposeData(t,e){return $o("disposeData")}write(t,e,n){return $o("write")}move(t,e,n,r,o){return $o("move")}createTensorFromGPUData(t,e,n){return $o("createTensorFromGPUData")}memory(){return $o("memory")}floatPrecision(){return $o("floatPrecision")}epsilon(){return this.floatPrecision()===32?1e-7:1e-4}dispose(){return $o("dispose")}}});function h8(i){let t=i.length,e=0;for(;t>0;)e=Math.random()*t|0,t--,Lx(i,t,e)}function tde(i,t){if(i.length!==t.length)throw new Error(`Array sizes must match to be shuffled together First array length was ${i.length}Second array length was ${t.length}`);let e=i.length,n=0;for(;e>0;)n=Math.random()*e|0,e--,Lx(i,e,n),Lx(t,e,n)}function cp(i,t,e){return Math.max(i,Math.min(t,e))}function ide(i){return i%2===0?i:i+1}function Lx(i,t,e){let n=i[t];i[t]=i[e],i[e]=n}function nde(i){let t=0;for(let e=0;e<i.length;e++)t+=i[e];return t}function rde(i,t){let e=Math.random();return t*e+(1-e)*i}function ode(i,t){let e=0;for(let n=0;n<i.length;n++){let r=Number(i[n])-Number(t[n]);e+=r*r}return e}function A(i,t){if(!i)throw new Error(typeof t=="string"?t:t())}function ln(i,t,e=""){A(io(i,t),()=>e+` Shapes ${i} and ${t} must match`)}function ms(i){A(i!=null,()=>"The input to the tensor constructor must be a non-null value.")}function oi(i){if(i.length===0)return 1;let t=i[0];for(let e=1;e<i.length;e++)t*=i[e];return t}function sde(i){return i.length===0}function ak(i,t){if(i===t)return!0;if(i==null||t==null||i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==null&&t[e]!==null&&i[e]!==t[e])return!1;return!0}function io(i,t){if(i===t)return!0;if(i==null||t==null||i.length!==t.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!==t[e])return!1;return!0}function el(i){return i%1===0}function ade(i){if(Math.tanh!=null)return Math.tanh(i);if(i===1/0)return 1;if(i===-1/0)return-1;{let t=Math.exp(2*i);return(t-1)/(t+1)}}function cde(i){let t=Math.ceil(Math.sqrt(i));return[t,Math.ceil(i/t)]}function lde(i){let t=new Uint32Array(i);for(let e=0;e<i;++e)t[e]=e;return h8(t),t}function $u(i,t){return t<=i.length?i:i+" ".repeat(t-i.length)}function dde(i,t=r=>0,e,n){return new Promise((r,o)=>{let s=0,a=()=>{if(i()){r();return}s++;let c=t(s);if(e!=null&&s>=e){o();return}n!=null?n(a,c):setTimeout(a,c)};a()})}function ude(i,t){let e=1,n=-1;for(let o=0;o<i.length;++o)if(i[o]>=0)e*=i[o];else if(i[o]===-1){if(n!==-1)throw Error(`Shapes can only have 1 implicit size. Found -1 at dim ${n} and dim ${o}`);n=o}else if(i[o]<0)throw Error(`Shapes can not be < 0. Found ${i[o]} at dim ${o}`);if(n===-1){if(t>0&&t!==e)throw Error(`Size(${t}) must match the product of shape ${i}`);return i}if(e===0)throw Error(`Cannot infer the missing size in [${i}] when there are 0 elements`);if(t%e!==0)throw Error(`The implicit shape can't be a fractional number. Got ${t} / ${e}`);let r=i.slice();return r[n]=t/e,r}function md(i,t){let e=t.length;return i=i==null?t.map((n,r)=>r):[].concat(i),A(i.every(n=>n>=-e&&n<e),()=>`All values in axis param must be in range [-${e}, ${e}) but got axis ${i}`),A(i.every(n=>el(n)),()=>`All values in axis param must be integers but got axis ${i}`),i.map(n=>n<0?e+n:n)}function ck(i,t){let e=[],n=[],r=t!=null&&Array.isArray(t)&&t.length===0,o=t==null||r?null:md(t,i).sort(),s=0;for(let a=0;a<i.length;++a){if(o!=null){if(o[s]===a&&i[a]!==1)throw new Error(`Can't squeeze axis ${a} since its dim '${i[a]}' is not 1`);(o[s]==null||o[s]>a)&&i[a]===1&&(e.push(i[a]),n.push(a)),o[s]<=a&&s++}i[a]!==1&&(e.push(i[a]),n.push(a))}return{newShape:e,keptDims:n}}function lk(i,t){return Bx(i,t)}function Bx(i,t){let e=null;if(i==null||i==="float32")e=new Float32Array(t);else if(i==="int32")e=new Int32Array(t);else if(i==="bool")e=new Uint8Array(t);else if(i==="string")e=new Array(t);else throw new Error(`Unknown data type ${i}`);return e}function dk(i,t){for(let e=0;e<i.length;e++){let n=i[e];if(isNaN(n)||!isFinite(n))throw Error(`A tensor of type ${t} being uploaded contains ${n}.`)}}function uk(i){return i==="bool"||i==="complex64"||i==="float32"||i==="int32"||i==="string"}function hde(i,t){return!(t==="complex64"||t==="float32"&&i!=="complex64"||t==="int32"&&i!=="float32"&&i!=="complex64"||t==="bool"&&i==="bool")}function lp(i){if(i==="float32"||i==="int32")return 4;if(i==="complex64")return 8;if(i==="bool")return 1;throw new Error(`Unknown dtype ${i}`)}function hk(i){if(i==null)return 0;let t=0;return i.forEach(e=>t+=e.length),t}function da(i){return typeof i=="string"||i instanceof String}function m8(i){return typeof i=="boolean"}function p8(i){return typeof i=="number"}function pd(i){return Array.isArray(i)?pd(i[0]):i instanceof Float32Array?"float32":i instanceof Int32Array||i instanceof Uint8Array||i instanceof Uint8ClampedArray?"int32":p8(i)?"float32":da(i)?"string":m8(i)?"bool":"float32"}function ec(i){return!!(i&&i.constructor&&i.call&&i.apply)}function dp(i,t){for(let e=t;e<i;++e)if(i%e===0)return e;return i}function tc(i){let t=i.length;if(t<2)return[];let e=new Array(t-1);e[t-2]=i[t-1];for(let n=t-3;n>=0;--n)e[n]=e[n+1]*i[n+1];return e}function f8(i,t,e,n=!1){let r=new Array;if(t.length===1){let o=t[0]*(n?2:1);for(let s=0;s<o;s++)r[s]=e[i+s]}else{let o=t[0],s=t.slice(1),a=s.reduce((c,l)=>c*l)*(n?2:1);for(let c=0;c<o;c++)r[c]=f8(i+c*a,s,e,n)}return r}function ju(i,t,e=!1){if(i.length===0)return t[0];let n=i.reduce((r,o)=>r*o)*(e?2:1);if(n===0)return[];if(n!==t.length)throw new Error(`[${i}] does not match the input size ${t.length}${e?" for a complex tensor":""}.`);return f8(0,i,t,e)}function mde(i,t){if(Array.isArray(i))return i;if(t==="float32")return i instanceof Float32Array?i:new Float32Array(i);if(t==="int32")return i instanceof Int32Array?i:new Int32Array(i);if(t==="bool"||t==="string")return Uint8Array.from(new Int32Array(i));throw new Error(`Unknown dtype ${t}`)}function r_(i,t){let e=up(i,t);for(let n=0;n<e.length;n++)e[n]=1;return e}function up(i,t){if(t==null||t==="float32"||t==="complex64")return new Float32Array(i);if(t==="int32")return new Int32Array(i);if(t==="bool")return new Uint8Array(i);throw new Error(`Unknown data type ${t}`)}function pde(i,t){let e=i.reduce((n,r)=>n*r,1);if(t==null||t==="float32")return ju(i,new Float32Array(e));if(t==="int32")return ju(i,new Int32Array(e));if(t==="bool")return ju(i,new Uint8Array(e));throw new Error(`Unknown data type ${t}`)}function fn(i){i.forEach(t=>{A(Number.isInteger(t)&&t>=0,()=>`Tensor must have a shape comprised of positive integers but got shape [${i}].`)})}function fde(i,t,e){if(t===0)return 0;if(t===1)return i[0];let n=i[i.length-1];for(let r=0;r<i.length-1;++r)n+=e[r]*i[r];return n}function gde(i,t,e){if(t===0)return[];if(t===1)return[i];let n=new Array(t);for(let r=0;r<n.length-1;++r)n[r]=Math.floor(i/e[r]),i-=n[r]*e[r];return n[n.length-1]=i,n}function Gu(i){return i&&i.then&&typeof i.then=="function"}var ar=D(()=>{"use strict";});function bde(i){let t={};return i.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(e,...n)=>(vde(t,n[0],n[1]),n.join("="))),t}function vde(i,t,e){i[decodeURIComponent(t)]=decodeURIComponent(e||"")}function yde(i,t){let e=t.toLowerCase();return e==="true"||e==="false"?e==="true":`${+e}`===e?+e:t}function st(){return Vx}function _8(i){Vx=i}var g8,hp,Vx,xr=D(()=>{"use strict";ar();g8="tfjsflags",hp=class{constructor(t){this.global=t,this.flags={},this.flagRegistry={},this.urlFlags={},this.getQueryParams=bde,this.populateURLFlags()}setPlatform(t,e){this.platform!=null&&(st().getBool("IS_TEST")||st().getBool("PROD")||console.warn(`Platform ${this.platformName} has already been set. Overwriting the platform with ${t}.`)),this.platformName=t,this.platform=e}registerFlag(t,e,n){if(this.flagRegistry[t]={evaluationFn:e,setHook:n},this.urlFlags[t]!=null){let r=this.urlFlags[t];st().getBool("IS_TEST")||st().getBool("PROD")||console.warn(`Setting feature override from URL ${t}: ${r}.`),this.set(t,r)}}getAsync(t){return oe(this,null,function*(){return t in this.flags?this.flags[t]:(this.flags[t]=yield this.evaluateFlag(t),this.flags[t])})}get(t){if(t in this.flags)return this.flags[t];let e=this.evaluateFlag(t);if(Gu(e))throw new Error(`Flag ${t} cannot be synchronously evaluated. Please use getAsync() instead.`);return this.flags[t]=e,this.flags[t]}getNumber(t){return this.get(t)}getBool(t){return this.get(t)}getString(t){return this.get(t)}getFlags(){return this.flags}get features(){return this.flags}set(t,e){if(this.flagRegistry[t]==null)throw new Error(`Cannot set flag ${t} as it has not been registered.`);this.flags[t]=e,this.flagRegistry[t].setHook!=null&&this.flagRegistry[t].setHook(e)}evaluateFlag(t){if(this.flagRegistry[t]==null)throw new Error(`Cannot evaluate flag '${t}': no evaluation function found.`);return this.flagRegistry[t].evaluationFn()}setFlags(t){this.flags=Object.assign({},t)}reset(){this.flags={},this.urlFlags={},this.populateURLFlags()}populateURLFlags(){if(typeof this.global>"u"||typeof this.global.location>"u"||typeof this.global.location.search>"u")return;let t=this.getQueryParams(this.global.location.search);g8 in t&&t[g8].split(",").forEach(n=>{let[r,o]=n.split(":");this.urlFlags[r]=yde(r,o)})}};Vx=null});function pk(){if(mk==null){let i;if(typeof window<"u")i=window;else if(typeof global<"u")i=global;else if(typeof process<"u")i=process;else if(typeof self<"u")i=self;else throw new Error("Could not find a global object");mk=i}return mk}function xde(){let i=pk();return i._tfGlobals==null&&(i._tfGlobals=new Map),i._tfGlobals}function o_(i,t){let e=xde();if(e.has(i))return e.get(i);{let n=t();return e.set(i,n),e.get(i)}}var mk,Ux=D(()=>{"use strict";});var fk,gk,_k,s_,bk,vk,yk,xk,wk,Mk,Ck,Sk,Ek,Tk,Ik,wde,Dk,Mde,kk,Ak,Pk,Ok,Cde,Nk,a_,Rk,Fk,Lk,Bk,Vk,Uk,zk,Hk,jk,Sde,$k,Gk,Wk,qk,Xk,Yk,Zk,Kk,Qk,Jk,eA,tA,iA,Ede,Tde,zx,nA,rA,oA,Ide,sA,aA,cA,lA,dA,uA,hA,mA,pA,fA,gA,_A,bA,vA,yA,c_,xA,wA,MA,CA,SA,EA,TA,IA,DA,kA,AA,PA,OA,NA,Dde,kde,Ade,RA,Pde,Ode,FA,LA,BA,Nde,VA,Rde,UA,zA,HA,jA,$A,GA,WA,qA,XA,YA,ZA,KA,QA,JA,eP,tP,iP,Fde,nP,rP,oP,sP,aP,cP,lP,dP,uP,hP,mP,pP,Lde,fP,Bde,gP,_P,bP,vP,yP,xP,wP,MP,CP,SP,EP,TP,IP,DP,kP,AP,PP,OP,NP,RP,FP,LP,BP,VP,UP,zP,Vde,HP,jP,$P,GP,WP,qP,XP,YP,l_,ZP,KP,d_,QP,JP,eO,Ude,tO,iO,Hx,nO,jx,$x,Gx,re=D(()=>{"use strict";fk="Abs",gk="Acos",_k="Acosh",s_="Add",bk="AddN",vk="All",yk="Any",xk="ArgMax",wk="ArgMin",Mk="Asin",Ck="Asinh",Sk="Atan",Ek="Atanh",Tk="Atan2",Ik="AvgPool",wde="AvgPoolGrad",Dk="AvgPool3D",Mde="AvgPool3DGrad",kk="BatchMatMul",Ak="BatchToSpaceND",Pk="Bincount",Ok="BitwiseAnd",Cde="BroadcastTo",Nk="BroadcastArgs",a_="Cast",Rk="Ceil",Fk="ClipByValue",Lk="Complex",Bk="ComplexAbs",Vk="Concat",Uk="Conv2D",zk="Conv2DBackpropFilter",Hk="Conv2DBackpropInput",jk="Conv3D",Sde="Conv3DBackpropFilterV2",$k="Conv3DBackpropInputV2",Gk="Cos",Wk="Cosh",qk="Cumprod",Xk="Cumsum",Yk="CropAndResize",Zk="DenseBincount",Kk="DepthToSpace",Qk="DepthwiseConv2dNative",Jk="DepthwiseConv2dNativeBackpropFilter",eA="DepthwiseConv2dNativeBackpropInput",tA="Diag",iA="Dilation2D",Ede="Dilation2DBackpropInput",Tde="Dilation2DBackpropFilter",zx="Draw",nA="RealDiv",rA="Einsum",oA="Elu",Ide="EluGrad",sA="Erf",aA="Equal",cA="Exp",lA="ExpandDims",dA="Expm1",uA="FFT",hA="Fill",mA="FlipLeftRight",pA="Floor",fA="FloorDiv",gA="FusedBatchNorm",_A="GatherV2",bA="GatherNd",vA="Greater",yA="GreaterEqual",c_="Identity",xA="IFFT",wA="Imag",MA="IsFinite",CA="IsInf",SA="IsNan",EA="LeakyRelu",TA="Less",IA="LessEqual",DA="LinSpace",kA="Log",AA="Log1p",PA="LogicalAnd",OA="LogicalNot",NA="LogicalOr",Dde="LogicalXor",kde="LogSoftmax",Ade="LowerBound",RA="LRN",Pde="LRNGrad",Ode="MatrixBandPart",FA="Max",LA="Maximum",BA="MaxPool",Nde="MaxPoolGrad",VA="MaxPool3D",Rde="MaxPool3DGrad",UA="MaxPoolWithArgmax",zA="Mean",HA="Min",jA="Minimum",$A="MirrorPad",GA="Mod",WA="Multinomial",qA="Multiply",XA="Neg",YA="NotEqual",ZA="NonMaxSuppressionV3",KA="NonMaxSuppressionV4",QA="NonMaxSuppressionV5",JA="OnesLike",eP="OneHot",tP="Pack",iP="PadV2",Fde="Pool",nP="Pow",rP="Prelu",oP="Prod",sP="RaggedGather",aP="RaggedRange",cP="RaggedTensorToTensor",lP="Range",dP="Real",uP="Reciprocal",hP="Relu",mP="Reshape",pP="ResizeNearestNeighbor",Lde="ResizeNearestNeighborGrad",fP="ResizeBilinear",Bde="ResizeBilinearGrad",gP="Relu6",_P="Reverse",bP="Round",vP="Rsqrt",yP="ScatterNd",xP="TensorScatterUpdate",wP="SearchSorted",MP="Select",CP="Selu",SP="Slice",EP="Sin",TP="Sinh",IP="Sign",DP="Sigmoid",kP="Softplus",AP="Sqrt",PP="Sum",OP="SpaceToBatchND",NP="SplitV",RP="Softmax",FP="SparseFillEmptyRows",LP="SparseReshape",BP="SparseSegmentMean",VP="SparseSegmentSum",UP="SparseToDense",zP="SquaredDifference",Vde="Square",HP="StaticRegexReplace",jP="StridedSlice",$P="StringNGrams",GP="StringSplit",WP="StringToHashBucketFast",qP="Sub",XP="Tan",YP="Tanh",l_="Tile",ZP="TopK",KP="Transform",d_="Transpose",QP="Unique",JP="Unpack",eO="UnsortedSegmentSum",Ude="UpperBound",tO="ZerosLike",iO="Step",Hx="FromPixels",nO="RotateWithOffset",jx="_FusedMatMul",$x="FusedConv2D",Gx="FusedDepthwiseConv2D"});function ic(...i){st().getBool("IS_TEST")||st().getBool("PROD")||console.warn(...i)}function zde(...i){st().getBool("IS_TEST")||st().getBool("PROD")||console.log(...i)}var Wx=D(()=>{"use strict";xr();});function Wu(i,t){let e=rO(i,t);return mp.get(e)}function qx(i){return u_.get(i)}function h_(i){let t=mp.entries(),e=[];for(;;){let{done:n,value:r}=t.next();if(n)break;let[o,s]=r,[a]=o.split("_");a===i&&e.push(s)}return e}function v8(i){let{kernelName:t,backendName:e}=i,n=rO(t,e);mp.has(n)&&ic(`The kernel '${t}' for backend '${e}' is already registered`),mp.set(n,i)}function Hde(i){let{kernelName:t}=i;u_.has(t)&&st().getBool("DEBUG")&&ic(`Overriding the gradient for '${t}'`),u_.set(t,i)}function jde(i,t){let e=rO(i,t);if(!mp.has(e))throw new Error(`The kernel '${i}' for backend '${t}' is not registered`);mp.delete(e)}function $de(i){if(!u_.has(i))throw new Error(`The gradient '${i}' for backend is not registered`);u_.delete(i)}function Gde(i,t){h_(i).forEach(n=>{let r=Object.assign({},n,{backendName:t});v8(r)})}function rO(i,t){return`${t}_${i}`}var mp,u_,Xx=D(()=>{"use strict";xr();Ux();Wx();mp=o_("kernelRegistry",()=>new Map),u_=o_("gradRegistry",()=>new Map)});function Yx(i){return i instanceof Float32Array||i instanceof Int32Array||i instanceof Uint8Array||i instanceof Uint8ClampedArray}var oO=D(()=>{"use strict";});var k8=os((NBe,D8)=>{"use strict";D8.exports=En;var Vs=null;try{Vs=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function En(i,t,e){this.low=i|0,this.high=t|0,this.unsigned=!!e}En.prototype.__isLong__;Object.defineProperty(En.prototype,"__isLong__",{value:!0});function Wo(i){return(i&&i.__isLong__)===!0}En.isLong=Wo;var y8={},x8={};function Xu(i,t){var e,n,r;return t?(i>>>=0,(r=0<=i&&i<256)&&(n=x8[i],n)?n:(e=Tn(i,(i|0)<0?-1:0,!0),r&&(x8[i]=e),e)):(i|=0,(r=-128<=i&&i<128)&&(n=y8[i],n)?n:(e=Tn(i,i<0?-1:0,!1),r&&(y8[i]=e),e))}En.fromInt=Xu;function Us(i,t){if(isNaN(i))return t?qu:zs;if(t){if(i<0)return qu;if(i>=S8)return I8}else{if(i<=-M8)return Go;if(i+1>=M8)return T8}return i<0?Us(-i,t).neg():Tn(i%fp|0,i/fp|0,t)}En.fromNumber=Us;function Tn(i,t,e){return new En(i,t,e)}En.fromBits=Tn;var Zx=Math.pow;function aO(i,t,e){if(i.length===0)throw Error("empty string");if(i==="NaN"||i==="Infinity"||i==="+Infinity"||i==="-Infinity")return zs;if(typeof t=="number"?(e=t,t=!1):t=!!t,e=e||10,e<2||36<e)throw RangeError("radix");var n;if((n=i.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return aO(i.substring(1),t,e).neg();for(var r=Us(Zx(e,8)),o=zs,s=0;s<i.length;s+=8){var a=Math.min(8,i.length-s),c=parseInt(i.substring(s,s+a),e);if(a<8){var l=Us(Zx(e,a));o=o.mul(l).add(Us(c))}else o=o.mul(r),o=o.add(Us(c))}return o.unsigned=t,o}En.fromString=aO;function ua(i,t){return typeof i=="number"?Us(i,t):typeof i=="string"?aO(i,t):Tn(i.low,i.high,typeof t=="boolean"?t:i.unsigned)}En.fromValue=ua;var w8=65536,Wde=1<<24,fp=w8*w8,S8=fp*fp,M8=S8/2,C8=Xu(Wde),zs=Xu(0);En.ZERO=zs;var qu=Xu(0,!0);En.UZERO=qu;var pp=Xu(1);En.ONE=pp;var E8=Xu(1,!0);En.UONE=E8;var sO=Xu(-1);En.NEG_ONE=sO;var T8=Tn(-1,2147483647,!1);En.MAX_VALUE=T8;var I8=Tn(-1,-1,!0);En.MAX_UNSIGNED_VALUE=I8;var Go=Tn(0,-2147483648,!1);En.MIN_VALUE=Go;var Ge=En.prototype;Ge.toInt=function(){return this.unsigned?this.low>>>0:this.low};Ge.toNumber=function(){return this.unsigned?(this.high>>>0)*fp+(this.low>>>0):this.high*fp+(this.low>>>0)};Ge.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(Go)){var e=Us(t),n=this.div(e),r=n.mul(e).sub(this);return n.toString(t)+r.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=Us(Zx(t,6),this.unsigned),s=this,a="";;){var c=s.div(o),l=s.sub(c.mul(o)).toInt()>>>0,d=l.toString(t);if(s=c,s.isZero())return d+a;for(;d.length<6;)d="0"+d;a=""+d+a}};Ge.getHighBits=function(){return this.high};Ge.getHighBitsUnsigned=function(){return this.high>>>0};Ge.getLowBits=function(){return this.low};Ge.getLowBitsUnsigned=function(){return this.low>>>0};Ge.getNumBitsAbs=function(){if(this.isNegative())return this.eq(Go)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1};Ge.isZero=function(){return this.high===0&&this.low===0};Ge.eqz=Ge.isZero;Ge.isNegative=function(){return!this.unsigned&&this.high<0};Ge.isPositive=function(){return this.unsigned||this.high>=0};Ge.isOdd=function(){return(this.low&1)===1};Ge.isEven=function(){return(this.low&1)===0};Ge.equals=function(t){return Wo(t)||(t=ua(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low};Ge.eq=Ge.equals;Ge.notEquals=function(t){return!this.eq(t)};Ge.neq=Ge.notEquals;Ge.ne=Ge.notEquals;Ge.lessThan=function(t){return this.comp(t)<0};Ge.lt=Ge.lessThan;Ge.lessThanOrEqual=function(t){return this.comp(t)<=0};Ge.lte=Ge.lessThanOrEqual;Ge.le=Ge.lessThanOrEqual;Ge.greaterThan=function(t){return this.comp(t)>0};Ge.gt=Ge.greaterThan;Ge.greaterThanOrEqual=function(t){return this.comp(t)>=0};Ge.gte=Ge.greaterThanOrEqual;Ge.ge=Ge.greaterThanOrEqual;Ge.compare=function(t){if(Wo(t)||(t=ua(t)),this.eq(t))return 0;var e=this.isNegative(),n=t.isNegative();return e&&!n?-1:!e&&n?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1};Ge.comp=Ge.compare;Ge.negate=function(){return!this.unsigned&&this.eq(Go)?Go:this.not().add(pp)};Ge.neg=Ge.negate;Ge.add=function(t){Wo(t)||(t=ua(t));var e=this.high>>>16,n=this.high&65535,r=this.low>>>16,o=this.low&65535,s=t.high>>>16,a=t.high&65535,c=t.low>>>16,l=t.low&65535,d=0,u=0,h=0,m=0;return m+=o+l,h+=m>>>16,m&=65535,h+=r+c,u+=h>>>16,h&=65535,u+=n+a,d+=u>>>16,u&=65535,d+=e+s,d&=65535,Tn(h<<16|m,d<<16|u,this.unsigned)};Ge.subtract=function(t){return Wo(t)||(t=ua(t)),this.add(t.neg())};Ge.sub=Ge.subtract;Ge.multiply=function(t){if(this.isZero())return zs;if(Wo(t)||(t=ua(t)),Vs){var e=Vs.mul(this.low,this.high,t.low,t.high);return Tn(e,Vs.get_high(),this.unsigned)}if(t.isZero())return zs;if(this.eq(Go))return t.isOdd()?Go:zs;if(t.eq(Go))return this.isOdd()?Go:zs;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(C8)&&t.lt(C8))return Us(this.toNumber()*t.toNumber(),this.unsigned);var n=this.high>>>16,r=this.high&65535,o=this.low>>>16,s=this.low&65535,a=t.high>>>16,c=t.high&65535,l=t.low>>>16,d=t.low&65535,u=0,h=0,m=0,p=0;return p+=s*d,m+=p>>>16,p&=65535,m+=o*d,h+=m>>>16,m&=65535,m+=s*l,h+=m>>>16,m&=65535,h+=r*d,u+=h>>>16,h&=65535,h+=o*l,u+=h>>>16,h&=65535,h+=s*c,u+=h>>>16,h&=65535,u+=n*d+r*l+o*c+s*a,u&=65535,Tn(m<<16|p,u<<16|h,this.unsigned)};Ge.mul=Ge.multiply;Ge.divide=function(t){if(Wo(t)||(t=ua(t)),t.isZero())throw Error("division by zero");if(Vs){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?Vs.div_u:Vs.div_s)(this.low,this.high,t.low,t.high);return Tn(e,Vs.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?qu:zs;var n,r,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return qu;if(t.gt(this.shru(1)))return E8;o=qu}else{if(this.eq(Go)){if(t.eq(pp)||t.eq(sO))return Go;if(t.eq(Go))return pp;var s=this.shr(1);return n=s.div(t).shl(1),n.eq(zs)?t.isNegative()?pp:sO:(r=this.sub(t.mul(n)),o=n.add(r.div(t)),o)}else if(t.eq(Go))return this.unsigned?qu:zs;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=zs}for(r=this;r.gte(t);){n=Math.max(1,Math.floor(r.toNumber()/t.toNumber()));for(var a=Math.ceil(Math.log(n)/Math.LN2),c=a<=48?1:Zx(2,a-48),l=Us(n),d=l.mul(t);d.isNegative()||d.gt(r);)n-=c,l=Us(n,this.unsigned),d=l.mul(t);l.isZero()&&(l=pp),o=o.add(l),r=r.sub(d)}return o};Ge.div=Ge.divide;Ge.modulo=function(t){if(Wo(t)||(t=ua(t)),Vs){var e=(this.unsigned?Vs.rem_u:Vs.rem_s)(this.low,this.high,t.low,t.high);return Tn(e,Vs.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))};Ge.mod=Ge.modulo;Ge.rem=Ge.modulo;Ge.not=function(){return Tn(~this.low,~this.high,this.unsigned)};Ge.and=function(t){return Wo(t)||(t=ua(t)),Tn(this.low&t.low,this.high&t.high,this.unsigned)};Ge.or=function(t){return Wo(t)||(t=ua(t)),Tn(this.low|t.low,this.high|t.high,this.unsigned)};Ge.xor=function(t){return Wo(t)||(t=ua(t)),Tn(this.low^t.low,this.high^t.high,this.unsigned)};Ge.shiftLeft=function(t){return Wo(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Tn(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):Tn(0,this.low<<t-32,this.unsigned)};Ge.shl=Ge.shiftLeft;Ge.shiftRight=function(t){return Wo(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?Tn(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):Tn(this.high>>t-32,this.high>=0?0:-1,this.unsigned)};Ge.shr=Ge.shiftRight;Ge.shiftRightUnsigned=function(t){if(Wo(t)&&(t=t.toInt()),t&=63,t===0)return this;var e=this.high;if(t<32){var n=this.low;return Tn(n>>>t|e<<32-t,e>>>t,this.unsigned)}else return t===32?Tn(e,0,this.unsigned):Tn(e>>>t-32,0,this.unsigned)};Ge.shru=Ge.shiftRightUnsigned;Ge.shr_u=Ge.shiftRightUnsigned;Ge.toSigned=function(){return this.unsigned?Tn(this.low,this.high,!1):this};Ge.toUnsigned=function(){return this.unsigned?this:Tn(this.low,this.high,!0)};Ge.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()};Ge.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]};Ge.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]};En.fromBytes=function(t,e,n){return n?En.fromBytesLE(t,e):En.fromBytesBE(t,e)};En.fromBytesLE=function(t,e){return new En(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)};En.fromBytesBE=function(t,e){return new En(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)}});function m_(i){return Zu.fromString(i,!0,16)}function cO(i){return i.xor(i.shru(47))}function O8(i,t,e){let n=i.slice(t,t+e);return Zu.fromBytes(Array.from(n),!0,!0)}function gn(i,t){return O8(i,t,8)}function A8(i,t){return O8(i,t,4)}function wr(i,t){return t===0?i:i.shru(t).or(i.shl(64-t))}function fd(i,t,e=m_("9ddfea08eb382d69")){let n=i.xor(t).mul(e);n=n.xor(n.shru(47));let r=t.xor(n).mul(e);return r=r.xor(r.shru(47)),r=r.mul(e),r}function qde(i,t,e,n,r,o){r=r.add(i),o=wr(o.add(r).add(n),21);let s=r;return r=r.add(t),r=r.add(e),o=o.add(wr(r,44)),[r.add(n),o.add(s)]}function Kx(i,t,e,n){return qde(gn(i,t),gn(i,t+8),gn(i,t+16),gn(i,t+24),e,n)}function Xde(i,t=i.length){if(t>=8){let e=no.add(t*2),n=gn(i,0).add(no),r=gn(i,t-8),o=wr(r,37).mul(e).add(n),s=wr(n,25).add(r).mul(e);return fd(o,s,e)}if(t>=4){let e=no.add(t*2),n=A8(i,0);return fd(n.shl(3).add(t),A8(i,t-4),e)}if(t>0){let e=i[0],n=i[t>>1],r=i[t-1],o=e+(n<<8),s=t+(r<<2);return cO(no.mul(o).xor(P8.mul(s))).mul(no)}return no}function Yde(i,t=i.length){let e=no.add(t*2),n=gn(i,0).mul(Yu),r=gn(i,8),o=gn(i,t-8).mul(e),s=gn(i,t-16).mul(no);return fd(wr(n.add(r),43).add(wr(o,30)).add(s),n.add(wr(r.add(no),18)).add(o),e)}function Zde(i,t=i.length){let e=no.add(t*2),n=gn(i,0).mul(no),r=gn(i,8),o=gn(i,t-8).mul(e),s=gn(i,t-16).mul(no),a=wr(n.add(r),43).add(wr(o,30)).add(s),c=fd(a,n.add(wr(r.add(no),18)).add(o),e),l=gn(i,16).mul(e),d=gn(i,24),u=a.add(gn(i,t-32)).mul(e),h=c.add(gn(i,t-24)).mul(e);return fd(wr(l.add(d),43).add(wr(u,30)).add(h),l.add(wr(d.add(n),18)).add(u),e)}function Kde(i,t=i.length){let e=Zu.fromNumber(81,!0);if(t<=32)return t<=16?Xde(i,t):Yde(i,t);if(t<=64)return Zde(i,t);let n=e,r=e.mul(Yu).add(113),o=cO(r.mul(no).add(113)).mul(no),s=[Zu.UZERO,Zu.UZERO],a=[Zu.UZERO,Zu.UZERO];n=n.mul(no).add(gn(i,0));let c=0,l=(t-1>>6)*64,d=l+(t-1&63)-63;do n=wr(n.add(r).add(s[0]).add(gn(i,c+8)),37).mul(Yu),r=wr(r.add(s[1]).add(gn(i,c+48)),42).mul(Yu),n=n.xor(a[1]),r=r.add(s[0]).add(gn(i,c+40)),o=wr(o.add(a[0]),33).mul(Yu),s=Kx(i,c,s[1].mul(Yu),n.add(a[0])),a=Kx(i,c+32,o.add(a[1]),r.add(gn(i,c+16))),[o,n]=[n,o],c+=64;while(c!==l);let u=Yu.add(o.and(255).shl(1));return c=d,a[0]=a[0].add(t-1&63),s[0]=s[0].add(a[0]),a[0]=a[0].add(s[0]),n=wr(n.add(r).add(s[0]).add(gn(i,c+8)),37).mul(u),r=wr(r.add(s[1]).add(gn(i,c+48)),42).mul(u),n=n.xor(a[1].mul(9)),r=r.add(s[0].mul(9).add(gn(i,c+40))),o=wr(o.add(a[0]),33).mul(u),s=Kx(i,c,s[1].mul(u),n.add(a[0])),a=Kx(i,c+32,o.add(a[1]),r.add(gn(i,c+16))),[o,n]=[n,o],fd(fd(s[0],a[0],u).add(cO(r).mul(P8)).add(o),fd(s[1],a[1],u).add(n),u)}var lO,Zu,P8,Yu,no,N8=D(()=>{"use strict";lO=g1(k8());Zu=lO.default||lO;P8=m_("c3a5c85c97cb3127"),Yu=m_("b492b66fbe98f273"),no=m_("9ae16a3b2f90404f")});var ke={};Ei(ke,{arraysEqual:()=>io,arraysEqualWithNull:()=>ak,assert:()=>A,assertNonNegativeIntegerDimensions:()=>fn,assertNonNull:()=>ms,assertShapesMatch:()=>ln,bytesFromStringArray:()=>hk,bytesPerElement:()=>lp,checkConversionForErrors:()=>dk,clamp:()=>cp,computeStrides:()=>tc,convertBackendValuesAndArrayBuffer:()=>mde,createScalarValue:()=>Qde,createShuffledIndices:()=>lde,decodeString:()=>_p,distSquared:()=>ode,encodeString:()=>gd,fetch:()=>eue,fingerPrint64:()=>Kde,flatten:()=>ha,getArrayFromDType:()=>Bx,getTypedArrayFromDType:()=>lk,hasEncodingLoss:()=>hde,hexToLong:()=>m_,indexToLoc:()=>gde,inferDtype:()=>pd,inferFromImplicitShape:()=>ude,isBoolean:()=>m8,isFunction:()=>ec,isInt:()=>el,isNumber:()=>p8,isPromise:()=>Gu,isScalarShape:()=>sde,isString:()=>da,isTypedArray:()=>Rn,isValidDtype:()=>uk,locToIndex:()=>fde,makeOnesTypedArray:()=>r_,makeZerosNestedTypedArray:()=>pde,makeZerosTypedArray:()=>up,nearestDivisor:()=>dp,nearestLargerEven:()=>ide,now:()=>Ku,parseAxisParam:()=>md,randUniform:()=>rde,repeatedTry:()=>dde,rightPad:()=>$u,shuffle:()=>h8,shuffleCombo:()=>tde,sizeFromShape:()=>oi,sizeToSquarishShape:()=>cde,squeezeShape:()=>ck,sum:()=>nde,swap:()=>Lx,tanh:()=>ade,toNestedArray:()=>ju,toTypedArray:()=>gp});function Qde(i,t){return t==="string"?gd(i):gp([i],t)}function Jde(i,t){return i instanceof Float32Array&&t==="float32"||i instanceof Int32Array&&t==="int32"||i instanceof Uint8Array&&t==="bool"}function gp(i,t){if(t==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(i)&&(i=ha(i)),st().getBool("DEBUG")&&dk(i,t),Jde(i,t))return i;if(t==null||t==="float32"||t==="complex64")return new Float32Array(i);if(t==="int32")return new Int32Array(i);if(t==="bool"){let e=new Uint8Array(i.length);for(let n=0;n<e.length;++n)Math.round(i[n])!==0&&(e[n]=1);return e}else throw new Error(`Unknown data type ${t}`)}function Ku(){return st().platform.now()}function eue(i,t){return st().platform.fetch(i,t)}function gd(i,t="utf-8"){return t=t||"utf-8",st().platform.encode(i,t)}function _p(i,t="utf-8"){return t=t||"utf-8",st().platform.decode(i,t)}function Rn(i){return st().platform.isTypedArray!=null?st().platform.isTypedArray(i):Yx(i)}function ha(i,t=[],e=!1){if(t==null&&(t=[]),typeof i=="boolean"||typeof i=="number"||typeof i=="string"||Gu(i)||i==null||Rn(i)&&e)t.push(i);else if(Array.isArray(i)||Rn(i))for(let n=0;n<i.length;++n)ha(i[n],t,e);else{let n=-1;for(let r of Object.keys(i))/^([1-9]+[0-9]*|0)$/.test(r)&&(n=Math.max(n,Number(r)));for(let r=0;r<=n;r++)ha(i[r],t,e)}return t}var fe=D(()=>{"use strict";xr();oO();ar();ar();N8();});function tue(i,t,e){if(t!=="float32")return!1;for(let n=0;n<i.length;n++){let r=i[n];if(isNaN(r)||!isFinite(r))return console.warn(`Found ${r} in the result of '${e}'`),!0}return!1}var Qx,dO,R8=D(()=>{"use strict";xr();fe();Qx=class{constructor(t,e){this.backendTimer=t,this.logger=e,e==null&&(this.logger=new dO)}profileKernel(t,e,n){let r,o=()=>{r=n()},s,a=Ku();if(this.backendTimer.timerAvailable())s=this.backendTimer.time(o);else{o();for(let l of r)l.dataSync();s=Promise.resolve({kernelMs:Ku()-a})}if(st().getBool("CHECK_COMPUTATION_FOR_ERRORS"))for(let l=0;l<r.length;l++){let d=r[l];d.data().then(u=>{tue(u,d.dtype,t)})}return{kernelName:t,outputs:r,inputs:e,timeMs:s.then(l=>l.kernelMs),extraInfo:s.then(l=>l.getExtraProfileInfo!=null?l.getExtraProfileInfo():"")}}logKernelProfile(t){let{kernelName:e,outputs:n,timeMs:r,inputs:o,extraInfo:s}=t;n.forEach(a=>{Promise.all([a.data(),r,s]).then(c=>{this.logger.logKernelProfile(e,a,c[0],c[1],o,c[2])})})}};dO=class{logKernelProfile(t,e,n,r,o,s){let a=typeof r=="number"?$u(`${r}ms`,9):r.error,c=$u(t,25),l=e.rank,d=e.size,u=$u(e.shape.toString(),14),h="";for(let m in o){let p=o[m];if(p!=null){let _=p.shape||e.shape,f=_.length;h+=`${m}: ${f}D ${f>0?_:""} `}}console.log(`%c${c}	%c${a}	%c${l}D ${u}	%c${d}	%c${h}	%c${s}`,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")}}});function F8(i,t,e){let n={},r={};for(let c=0;c<t.length;c++)n[t[c].id]=!0;for(let c=0;c<i.length;c++){let l=i[c],d=l.inputs;for(let u in d){let h=d[u],m=!1;for(let p=0;p<t.length;p++)if(n[h.id]){l.outputs.forEach(_=>n[_.id]=!0),m=!0,r[l.id]=!0;break}if(m)break}}let o={};o[e.id]=!0;let s={};for(let c=i.length-1;c>=0;c--){let l=i[c],d=l.inputs;for(let u=0;u<l.outputs.length;u++)if(o[l.outputs[u].id]){for(let h in d)o[d[h].id]=!0,s[l.id]=!0;break}}let a=[];for(let c=0;c<i.length;c++){let l=i[c];if(r[l.id]&&s[l.id]){let d={};for(let h in l.inputs){let m=l.inputs[h];n[m.id]&&(d[h]=m)}let u=Object.assign({},l);u.inputs=d,u.outputs=l.outputs,a.push(u)}}return a}function L8(i,t,e,n){for(let r=t.length-1;r>=0;r--){let o=t[r],s=[];if(o.outputs.forEach(c=>{let l=i[c.id];l!=null?s.push(l):s.push(null)}),o.gradient==null)throw new Error(`Cannot compute gradient: gradient function not found for ${o.kernelName}.`);let a=o.gradient(s);for(let c in o.inputs){if(!(c in a))throw new Error(`Cannot backprop through input ${c}. Available gradients found: ${Object.keys(a)}.`);let l=e(()=>a[c]());if(l.dtype!=="float32")throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input ${c} must have 'float32' dtype, but has '${l.dtype}'`);let d=o.inputs[c];if(!io(l.shape,d.shape))throw new Error(`Error in gradient for op ${o.kernelName}. The gradient of input '${c}' has shape '${l.shape}', which does not match the shape of the input '${d.shape}'`);if(i[d.id]==null)i[d.id]=l;else{let u=i[d.id];i[d.id]=n(u,l),u.dispose()}}}}var B8=D(()=>{"use strict";fe();});function U8(i,t,e,n){let r=tc(t),o=iue(i,t,e,r),s=t.length,a=Jx(i,t,e,r,o),c=["Tensor"];return n&&(c.push(`  dtype: ${e}`),c.push(`  rank: ${s}`),c.push(`  shape: [${t}]`),c.push("  values:")),c.push(a.map(l=>"    "+l).join(`
`)),c.join(`
`)}function iue(i,t,e,n){let r=oi(t),o=n[n.length-1],s=new Array(o).fill(0),a=t.length,c=e==="complex64"?g_(i):i;if(a>1)for(let l=0;l<r/o;l++){let d=l*o;for(let u=0;u<o;u++)s[u]=Math.max(s[u],f_(c[d+u],0,e).length)}return s}function f_(i,t,e){let n;return Array.isArray(i)?n=`${parseFloat(i[0].toFixed(uO))} + ${parseFloat(i[1].toFixed(uO))}j`:da(i)?n=`'${i}'`:e==="bool"?n=z8(i):n=parseFloat(i.toFixed(uO)).toString(),$u(n,t)}function z8(i){return i===0?"false":"true"}function Jx(i,t,e,n,r,o=!0){let s=e==="complex64"?2:1,a=t[0],c=t.length;if(c===0){if(e==="complex64"){let _=g_(i);return[f_(_[0],0,e)]}return e==="bool"?[z8(i[0])]:[i[0].toString()]}if(c===1){if(a>V8){let f=p_*s,g=Array.from(i.slice(0,f)),S=Array.from(i.slice((a-p_)*s,a*s));return e==="complex64"&&(g=g_(g),S=g_(S)),["["+g.map((C,E)=>f_(C,r[E],e)).join(", ")+", ..., "+S.map((C,E)=>f_(C,r[a-p_+E],e)).join(", ")+"]"]}return["["+(e==="complex64"?g_(i):Array.from(i)).map((f,g)=>f_(f,r[g],e)).join(", ")+"]"]}let l=t.slice(1),d=n.slice(1),u=n[0]*s,h=[];if(a>V8){for(let _=0;_<p_;_++){let f=_*u,g=f+u;h.push(...Jx(i.slice(f,g),l,e,d,r,!1))}h.push("...");for(let _=a-p_;_<a;_++){let f=_*u,g=f+u;h.push(...Jx(i.slice(f,g),l,e,d,r,_===a-1))}}else for(let _=0;_<a;_++){let f=_*u,g=f+u;h.push(...Jx(i.slice(f,g),l,e,d,r,_===a-1))}let m=c===2?",":"";h[0]="["+(a>0?h[0]+m:"");for(let _=1;_<h.length-1;_++)h[_]=" "+h[_]+m;let p=`,
`;for(let _=2;_<c;_++)p+=`
`;return h[h.length-1]=" "+h[h.length-1]+"]"+(o?"":p),h}function g_(i){let t=[];for(let e=0;e<i.length;e+=2)t.push([i[e],i[e+1]]);return t}var V8,p_,uO,H8=D(()=>{"use strict";fe();V8=20,p_=3,uO=7});function j8(i){ma=i}function $8(i){bp=i}function G8(i){nue=i}function hO(){return o_("Tensor",()=>Bi)}var tl,ma,bp,nue,Bi,nc,ps=D(()=>{"use strict";Ux();H8();fe();fe();tl=class{constructor(t,e,n){if(this.dtype=e,this.shape=t.slice(),this.size=oi(t),n!=null){let r=n.length;A(r===this.size,()=>`Length of values '${r}' does not match the size inferred by the shape '${this.size}'.`)}if(e==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||Bx(e,this.size),this.strides=tc(t)}set(t,...e){e.length===0&&(e=[0]),A(e.length===this.rank,()=>`The number of provided coordinates (${e.length}) must match the rank (${this.rank})`);let n=this.locToIndex(e);this.values[n]=t}get(...t){t.length===0&&(t=[0]);let e=0;for(let r of t){if(r<0||r>=this.shape[e]){let o=`Requested out of range element at ${t}.   Buffer shape=${this.shape}`;throw new Error(o)}e++}let n=t[t.length-1];for(let r=0;r<t.length-1;++r)n+=this.strides[r]*t[r];return this.values[n]}locToIndex(t){if(this.rank===0)return 0;if(this.rank===1)return t[0];let e=t[t.length-1];for(let n=0;n<t.length-1;++n)e+=this.strides[n]*t[n];return e}indexToLoc(t){if(this.rank===0)return[];if(this.rank===1)return[t];let e=new Array(this.shape.length);for(let n=0;n<e.length-1;++n)e[n]=Math.floor(t/this.strides[n]),t-=e[n]*this.strides[n];return e[e.length-1]=t,e}get rank(){return this.shape.length}toTensor(){return ma().makeTensor(this.values,this.shape,this.dtype)}},ma=null,bp=null,nue=null;Bi=class{constructor(t,e,n,r){this.kept=!1,this.isDisposedInternal=!1,this.shape=t.slice(),this.dtype=e||"float32",this.size=oi(t),this.strides=tc(t),this.dataId=n,this.id=r,this.rankType=this.rank<5?this.rank.toString():"higher"}get rank(){return this.shape.length}buffer(){return oe(this,null,function*(){let t=yield this.data();return bp.buffer(this.shape,this.dtype,t)})}bufferSync(){return bp.buffer(this.shape,this.dtype,this.dataSync())}array(){return oe(this,null,function*(){let t=yield this.data();return ju(this.shape,t,this.dtype==="complex64")})}arraySync(){return ju(this.shape,this.dataSync(),this.dtype==="complex64")}data(){return oe(this,null,function*(){this.throwIfDisposed();let t=ma().read(this.dataId);if(this.dtype==="string"){let e=yield t;try{return e.map(n=>_p(n))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}}return t})}dataToGPU(t){return this.throwIfDisposed(),ma().readToGPU(this.dataId,t)}dataSync(){this.throwIfDisposed();let t=ma().readSync(this.dataId);if(this.dtype==="string")try{return t.map(e=>_p(e))}catch{throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return t}bytes(){return oe(this,null,function*(){this.throwIfDisposed();let t=yield ma().read(this.dataId);return this.dtype==="string"?t:new Uint8Array(t.buffer)})}dispose(){this.isDisposed||(this.kerasMask&&this.kerasMask.dispose(),ma().disposeTensor(this),this.isDisposedInternal=!0)}get isDisposed(){return this.isDisposedInternal}throwIfDisposed(){if(this.isDisposed)throw new Error("Tensor is disposed.")}print(t=!1){return bp.print(this,t)}clone(){return this.throwIfDisposed(),bp.clone(this)}toString(t=!1){let e=this.dataSync();return U8(e,this.shape,this.dtype,t)}cast(t){return this.throwIfDisposed(),bp.cast(this,t)}variable(t=!0,e,n){return this.throwIfDisposed(),ma().makeVariable(this,t,e,n)}};Object.defineProperty(Bi,Symbol.hasInstance,{value:i=>!!i&&i.data!=null&&i.dataSync!=null&&i.throwIfDisposed!=null});hO();nc=class extends Bi{constructor(t,e,n,r){super(t.shape,t.dtype,t.dataId,r),this.trainable=e,this.name=n}assign(t){if(t.dtype!==this.dtype)throw new Error(`dtype of the new value (${t.dtype}) and previous value (${this.dtype}) must match`);if(!io(t.shape,this.shape))throw new Error(`shape of the new value (${t.shape}) and previous value (${this.shape}) must match`);ma().disposeTensor(this),this.dataId=t.dataId,ma().incRef(this,null)}dispose(){ma().disposeVariable(this),this.isDisposedInternal=!0}};Object.defineProperty(nc,Symbol.hasInstance,{value:i=>i instanceof Bi&&i.assign!=null&&i.assign instanceof Function})});function Qu(i,t){if(i==="string"||t==="string"){if(i==="string"&&t==="string")return"string";throw new Error(`Can not upcast ${i} with ${t}`)}return rue[i][t]}function Z8(i){return Qu(i,"int32")}function ew(i){return i!=null&&typeof i=="object"&&"texture"in i&&i.texture instanceof WebGLTexture}function tw(i){return typeof GPUBuffer<"u"&&i!=null&&typeof i=="object"&&"buffer"in i&&i.buffer instanceof GPUBuffer}var mO,W8,q8,X8,Y8,rue,vp=D(()=>{"use strict";mO=function(i){return i.R0="R0",i.R1="R1",i.R2="R2",i.R3="R3",i.R4="R4",i.R5="R5",i.R6="R6",i}(mO||{}),W8=function(i){return i.float32="float32",i.int32="int32",i.bool="int32",i.complex64="complex64",i}(W8||{}),q8=function(i){return i.float32="float32",i.int32="int32",i.bool="bool",i.complex64="complex64",i}(q8||{}),X8=function(i){return i.float32="float32",i.int32="float32",i.bool="float32",i.complex64="complex64",i}(X8||{}),Y8=function(i){return i.float32="complex64",i.int32="complex64",i.bool="complex64",i.complex64="complex64",i}(Y8||{}),rue={float32:X8,int32:W8,bool:q8,complex64:Y8}});var fO={};Ei(fO,{assertTypesMatch:()=>pO,getTensorsInContainer:()=>__,isTensorInList:()=>oue,makeTypesMatch:()=>Kt});function Kt(i,t){if(i.dtype===t.dtype)return[i,t];let e=Qu(i.dtype,t.dtype);return[i.cast(e),t.cast(e)]}function pO(i,t){A(i.dtype===t.dtype,()=>`The dtypes of the first(${i.dtype}) and second(${t.dtype}) input must match`)}function oue(i,t){return t.some(e=>e.id===i.id)}function __(i){let t=[];return K8(i,t,new Set),t}function K8(i,t,e){if(i==null)return;if(i instanceof Bi){t.push(i);return}if(!sue(i))return;let n=i;for(let r in n){let o=n[r];e.has(o)||(e.add(o),K8(o,t,e))}}function sue(i){return Array.isArray(i)||typeof i=="object"}var _n=D(()=>{"use strict";ps();vp();fe();});function gO(i){return i.kernelName!=null}function cue(i){let t=r_(oi(i),"float32");return I.makeTensor(t,i,"float32")}function _O(){let i=pk();if(i._tfengine==null){let t=new hp(i);i._tfengine=new aue(t)}return _8(i._tfengine.ENV),j8(()=>i._tfengine),i._tfengine}function lue(i,t){let e={a:i,b:t};return I.runKernel(s_,e)}var iw,aue,I,Z=D(()=>{"use strict";sk();xr();Ux();re();Xx();Wx();R8();B8();ps();_n();fe();fe();iw=class{constructor(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.numDataMovesStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null,get kernelNames(){return Array.from(new Set(this.kernels.map(t=>t.name)))}}}dispose(){for(let t in this.registeredVariables)this.registeredVariables[t].dispose()}},aue=(()=>{class i{constructor(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new iw}ready(){return oe(this,null,function*(){if(this.pendingBackendInit!=null)return this.pendingBackendInit.then(()=>{});if(this.backendInstance!=null)return;let e=this.getSortedBackends();for(let n=0;n<e.length;n++){let r=e[n];if(yield this.initializeBackend(r).success){yield this.setBackend(r);return}}throw new Error("Could not initialize any backends, all backend initializations failed.")})}get backend(){if(this.pendingBackendInit!=null)throw new Error(`Backend '${this.backendName}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);if(this.backendInstance==null){let{name:e,asyncInit:n}=this.initializeBackendsAndReturnBest();if(n)throw new Error(`The highest priority backend '${e}' has not yet been initialized. Make sure to await tf.ready() or await tf.setBackend() before calling other methods`);this.setBackend(e)}return this.backendInstance}backendNames(){return Object.keys(this.registryFactory)}findBackend(e){if(!(e in this.registry))if(e in this.registryFactory){let{asyncInit:n}=this.initializeBackend(e);if(n)return null}else return null;return this.registry[e]}findBackendFactory(e){return e in this.registryFactory?this.registryFactory[e].factory:null}registerBackend(e,n,r=1){return e in this.registryFactory?(ic(`${e} backend was already registered. Reusing existing backend factory.`),!1):(this.registryFactory[e]={factory:n,priority:r},!0)}setBackend(e){return oe(this,null,function*(){if(this.registryFactory[e]==null)throw new Error(`Backend name '${e}' not found in registry`);if(this.backendName=e,this.registry[e]==null){this.backendInstance=null;let{success:n,asyncInit:r}=this.initializeBackend(e);if(!(r?yield n:n))return!1}return this.backendInstance=this.registry[e],this.setupRegisteredKernels(),this.profiler=new Qx(this.backendInstance),!0})}setupRegisteredKernels(){h_(this.backendName).forEach(n=>{n.setupFunc!=null&&n.setupFunc(this.backendInstance)})}disposeRegisteredKernels(e){h_(e).forEach(r=>{r.disposeFunc!=null&&r.disposeFunc(this.registry[e])})}initializeBackend(e){let n=this.registryFactory[e];if(n==null)throw new Error(`Cannot initialize backend ${e}, no registration found.`);try{let r=n.factory();if(r&&!(r instanceof ap)&&typeof r.then=="function"){let o=++this.pendingBackendInitId,s=r.then(a=>o<this.pendingBackendInitId?!1:(this.registry[e]=a,this.pendingBackendInit=null,!0)).catch(a=>(o<this.pendingBackendInitId||(this.pendingBackendInit=null,ic(`Initialization of backend ${e} failed`),ic(a.stack||a.message)),!1));return this.pendingBackendInit=s,{success:s,asyncInit:!0}}else return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(r){return ic(`Initialization of backend ${e} failed`),ic(r.stack||r.message),{success:!1,asyncInit:!1}}}removeBackend(e){if(!(e in this.registryFactory))throw new Error(`${e} backend not found in registry`);this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)}getSortedBackends(){if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((e,n)=>this.registryFactory[n].priority-this.registryFactory[e].priority)}initializeBackendsAndReturnBest(){let e=this.getSortedBackends();for(let n=0;n<e.length;n++){let r=e[n],{success:o,asyncInit:s}=this.initializeBackend(r);if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")}moveData(e,n){let r=this.state.tensorInfo.get(n),o=r.backend,s=this.readSync(n),a=o.refCount(n);o.disposeData(n,!0),r.backend=e,e.move(n,s,r.shape,r.dtype,a),this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack[this.state.numDataMovesStack.length-1]++}tidy(e,n){let r=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");r=e}let o;return this.scopedRun(()=>this.startScope(r),()=>this.endScope(o),()=>(o=n(),o instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),o))}scopedRun(e,n,r){e();try{let o=r();return n(),o}catch(o){throw n(),o}}nextTensorId(){return i.nextTensorId++}nextVariableId(){return i.nextVariableId++}clone(e){let n=I.runKernel(c_,{x:e}),r={x:e},o=a=>({x:()=>{let c="float32",l={x:a},d={dtype:c};return I.runKernel(a_,l,d)}}),s=[];return this.addTapeNode(this.state.activeScope.name,r,[n],o,s,{}),n}runKernel(e,n,r){if(this.backendName==null&&this.backend,!(Wu(e,this.backendName)!=null))throw new Error(`Kernel '${e}' not registered for backend '${this.backendName}'`);return this.runKernelFunc({kernelName:e,inputs:n,attrs:r})}shouldCheckForMemLeaks(){return this.ENV.getBool("IS_TEST")}checkKernelForMemLeak(e,n,r){let o=this.backend.numDataIds(),s=0;r.forEach(l=>{s+=l.dtype==="complex64"?3:1});let a=this.state.numDataMovesStack[this.state.numDataMovesStack.length-1],c=o-n-s-a;if(c>0)throw new Error(`Backend '${this.backendName}' has an internal memory leak (${c} data ids) after running '${e}'`)}runKernelFunc(e){let n,r=[],o=this.isTapeOn(),s=this.state.numBytes,a=this.state.numTensors;this.shouldCheckForMemLeaks()&&this.state.numDataMovesStack.push(0);let c;this.backendName==null&&this.backend;let l,d=gO(e)?e.kernelName:this.state.activeScope!=null?this.state.activeScope.name:"";if(gO(e)){let{kernelName:_,inputs:f,attrs:g}=e;this.backendName==null&&this.backend;let S=Wu(_,this.backendName);A(S!=null,()=>`Cannot find registered kernel '${_}' for backend '${this.backendName}'`),c=()=>{let C=this.backend.numDataIds();l=S.kernelFunc({inputs:f,attrs:g,backend:this.backend});let E=Array.isArray(l)?l:[l];this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(_,C,E);let N=E.map(R=>R.rank!=null?R:this.makeTensorFromTensorInfo(R));if(o){let R=this.getTensorsForGradient(_,f,N);r=this.saveTensorsForBackwardMode(R)}return N}}else{let{forwardFunc:_}=e,f=g=>{o&&(r=g.map(S=>this.keep(this.clone(S))))};c=()=>{let g=this.backend.numDataIds();l=this.tidy(()=>_(this.backend,f));let S=Array.isArray(l)?l:[l];return this.shouldCheckForMemLeaks()&&this.checkKernelForMemLeak(d,g,S),S}}let{inputs:u,attrs:h}=e,m=gO(e)?null:e.backwardsFunc,p;return this.scopedRun(()=>this.state.kernelDepth++,()=>this.state.kernelDepth--,()=>{!this.ENV.getBool("DEBUG")&&!this.state.profiling?n=c():(p=this.profiler.profileKernel(d,u,()=>c()),this.ENV.getBool("DEBUG")&&this.profiler.logKernelProfile(p),n=p.outputs)}),o&&this.addTapeNode(d,u,n,m,r,h),this.state.profiling&&this.state.activeProfile.kernels.push({name:d,bytesAdded:this.state.numBytes-s,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-a,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(u).map(_=>u[_]!=null?u[_].shape:null),outputShapes:n.map(_=>_.shape),kernelTimeMs:p.timeMs,extraInfo:p.extraInfo}),Array.isArray(l)?n:n[0]}saveTensorsForBackwardMode(e){return e.map(r=>this.keep(this.clone(r)))}getTensorsForGradient(e,n,r){let o=qx(e);if(o!=null){let s=o.inputsToSave||[],a=o.outputsToSave||[],c;o.saveAllInputs?(A(Array.isArray(n),()=>"saveAllInputs is true, expected inputs to be an array."),c=Object.keys(n).map(d=>n[d])):c=s.map(d=>n[d]);let l=r.filter((d,u)=>a[u]);return c.concat(l)}return[]}makeTensor(e,n,r,o){if(e==null)throw new Error("Values passed to engine.makeTensor() are null");r=r||"float32",o=o||this.backend;let s=e;r==="string"&&da(e[0])&&(s=e.map(l=>gd(l)));let a=o.write(s,n,r),c=new Bi(n,r,a,this.nextTensorId());if(this.trackTensor(c,o),r==="string"){let l=this.state.tensorInfo.get(a),d=hk(s);this.state.numBytes+=d-l.bytes,l.bytes=d}return c}makeTensorFromDataId(e,n,r,o){r=r||"float32";let s={dataId:e,shape:n,dtype:r};return this.makeTensorFromTensorInfo(s,o)}makeTensorFromTensorInfo(e,n){let{dataId:r,shape:o,dtype:s}=e,a=new Bi(o,s,r,this.nextTensorId());return this.trackTensor(a,n),a}makeVariable(e,n=!0,r,o){r=r||this.nextVariableId().toString(),o!=null&&o!==e.dtype&&(e=e.cast(o));let s=new nc(e,n,r,this.nextTensorId());if(this.state.registeredVariables[s.name]!=null)throw new Error(`Variable with name ${s.name} was already registered`);return this.state.registeredVariables[s.name]=s,this.incRef(s,this.backend),s}trackTensor(e,n){this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++;let r=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(r=e.size*lp(e.dtype)),this.state.numBytes+=r,this.state.tensorInfo.has(e.dataId)||(this.state.numDataBuffers++,this.state.tensorInfo.set(e.dataId,{backend:n||this.backend,dtype:e.dtype,shape:e.shape,bytes:r})),e instanceof nc||this.track(e)}incRef(e,n){this.trackTensor(e,n),this.backend.incRef(e.dataId)}removeDataId(e,n){this.state.tensorInfo.has(e)&&this.state.tensorInfo.get(e).backend===n&&(this.state.tensorInfo.delete(e),this.state.numDataBuffers--)}disposeTensor(e){if(!this.state.tensorInfo.has(e.dataId))return;let n=this.state.tensorInfo.get(e.dataId);if(this.state.numTensors--,e.dtype==="string"&&(this.state.numStringTensors--,this.state.numBytes-=n.bytes),e.dtype!=="complex64"&&e.dtype!=="string"){let r=e.size*lp(e.dtype);this.state.numBytes-=r}n.backend.disposeData(e.dataId)&&this.removeDataId(e.dataId,n.backend)}disposeVariables(){for(let e in this.state.registeredVariables){let n=this.state.registeredVariables[e];this.disposeVariable(n)}}disposeVariable(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]}memory(){let e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e}profile(e){return oe(this,null,function*(){this.state.profiling=!0;let n=this.state.numBytes,r=this.state.numTensors;this.state.activeProfile.kernels=[],this.state.activeProfile.result=yield e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max(...this.state.activeProfile.kernels.map(o=>o.totalBytesSnapshot)),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r;for(let o of this.state.activeProfile.kernels)o.kernelTimeMs=yield o.kernelTimeMs,o.extraInfo=yield o.extraInfo;return this.state.activeProfile})}isTapeOn(){return this.state.gradientDepth>0&&this.state.kernelDepth===0}addTapeNode(e,n,r,o,s,a){let c={id:this.state.nextTapeNodeId++,kernelName:e,inputs:n,outputs:r,saved:s},l=qx(e);l!=null&&(o=l.gradFunc),o!=null&&(c.gradient=d=>(d=d.map((u,h)=>{if(u==null){let m=r[h],p=up(m.size,m.dtype);return this.makeTensor(p,m.shape,m.dtype)}return u}),o(d.length>1?d:d[0],s,a))),this.state.activeTape.push(c)}keep(e){return e.kept=!0,e}startTape(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++}endTape(){this.state.gradientDepth--}startScope(e){let n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n}endScope(e){let n=__(e),r=new Set(n.map(s=>s.id));for(let s=0;s<this.state.activeScope.track.length;s++){let a=this.state.activeScope.track[s];!a.kept&&!r.has(a.id)&&a.dispose()}let o=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach(s=>{!s.kept&&s.scopeId===o.id&&this.track(s)})}gradients(e,n,r,o=!1){if(A(n.length>0,()=>"gradients() received an empty list of xs."),r!=null&&r.dtype!=="float32")throw new Error(`dy must have 'float32' dtype, but has '${r.dtype}'`);let s=this.scopedRun(()=>this.startTape(),()=>this.endTape(),()=>this.tidy("forward",e));A(s instanceof Bi,()=>"The result y returned by f() must be a tensor.");let a=F8(this.state.activeTape,n,s);if(!o&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",()=>{let c={};c[s.id]=r??cue(s.shape),L8(c,a,d=>this.tidy(d),lue);let l=n.map(d=>c[d.id]);return this.state.gradientDepth===0&&(this.state.activeTape.forEach(d=>{for(let u of d.saved)u.dispose()}),this.state.activeTape=null),{value:s,grads:l}})}customGrad(e){return A(ec(e),()=>"The f passed in customGrad(f) must be a function."),(...n)=>{A(n.every(c=>c instanceof Bi),()=>"The args passed in customGrad(f)(x1, x2,...) must all be tensors");let r,o={};n.forEach((c,l)=>{o[l]=c});let s=(c,l)=>(r=e(...n,l),A(r.value instanceof Bi,()=>"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"),A(ec(r.gradFunc),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."),r.value),a=(c,l)=>{let d=r.gradFunc(c,l),u=Array.isArray(d)?d:[d];A(u.length===n.length,()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."),A(u.every(m=>m instanceof Bi),()=>"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors.");let h={};return u.forEach((m,p)=>{h[p]=()=>m}),h};return this.runKernelFunc({forwardFunc:s,backwardsFunc:a,inputs:o})}}readSync(e){return this.state.tensorInfo.get(e).backend.readSync(e)}read(e){return this.state.tensorInfo.get(e).backend.read(e)}readToGPU(e,n){return this.state.tensorInfo.get(e).backend.readToGPU(e,n)}time(e){return oe(this,null,function*(){let n=Ku(),r=yield this.backend.time(e);return r.wallMs=Ku()-n,r})}track(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e}get registeredVariables(){return this.state.registeredVariables}reset(){this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new iw;for(let e in this.registry)this.disposeRegisteredKernels(e),this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null}}return i.nextTensorId=0,i.nextVariableId=0,i})();I=_O()});var nw={};Ei(nw,{isBrowser:()=>vO,isMobile:()=>hue,mockIsMobile:()=>uue});function due(){return typeof navigator<"u"&&navigator!=null}function uue(i){bO=i}function hue(i){if(bO!==void 0)return bO;if(i||due()){if(i||(i=navigator),i.product==="ReactNative")return!0;let t=i.userAgent||i.vendor||(typeof window<"u"?window.opera:"");if(!t){let e=i;return e.userAgentData&&e.userAgentData.mobile}return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}return!1}function vO(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var bO,yO=D(()=>{"use strict";});var Do,yp=D(()=>{"use strict";Z();yO();xr();Do=st();Do.registerFlag("DEBUG",()=>!1,i=>{i&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")});Do.registerFlag("IS_BROWSER",()=>vO());Do.registerFlag("IS_NODE",()=>typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u");Do.registerFlag("IS_CHROME",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor));Do.registerFlag("IS_SAFARI",()=>typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Safari/.test(navigator.userAgent)&&/Apple/.test(navigator.vendor));Do.registerFlag("PROD",()=>!1);Do.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",()=>Do.getBool("DEBUG"));Do.registerFlag("DEPRECATION_WARNINGS_ENABLED",()=>!0);Do.registerFlag("IS_TEST",()=>!1);Do.registerFlag("CHECK_COMPUTATION_FOR_ERRORS",()=>Do.getBool("DEBUG"));Do.registerFlag("WRAP_TO_IMAGEBITMAP",()=>!1);Do.registerFlag("CANVAS2D_WILL_READ_FREQUENTLY_FOR_GPU",()=>!1);Do.registerFlag("USE_SETTIMEOUTCUSTOM",()=>!1)});function Pr(i,t){let e=i;if(Rn(i))return t==="string"?[]:[i.length];if(ew(i)){let r=i.channels||"RGBA";return[i.height,i.width*r.length]}else if(tw(i))return[i.buffer.size/(t==null?4:lp(t))];if(!Array.isArray(i))return[];let n=[];for(;Array.isArray(e)||Rn(e)&&t!=="string";)n.push(e.length),e=e[0];return Array.isArray(i)&&st().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&J8(i,n,[]),n}function J8(i,t,e){if(e=e||[],!Array.isArray(i)&&!Rn(i)){A(t.length===0,()=>`Element arr[${e.join("][")}] is a primitive, but should be an array/TypedArray of ${t[0]} elements`);return}A(t.length>0,()=>`Element arr[${e.join("][")}] should be a primitive, but is an array of ${i.length} elements`),A(i.length===t[0],()=>`Element arr[${e.join("][")}] should have ${t[0]} elements, but has ${i.length} elements`);let n=t.slice(1);for(let r=0;r<i.length;++r)J8(i[r],n,e.concat(r))}function Q8(i,t,e,n){if(i!=="string_or_numeric"){if(i==null)throw new Error("Expected dtype cannot be null.");if(i!=="numeric"&&i!==t||i==="numeric"&&t==="string")throw new Error(`Argument '${e}' passed to '${n}' must be ${i} tensor, but got ${t} tensor`)}}function x(i,t,e,n="numeric"){if(i instanceof hO())return Q8(n,i.dtype,t,e),i;let r=pd(i);if(r!=="string"&&["bool","int32","float32"].indexOf(n)>=0&&(r=n),Q8(n,r,t,e),i==null||!Rn(i)&&!Array.isArray(i)&&typeof i!="number"&&typeof i!="boolean"&&typeof i!="string"){let c=i==null?"null":i.constructor.name;throw new Error(`Argument '${t}' passed to '${e}' must be a Tensor or TensorLike, but got '${c}'`)}let o=Pr(i,r);!Rn(i)&&!Array.isArray(i)&&(i=[i]);let a=r!=="string"?gp(i,r):ha(i,[],!0);return I.makeTensor(a,o,r)}function il(i,t,e,n="numeric"){if(!Array.isArray(i))throw new Error(`Argument ${t} passed to ${e} must be a \`Tensor[]\` or \`TensorLike[]\``);return i.map((o,s)=>x(o,`${t}[${s}]`,e,n))}var $=D(()=>{"use strict";Z();xr();ps();vp();fe();ar();});function w(i){let t=Object.keys(i);if(t.length!==1)throw new Error(`Please provide an object with a single key (operation name) mapping to a function. Got an object with ${t.length} keys.`);let e=t[0],n=i[e];e.endsWith("_")&&(e=e.substring(0,e.length-1)),e=e+rw;let r=(...o)=>{I.startScope(e);try{let s=n(...o);return Gu(s)&&console.error("Cannot return a Promise inside of tidy."),I.endScope(s),s}catch(s){throw I.endScope(null),s}};return Object.defineProperty(r,"name",{value:e,configurable:!0}),r}var rw,H=D(()=>{"use strict";Z();fe();rw="__op"});function mue(i,t){let e=x(i,"real","complex"),n=x(t,"imag","complex");ln(e.shape,n.shape,`real and imag shapes, ${e.shape} and ${n.shape}, must match in call to tf.complex().`);let r={real:e,imag:n};return I.runKernel(Lk,r)}var ro,_d=D(()=>{"use strict";Z();re();$();fe();H();ro=w({complex_:mue})});function oo(i,t,e,n){if(n==null)n=pd(i);else if(n==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(tw(i)||ew(i)){if(n!=="float32"&&n!=="int32")throw new Error(`Creating tensor from GPU data only supports 'float32'|'int32' dtype, while the dtype is ${n}.`);return I.backend.createTensorFromGPUData(i,t||e,n)}if(!Rn(i)&&!Array.isArray(i)&&typeof i!="number"&&typeof i!="boolean"&&typeof i!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(t!=null){fn(t);let r=oi(t),o=oi(e);A(r===o,()=>`Based on the provided shape, [${t}], the tensor should have ${r} values but has ${o}`);for(let s=0;s<e.length;++s){let a=e[s],c=s===e.length-1?a!==oi(t.slice(s)):!0;A(e[s]===t[s]||!c,()=>`Error creating a new Tensor. Inferred shape (${e}) does not match the provided shape (${t}). `)}}return!Rn(i)&&!Array.isArray(i)&&(i=[i]),t=t||e,i=n!=="string"?gp(i,n):ha(i,[],!0),I.makeTensor(i,t,n)}var nl=D(()=>{"use strict";Z();vp();fe();});function jr(i,t,e){let n=Pr(i,e);return oo(i,t,n,e)}var b_=D(()=>{"use strict";$();nl();});var rl,xO=D(()=>{"use strict";rl={float32:4,float16:2,int32:4,uint16:2,uint8:1,bool:1,complex64:8}});function pue(i,t){let e=0,n=i.length;for(;e<=n;){let r=Math.floor((n-e)/2)+e,o=t(i[r]);if(o===0)return r;o<0?n=r:e=r+1}return-1}var Or,bd=D(()=>{"use strict";fe();Or=class i{static join(t){return new i(t).slice()}constructor(t){if(this.shards=[],this.previousShardIndex=0,t==null||(t instanceof Array||(t=[t]),t=t.map(n=>Rn(n)?n.buffer:n),t.length===0))return;this.bufferUniformSize=t[0].byteLength;let e=0;for(let n=0;n<t.length;n++){let r=t[n];n!==t.length-1&&r.byteLength!==this.bufferUniformSize&&(this.bufferUniformSize=void 0);let o=e+r.byteLength;this.shards.push({buffer:r,start:e,end:o}),e=o}this.shards.length===0&&(this.byteLength=0),this.byteLength=this.shards[this.shards.length-1].end}slice(t=0,e=this.byteLength){if(this.shards.length===0)return new ArrayBuffer(0);if(t=isNaN(Number(t))?0:t,e=isNaN(Number(e))?0:e,t=Math.max(0,t),e=Math.min(this.byteLength,e),e<=t)return new ArrayBuffer(0);let n=this.findShardForByte(t);if(n===-1)throw new Error(`Could not find start shard for byte ${t}`);let r=e-t,o=new ArrayBuffer(r),s=new Uint8Array(o),a=0;for(let c=n;c<this.shards.length;c++){let l=this.shards[c],u=t+a-l.start,h=a,p=Math.min(e,l.end)-l.start,_=new Uint8Array(l.buffer,u,p-u);if(s.set(_,h),a+=_.length,e<l.end)break}return o}findShardForByte(t){if(this.shards.length===0||t<0||t>=this.byteLength)return-1;if(this.bufferUniformSize!=null)return this.previousShardIndex=Math.floor(t/this.bufferUniformSize),this.previousShardIndex;function e(r){return t<r.start?-1:t>=r.end?1:0}if(e(this.shards[this.previousShardIndex])===0)return this.previousShardIndex;let n=pue(this.shards,e);return n===-1?-1:(this.previousShardIndex=n,this.previousShardIndex)}}});function fue(){st().set("PROD",!0)}function gue(){st().set("DEBUG",!0)}function _ue(){st().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function e6(i){st().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(i+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function bue(){I.disposeVariables()}function vue(){return I}function yue(){return I.memory()}function xue(i){return I.profile(i)}function Jt(i,t){return I.tidy(i,t)}function Dn(i){__(i).forEach(e=>e.dispose())}function so(i){return I.keep(i)}function wue(i){return I.time(i)}function Mue(i){return I.setBackend(i)}function Cue(){return I.ready()}function wO(){return I.backendName}function Sue(i){I.removeBackend(i)}function Eue(i){return I.findBackend(i)}function Tue(i){return I.findBackendFactory(i)}function Iue(i,t,e=1){return I.registerBackend(i,t,e)}function MO(){return I.backend}function Due(i,t){st().setPlatform(i,t)}var qo=D(()=>{"use strict";Z();xr();ps();_n();G8(e6)});function n6(i,t){return oe(this,null,function*(){let e=[],n=[],r=Array.isArray(i)?i.map(s=>s.name):Object.keys(i);for(let s=0;s<r.length;++s){let a=r[s],c=Array.isArray(i)?i[s].tensor:i[a];if(c.dtype!=="float32"&&c.dtype!=="int32"&&c.dtype!=="bool"&&c.dtype!=="string"&&c.dtype!=="complex64")throw new Error(`Unsupported dtype in weight '${a}': ${c.dtype}`);let l={name:a,shape:c.shape,dtype:c.dtype};if(c.dtype==="string"){let d=new Promise(u=>oe(this,null,function*(){let h=yield c.bytes(),m=h.reduce((f,g)=>f+g.length,0)+vd*h.length,p=new Uint8Array(m),_=0;for(let f=0;f<h.length;f++){let g=h[f],S=new Uint8Array(new Uint32Array([g.length]).buffer);p.set(S,_),_+=vd,p.set(g,_),_+=g.length}u(p)}));n.push(d)}else n.push(c.data());t!=null&&(l.group=t),e.push(l)}let o=yield Promise.all(n);return{data:Pue(o),specs:e}})}function ow(i,t){let e=new Or(i),n={},r=0;for(let o of t){let s=kue(o,(a,c)=>e.slice(r+a,r+c));n[o.name]=r6(o,e.slice(r,r+s)),r+=s}return n}function kue(i,t){let e=oi(i.shape),n;if("quantization"in i){let r=i.quantization;n=rl[r.dtype]}else if(i.dtype==="string"){let r=0;for(let o=0;o<e;o++)r+=vd+new Uint32Array(t(r,r+vd))[0];return r}else n=rl[i.dtype];return e*n}function Aue(i,t){return oe(this,null,function*(){let e=oi(i.shape),n;if("quantization"in i){let r=i.quantization;n=rl[r.dtype]}else if(i.dtype==="string"){let r=0;for(let o=0;o<e;o++)r+=vd+new Uint32Array(yield t(r,r+vd))[0];return r}else n=rl[i.dtype];return e*n})}function r6(i,t){let e=i.name,n=i.dtype,r=i.shape,o=oi(r),s,a=0;if("quantization"in i){let c=i.quantization;if(c.dtype==="uint8"||c.dtype==="uint16"){if(!("min"in c&&"scale"in c))throw new Error(`Weight ${i.name} with quantization ${c.dtype} doesn't have corresponding metadata min and scale.`)}else if(c.dtype==="float16"){if(n!=="float32")throw new Error(`Weight ${i.name} is quantized with ${c.dtype} which only supports weights of type float32 not ${n}.`)}else throw new Error(`Weight ${i.name} has unknown quantization dtype ${c.dtype}. Supported quantization dtypes are: 'uint8', 'uint16', and 'float16'.`);let l=rl[c.dtype],d=c.dtype==="uint8"?new Uint8Array(t):new Uint16Array(t);if(n==="float32")if(c.dtype==="uint8"||c.dtype==="uint16"){s=new Float32Array(d.length);for(let u=0;u<d.length;u++){let h=d[u];s[u]=h*c.scale+c.min}}else if(c.dtype==="float16")s=Fue()(d);else throw new Error(`Unsupported quantization type ${c.dtype} for weight type float32.`);else if(n==="int32"){if(c.dtype!=="uint8"&&c.dtype!=="uint16")throw new Error(`Unsupported quantization type ${c.dtype} for weight type int32.`);s=new Int32Array(d.length);for(let u=0;u<d.length;u++){let h=d[u];s[u]=Math.round(h*c.scale+c.min)}}else throw new Error(`Unsupported dtype in weight '${e}': ${n}`);a+=o*l}else if(n==="string"){let c=oi(i.shape);s=[];for(let l=0;l<c;l++){let d=new Uint32Array(t.slice(a,a+vd))[0];a+=vd;let u=new Uint8Array(t.slice(a,a+d));s.push(u),a+=d}}else{let c=rl[n];if(n==="float32")s=new Float32Array(t);else if(n==="int32")s=new Int32Array(t);else if(n==="bool")s=new Uint8Array(t);else if(n==="complex64"){s=new Float32Array(t);let l=new Float32Array(s.length/2),d=new Float32Array(s.length/2);for(let p=0;p<l.length;p++)l[p]=s[p*2],d[p]=s[p*2+1];let u=jr(l,r,"float32"),h=jr(d,r,"float32"),m=ro(u,h);return u.dispose(),h.dispose(),m}else throw new Error(`Unsupported dtype in weight '${e}': ${n}`);a+=o*c}return jr(s,r,n)}function t6(i,t,e){return oe(this,null,function*(){let n=new Uint8Array(t);for(;n.byteLength<e;){let{done:r,value:o}=yield i.read();if(r&&o==null){let a=e-n.byteLength;throw new Error(`Reader is done but ${a} bytes are still expected`)}let s=new Uint8Array(n.length+o.byteLength);s.set(n,0),s.set(new Uint8Array(o),n.length),n=s}return n.buffer})}function sw(i,t){return oe(this,null,function*(){let e={},n=i.getReader(),r=new ArrayBuffer(0);for(let o of t){let s=yield Aue(o,(l,d)=>oe(this,null,function*(){return r=yield t6(n,r,d),r.slice(l,d)}));r=yield t6(n,r,s);let a=r.slice(0,s);r=r.slice(s);let c=r6(o,a);if(e[o.name]=c,wO()==="webgpu"){let l=MO();"uploadToGPU"in l&&oi(c.shape)>=st().get("WEBGPU_CPU_HANDOFF_SIZE_THRESHOLD")&&l.uploadToGPU(c.dataId)}}return e})}function Pue(i){if(i===null)throw new Error(`Invalid input value: ${JSON.stringify(i)}`);let t=0,e=[];i.forEach(o=>{if(t+=o.byteLength,e.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error(`Unsupported TypedArray subtype: ${o.constructor.name}`)});let n=new Uint8Array(t),r=0;return e.forEach(o=>{n.set(new Uint8Array(o.buffer),r),r+=o.byteLength}),n.buffer}function i6(i){return CO?Buffer.byteLength(i,"utf8"):new Blob([i]).size}function o6(i){if(CO)return Buffer.from(i).toString("base64");let t=new Uint8Array(i),e="";for(let n=0,r=t.length;n<r;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function s6(i){if(CO){let n=Buffer.from(i,"base64");return n.buffer.slice(n.byteOffset,n.byteOffset+n.byteLength)}let t=atob(i),e=new Uint8Array(t.length);for(let n=0;n<t.length;++n)e.set([t.charCodeAt(n)],n);return e.buffer}function a6(i){return Or.join(i)}function SO(i){let t="/";for(i=i.trim();i.endsWith(t);)i=i.slice(0,i.length-1);let e=i.split(t);return e[e.length-1]}function aw(i,t){let e={modelTopology:i.modelTopology,format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy,weightsManifest:t};return i.signature!=null&&(e.signature=i.signature),i.userDefinedMetadata!=null&&(e.userDefinedMetadata=i.userDefinedMetadata),i.modelInitializer!=null&&(e.modelInitializer=i.modelInitializer),i.initializerSignature!=null&&(e.initializerSignature=i.initializerSignature),i.trainingConfig!=null&&(e.trainingConfig=i.trainingConfig),e}function EO(i,t,e){let n={modelTopology:i.modelTopology,format:i.format,generatedBy:i.generatedBy,convertedBy:i.convertedBy};if(i.trainingConfig!=null&&(n.trainingConfig=i.trainingConfig),i.weightsManifest!=null){if(!t)throw new Error("modelJSON has weightsManifest but weightSpecs is null");if(!e)throw new Error("modelJSON has weightsManifest but weightData is null");n.weightSpecs=t,n.weightData=e}return i.signature!=null&&(n.signature=i.signature),i.userDefinedMetadata!=null&&(n.userDefinedMetadata=i.userDefinedMetadata),i.modelInitializer!=null&&(n.modelInitializer=i.modelInitializer),i.initializerSignature!=null&&(n.initializerSignature=i.initializerSignature),n}function xp(i,t){return oe(this,null,function*(){let e,n;return i.weightsManifest!=null&&([e,n]=yield t(i.weightsManifest)),EO(i,e,n)})}function rc(i){if(i.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:i.modelTopology==null?0:i6(JSON.stringify(i.modelTopology)),weightSpecsBytes:i.weightSpecs==null?0:i6(JSON.stringify(i.weightSpecs)),weightDataBytes:i.weightData==null?0:new Or(i.weightData).byteLength}}function v_(i){let t=[];for(let e of i)t.push(...e.weights);return t}function Oue(){let i=e=>{let n=e<<13,r=0;for(;!(n&8388608);)r-=8388608,n<<=1;return n&=-8388609,r+=947912704,n|r},t=new Uint32Array(2048);t[0]=0;for(let e=1;e<1024;e++)t[e]=i(e);for(let e=1024;e<2048;e++)t[e]=939524096+(e-1024<<13);return t}function Nue(){let i=new Uint32Array(64);i[0]=0,i[31]=1199570944,i[32]=2147483648,i[63]=3347054592;for(let t=1;t<31;t++)i[t]=t<<23;for(let t=33;t<63;t++)i[t]=2147483648+(t-32<<23);return i}function Rue(){let i=new Uint32Array(64);for(let t=0;t<64;t++)i[t]=1024;return i[0]=i[32]=0,i}function Fue(){let i=Oue(),t=Nue(),e=Rue();return n=>{let r=new ArrayBuffer(4*n.length),o=new Uint32Array(r);for(let s=0;s<n.length;s++){let a=n[s],c=i[e[a>>10]+(a&1023)]+t[a>>10];o[s]=c}return new Float32Array(r)}}var vd,CO,yd=D(()=>{"use strict";_d();b_();fe();xO();bd();qo();xr();qo();vd=4;CO=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u")});var cr,c6,l6,d6,u6,Ju=D(()=>{"use strict";cr=class i{constructor(){this.saveRouters=[],this.loadRouters=[]}static getInstance(){return i.instance==null&&(i.instance=new i),i.instance}static registerSaveRouter(t){i.getInstance().saveRouters.push(t)}static registerLoadRouter(t){i.getInstance().loadRouters.push(t)}static getSaveHandlers(t){return i.getHandlers(t,"save")}static getLoadHandlers(t,e){return i.getHandlers(t,"load",e)}static getHandlers(t,e,n){let r=[];return(e==="load"?i.getInstance().loadRouters:i.getInstance().saveRouters).forEach(s=>{let a=s(t,n);a!==null&&r.push(a)}),r}},c6=i=>cr.registerSaveRouter(i),l6=i=>cr.registerLoadRouter(i),d6=i=>cr.getSaveHandlers(i),u6=(i,t)=>cr.getLoadHandlers(i,t)});function h6(){if(!st().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");let i=typeof window>"u"?self:window,t=i.indexedDB||i.mozIndexedDB||i.webkitIndexedDB||i.msIndexedDB||i.shimIndexedDB;if(t==null)throw new Error("The current browser does not appear to support IndexedDB.");return t}function DO(i){let t=i.result;t.createObjectStore(eh,{keyPath:"modelPath"}),t.createObjectStore(xd,{keyPath:"modelPath"})}function Lue(i){return new th(i)}function Bue(i){return i.startsWith(th.URL_SCHEME)?i.slice(th.URL_SCHEME.length):i}var TO,IO,eh,xd,th,m6,cw,kO=D(()=>{"use strict";yp();xr();yd();Ju();bd();TO="tensorflowjs",IO=1,eh="models_store",xd="model_info_store";th=(()=>{class i{constructor(e){if(this.indexedDB=h6(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}save(e){return oe(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return this.databaseAction(this.modelPath,e)})}load(){return oe(this,null,function*(){return this.databaseAction(this.modelPath)})}databaseAction(e,n){return new Promise((r,o)=>{let s=this.indexedDB.open(TO,IO);s.onupgradeneeded=()=>DO(s),s.onsuccess=()=>{let a=s.result;if(n==null){let c=a.transaction(eh,"readonly"),d=c.objectStore(eh).get(this.modelPath);d.onsuccess=()=>{if(d.result==null)return a.close(),o(new Error(`Cannot find model with path '${this.modelPath}' in IndexedDB.`));r(d.result.modelArtifacts)},d.onerror=u=>(a.close(),o(d.error)),c.oncomplete=()=>a.close()}else{n.weightData=Or.join(n.weightData);let c=rc(n),l=a.transaction(xd,"readwrite"),d=l.objectStore(xd),u;try{u=d.put({modelPath:this.modelPath,modelArtifactsInfo:c})}catch(m){return o(m)}let h;u.onsuccess=()=>{h=a.transaction(eh,"readwrite");let m=h.objectStore(eh),p;try{p=m.put({modelPath:this.modelPath,modelArtifacts:n,modelArtifactsInfo:c})}catch(_){return o(_)}p.onsuccess=()=>r({modelArtifactsInfo:c}),p.onerror=_=>{d=l.objectStore(xd);let f=d.delete(this.modelPath);f.onsuccess=()=>(a.close(),o(p.error)),f.onerror=g=>(a.close(),o(p.error))}},u.onerror=m=>(a.close(),o(u.error)),l.oncomplete=()=>{h==null?a.close():h.oncomplete=()=>a.close()}}},s.onerror=a=>o(s.error)})}}return i.URL_SCHEME="indexeddb://",i})(),m6=i=>st().getBool("IS_BROWSER")&&!Array.isArray(i)&&i.startsWith(th.URL_SCHEME)?Lue(i.slice(th.URL_SCHEME.length)):null;cr.registerSaveRouter(m6);cr.registerLoadRouter(m6);cw=class{constructor(){this.indexedDB=h6()}listModels(){return oe(this,null,function*(){return new Promise((t,e)=>{let n=this.indexedDB.open(TO,IO);n.onupgradeneeded=()=>DO(n),n.onsuccess=()=>{let r=n.result,o=r.transaction(xd,"readonly"),a=o.objectStore(xd).getAll();a.onsuccess=()=>{let c={};for(let l of a.result)c[l.modelPath]=l.modelArtifactsInfo;t(c)},a.onerror=c=>(r.close(),e(a.error)),o.oncomplete=()=>r.close()},n.onerror=r=>e(n.error)})})}removeModel(t){return oe(this,null,function*(){return t=Bue(t),new Promise((e,n)=>{let r=this.indexedDB.open(TO,IO);r.onupgradeneeded=()=>DO(r),r.onsuccess=()=>{let o=r.result,s=o.transaction(xd,"readwrite"),a=s.objectStore(xd),c=a.get(t),l;c.onsuccess=()=>{if(c.result==null)return o.close(),n(new Error(`Cannot find model with path '${t}' in IndexedDB.`));{let d=a.delete(t),u=()=>{l=o.transaction(eh,"readwrite");let m=l.objectStore(eh).delete(t);m.onsuccess=()=>e(c.result.modelArtifactsInfo),m.onerror=p=>n(c.error)};d.onsuccess=u,d.onerror=h=>(u(),o.close(),n(c.error))}},c.onerror=d=>(o.close(),n(c.error)),s.oncomplete=()=>{l==null?o.close():l.oncomplete=()=>o.close()}},r.onerror=o=>n(r.error)})})}}});function f6(i){return{info:[wp,i,p6].join(ol),topology:[wp,i,Vue].join(ol),weightSpecs:[wp,i,Uue].join(ol),weightData:[wp,i,zue].join(ol),modelMetadata:[wp,i,Hue].join(ol)}}function g6(i){for(let t of Object.values(i))window.localStorage.removeItem(t)}function jue(i){let t=i.split(ol);if(t.length<3)throw new Error(`Invalid key format: ${i}`);return t.slice(1,t.length-1).join(ol)}function $ue(i){return i.startsWith(ih.URL_SCHEME)?i.slice(ih.URL_SCHEME.length):i}function Gue(i){return new ih(i)}var ol,wp,p6,Vue,Uue,zue,Hue,ih,_6,lw,AO=D(()=>{"use strict";yp();xr();fe();yd();bd();Ju();ol="/",wp="tensorflowjs_models",p6="info",Vue="model_topology",Uue="weight_specs",zue="weight_data",Hue="model_metadata";ih=(()=>{class i{constructor(e){if(!st().getBool("IS_BROWSER")||typeof window>"u"||typeof window.localStorage>"u")throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=f6(this.modelPath)}save(e){return oe(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");{let n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),o=rc(e),s=Or.join(e.weightData);try{this.LS.setItem(this.keys.info,JSON.stringify(o)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,o6(s));let a={format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,signature:e.signature!=null?e.signature:void 0,userDefinedMetadata:e.userDefinedMetadata!=null?e.userDefinedMetadata:void 0,modelInitializer:e.modelInitializer!=null?e.modelInitializer:void 0,initializerSignature:e.initializerSignature!=null?e.initializerSignature:void 0,trainingConfig:e.trainingConfig!=null?e.trainingConfig:void 0};return this.LS.setItem(this.keys.modelMetadata,JSON.stringify(a)),{modelArtifactsInfo:o}}catch{throw g6(this.keys),new Error(`Failed to save model '${this.modelPath}' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes=${o.modelTopologyBytes}, weightSpecsBytes=${o.weightSpecsBytes}, weightDataBytes=${o.weightDataBytes}.`)}}})}load(){return oe(this,null,function*(){let e=JSON.parse(this.LS.getItem(this.keys.info));if(e==null)throw new Error(`In local storage, there is no model with name '${this.modelPath}'`);if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");let n={},r=JSON.parse(this.LS.getItem(this.keys.topology));if(r==null)throw new Error(`In local storage, the topology of model '${this.modelPath}' is missing.`);n.modelTopology=r;let o=JSON.parse(this.LS.getItem(this.keys.weightSpecs));if(o==null)throw new Error(`In local storage, the weight specs of model '${this.modelPath}' are missing.`);n.weightSpecs=o;let s=this.LS.getItem(this.keys.modelMetadata);if(s!=null){let c=JSON.parse(s);n.format=c.format,n.generatedBy=c.generatedBy,n.convertedBy=c.convertedBy,c.signature!=null&&(n.signature=c.signature),c.userDefinedMetadata!=null&&(n.userDefinedMetadata=c.userDefinedMetadata),c.modelInitializer!=null&&(n.modelInitializer=c.modelInitializer),c.initializerSignature!=null&&(n.initializerSignature=c.initializerSignature),c.trainingConfig!=null&&(n.trainingConfig=c.trainingConfig)}let a=this.LS.getItem(this.keys.weightData);if(a==null)throw new Error(`In local storage, the binary weight values of model '${this.modelPath}' are missing.`);return n.weightData=s6(a),n})}}return i.URL_SCHEME="localstorage://",i})(),_6=i=>st().getBool("IS_BROWSER")&&!Array.isArray(i)&&i.startsWith(ih.URL_SCHEME)?Gue(i.slice(ih.URL_SCHEME.length)):null;cr.registerSaveRouter(_6);cr.registerLoadRouter(_6);lw=class{constructor(){A(st().getBool("IS_BROWSER"),()=>"Current environment is not a web browser"),A(typeof window>"u"||typeof window.localStorage<"u",()=>"Current browser does not appear to support localStorage"),this.LS=window.localStorage}listModels(){return oe(this,null,function*(){let t={},e=wp+ol,n=ol+p6;for(let r=0;r<this.LS.length;++r){let o=this.LS.key(r);if(o.startsWith(e)&&o.endsWith(n)){let s=jue(o);t[s]=JSON.parse(this.LS.getItem(o))}}return t})}removeModel(t){return oe(this,null,function*(){t=$ue(t);let e=f6(t);if(this.LS.getItem(e.info)==null)throw new Error(`Cannot find model at path '${t}'`);let n=JSON.parse(this.LS.getItem(e.info));return g6(e),n})}}});function dw(i){if(i.indexOf(Mp)===-1)throw new Error(`The url string provided does not contain a scheme. Supported schemes are: ${pa.getSchemes().join(",")}`);return{scheme:i.split(Mp)[0],path:i.split(Mp)[1]}}function b6(i,t,e=!1){return oe(this,null,function*(){A(i!==t,()=>`Old path and new path are the same: '${i}'`);let n=cr.getLoadHandlers(i);A(n.length>0,()=>`Copying failed because no load handler is found for source URL ${i}.`),A(n.length<2,()=>`Copying failed because more than one (${n.length}) load handlers for source URL ${i}.`);let r=n[0],o=cr.getSaveHandlers(t);A(o.length>0,()=>`Copying failed because no save handler is found for destination URL ${t}.`),A(o.length<2,()=>`Copying failed because more than one (${n.length}) save handlers for destination URL ${t}.`);let s=o[0],a=dw(i).scheme,c=dw(i).path,l=a===dw(i).scheme,d=yield r.load();e&&l&&(yield pa.getManager(a).removeModel(c));let u=yield s.save(d);return e&&!l&&(yield pa.getManager(a).removeModel(c)),u.modelArtifactsInfo})}function v6(){return oe(this,null,function*(){let i=pa.getSchemes(),t={};for(let e of i){let n=yield pa.getManager(e).listModels();for(let r in n){let o=e+Mp+r;t[o]=n[r]}}return t})}function y6(i){return oe(this,null,function*(){let t=dw(i);return pa.getManager(t.scheme).removeModel(t.path)})}function x6(i,t){return oe(this,null,function*(){return b6(i,t,!1)})}function w6(i,t){return oe(this,null,function*(){return b6(i,t,!0)})}var Mp,pa,PO=D(()=>{"use strict";fe();Ju();Mp="://",pa=class i{constructor(){this.managers={}}static getInstance(){return i.instance==null&&(i.instance=new i),i.instance}static registerManager(t,e){A(t!=null,()=>"scheme must not be undefined or null."),t.endsWith(Mp)&&(t=t.slice(0,t.indexOf(Mp))),A(t.length>0,()=>"scheme must not be an empty string.");let n=i.getInstance();A(n.managers[t]==null,()=>`A model store manager is already registered for scheme '${t}'.`),n.managers[t]=e}static getManager(t){let e=i.getInstance().managers[t];if(e==null)throw new Error(`Cannot find model manager for scheme '${t}'`);return e}static getSchemes(){return Object.keys(i.getInstance().managers)}}});var OO,M6=D(()=>{"use strict";yp();xr();kO();AO();PO();oO();OO=class{constructor(){this.messageName="setTimeoutCustom",this.functionRefs=[],this.handledMessageCount=0,this.hasEventListener=!1}fetch(t,e){return fetch(t,e)}now(){return performance.now()}encode(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Browser's encoder only supports utf-8, but got ${e}`);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(t)}decode(t,e){return new TextDecoder(e).decode(t)}setTimeoutCustom(t,e){if(typeof window>"u"||!st().getBool("USE_SETTIMEOUTCUSTOM")){setTimeout(t,e);return}this.functionRefs.push(t),setTimeout(()=>{window.postMessage({name:this.messageName,index:this.functionRefs.length-1},"*")},e),this.hasEventListener||(this.hasEventListener=!0,window.addEventListener("message",n=>{if(n.source===window&&n.data.name===this.messageName){n.stopPropagation();let r=this.functionRefs[n.data.index];r(),this.handledMessageCount++,this.handledMessageCount===this.functionRefs.length&&(this.functionRefs=[],this.handledMessageCount=0)}},!0))}isTypedArray(t){return Yx(t)}};if(st().get("IS_BROWSER")){st().setPlatform("browser",new OO);try{pa.registerManager(ih.URL_SCHEME,new lw)}catch{}try{pa.registerManager(th.URL_SCHEME,new cw)}catch{}}});var S6=os((Cp,C6)=>{"use strict";var Wue=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},nh=Wue();C6.exports=Cp=nh.fetch;nh.fetch&&(Cp.default=nh.fetch.bind(nh));Cp.Headers=nh.Headers;Cp.Request=nh.Request;Cp.Response=nh.Response});var E6=os(()=>{"use strict"});var que,NO,RO,T6=D(()=>{"use strict";xr();que={importFetch:()=>S6()},RO=class{constructor(){this.util=E6(),this.textEncoder=new this.util.TextEncoder}fetch(t,e){return st().global.fetch!=null?st().global.fetch(t,e):(NO==null&&(NO=que.importFetch()),NO(t,e))}now(){let t=process.hrtime();return t[0]*1e3+t[1]/1e6}encode(t,e){if(e!=="utf-8"&&e!=="utf8")throw new Error(`Node built-in encoder only supports utf-8, but got ${e}`);return this.textEncoder.encode(t)}decode(t,e){return t.length===0?"":new this.util.TextDecoder(e).decode(t)}isTypedArray(t){return this.util.types.isFloat32Array(t)||this.util.types.isInt32Array(t)||this.util.types.isUint8Array(t)||this.util.types.isUint8ClampedArray(t)}};st().get("IS_NODE")&&!st().get("IS_BROWSER")&&st().setPlatform("node",new RO)});function Nr(i,t="float32",e){return t=t||"float32",fn(i),new tl(i,t,e)}var sl=D(()=>{"use strict";ps();fe();});function Xue(i,t){let e=x(i,"x","cast");if(!uk(t))throw new Error(`Failed to cast to unknown dtype ${t}`);if(t==="string"&&e.dtype!=="string"||t!=="string"&&e.dtype==="string")throw new Error("Only strings can be casted to strings");let n={x:e},r={dtype:t};return I.runKernel(a_,n,r)}var si,Rr=D(()=>{"use strict";Z();re();$();fe();H();si=w({cast_:Xue})});function Yue(i){let e={x:x(i,"x","clone","string_or_numeric")};return I.runKernel(c_,e)}var ko,Sp=D(()=>{"use strict";Z();re();$();H();ko=w({clone_:Yue})});function y_(i,t=!1){console.log(i.toString(t))}var FO=D(()=>{"use strict";});var Zue,I6=D(()=>{"use strict";Z();yp();M6();T6();sl();Rr();Sp();FO();ps();_O();Zue={buffer:Nr,cast:si,clone:ko,print:y_};$8(Zue)});function Kue(i,t){let e=x(i,"a","add"),n=x(t,"b","add");[e,n]=Kt(e,n);let r={a:e,b:n};return I.runKernel(s_,r)}var at,tr=D(()=>{"use strict";Z();re();_n();$();H();at=w({add_:Kue})});function Que(i,t){let e=x(i,"a","floorDiv"),n=x(t,"b","floorDiv");[e,n]=Kt(e,n);let r={a:e,b:n};return I.runKernel(fA,r)}var x_,LO=D(()=>{"use strict";Z();re();_n();$();H();x_=w({floorDiv_:Que})});function Jue(i,t){let e=x(i,"a","div"),n=x(t,"b","div");if([e,n]=Kt(e,n),e.dtype==="int32"&&n.dtype==="int32")return x_(e,n);let r={a:e,b:n},o={};return I.runKernel(nA,r,o)}var bi,Ao=D(()=>{"use strict";Z();re();_n();$();LO();H();bi=w({div_:Jue})});function ehe(i,t){let e=x(i,"a","mul"),n=x(t,"b","mul");[e,n]=Kt(e,n);let r={a:e,b:n};return I.runKernel(qA,r)}var Ie,bn=D(()=>{"use strict";Z();re();_n();$();H();Ie=w({mul_:ehe})});function the(i){let t=x(i,"x","abs");if(t.dtype==="complex64"){let e={x:t};return I.runKernel(Bk,e)}else{let e={x:t};return I.runKernel(fk,e)}}var lr,rh=D(()=>{"use strict";Z();re();$();H();lr=w({abs_:the})});function ihe(i){let e={x:x(i,"x","acos")};return I.runKernel(gk,e)}var BO,D6=D(()=>{"use strict";Z();re();$();H();BO=w({acos_:ihe})});function nhe(i){let e={x:x(i,"x","acosh")};return I.runKernel(_k,e)}var VO,k6=D(()=>{"use strict";Z();re();$();H();VO=w({acosh_:nhe})});function rhe(i){A(Array.isArray(i),()=>"The argument passed to tf.addN() must be a list of tensors"),A(i.length>=1,()=>`Must pass at least one tensor to tf.addN(), but got ${i.length}`);let t=i.map((r,o)=>x(r,`tensors${o}`,"addN")),e=t[0];t.forEach(r=>{if(r.dtype!==e.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),t.forEach(r=>{if(!io(r.shape,e.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});let n=t;return I.runKernel(bk,n)}var UO,A6=D(()=>{"use strict";Z();re();$();fe();H();UO=w({addN_:rhe})});function ohe(i,t=null,e=!1){let r={x:x(i,"x","all","bool")},o={axis:t,keepDims:e};return I.runKernel(vk,r,o)}var zO,P6=D(()=>{"use strict";Z();re();$();H();zO=w({all_:ohe})});function she(i,t=null,e=!1){let r={x:x(i,"x","any","bool")},o={axis:t,keepDims:e};return I.runKernel(yk,r,o)}var HO,O6=D(()=>{"use strict";Z();re();$();H();HO=w({any_:she})});function ahe(i,t=0){let n={x:x(i,"x","argMax")},r={axis:t};return I.runKernel(xk,n,r)}var jO,N6=D(()=>{"use strict";Z();re();$();H();jO=w({argMax_:ahe})});function che(i,t=0){let n={x:x(i,"x","argMin")},r={axis:t};return I.runKernel(wk,n,r)}var $O,R6=D(()=>{"use strict";Z();re();$();H();$O=w({argMin_:che})});function lhe(i){let e={x:x(i,"x","asin")};return I.runKernel(Mk,e)}var GO,F6=D(()=>{"use strict";Z();re();$();H();GO=w({asin_:lhe})});function dhe(i){let e={x:x(i,"x","asinh")};return I.runKernel(Ck,e)}var WO,L6=D(()=>{"use strict";Z();re();$();H();WO=w({asinh_:dhe})});function uhe(i){let e={x:x(i,"x","atan")};return I.runKernel(Sk,e)}var qO,B6=D(()=>{"use strict";Z();re();$();H();qO=w({atan_:uhe})});function hhe(i,t){let e=x(i,"a","atan2"),n=x(t,"b","atan2");[e,n]=Kt(e,n);let r={a:e,b:n};return I.runKernel(Tk,r)}var XO,V6=D(()=>{"use strict";Z();re();_n();$();H();XO=w({atan2_:hhe})});function mhe(i){let e={x:x(i,"x","atanh")};return I.runKernel(Ek,e)}var YO,U6=D(()=>{"use strict";Z();re();$();H();YO=w({atanh_:mhe})});function phe(i,t,e,n,r="NHWC",o){let s=i[3],a=[...t,s],c=H6(r);return sh(i,a,e,o,n,null,null,c)}function KO(i,t,e,n,r,o,s="channelsLast"){let[a,c]=w_(t),l;if(s==="channelsLast")l=[a,c,i[3],i[3]];else if(s==="channelsFirst")l=[a,c,i[1],i[1]];else throw new Error(`Unknown dataFormat ${s}`);return sh(i,l,e,n,r,o,!1,s)}function fhe(i,t,e,n,r,o,s="NDHWC"){let[a,c,l]=ZO(t),d,u;if(s==="NDHWC")u="channelsLast",d=[a,c,l,i[4],i[4]];else if(s==="NCDHW")u="channelsFirst",d=[a,c,l,i[1],i[1]];else throw new Error(`Unknown dataFormat ${s}`);return z6(i,d,e,n,r,!1,u,o)}function sh(i,t,e,n,r,o,s=!1,a="channelsLast"){let[c,l,d,u]=[-1,-1,-1,-1];if(a==="channelsLast")[c,l,d,u]=i;else if(a==="channelsFirst")[c,u,l,d]=i;else throw new Error(`Unknown dataFormat ${a}`);let[h,m,,p]=t,[_,f]=w_(e),[g,S]=w_(n),C=Ep(h,g),E=Ep(m,S),{padInfo:N,outHeight:R,outWidth:B}=bhe(r,l,d,_,f,C,E,o,a),z=s?p*u:p,T;return a==="channelsFirst"?T=[c,z,R,B]:a==="channelsLast"&&(T=[c,R,B,z]),{batchSize:c,dataFormat:a,inHeight:l,inWidth:d,inChannels:u,outHeight:R,outWidth:B,outChannels:z,padInfo:N,strideHeight:_,strideWidth:f,filterHeight:h,filterWidth:m,effectiveFilterHeight:C,effectiveFilterWidth:E,dilationHeight:g,dilationWidth:S,inShape:i,outShape:T,filterShape:t}}function z6(i,t,e,n,r,o=!1,s="channelsLast",a){let[c,l,d,u,h]=[-1,-1,-1,-1,-1];if(s==="channelsLast")[c,l,d,u,h]=i;else if(s==="channelsFirst")[c,h,l,d,u]=i;else throw new Error(`Unknown dataFormat ${s}`);let[m,p,_,,f]=t,[g,S,C]=ZO(e),[E,N,R]=ZO(n),B=Ep(m,E),z=Ep(p,N),T=Ep(_,R),{padInfo:O,outDepth:U,outHeight:X,outWidth:ee}=vhe(r,l,d,u,g,S,C,B,z,T,a),de=o?f*h:f,se;return s==="channelsFirst"?se=[c,de,U,X,ee]:s==="channelsLast"&&(se=[c,U,X,ee,de]),{batchSize:c,dataFormat:s,inDepth:l,inHeight:d,inWidth:u,inChannels:h,outDepth:U,outHeight:X,outWidth:ee,outChannels:de,padInfo:O,strideDepth:g,strideHeight:S,strideWidth:C,filterDepth:m,filterHeight:p,filterWidth:_,effectiveFilterDepth:B,effectiveFilterHeight:z,effectiveFilterWidth:T,dilationDepth:E,dilationHeight:N,dilationWidth:R,inShape:i,outShape:se,filterShape:t}}function ghe(i,t,e,n,r){n==null&&(n=QO(i,t,e));let o=i[0],s=i[1],a=M_((o-t+2*n)/e+1,r),c=M_((s-t+2*n)/e+1,r);return[a,c]}function _he(i,t,e,n,r,o){r==null&&(r=QO(i,t[0],n[0]));let s=[0,0,0,e];for(let a=0;a<3;a++)i[a]+2*r>=t[a]&&(s[a]=M_((i[a]-t[a]+2*r)/n[a]+1,o));return s}function QO(i,t,e,n=1){let r=Ep(t,n);return Math.floor((i[0]*(e-1)-e+r)/2)}function w_(i){return typeof i=="number"?[i,i,i]:i.length===2?[i[0],i[1],1]:i}function ZO(i){return typeof i=="number"?[i,i,i]:i}function Ep(i,t){return t<=1?i:i+(i-1)*(t-1)}function bhe(i,t,e,n,r,o,s,a,c){let l,d,u;if(typeof i=="number"){l={top:i,bottom:i,left:i,right:i,type:i===0?"VALID":"NUMBER"};let m=ghe([t,e],o,n,i,a);d=m[0],u=m[1]}else if(i==="same"){d=Math.ceil(t/n),u=Math.ceil(e/r);let h=Math.max(0,(d-1)*n+o-t),m=Math.max(0,(u-1)*r+s-e),p=Math.floor(h/2),_=h-p,f=Math.floor(m/2),g=m-f;l={top:p,bottom:_,left:f,right:g,type:"SAME"}}else if(i==="valid")l={top:0,bottom:0,left:0,right:0,type:"VALID"},d=Math.ceil((t-o+1)/n),u=Math.ceil((e-s+1)/r);else if(typeof i=="object"){let h=c==="channelsLast"?i[1][0]:i[2][0],m=c==="channelsLast"?i[1][1]:i[2][1],p=c==="channelsLast"?i[2][0]:i[3][0],_=c==="channelsLast"?i[2][1]:i[3][1];l={top:h,bottom:m,left:p,right:_,type:h===0&&m===0&&p===0&&_===0?"VALID":"EXPLICIT"},d=M_((t-o+h+m)/n+1,a),u=M_((e-s+p+_)/r+1,a)}else throw Error(`Unknown padding parameter: ${i}`);return{padInfo:l,outHeight:d,outWidth:u}}function vhe(i,t,e,n,r,o,s,a,c,l,d){let u,h,m,p;if(i==="valid"&&(i=0),typeof i=="number"){u={top:i,bottom:i,left:i,right:i,front:i,back:i,type:i===0?"VALID":"NUMBER"};let f=_he([t,e,n,1],[a,c,l],1,[r,o,s],i,d);h=f[0],m=f[1],p=f[2]}else if(i==="same"){h=Math.ceil(t/r),m=Math.ceil(e/o),p=Math.ceil(n/s);let _=(h-1)*r+a-t,f=(m-1)*o+c-e,g=(p-1)*s+l-n,S=Math.floor(_/2),C=_-S,E=Math.floor(f/2),N=f-E,R=Math.floor(g/2),B=g-R;u={top:E,bottom:N,left:R,right:B,front:S,back:C,type:"SAME"}}else throw Error(`Unknown padding parameter: ${i}`);return{padInfo:u,outDepth:h,outHeight:m,outWidth:p}}function M_(i,t){if(!t)return Math.trunc(i);switch(t){case"round":return Math.round(i);case"ceil":return Math.ceil(i);case"floor":return Math.floor(i);default:throw new Error(`Unknown roundingMode ${t}`)}}function oh(i){let[t,e,n]=w_(i);return t===1&&e===1&&n===1}function $r(i,t){return oh(i)||oh(t)}function oc(i){return w_(i).every(t=>t>0)}function H6(i){if(i==="NHWC")return"channelsLast";if(i==="NCHW")return"channelsFirst";throw new Error(`Unknown dataFormat ${i}`)}function Ln(i,t,e){if(e!=null){if(typeof t=="string")throw Error(`Error in ${i}: pad must be an integer when using dimRoundingMode ${e} but got pad ${t}.`);if(typeof t=="number")A(el(t),()=>`Error in ${i}: pad must be an integer when using dimRoundingMode ${e} but got pad ${t}.`);else if(typeof t=="object")t.forEach(n=>{n.forEach(r=>{A(el(r),()=>`Error in ${i}: pad must be an integer when using dimRoundingMode ${e} but got pad ${r}.`)})});else throw Error(`Error in ${i}: Unknown padding parameter: ${t}`)}}var Po=D(()=>{"use strict";fe();});function yhe(i,t){let n={x:x(i,"x","reshape","string_or_numeric")},r={shape:t};return I.runKernel(mP,n,r)}var ce,ei=D(()=>{"use strict";Z();re();$();H();ce=w({reshape_:yhe})});function xhe(i,t,e,n,r){let o=x(i,"x","avgPool","float32"),s=1;A($r(e,s),()=>`Error in avgPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`);let a=o,c=!1;o.rank===3&&(c=!0,a=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),A(a.rank===4,()=>`Error in avgPool: x must be rank 4 but got rank ${a.rank}.`),Ln("avgPool",n,r);let l={x:a},d={filterSize:t,strides:e,pad:n,dimRoundingMode:r},u=I.runKernel(Ik,l,d);return u=si(u,o.dtype),c?ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var C_,JO=D(()=>{"use strict";Z();re();$();fe();Rr();Po();H();ei();C_=w({avgPool_:xhe})});function whe(i,t,e,n,r,o="NDHWC"){let s=x(i,"x","avgPool3d","float32"),a=s,c=!1;s.rank===4&&(c=!0,a=ce(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(a.rank===5,()=>`Error in avgPool3d: x must be rank 5 but got rank ${a.rank}.`),A(o==="NDHWC",()=>`Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),A(typeof e=="number"&&e>0||Array.isArray(e)&&e[0]>0&&e[1]>0&&e[2]>0,()=>`Error in avgPool3d: Stride must be > 0, but got '${e}'`),Ln("avgPool3d",n,r);let l={x:a},d={filterSize:t,strides:e,pad:n,dimRoundingMode:r,dataFormat:o},u=I.runKernel(Dk,l,d);return u=si(u,a.dtype),c?ce(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}var eN,j6=D(()=>{"use strict";Z();re();$();fe();Rr();Po();H();ei();eN=w({avgPool3d_:whe})});function Mhe(i,t=0){A(i.length>=1,()=>"Pass at least one tensor to concat");let e=il(i,"tensors","concat","string_or_numeric");if(e[0].dtype==="complex64"&&e.forEach(o=>{if(o.dtype!=="complex64")throw new Error(`Cannot concatenate complex64 tensors with a tensor
          with dtype ${o.dtype}. `)}),e.length===1)return ko(e[0]);let n=e,r={axis:t};return I.runKernel(Vk,n,r)}var sn,fa=D(()=>{"use strict";Z();re();$();fe();Sp();H();sn=w({concat_:Mhe})});function Che(i,t,e=!1,n=!1){let r=x(i,"a","matMul"),o=x(t,"b","matMul");[r,o]=Kt(r,o);let s={a:r,b:o},a={transposeA:e,transposeB:n};return I.runKernel(kk,s,a)}var Mi,al=D(()=>{"use strict";Z();re();_n();$();H();Mi=w({matMul_:Che})});function She(i){let e={x:x(i,"x","sigmoid","float32")};return I.runKernel(DP,e)}var ga,S_=D(()=>{"use strict";Z();re();$();H();ga=w({sigmoid_:She})});function Ehe(i,t,e){let n=x(i,"x","slice","string_or_numeric");if(n.rank===0)throw new Error("Slicing scalar is not possible");let r={x:n},o={begin:t,size:e};return I.runKernel(SP,r,o)}var vi,Hs=D(()=>{"use strict";Z();re();$();H();vi=w({slice_:Ehe})});function The(i){let e={x:x(i,"x","tanh","float32")};return I.runKernel(YP,e)}var Tp,tN=D(()=>{"use strict";Z();re();$();H();Tp=w({tanh_:The})});function Ihe(i,t,e,n,r,o){let s=x(i,"forgetBias","basicLSTMCell"),a=x(t,"lstmKernel","basicLSTMCell"),c=x(e,"lstmBias","basicLSTMCell"),l=x(n,"data","basicLSTMCell"),d=x(r,"c","basicLSTMCell"),u=x(o,"h","basicLSTMCell"),h=sn([l,u],1),m=Mi(h,a),p=at(m,c),_=p.shape[0],f=p.shape[1]/4,g=[_,f],S=vi(p,[0,0],g),C=vi(p,[0,f],g),E=vi(p,[0,f*2],g),N=vi(p,[0,f*3],g),R=at(Ie(ga(S),Tp(C)),Ie(d,ga(at(s,E)))),B=Ie(Tp(R),ga(N));return[R,B]}var iN,$6=D(()=>{"use strict";$();tr();fa();al();bn();H();S_();Hs();tN();iN=w({basicLSTMCell_:Ihe})});function Dhe(i,t,e){let n=x(i,"x","batchToSpaceND"),r=t.reduce((a,c)=>a*c);A(n.rank>=1+t.length,()=>`input rank is ${n.rank} but should be > than blockShape.length ${t.length}`),A(e.length===t.length,()=>`crops.length is ${e.length} but should be equal to blockShape.length  ${t.length}`),A(n.shape[0]%r===0,()=>`input tensor batch is ${n.shape[0]} but is not divisible by the product of the elements of blockShape ${t.join(" * ")} === ${r}`);let o={x:n},s={blockShape:t,crops:e};return I.runKernel(Ak,o,s)}var E_,nN=D(()=>{"use strict";Z();re();$();fe();H();E_=w({batchToSpaceND_:Dhe})});function G6(i){let t;return i.rank===0||i.rank===1?t=ce(i,[1,1,1,i.size]):i.rank===2?t=ce(i,[1,1,i.shape[0],i.shape[1]]):i.rank===3?t=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]):t=i,t}var W6=D(()=>{"use strict";ei()});function khe(i,t,e,n,r,o){o==null&&(o=.001);let s=x(i,"x","batchNorm"),a=x(t,"mean","batchNorm"),c=x(e,"variance","batchNorm"),l;r!=null&&(l=x(r,"scale","batchNorm"));let d;n!=null&&(d=x(n,"offset","batchNorm")),A(a.rank===c.rank,()=>"Batch normalization gradient requires mean and variance to have equal ranks."),A(d==null||a.rank===d.rank,()=>"Batch normalization gradient requires mean and offset to have equal ranks."),A(l==null||a.rank===l.rank,()=>"Batch normalization gradient requires mean and scale to have equal ranks.");let h={x:G6(s),scale:l,offset:d,mean:a,variance:c},m={varianceEpsilon:o},p=I.runKernel(gA,h,m);return ce(p,s.shape)}var cl,T_=D(()=>{"use strict";Z();re();$();fe();W6();H();ei();cl=w({batchNorm_:khe})});function Ahe(i,t,e,n,r,o){let s=x(i,"x","batchNorm"),a=x(t,"mean","batchNorm"),c=x(e,"variance","batchNorm"),l;r!=null&&(l=x(r,"scale","batchNorm"));let d;return n!=null&&(d=x(n,"offset","batchNorm")),A(s.rank===2,()=>`Error in batchNorm2D: x must be rank 2 but got rank ${s.rank}.`),A(a.rank===2||a.rank===1,()=>`Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank ${a.rank}.`),A(c.rank===2||c.rank===1,()=>`Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank ${c.rank}.`),l!=null&&A(l.rank===2||l.rank===1,()=>`Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank ${l.rank}.`),d!=null&&A(d.rank===2||d.rank===1,()=>`Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank ${d.rank}.`),cl(s,a,c,d,l,o)}var rN,q6=D(()=>{"use strict";$();fe();T_();H();rN=w({batchNorm2d_:Ahe})});function Phe(i,t,e,n,r,o){let s=x(i,"x","batchNorm"),a=x(t,"mean","batchNorm"),c=x(e,"variance","batchNorm"),l;r!=null&&(l=x(r,"scale","batchNorm"));let d;return n!=null&&(d=x(n,"offset","batchNorm")),A(s.rank===3,()=>`Error in batchNorm3D: x must be rank 3 but got rank ${s.rank}.`),A(a.rank===3||a.rank===1,()=>`Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank ${a.rank}.`),A(c.rank===3||c.rank===1,()=>`Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank ${c.rank}.`),l!=null&&A(l.rank===3||l.rank===1,()=>`Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank ${l.rank}.`),d!=null&&A(d.rank===3||d.rank===1,()=>`Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank ${d.rank}.`),cl(s,a,c,d,l,o)}var oN,X6=D(()=>{"use strict";$();fe();T_();H();oN=w({batchNorm3d_:Phe})});function Ohe(i,t,e,n,r,o){let s=x(i,"x","batchNorm"),a=x(t,"mean","batchNorm"),c=x(e,"variance","batchNorm"),l;r!=null&&(l=x(r,"scale","batchNorm"));let d;return n!=null&&(d=x(n,"offset","batchNorm")),A(s.rank===4,()=>`Error in batchNorm4D: x must be rank 4 but got rank ${s.rank}.`),A(a.rank===4||a.rank===1,()=>`Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank ${a.rank}.`),A(c.rank===4||c.rank===1,()=>`Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank ${c.rank}.`),l!=null&&A(l.rank===4||l.rank===1,()=>`Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank ${l.rank}.`),d!=null&&A(d.rank===4||d.rank===1,()=>`Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank ${d.rank}.`),cl(s,a,c,d,l,o)}var sN,Y6=D(()=>{"use strict";$();fe();T_();H();sN=w({batchNorm4d_:Ohe})});function Nhe(i,t,e){let n=x(i,"x","bincount"),r=x(t,"weights","bincount");A(n.dtype==="int32",()=>`Error in bincount: input dtype must be int32, but got ${n.dtype}`),A(e>=0,()=>`size must be non-negative, but got ${e}.`),A(r.size===n.size||r.size===0,()=>`Error in bincount: weights must have the same size as input or0-length, but got input shape: ${n.shape}, weights shape: ${r.shape}.`);let o={x:n,weights:r},s={size:e};return I.runKernel(Pk,o,s)}var I_,aN=D(()=>{"use strict";Z();re();$();fe();H();I_=w({bincount_:Nhe})});function Rhe(i,t){let e=x(i,"x","bitwiseAnd"),n=x(t,"y","bitwiseAnd");if(!io(e.shape,n.shape))throw new Error(`BitwiseAnd: Tensors must have the same shape. x: ${e.shape}, y: ${n.shape}`);if(e.dtype!=="int32"||n.dtype!=="int32")throw new Error(`BitwiseAnd: Only supports 'int32' values in tensor, found type of x: ${e.dtype} and type of y: ${n.dtype}`);let r={a:e,b:n};return I.runKernel(Ok,r)}var cN,Z6=D(()=>{"use strict";Z();re();$();ar();H();cN=w({bitwiseAnd_:Rhe})});function Fhe(i,t){let e=x(i,"s0","broadcastArgs","int32"),n=x(t,"s1","broadcastArgs","int32");if(e.rank!==1)throw new Error(`broadcastArgs(): first input must be a vector (rank=1). Has rank ${e.rank}`);if(n.rank!==1)throw new Error(`broadcastArgs(): second input must be a vector (rank=1). Has rank ${n.rank}`);let r={s0:e,s1:n};return I.runKernel(Nk,r)}var lN,K6=D(()=>{"use strict";Z();re();$();H();lN=w({broadcastArgs_:Fhe})});function Lhe(i,t){let e=x(i,"broadcastTo","x"),n=e.shape;if(fn(t),t.length<e.rank)throw new Error(`broadcastTo(): shape.length=${t.length} < input.rank=${e.rank}.`);if(t.length>e.rank){let l=e.shape.slice();for(;l.length<t.length;)l.unshift(1);e=ce(e,l)}let r=e.shape,o=Array.from(t);for(let l=t.length-1;l>=0;l--)if(r[l]===t[l])o[l]=1;else if(e.shape[l]!==1)throw new Error(`broadcastTo(): [${n}] cannot be broadcast to [${t}].`);if(o.map((l,d)=>l>1?d:-1).filter(l=>l>=0).length===0)return ko(e);let a={x:e},c={reps:o};return I.runKernel(l_,a,c)}var ah,dN=D(()=>{"use strict";Z();re();$();ar();Sp();H();ei();ah=w({broadcastTo_:Lhe})});function Bhe(i){let e={x:x(i,"x","ceil","float32")};return I.runKernel(Rk,e)}var uN,Q6=D(()=>{"use strict";Z();re();$();H();uN=w({ceil_:Bhe})});function _a(i,t,e){fn(i),e=e||pd(t);let n={shape:i,value:t,dtype:e};return I.runKernel(hA,{},n)}var Ip=D(()=>{"use strict";Z();re();fe();ar();});function Vhe(i,t,e){let n=x(i,"x","clipByValue");if(A(t<=e,()=>`Error in clip: min (${t}) must be less than or equal to max (${e}).`),t===e)return _a(n.shape,t,n.dtype);let r={x:n},o={clipValueMin:t,clipValueMax:e};return I.runKernel(Fk,r,o)}var hN,J6=D(()=>{"use strict";Z();re();$();fe();Ip();H();hN=w({clipByValue_:Vhe})});function Uhe(i){return sn(i,0)}var mN,ej=D(()=>{"use strict";fa();H();mN=w({concat1d_:Uhe})});function zhe(i,t){return sn(i,t)}var pN,tj=D(()=>{"use strict";fa();H();pN=w({concat2d_:zhe})});function Hhe(i,t){return sn(i,t)}var fN,ij=D(()=>{"use strict";fa();H();fN=w({concat3d_:Hhe})});function jhe(i,t){return sn(i,t)}var gN,nj=D(()=>{"use strict";fa();H();gN=w({concat4d_:jhe})});function $he(i,t,e,n,r="NHWC",o=[1,1],s){let a=x(i,"x","conv2d","float32"),c=x(t,"filter","conv2d","float32"),l=a,d=!1;a.rank===3&&(d=!0,l=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(l.rank===4,()=>`Error in conv2d: input must be rank 4, but got rank ${l.rank}.`),A(c.rank===4,()=>`Error in conv2d: filter must be rank 4, but got rank ${c.rank}.`),Ln("conv2d",n,s);let u=r==="NHWC"?l.shape[3]:l.shape[1];A(u===c.shape[2],()=>`Error in conv2d: depth of input (${u}) must match input depth for filter ${c.shape[2]}.`),A($r(e,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),A(oc(o),()=>"Error in conv2D: Dilated rates should be larger than 0."),A(oc(e),()=>"Error in conv2D: Strides should be larger than 0.");let h={x:l,filter:c},m={strides:e,pad:n,dataFormat:r,dilations:o,dimRoundingMode:s},p=I.runKernel(Uk,h,m);return d?ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var ll,D_=D(()=>{"use strict";Z();re();$();fe();Po();H();ei();ll=w({conv2d_:$he})});function Ghe(i,t,e,n,r="NWC",o=1,s){let a=x(i,"x","conv1d"),c=x(t,"filter","conv1d"),l=a,d=!1;a.rank===2&&(d=!0,l=ce(a,[1,a.shape[0],a.shape[1]])),A(l.rank===3,()=>`Error in conv1d: input must be rank 3, but got rank ${l.rank}.`),A(c.rank===3,()=>`Error in conv1d: filter must be rank 3, but got rank ${c.rank}.`),Ln("conv1d",n,s),A(l.shape[2]===c.shape[1],()=>`Error in conv1d: depth of input (${l.shape[2]}) must match input depth for filter ${c.shape[1]}.`),A($r(e,o),()=>`Error in conv1D: Either stride or dilation must be 1. Got stride ${e} and dilation '${o}'`),A(oc(o),()=>"Error in conv1D: Dilated rates should be larger than 0."),A(oc(e),()=>"Error in conv1D: Stride should be larger than 0."),A(r==="NWC",()=>`Error in conv1d: got dataFormat of ${r} but only NWC is currently supported.`);let u=ce(c,[1,c.shape[0],c.shape[1],c.shape[2]]),h=ce(l,[l.shape[0],1,l.shape[1],l.shape[2]]),f=ll(h,u,[1,e],n,"NHWC",[1,o],s);return d?ce(f,[f.shape[2],f.shape[3]]):ce(f,[f.shape[0],f.shape[2],f.shape[3]])}var _N,rj=D(()=>{"use strict";$();fe();D_();Po();H();ei();_N=w({conv1d_:Ghe})});function Whe(i,t,e,n,r,o="NHWC",s){A(i.length===t.rank,()=>`Length of inShape (${i.length}) and rank of dy (${t.rank}) must match`);let a=i,c=t,l=!1;t.rank===3&&(l=!0,c=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]),a=[1,i[0],i[1],i[2]]),A(a.length===4,()=>`Error in conv2dDerInput: inShape must be length 4, but got length ${a.length}.`),A(c.rank===4,()=>`Error in conv2dDerInput: dy must be rank 4, but got rank ${c.rank}`),A(e.rank===4,()=>`Error in conv2dDerInput: filter must be rank 4, but got rank ${e.rank}`);let d=o==="NHWC"?a[3]:a[1],u=o==="NHWC"?c.shape[3]:c.shape[1];A(d===e.shape[2],()=>`Error in conv2dDerInput: depth of input (${d}) must match input depth for filter ${e.shape[2]}.`),A(u===e.shape[3],()=>`Error in conv2dDerInput: depth of output (${u}) must match output depth for filter ${e.shape[3]}.`),Ln("conv2dDerInput",r,s);let h={dy:c,filter:e},m={strides:n,pad:r,dataFormat:o,dimRoundingMode:s,inputShape:a},p=I.runKernel(Hk,h,m);return l?ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var uw,bN=D(()=>{"use strict";Z();re();fe();Po();H();ei();uw=w({conv2DBackpropInput_:Whe})});function qhe(i,t,e,n,r,o){let s=x(i,"x","conv2dTranspose"),a=x(t,"filter","conv2dTranspose");return uw(e,s,a,n,r,"NHWC",o)}var vN,oj=D(()=>{"use strict";$();bN();H();vN=w({conv2dTranspose_:qhe})});function Xhe(i,t,e,n,r="NDHWC",o=[1,1,1]){let s=x(i,"x","conv3d"),a=x(t,"filter","conv3d"),c=s,l=!1;s.rank===4&&(l=!0,c=ce(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(c.rank===5,()=>`Error in conv3d: input must be rank 5, but got rank ${c.rank}.`),A(a.rank===5,()=>`Error in conv3d: filter must be rank 5, but got rank ${a.rank}.`),A(c.shape[4]===a.shape[3],()=>`Error in conv3d: depth of input (${c.shape[4]}) must match input depth for filter ${a.shape[3]}.`),A($r(e,o),()=>`Error in conv3D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),A(r==="NDHWC",()=>`Error in conv3d: got dataFormat of ${r} but only NDHWC is currently supported.`),A(oc(o),()=>"Error in conv3D: Dilated rates should be larger than 0."),A(oc(e),()=>"Error in conv3D: Strides should be larger than 0.");let d={x:c,filter:a},u={strides:e,pad:n,dataFormat:r,dilations:o},h=I.runKernel(jk,d,u);return l?ce(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var yN,sj=D(()=>{"use strict";Z();re();$();fe();Po();H();ei();yN=w({conv3d_:Xhe})});function Yhe(i,t,e,n,r){A(i.length===t.rank,()=>`Length of inShape (${i.length}) and rank of dy (${t.rank}) must match`);let o=i,s=t,a=!1;t.rank===4&&(a=!0,s=ce(t,[1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]]),o=[1,i[0],i[1],i[2],i[3]]);let c=o[4],l=s.shape[4];A(o.length===5,()=>`Error in conv3dDerInput: inShape must be length 5, but got length ${o.length}.`),A(s.rank===5,()=>`Error in conv3dDerInput: dy must be rank 5, but got rank ${s.rank}`),A(e.rank===5,()=>`Error in conv3dDerInput: filter must be rank 5, but got rank ${e.rank}`),A(c===e.shape[3],()=>`Error in conv3dDerInput: depth of input (${c}) must match input depth for filter ${e.shape[3]}.`),A(l===e.shape[4],()=>`Error in conv3dDerInput: depth of output (${l}) must match output depth for filter ${e.shape[4]}.`);let d={dy:s,filter:e},u={pad:r,strides:n,inputShape:o},h=I.runKernel($k,d,u);return a?ce(h,[h.shape[1],h.shape[2],h.shape[3],h.shape[4]]):h}var aj,cj=D(()=>{"use strict";Z();re();fe();H();ei();aj=w({conv3DBackpropInput_:Yhe})});function Zhe(i,t,e,n,r){let o=x(i,"x","conv3dTranspose"),s=x(t,"filter","conv3dTranspose");return aj(e,o,s,n,r)}var xN,lj=D(()=>{"use strict";$();cj();H();xN=w({conv3dTranspose_:Zhe})});function Khe(i){let e={x:x(i,"x","cos","float32")};return I.runKernel(Gk,e)}var wN,dj=D(()=>{"use strict";Z();re();$();H();wN=w({cos_:Khe})});function Qhe(i){let e={x:x(i,"x","cosh","float32")};return I.runKernel(Wk,e)}var MN,uj=D(()=>{"use strict";Z();re();$();H();MN=w({cosh_:Qhe})});function Jhe(i,t=0,e=!1,n=!1){let o={x:x(i,"x","cumprod")},s={axis:t,exclusive:e,reverse:n};return I.runKernel(qk,o,s)}var CN,hj=D(()=>{"use strict";Z();re();$();H();CN=w({cumprod_:Jhe})});function eme(i,t=0,e=!1,n=!1){let o={x:x(i,"x","cumsum")},s={axis:t,exclusive:e,reverse:n};return I.runKernel(Xk,o,s)}var SN,mj=D(()=>{"use strict";Z();re();$();H();SN=w({cumsum_:eme})});function tme(i,t,e,n=!1){let r=x(i,"x","denseBincount"),o=x(t,"weights","denseBincount");A(r.dtype==="int32",()=>`Error in denseBincount: input dtype must be int32, but got ${r.dtype}`),A(r.rank<=2,()=>`Error in denseBincount: input must be at most rank 2, but got rank ${r.rank}.`),A(e>=0,()=>`size must be non-negative, but got ${e}.`),A(o.size===r.size||o.size===0,()=>`Error in denseBincount: weights must have the same shape as x or 0-length, but got x shape: ${r.shape}, weights shape: ${o.shape}.`);let s={x:r,weights:o},a={size:e,binaryOutput:n};return I.runKernel(Zk,s,a)}var EN,pj=D(()=>{"use strict";Z();re();$();fe();H();EN=w({denseBincount_:tme})});function ime(i,t,e="NHWC"){let n=x(i,"x","depthToSpace","float32"),r=e==="NHWC"?n.shape[1]:n.shape[2],o=e==="NHWC"?n.shape[2]:n.shape[3],s=e==="NHWC"?n.shape[3]:n.shape[1];A(t>1,()=>`blockSize should be > 1 for depthToSpace, but was: ${t}`),A(r*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${r} and ${t}  for depthToSpace with input shape
    ${n.shape}`),A(o*t>=0,()=>`Negative dimension size caused by overflow when multiplying
    ${o} and ${t} for depthToSpace with input shape
        ${n.shape}`),A(s%(t*t)===0,()=>`Dimension size must be evenly divisible by ${t*t} but is ${s} for depthToSpace with input shape ${n.shape}`);let a={x:n},c={blockSize:t,dataFormat:e};return I.runKernel(Kk,a,c)}var TN,fj=D(()=>{"use strict";Z();re();$();fe();H();TN=w({depthToSpace_:ime})});function nme(i,t,e,n,r="NHWC",o=[1,1],s){let a=x(i,"x","depthwiseConv2d","float32"),c=x(t,"filter","depthwiseConv2d","float32"),l=a,d=!1;a.rank===3&&(d=!0,l=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A(l.rank===4,()=>`Error in depthwiseConv2d: input must be rank 4, but got rank ${l.rank}.`),A(c.rank===4,()=>`Error in depthwiseConv2d: filter must be rank 4, but got rank ${c.rank}.`);let u=r==="NHWC"?l.shape[3]:l.shape[1];A(u===c.shape[2],()=>`Error in depthwiseConv2d: number of input channels (${u}) must match the inChannels dimension in filter ${c.shape[2]}.`),Ln("depthwiseConv2d",n,s);let h={x:l,filter:c},m={strides:e,pad:n,dataFormat:r,dilations:o,dimRoundingMode:s},p=I.runKernel(Qk,h,m);return d?ce(p,[p.shape[1],p.shape[2],p.shape[3]]):p}var ch,hw=D(()=>{"use strict";Z();re();$();fe();Po();H();ei();ch=w({depthwiseConv2d_:nme})});function rme(i){let e={x:x(i,"x","diag")};return I.runKernel(tA,e)}var IN,gj=D(()=>{"use strict";Z();re();$();H();IN=w({diag_:rme})});function ome(i,t,e,n,r=[1,1],o="NHWC"){let s=x(i,"x","dilation2d"),a=x(t,"filter","dilation2d");A(s.rank===3||s.rank===4,()=>`Error in dilation2d: input must be rank 3 or 4, but got rank ${s.rank}.`),A(a.rank===3,()=>`Error in dilation2d: filter must be rank 3, but got rank ${a.rank}.`),A(o==="NHWC",()=>`Error in dilation2d: Only NHWC is currently supported, but got dataFormat of ${o}`);let c=s,l=!1;s.rank===3&&(c=ce(s,[1,s.shape[0],s.shape[1],s.shape[2]]),l=!0),A(c.shape[3]===a.shape[2],()=>`Error in dilation2d:  input and filter must have the same depth: ${c.shape[3]} vs ${a.shape[2]}`);let d={x:c,filter:a},u={strides:e,pad:n,dilations:r},h=I.runKernel(iA,d,u);return l?ce(h,[h.shape[1],h.shape[2],h.shape[3]]):h}var DN,_j=D(()=>{"use strict";Z();re();$();fe();H();ei();DN=w({dilation2d_:ome})});var lh={};Ei(lh,{assertAndGetBroadcastShape:()=>ki,getBroadcastDims:()=>bj,getReductionAxes:()=>mw});function bj(i,t){let e=i.length,n=[];for(let r=0;r<e;r++){let o=e-1-r,s=i[o]||1;(t[t.length-1-r]||1)>1&&s===1&&n.unshift(o)}return n}function mw(i,t){let e=[];for(let n=0;n<t.length;n++){let r=i[i.length-n-1],o=t.length-n-1,s=t[o];(r==null||r===1&&s>1)&&e.unshift(o)}return e}function ki(i,t){let e=Math.max(i.length,t.length),n=new Array(e);for(let r=0;r<e;r++){let o=i[i.length-r-1];o==null&&(o=1);let s=t[t.length-r-1];if(s==null&&(s=1),o===1)n[e-r-1]=s;else if(s===1)n[e-r-1]=o;else if(o!==s){let a=`Operands could not be broadcast together with shapes ${i} and ${t}.`;throw Error(a)}else n[e-r-1]=o}return n}var dr=D(()=>{"use strict";});function sme(i,t){let e=x(i,"a","equal","string_or_numeric"),n=x(t,"b","equal","string_or_numeric");[e,n]=Kt(e,n),ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(aA,r)}var k_,kN=D(()=>{"use strict";Z();re();_n();$();dr();H();k_=w({equal_:sme})});function ame(i,t,e){let n=x(t,"a","where"),r=x(e,"b","where"),o=x(i,"condition","where","bool"),s=ki(ki(o.shape,n.shape),r.shape),a=ah(o,s),c=ah(n,s),l=ah(r,s),d={condition:a,t:c,e:l};return I.runKernel(MP,d)}var Xo,Dp=D(()=>{"use strict";Z();re();$();dN();dr();H();Xo=w({where_:ame})});function cme(i){let e={x:x(i,"x","zerosLike")};return I.runKernel(tO,e)}var qn,dl=D(()=>{"use strict";Z();re();$();H();qn=w({zerosLike_:cme})});function lme(i,t){let e=x(i,"a","div"),n=x(t,"b","div");[e,n]=Kt(e,n);let r=bi(e,n),o=qn(r),s=k_(n,o);return Xo(s,o,r)}var AN,vj=D(()=>{"use strict";_n();$();Ao();kN();H();Dp();dl();AN=w({divNoNan_:lme})});function dme(i,t){let e=x(i,"t1","dot"),n=x(t,"t2","dot");A((e.rank===1||e.rank===2)&&(n.rank===1||n.rank===2),()=>`Error in dot: inputs must all be rank 1 or 2, but got ranks ${e.rank} and ${n.rank}.`);let r=e.rank===1?e.size:e.shape[1],o=n.rank===1?n.size:n.shape[0];if(A(r===o,()=>`Error in dot: inner dimensions of inputs must match, but got ${r} and ${o}.`),e.rank===1&&n.rank===1){let s=ce(e,[1,-1]),a=ce(n,[-1,1]),c=Mi(s,a);return ce(c,[])}else if(e.rank===1&&n.rank===2){let s=ce(e,[1,-1]),a=ce(n,[n.shape[0],n.shape[1]]),c=Mi(s,a);return ce(c,[c.size])}else if(e.rank===2&&n.rank===1){let s=ce(n,[-1,1]),a=Mi(e,s);return ce(a,[a.size])}else{let s=ce(n,[n.shape[0],n.shape[1]]);return Mi(e,s)}}var PN,yj=D(()=>{"use strict";$();fe();al();H();ei();PN=w({dot_:dme})});function ume(i,...t){let e=t.map((r,o)=>x(r,`tensors${o}`,"einsum")),n={equation:i};return I.runKernel(rA,e,n)}var ul,ON=D(()=>{"use strict";Z();re();$();H();ul=w({einsum_:ume})});function hme(i){let e={x:x(i,"x","elu","float32")};return I.runKernel(oA,e)}var A_,NN=D(()=>{"use strict";Z();re();$();H();A_=w({elu_:hme})});function mme(i,t){let e=x(i,"x","ensureShape","string_or_numeric");if(!ak(e.shape,t))throw new Error(`EnsureShape: Shape of tensor ${e.shape} is not compatible with expected shape ${t}`);return i}var RN,xj=D(()=>{"use strict";$();ar();H();RN=w({ensureShape_:mme})});function pme(i){let t=x(i,"x","erf");A(t.dtype==="int32"||t.dtype==="float32",()=>"Input dtype must be `int32` or `float32`."),t.dtype==="int32"&&(t=si(t,"float32"));let e={x:t};return I.runKernel(sA,e)}var FN,wj=D(()=>{"use strict";Z();re();$();fe();Rr();H();FN=w({erf_:pme})});function LN(i,t){for(let e=0;e<i.length;++e)if(i[i.length-e-1]!==t-1-e)return!1;return!0}function Mj(i,t,e){let n=i.length+t.length,r=[],o=0,s=0;for(let a=0;a<n;a++)e.indexOf(a)===-1?r.push(i[o++]):r.push(t[s++]);return r}function fme(i,t){let e=[],n=i.length;for(let o=0;o<n;o++)t.indexOf(o)===-1&&e.push(i[o]);let r=t.map(o=>i[o]);return[e,r]}function hl(i,t){let e=t.map(n=>1);return Mj(i,e,t)}function gme(i,t,e){A(LN(t,e),()=>`${i} supports only inner-most axes for now. Got axes ${t} and rank-${e} input.`)}function _me(i,t){if(LN(i,t))return null;let e=[];for(let n=0;n<t;++n)i.indexOf(n)===-1&&e.push(n);return i.forEach(n=>e.push(n)),e}function bme(i){return i.map((t,e)=>[e,t]).sort((t,e)=>t[1]-e[1]).map(t=>t[0])}function vme(i,t){let e=[];for(let n=t-i;n<t;++n)e.push(n);return e}var kp=D(()=>{"use strict";fe();});function xme(i,t=null,e=!1){let r={x:x(i,"x","max")},o={reductionIndices:t,keepDims:e};return I.runKernel(FA,r,o)}var ba,P_=D(()=>{"use strict";Z();re();$();H();ba=w({max_:xme})});function wme(i,t=null,e=!1){let r={x:x(i,"x","min")},o={axis:t,keepDims:e};return I.runKernel(HA,r,o)}var Ap,BN=D(()=>{"use strict";Z();re();$();H();Ap=w({min_:wme})});function Mme(i,t){let e=x(i,"base","pow"),n=x(t,"exp","pow");[e,n]=Kt(e,n);let r={a:e,b:n};return I.runKernel(nP,r)}var ac,O_=D(()=>{"use strict";Z();re();_n();$();H();ac=w({pow_:Mme})});function Ct(i,t){if((Rn(i)&&t!=="string"||Array.isArray(i))&&t!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(t==="string"&&Rn(i)&&!(i instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return oo(i,[],[],t)}var Gr=D(()=>{"use strict";fe();nl();});function Cme(i){let e={x:x(i,"x","sqrt","float32")};return I.runKernel(AP,e)}var ao,Pp=D(()=>{"use strict";Z();re();$();H();ao=w({sqrt_:Cme})});function Sme(i){let t=x(i,"x","square"),e={};return I.runKernel("Square",{x:t},e)}var ur,ml=D(()=>{"use strict";Z();$();H();ur=w({square_:Sme})});function Eme(i,t=null,e=!1){let n=x(i,"x","sum");n.dtype==="bool"&&(n=si(n,"int32"));let r={x:n},o={axis:t,keepDims:e};return I.runKernel(PP,r,o)}var Ai,va=D(()=>{"use strict";Z();re();$();Rr();H();Ai=w({sum_:Eme})});function Tme(i,t="euclidean",e=null,n=!1){i=x(i,"x","norm");let r=Cj(i,t,e),o=r.shape;if(n){let s=md(e,i.shape);o=hl(r.shape,s)}return ce(r,o)}function Cj(i,t,e=null){if(i.rank===0)return lr(i);if(i.rank!==1&&e===null)return Cj(ce(i,[-1]),t,e);if(i.rank===1||typeof e=="number"||Array.isArray(e)&&e.length===1){if(t===1)return Ai(lr(i),e);if(t===1/0)return ba(lr(i),e);if(t===-1/0)return Ap(lr(i),e);if(t==="euclidean"||t===2)return ao(Ai(ac(lr(i),Ct(2,"int32")),e));throw new Error(`Error in norm: invalid ord value: ${t}`)}if(Array.isArray(e)&&e.length===2){if(t===1)return ba(Ai(lr(i),e[0]),e[1]-1);if(t===1/0)return ba(Ai(lr(i),e[1]),e[0]);if(t===-1/0)return Ap(Ai(lr(i),e[1]),e[0]);if(t==="fro"||t==="euclidean")return ao(Ai(ur(i),e));throw new Error(`Error in norm: invalid ord value: ${t}`)}throw new Error(`Error in norm: invalid axis: ${e}`)}var wd,N_=D(()=>{"use strict";$();fe();rh();kp();P_();BN();H();O_();ei();Gr();Pp();ml();va();wd=w({norm_:Tme})});function Ime(i,t=null,e=!1){return wd(i,"euclidean",t,e)}var VN,Sj=D(()=>{"use strict";N_();H();VN=w({euclideanNorm_:Ime})});function Dme(i){let e={x:x(i,"x","exp")};return I.runKernel(cA,e)}var fs,Op=D(()=>{"use strict";Z();re();$();H();fs=w({exp_:Dme})});function kme(i,t=0){let e=x(i,"x","expandDims","string_or_numeric");A(t<=e.rank,()=>"Axis must be <= rank of the tensor");let n={input:e},r={dim:t};return I.runKernel(lA,n,r)}var js,pw=D(()=>{"use strict";Z();re();$();fe();H();js=w({expandDims_:kme})});function Ame(i){let e={x:x(i,"x","expm1")};return I.runKernel(dA,e)}var UN,Ej=D(()=>{"use strict";Z();re();$();H();UN=w({expm1_:Ame})});function Pme(i,t){let e=x(i,"x","tile","string_or_numeric");A(e.rank===t.length,()=>`Error in transpose: rank of input ${e.rank} must match length of reps ${t}.`);let n={x:e},r={reps:t};return I.runKernel(l_,n,r)}var pl,fw=D(()=>{"use strict";Z();re();$();fe();H();pl=w({tile_:Pme})});function Ome(i,t,e,n="float32"){t==null&&(t=i);let r=Nr([i,t],n),o=i<=t?i:t;for(let a=0;a<o;++a)r.set(1,a,a);let s=ce(r.toTensor(),[i,t]);if(e==null)return s;if(e.length===1)return pl(js(s,0),[e[0],1,1]);if(e.length===2)return pl(js(js(s,0),0),[e[0],e[1],1,1]);if(e.length===3)return pl(js(js(js(s,0),0),0),[e[0],e[1],e[2],1,1]);throw new Error(`eye() currently supports only 1D and 2D batchShapes, but received ${e.length}D.`)}var R_,zN=D(()=>{"use strict";sl();pw();H();ei();fw();R_=w({eye_:Ome})});function Nme(i){let e={x:x(i,"x","floor","float32")};return I.runKernel(pA,e)}var F_,HN=D(()=>{"use strict";Z();re();$();H();F_=w({floor_:Nme})});function Rme(i,t,e=0,n=0){let r=x(i,"x","gather"),o=x(t,"indices","gather","int32"),s={x:r,indices:o},a={axis:e,batchDims:n};return I.runKernel(_A,s,a)}var L_,jN=D(()=>{"use strict";Z();re();$();H();L_=w({gather_:Rme})});function Fme(i,t){let e=x(i,"a","greater","string_or_numeric"),n=x(t,"b","greater","string_or_numeric");[e,n]=Kt(e,n),ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(vA,r)}var Md,gw=D(()=>{"use strict";Z();re();_n();$();dr();H();Md=w({greater_:Fme})});function Lme(i,t){let e=x(i,"a","greaterEqual","string_or_numeric"),n=x(t,"b","greaterEqual","string_or_numeric");[e,n]=Kt(e,n),ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(yA,r)}var B_,$N=D(()=>{"use strict";Z();re();_n();$();dr();H();B_=w({greaterEqual_:Lme})});function Bme(i){let e={input:x(i,"input","imag")};return I.runKernel(wA,e)}var fl,V_=D(()=>{"use strict";Z();re();$();H();fl=w({imag_:Bme})});function Vme(i){let e={x:x(i,"x","isFinite")};return I.runKernel(MA,e)}var GN,Tj=D(()=>{"use strict";Z();re();$();H();GN=w({isFinite_:Vme})});function Ume(i){let e={x:x(i,"x","isInf")};return I.runKernel(CA,e)}var WN,Ij=D(()=>{"use strict";Z();re();$();H();WN=w({isInf_:Ume})});function zme(i){let e={x:x(i,"x","isNaN")};return I.runKernel(SA,e)}var qN,Dj=D(()=>{"use strict";Z();re();$();H();qN=w({isNaN_:zme})});function Hme(i,t=.2){let n={x:x(i,"x","leakyRelu")},r={alpha:t};return I.runKernel(EA,n,r)}var U_,XN=D(()=>{"use strict";Z();re();$();H();U_=w({leakyRelu_:Hme})});function jme(i,t){let e=x(i,"a","less","string_or_numeric"),n=x(t,"b","less","string_or_numeric");[e,n]=Kt(e,n),ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(TA,r)}var Np,YN=D(()=>{"use strict";Z();re();_n();$();dr();H();Np=w({less_:jme})});function $me(i,t){let e=x(i,"a","lessEqual","string_or_numeric"),n=x(t,"b","lessEqual","string_or_numeric");[e,n]=Kt(e,n),ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(IA,r)}var dh,_w=D(()=>{"use strict";Z();re();_n();$();dr();H();dh=w({lessEqual_:$me})});function ZN(i,t,e){if(e<=0)throw new Error("The number of values should be positive.");let n={start:i,stop:t,num:e};return I.runKernel(DA,{},n)}var kj=D(()=>{"use strict";Z();re();});function Gme(i,t=5,e=1,n=1,r=.5){let o=x(i,"x","localResponseNormalization");A(o.rank===4||o.rank===3,()=>`Error in localResponseNormalization: x must be rank 3 or 4 but got
               rank ${o.rank}.`),A(el(t),()=>`Error in localResponseNormalization: depthRadius must be an integer but got depthRadius ${t}.`);let s=o,a=!1;o.rank===3&&(a=!0,s=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]]));let c={x:s},l={depthRadius:t,bias:e,alpha:n,beta:r},d=I.runKernel(RA,c,l);return a?ce(d,[d.shape[1],d.shape[2],d.shape[3]]):d}var KN,Aj=D(()=>{"use strict";Z();re();$();fe();H();ei();KN=w({localResponseNormalization_:Gme})});function Wme(i){let e={x:x(i,"x","log","float32")};return I.runKernel(kA,e)}var cc,z_=D(()=>{"use strict";Z();re();$();H();cc=w({log_:Wme})});function qme(i){let e={x:x(i,"x","log1p")};return I.runKernel(AA,e)}var H_,QN=D(()=>{"use strict";Z();re();$();H();H_=w({log1p_:qme})});function Pj(i){return A(ec(i),()=>"The f passed in grad(f) must be a function"),(t,e)=>{let n=x(t,"x","tf.grad","string_or_numeric"),r=e!=null?x(e,"dy","tf.grad"):null;return I.tidy(()=>{let{value:o,grads:s}=I.gradients(()=>i(n),[n],r);return r!=null&&ln(o.shape,r.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),vw(s),s[0]})}}function Oj(i){return A(ec(i),()=>"The f passed in grads(f) must be a function"),(t,e)=>{A(Array.isArray(t),()=>"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s");let n=il(t,"args","tf.grads","string_or_numeric"),r=e!=null?x(e,"dy","tf.grads"):null;return I.tidy(()=>{let{value:o,grads:s}=I.gradients(()=>i(...n),n,r);return r!=null&&ln(o.shape,r.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),vw(s),s})}}function Nj(i){return A(ec(i),()=>"The f passed in valueAndGrad(f) must be a function"),(t,e)=>{A(t instanceof Bi,()=>"The x passed in valueAndGrad(f)(x) must be a tensor"),A(e==null||e instanceof Bi,()=>"The dy passed in valueAndGrad(f)(x, dy) must be a tensor");let{grads:n,value:r}=I.gradients(()=>i(t),[t],e);return vw(n),{grad:n[0],value:r}}}function Rj(i){return A(ec(i),()=>"The f passed in valueAndGrads(f) must be a function"),(t,e)=>{A(Array.isArray(t)&&t.every(r=>r instanceof Bi),()=>"The args passed in valueAndGrads(f)(args) must be array of tensors"),A(e==null||e instanceof Bi,()=>"The dy passed in valueAndGrads(f)(args, dy) must be a tensor");let n=I.gradients(()=>i(...t),t,e);return e!=null&&ln(n.value.shape,e.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),vw(n.grads),n}}function bw(i,t){A(ec(i),()=>"The f passed in variableGrads(f) must be a function"),A(t==null||Array.isArray(t)&&t.every(l=>l instanceof nc),()=>"The varList passed in variableGrads(f, varList) must be an array of variables");let e=t!=null;if(!e){t=[];for(let l in I.registeredVariables)t.push(I.registeredVariables[l])}let n=e?t.filter(l=>!l.trainable):null,r=t.length;t=t.filter(l=>l.trainable),A(t.length>0,()=>`variableGrads() expects at least one of the input variables to be trainable, but none of the ${r} variables is trainable.`);let o=!0,{value:s,grads:a}=I.gradients(i,t,null,o);A(a.some(l=>l!=null),()=>"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."),A(s.rank===0,()=>`The f passed in variableGrads(f) must return a scalar, but it returned a rank-${s.rank} tensor`);let c={};return t.forEach((l,d)=>{a[d]!=null&&(c[l.name]=a[d])}),n?.forEach(l=>c[l.name]=null),{value:s,grads:c}}function Wr(i){return I.customGrad(i)}function vw(i){if(i.filter(e=>e==null).length>0)throw new Error(`Cannot compute gradient of y=f(x) with respect to x. Make sure that
    the f you passed encloses all operations that lead from x to y.`)}var gl=D(()=>{"use strict";Z();ps();$();fe();});function Xme(i){let e={x:x(i,"x","neg")};return I.runKernel(XA,e)}var Mr,_l=D(()=>{"use strict";Z();re();$();H();Mr=w({neg_:Xme})});function Yme(i){let e={x:x(i,"x","softplus")};return I.runKernel(kP,e)}var j_,JN=D(()=>{"use strict";Z();re();$();H();j_=w({softplus_:Yme})});function Zme(i){let t=x(i,"x","logSigmoid");return Wr(n=>({value:Mr(j_(Mr(n))),gradFunc:s=>Ie(s,ga(Mr(n)))}))(t)}var eR,Fj=D(()=>{"use strict";gl();$();bn();_l();H();S_();JN();eR=w({logSigmoid_:Zme})});function Kme(i,t){let e=x(i,"a","sub"),n=x(t,"b","sub");[e,n]=Kt(e,n);let r={a:e,b:n};return I.runKernel(qP,r)}var wt,hr=D(()=>{"use strict";Z();re();_n();$();H();wt=w({sub_:Kme})});function Qme(i,t=-1){let e=x(i,"logits","logSoftmax");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Log Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and axis was ${t}`);return Wr((r,o)=>{let a=ba(r,t,!0),c=wt(r,a),l=wt(si(c,"float32"),cc(Ai(fs(c),t,!0)));return o([l]),{value:l,gradFunc:(u,h)=>{let[m]=h,p=!0,_=fs(m);return wt(u,Ie(Ai(u,t,p),_))}}})(e)}var tR,Lj=D(()=>{"use strict";gl();$();Rr();Op();z_();P_();bn();H();hr();va();tR=w({logSoftmax_:Qme})});function Jme(i,t=null,e=!1){let n=x(i,"x","logSumExp"),r=md(t,n.shape),o=ba(n,r,!0),s=wt(n,o),a=fs(s),c=Ai(a,r),l=cc(c),d=at(ce(o,l.shape),l);if(e){let u=hl(d.shape,r);return ce(d,u)}return d}var $_,iR=D(()=>{"use strict";$();fe();tr();kp();Op();z_();P_();H();ei();hr();va();$_=w({logSumExp_:Jme})});function epe(i,t){let e=x(i,"a","logicalAnd","bool"),n=x(t,"b","logicalAnd","bool");ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(PA,r)}var Cd,yw=D(()=>{"use strict";Z();re();$();dr();H();Cd=w({logicalAnd_:epe})});function tpe(i){let e={x:x(i,"x","logicalNot","bool")};return I.runKernel(OA,e)}var G_,nR=D(()=>{"use strict";Z();re();$();H();G_=w({logicalNot_:tpe})});function ipe(i,t){let e=x(i,"a","logicalOr","bool"),n=x(t,"b","logicalOr","bool");ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(NA,r)}var W_,rR=D(()=>{"use strict";Z();re();$();dr();H();W_=w({logicalOr_:ipe})});function npe(i,t){let e=x(i,"a","logicalXor","bool"),n=x(t,"b","logicalXor","bool");return ki(e.shape,n.shape),Cd(W_(i,t),G_(Cd(i,t)))}var oR,Bj=D(()=>{"use strict";$();dr();yw();nR();rR();H();oR=w({logicalXor_:npe})});function rpe(i,t,e="left"){let n=x(i,"sortedSequence","searchSorted"),r=x(t,"values","searchSorted"),o=n.shape[n.shape.length-1],s=r.shape[r.shape.length-1],a=ce(n,[-1,o]),c=ce(r,[-1,s]);if(a.rank<2)throw new Error("Sorted input argument must be at least 2-dimensional");if(a.shape[0]!==c.shape[0])throw new Error("Leading dimension of 'sortedSequence' and 'values' must match.");if(oi(c.shape)>=xw)throw new Error(`values tensor size must less than ${xw}`);if(a.shape[1]>=xw)throw new Error(`trailing dim_size must less than ${xw} for int32 output type, was ${a.shape[1]}`);let l={sortedSequence:a,values:c},d={side:e};return I.runKernel(wP,l,d)}var xw,Rp,ww=D(()=>{"use strict";Z();re();$();ar();H();ei();xw=2147483648;Rp=w({searchSorted_:rpe})});function sR(i,t){return Rp(i,t,"left")}var Vj=D(()=>{"use strict";ww();});function ope(i,t,e,n,r){let o=x(i,"x","maxPool"),s=1,a=o,c=!1;o.rank===3&&(c=!0,a=ce(o,[1,o.shape[0],o.shape[1],o.shape[2]])),A(a.rank===4,()=>`Error in maxPool: input must be rank 4 but got rank ${a.rank}.`),A($r(e,s),()=>`Error in maxPool: Either strides or dilations must be 1. Got strides ${e} and dilations '${s}'`),Ln("maxPool",n,r);let l={x:a},d={filterSize:t,strides:e,pad:n,dimRoundingMode:r},u=I.runKernel(BA,l,d);return c?ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var q_,aR=D(()=>{"use strict";Z();re();$();fe();Po();H();ei();q_=w({maxPool_:ope})});function spe(i,t=[1,1,1],e,n,r,o="NDHWC"){let s=x(i,"x","maxPool3d"),a=s,c=!1;s.rank===4&&(c=!0,a=ce(s,[1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]])),A(a.rank===5,()=>`Error in maxPool3d: x must be rank 5 but got rank ${a.rank}.`),A(o==="NDHWC",()=>`Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of ${o}`),Ln("maxPool3d",n,r);let l={x:a},d={filterSize:t,strides:e,pad:n,dimRoundingMode:r,dataFormat:o},u=I.runKernel(VA,l,d);return c?ce(u,[u.shape[1],u.shape[2],u.shape[3],u.shape[4]]):u}var cR,Uj=D(()=>{"use strict";Z();re();$();fe();Po();H();ei();cR=w({maxPool3d_:spe})});function ape(i,t,e,n,r=!1){let s={x:x(i,"x","maxPoolWithArgmax")},a={filterSize:t,strides:e,pad:n,includeBatchInIndex:r},c=I.runKernel(UA,s,a);return{result:c[0],indexes:c[1]}}var lR,zj=D(()=>{"use strict";Z();re();$();H();lR=w({maxPoolWithArgmax_:ape})});function cpe(i,t){let e=x(i,"a","maximum"),n=x(t,"b","maximum");[e,n]=Kt(e,n),e.dtype==="bool"&&(e=si(e,"int32"),n=si(n,"int32")),ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(LA,r)}var X_,dR=D(()=>{"use strict";Z();re();_n();$();dr();Rr();H();X_=w({maximum_:cpe})});function lpe(i,t=null,e=!1){let r={x:x(i,"x","mean")},o={axis:t,keepDims:e};return I.runKernel(zA,r,o)}var Sd,Mw=D(()=>{"use strict";Z();re();$();H();Sd=w({mean_:lpe})});function ya(i,t="float32"){if(fn(i),t==="complex64"){let n=ya(i,"float32"),r=ya(i,"float32");return ro(n,r)}let e=up(oi(i),t);return I.makeTensor(e,i,t)}var Y_=D(()=>{"use strict";Z();fe();_d();});function xa(i,t="float32"){if(fn(i),t==="complex64"){let n=xa(i,"float32"),r=ya(i,"float32");return ro(n,r)}let e=r_(oi(i),t);return I.makeTensor(e,i,t)}var Cw=D(()=>{"use strict";Z();fe();ar();_d();Y_();});function uR(i,t,{indexing:e="xy"}={}){if(e!=="xy"&&e!=="ij")throw new TypeError(`${e} is not a valid third argument to meshgrid`);if(i===void 0)return[];let n=x(i,"x","meshgrid",i instanceof Bi?i.dtype:"float32");if(t===void 0)return[n];let r=x(t,"y","meshgrid",t instanceof Bi?t.dtype:"float32"),o=oi(n.shape),s=oi(r.shape);return e==="xy"?(n=ce(n,[1,-1]),r=ce(r,[-1,1]),[Mi(xa([s,1],n.dtype),n),Mi(r,xa([1,o],r.dtype))]):(n=ce(n,[-1,1]),r=ce(r,[1,-1]),[Mi(n,xa([1,s],n.dtype)),Mi(xa([o,1],r.dtype),r)])}var Hj=D(()=>{"use strict";al();Cw();ei();ps();$();ar();});function dpe(i,t){let e=x(i,"a","minimum"),n=x(t,"b","minimum");[e,n]=Kt(e,n),e.dtype==="bool"&&(e=si(e,"int32"),n=si(n,"int32")),ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(jA,r)}var Ed,Sw=D(()=>{"use strict";Z();re();_n();$();dr();Rr();H();Ed=w({minimum_:dpe})});function upe(i,t,e){A(e==="reflect"||e==="symmetric",()=>`Invalid mode. Mode must be either reflect or symmetric. Got ${e}.`);let n=x(i,"x","mirrorPad");if(n.rank===0)throw new Error("mirrorPad(scalar) is not defined. Pass non-scalar to mirrorPad");A(t.length===n.rank,()=>`Padding doesn't match input. Must be ${n.rank}. Got ${t.length}.`);let r=e==="reflect"?1:0;for(let a=0;a<n.rank;a++)A(t[a].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),A(t[a][0]>=0&&t[a][0]<=n.shape[a]-r&&t[a][1]>=0&&t[a][1]<=n.shape[a]-r,()=>`Padding in dimension ${a} cannot be greater than or equal to ${n.shape[a]-r} or less than 0 for input of shape ${n.shape}`);let o={paddings:t,mode:e},s={x:n};return I.runKernel($A,s,o)}var hR,jj=D(()=>{"use strict";Z();re();$();fe();H();hR=w({mirrorPad_:upe})});function hpe(i,t){let e=x(i,"a","mod"),n=x(t,"b","mod");[e,n]=Kt(e,n);let r={a:e,b:n};return I.runKernel(GA,r)}var mR,$j=D(()=>{"use strict";Z();re();_n();$();H();mR=w({mod_:hpe})});function mpe(i,t=null,e=!1){i=x(i,"x","moments");let n=md(t,i.shape),r=Sd(i,n,e),o=r.shape;e||(o=hl(r.shape,n));let s=ur(wt(si(i,"float32"),ce(r,o))),a=Sd(s,n,e);return{mean:r,variance:a}}var pR,Gj=D(()=>{"use strict";$();fe();kp();Rr();Mw();H();ei();ml();hr();pR=w({moments_:mpe})});function ppe(i,t,e,n){let r=x(t,"data","multiRNNCell"),o=il(e,"c","multiRNNCell"),s=il(n,"h","multiRNNCell"),a=r,c=[];for(let u=0;u<i.length;u++){let h=i[u](a,o[u],s[u]);c.push(h[0]),c.push(h[1]),a=h[1]}let l=[],d=[];for(let u=0;u<c.length;u+=2)l.push(c[u]),d.push(c[u+1]);return[l,d]}var fR,Wj=D(()=>{"use strict";$();H();fR=w({multiRNNCell_:ppe})});function fpe(i,t,e,n=!1){let r=x(i,"logits","multinomial"),o=r.size,s=r.rank;if(o<2)throw new Error(`Error in multinomial: you need at least 2 outcomes, but got ${o}.`);if(s>2)throw new Error(`Rank of probabilities must be 1 or 2, but is ${s}`);e=e||Math.random();let c={logits:s===1?ce(r,[1,-1]):r},l={numSamples:t,seed:e,normalized:n},d=I.runKernel(WA,c,l);return s===1?ce(d,[d.size]):d}var gR,qj=D(()=>{"use strict";Z();re();$();H();ei();gR=w({multinomial_:fpe})});function gpe(i,t){let e=x(i,"a","notEqual","string_or_numeric"),n=x(t,"b","notEqual","string_or_numeric");[e,n]=Kt(e,n),ki(e.shape,n.shape);let r={a:e,b:n};return I.runKernel(YA,r)}var Z_,_R=D(()=>{"use strict";Z();re();_n();$();dr();H();Z_=w({notEqual_:gpe})});function _pe(i,t,e=1,n=0,r="int32"){if(t<2)throw new Error(`Error in oneHot: depth must be >=2, but it is ${t}`);let s={indices:x(i,"indices","oneHot","int32")},a={dtype:r,depth:t,onValue:e,offValue:n};return I.runKernel(eP,s,a)}var Fp,bR=D(()=>{"use strict";Z();re();$();H();Fp=w({oneHot_:_pe})});function bpe(i){let e={x:x(i,"x","onesLike")};return I.runKernel(JA,e)}var vR,Xj=D(()=>{"use strict";Z();re();$();H();vR=w({onesLike_:bpe})});function vpe(i,t){let e=x(i,"v1","outerProduct"),n=x(t,"v2","outerProduct");A(e.rank===1&&n.rank===1,()=>`Error in outerProduct: inputs must be rank 1, but got ranks ${e.rank} and ${n.rank}.`);let r=ce(e,[-1,1]),o=ce(n,[1,-1]);return Mi(r,o)}var yR,Yj=D(()=>{"use strict";$();fe();al();H();ei();yR=w({outerProduct_:vpe})});function ype(i,t,e=0){let n=x(i,"x","pad");if(n.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");let r={paddings:t,constantValue:e},o={x:n};return I.runKernel(iP,o,r)}var wa,Lp=D(()=>{"use strict";Z();re();$();H();wa=w({pad_:ype})});function xpe(i,t,e=0){return A(t.length===2,()=>"Invalid number of paddings. Must be length of 2."),wa(i,[t],e)}var xR,Zj=D(()=>{"use strict";fe();H();Lp();xR=w({pad1d_:xpe})});function wpe(i,t,e=0){return A(t.length===2&&t[0].length===2&&t[1].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wa(i,t,e)}var wR,Kj=D(()=>{"use strict";fe();H();Lp();wR=w({pad2d_:wpe})});function Mpe(i,t,e=0){return A(t.length===3&&t[0].length===2&&t[1].length===2&&t[2].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wa(i,t,e)}var MR,Qj=D(()=>{"use strict";fe();H();Lp();MR=w({pad3d_:Mpe})});function Cpe(i,t,e=0){return A(t.length===4&&t[0].length===2&&t[1].length===2&&t[2].length===2&&t[3].length===2,()=>"Invalid number of paddings. Must be length of 2 each."),wa(i,t,e)}var CR,Jj=D(()=>{"use strict";fe();H();Lp();CR=w({pad4d_:Cpe})});function Spe(i,t,e){let n=x(i,"x","spaceToBatchND");A(n.rank>=1+t.length,()=>`input rank ${n.rank} should be > than [blockShape] ${t.length}`),A(e.length===t.length,()=>`paddings.shape[0] ${e.length} must be equal to [blockShape] ${t.length}`),A(n.shape.reduce((s,a,c)=>c>0&&c<=t.length?s&&(a+e[c-1][0]+e[c-1][1])%t[c-1]===0:s,!0),()=>`input spatial dimensions ${n.shape.slice(1)} with paddings ${e.toString()} must be divisible by blockShapes ${t.toString()}`);let r={x:n},o={blockShape:t,paddings:e};return I.runKernel(OP,r,o)}var K_,SR=D(()=>{"use strict";Z();re();$();fe();H();K_=w({spaceToBatchND_:Spe})});function Epe(i,t,e,n,r,o,s){r==null&&(r=[1,1]),o==null&&(o=1),n===0&&(n="valid");let a=x(i,"x","maxPool"),c=a,l=!1;a.rank===3&&(l=!0,c=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),A($r(o,r),()=>`Error in pool: Either strides or dilations must be 1. Got strides ${o} and dilations '${r}'`);let d=KO(c.shape,t,o,r,n),u=[d.dilationHeight,d.dilationWidth],h;n==="same"?h=Ipe([d.filterHeight,d.filterWidth],u):h=[[0,0],[0,0]];let m=u[0]===1&&u[1]===1,[p,_]=Tpe([d.inHeight,d.inWidth],u,h),f=m?n:"valid",g=m?c:K_(c,u,p),C=(e==="avg"?()=>C_(g,t,o,f,s):()=>q_(g,t,o,f,s))(),E=m?C:E_(C,u,_);return l?ce(E,[E.shape[1],E.shape[2],E.shape[3]]):E}function Tpe(i,t,e){let n=e.map(d=>d[0]),r=e.map(d=>d[1]),o=i.concat(n,r),s=t.map((d,u)=>(d-o[u]%d)%d),a=r.map((d,u)=>d+s[u]),c=t.map((d,u)=>[n[u],a[u]]),l=t.map((d,u)=>[0,s[u]]);return[c,l]}function Ipe(i,t){let n=i.map((s,a)=>s+(s-1)*(t[a]-1)).map(s=>s-1),r=n.map(s=>Math.floor(s/2)),o=n.map((s,a)=>s-r[a]);return n.map((s,a)=>[r[a],o[a]])}var ER,e$=D(()=>{"use strict";$();fe();JO();nN();Po();aR();H();ei();SR();ER=w({pool_:Epe})});function Dpe(i,t){let e=x(i,"x","prelu"),n=x(t,"alpha","prelu"),r={x:e,alpha:n};return I.runKernel(rP,r)}var Q_,TR=D(()=>{"use strict";Z();re();$();H();Q_=w({prelu_:Dpe})});function kpe(i,t=null,e=!1){let n=x(i,"x","prod");n.dtype==="bool"&&(n=si(n,"int32"));let r={x:n},o={axis:t,keepDims:e};return I.runKernel(oP,r,o)}var IR,t$=D(()=>{"use strict";Z();re();$();Rr();H();IR=w({prod_:kpe})});function Ape(i,t,e,n){let r=i.map((d,u)=>x(d,`tensors${u}`,"raggedGather","int32")),o=x(t,"paramsDenseValues","raggedGather"),s=x(e,"indices","raggedGather","int32"),a={paramsNestedSplits:r,paramsDenseValues:o,indices:s},c={outputRaggedRank:n},l=I.runKernel(sP,a,c);return{outputNestedSplits:l.slice(0,l.length-1),outputDenseValues:l[l.length-1]}}var DR,i$=D(()=>{"use strict";Z();re();$();H();DR=w({raggedGather_:Ape})});function Ppe(i,t,e){let n=x(i,"starts","raggedRange"),r=x(t,"limits","raggedRange",n.dtype),o=x(e,"deltas","raggedRange",n.dtype),s={starts:n,limits:r,deltas:o},a=I.runKernel(aP,s);return{rtNestedSplits:a[0],rtDenseValues:a[1]}}var kR,n$=D(()=>{"use strict";Z();re();$();H();kR=w({raggedRange_:Ppe})});function Ope(i,t,e,n,r){let o=x(i,"shape","raggedTensorToTensor","int32"),s=x(t,"values","raggedTensorToTensor"),a=x(e,"defaultValue","raggedTensorToTensor",s.dtype),c=n.map((u,h)=>x(u,`tensors${h}`,"raggedTensorToTensor","int32")),l={shape:o,values:s,defaultValue:a,rowPartitionTensors:c},d={rowPartitionTypes:r};return I.runKernel(cP,l,d)}var AR,r$=D(()=>{"use strict";Z();re();$();H();AR=w({raggedTensorToTensor_:Ope})});function Npe(i,t,e){fn(i);let n=oi(i),r=null;if(e==null||e==="float32")r=new Float32Array(n);else if(e==="int32")r=new Int32Array(n);else if(e==="bool")r=new Uint8Array(n);else throw new Error(`Unknown data type ${e}`);for(let o=0;o<n;o++)r[o]=t();return I.makeTensor(r,i,e)}var PR,o$=D(()=>{"use strict";Z();fe();ar();H();PR=w({rand_:Npe})});var a$=os((s$,OR)=>{"use strict";(function(i,t,e){function n(a){var c=this,l=s();c.next=function(){var d=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=d-(c.c=d|0)},c.c=1,c.s0=l(" "),c.s1=l(" "),c.s2=l(" "),c.s0-=l(a),c.s0<0&&(c.s0+=1),c.s1-=l(a),c.s1<0&&(c.s1+=1),c.s2-=l(a),c.s2<0&&(c.s2+=1),l=null}function r(a,c){return c.c=a.c,c.s0=a.s0,c.s1=a.s1,c.s2=a.s2,c}function o(a,c){var l=new n(a),d=c&&c.state,u=l.next;return u.int32=function(){return l.next()*4294967296|0},u.double=function(){return u()+(u()*2097152|0)*11102230246251565e-32},u.quick=u,d&&(typeof d=="object"&&r(d,l),u.state=function(){return r(l,{})}),u}function s(){var a=4022871197,c=function(l){l=String(l);for(var d=0;d<l.length;d++){a+=l.charCodeAt(d);var u=.02519603282416938*a;a=u>>>0,u-=a,u*=a,a=u>>>0,u-=a,a+=u*4294967296}return(a>>>0)*23283064365386963e-26};return c}t&&t.exports?t.exports=o:e&&e.amd?e(function(){return o}):this.alea=o})(s$,typeof OR=="object"&&OR,typeof define=="function"&&define)});var l$=os((c$,NR)=>{"use strict";(function(i,t,e){function n(s){var a=this,c="";a.x=0,a.y=0,a.z=0,a.w=0,a.next=function(){var d=a.x^a.x<<11;return a.x=a.y,a.y=a.z,a.z=a.w,a.w^=a.w>>>19^d^d>>>8},s===(s|0)?a.x=s:c+=s;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,a.next()}function r(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a}function o(s,a){var c=new n(s),l=a&&a.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var u=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(u+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,l&&(typeof l=="object"&&r(l,c),d.state=function(){return r(c,{})}),d}t&&t.exports?t.exports=o:e&&e.amd?e(function(){return o}):this.xor128=o})(c$,typeof NR=="object"&&NR,typeof define=="function"&&define)});var u$=os((d$,RR)=>{"use strict";(function(i,t,e){function n(s){var a=this,c="";a.next=function(){var d=a.x^a.x>>>2;return a.x=a.y,a.y=a.z,a.z=a.w,a.w=a.v,(a.d=a.d+362437|0)+(a.v=a.v^a.v<<4^(d^d<<1))|0},a.x=0,a.y=0,a.z=0,a.w=0,a.v=0,s===(s|0)?a.x=s:c+=s;for(var l=0;l<c.length+64;l++)a.x^=c.charCodeAt(l)|0,l==c.length&&(a.d=a.x<<10^a.x>>>4),a.next()}function r(s,a){return a.x=s.x,a.y=s.y,a.z=s.z,a.w=s.w,a.v=s.v,a.d=s.d,a}function o(s,a){var c=new n(s),l=a&&a.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var u=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(u+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,l&&(typeof l=="object"&&r(l,c),d.state=function(){return r(c,{})}),d}t&&t.exports?t.exports=o:e&&e.amd?e(function(){return o}):this.xorwow=o})(d$,typeof RR=="object"&&RR,typeof define=="function"&&define)});var m$=os((h$,FR)=>{"use strict";(function(i,t,e){function n(s){var a=this;a.next=function(){var l=a.x,d=a.i,u,h,m;return u=l[d],u^=u>>>7,h=u^u<<24,u=l[d+1&7],h^=u^u>>>10,u=l[d+3&7],h^=u^u>>>3,u=l[d+4&7],h^=u^u<<7,u=l[d+7&7],u=u^u<<13,h^=u^u<<9,l[d]=h,a.i=d+1&7,h};function c(l,d){var u,h,m=[];if(d===(d|0))h=m[0]=d;else for(d=""+d,u=0;u<d.length;++u)m[u&7]=m[u&7]<<15^d.charCodeAt(u)+m[u+1&7]<<13;for(;m.length<8;)m.push(0);for(u=0;u<8&&m[u]===0;++u);for(u==8?h=m[7]=-1:h=m[u],l.x=m,l.i=0,u=256;u>0;--u)l.next()}c(a,s)}function r(s,a){return a.x=s.x.slice(),a.i=s.i,a}function o(s,a){s==null&&(s=+new Date);var c=new n(s),l=a&&a.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var u=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(u+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,l&&(l.x&&r(l,c),d.state=function(){return r(c,{})}),d}t&&t.exports?t.exports=o:e&&e.amd?e(function(){return o}):this.xorshift7=o})(h$,typeof FR=="object"&&FR,typeof define=="function"&&define)});var f$=os((p$,LR)=>{"use strict";(function(i,t,e){function n(s){var a=this;a.next=function(){var l=a.w,d=a.X,u=a.i,h,m;return a.w=l=l+1640531527|0,m=d[u+34&127],h=d[u=u+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=d[u]=m^h,a.i=u,m+(l^l>>>16)|0};function c(l,d){var u,h,m,p,_,f=[],g=128;for(d===(d|0)?(h=d,d=null):(d=d+"\0",h=0,g=Math.max(g,d.length)),m=0,p=-32;p<g;++p)d&&(h^=d.charCodeAt((p+32)%d.length)),p===0&&(_=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,p>=0&&(_=_+1640531527|0,u=f[p&127]^=h+_,m=u==0?m+1:0);for(m>=128&&(f[(d&&d.length||0)&127]=-1),m=127,p=4*128;p>0;--p)h=f[m+34&127],u=f[m=m+1&127],h^=h<<13,u^=u<<17,h^=h>>>15,u^=u>>>12,f[m]=h^u;l.w=_,l.X=f,l.i=m}c(a,s)}function r(s,a){return a.i=s.i,a.w=s.w,a.X=s.X.slice(),a}function o(s,a){s==null&&(s=+new Date);var c=new n(s),l=a&&a.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var u=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(u+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,l&&(l.X&&r(l,c),d.state=function(){return r(c,{})}),d}t&&t.exports?t.exports=o:e&&e.amd?e(function(){return o}):this.xor4096=o})(p$,typeof LR=="object"&&LR,typeof define=="function"&&define)});var _$=os((g$,BR)=>{"use strict";(function(i,t,e){function n(s){var a=this,c="";a.next=function(){var d=a.b,u=a.c,h=a.d,m=a.a;return d=d<<25^d>>>7^u,u=u-h|0,h=h<<24^h>>>8^m,m=m-d|0,a.b=d=d<<20^d>>>12^u,a.c=u=u-h|0,a.d=h<<16^u>>>16^m,a.a=m-d|0},a.a=0,a.b=0,a.c=-1640531527,a.d=1367130551,s===Math.floor(s)?(a.a=s/4294967296|0,a.b=s|0):c+=s;for(var l=0;l<c.length+20;l++)a.b^=c.charCodeAt(l)|0,a.next()}function r(s,a){return a.a=s.a,a.b=s.b,a.c=s.c,a.d=s.d,a}function o(s,a){var c=new n(s),l=a&&a.state,d=function(){return(c.next()>>>0)/4294967296};return d.double=function(){do var u=c.next()>>>11,h=(c.next()>>>0)/4294967296,m=(u+h)/(1<<21);while(m===0);return m},d.int32=c.next,d.quick=d,l&&(typeof l=="object"&&r(l,c),d.state=function(){return r(c,{})}),d}t&&t.exports?t.exports=o:e&&e.amd?e(function(){return o}):this.tychei=o})(g$,typeof BR=="object"&&BR,typeof define=="function"&&define)});var b$=os(()=>{"use strict"});var y$=os((v$,Ew)=>{"use strict";(function(i,t,e){var n=256,r=6,o=52,s="random",a=e.pow(n,r),c=e.pow(2,o),l=c*2,d=n-1,u;function h(C,E,N){var R=[];E=E==!0?{entropy:!0}:E||{};var B=f(_(E.entropy?[C,S(t)]:C??g(),3),R),z=new m(R),T=function(){for(var O=z.g(r),U=a,X=0;O<c;)O=(O+X)*n,U*=n,X=z.g(1);for(;O>=l;)O/=2,U/=2,X>>>=1;return(O+X)/U};return T.int32=function(){return z.g(4)|0},T.quick=function(){return z.g(4)/4294967296},T.double=T,f(S(z.S),t),(E.pass||N||function(O,U,X,ee){return ee&&(ee.S&&p(ee,z),O.state=function(){return p(z,{})}),X?(e[s]=O,U):O})(T,B,"global"in E?E.global:this==e,E.state)}function m(C){var E,N=C.length,R=this,B=0,z=R.i=R.j=0,T=R.S=[];for(N||(C=[N++]);B<n;)T[B]=B++;for(B=0;B<n;B++)T[B]=T[z=d&z+C[B%N]+(E=T[B])],T[z]=E;(R.g=function(O){for(var U,X=0,ee=R.i,de=R.j,se=R.S;O--;)U=se[ee=d&ee+1],X=X*n+se[d&(se[ee]=se[de=d&de+U])+(se[de]=U)];return R.i=ee,R.j=de,X})(n)}function p(C,E){return E.i=C.i,E.j=C.j,E.S=C.S.slice(),E}function _(C,E){var N=[],R=typeof C,B;if(E&&R=="object")for(B in C)try{N.push(_(C[B],E-1))}catch{}return N.length?N:R=="string"?C:C+"\0"}function f(C,E){for(var N=C+"",R,B=0;B<N.length;)E[d&B]=d&(R^=E[d&B]*19)+N.charCodeAt(B++);return S(E)}function g(){try{var C;return u&&(C=u.randomBytes)?C=C(n):(C=new Uint8Array(n),(i.crypto||i.msCrypto).getRandomValues(C)),S(C)}catch{var E=i.navigator,N=E&&E.plugins;return[+new Date,i,N,i.screen,S(t)]}}function S(C){return String.fromCharCode.apply(0,C)}if(f(e.random(),t),typeof Ew=="object"&&Ew.exports){Ew.exports=h;try{u=b$()}catch{}}else typeof define=="function"&&define.amd?define(function(){return h}):e["seed"+s]=h})(typeof self<"u"?self:v$,[],Math)});var w$=os((xYe,x$)=>{"use strict";var Rpe=a$(),Fpe=l$(),Lpe=u$(),Bpe=m$(),Vpe=f$(),Upe=_$(),uh=y$();uh.alea=Rpe;uh.xor128=Fpe;uh.xorwow=Lpe;uh.xorshift7=Bpe;uh.xor4096=Vpe;uh.tychei=Upe;x$.exports=uh});var HR={};Ei(HR,{TEST_EPSILON_FLOAT16:()=>M$,createVideoElement:()=>Xpe,encodeStrings:()=>C$,expectArrayBuffersEqual:()=>qpe,expectArraysClose:()=>Hpe,expectArraysEqual:()=>$pe,expectNumbersClose:()=>Gpe,expectPromiseToFail:()=>jpe,expectValuesInRange:()=>Wpe,play:()=>Ype,testEpsilon:()=>UR});function Hpe(i,t,e){return e==null&&(e=UR()),VR(i,t,(n,r)=>zR(n,r,e))}function UR(){return I.backend.floatPrecision()===32?zpe:M$}function VR(i,t,e){let n=!0;if((Rn(i)||Rn(t))&&(n=!1),Rn(i)&&Rn(t)&&(n=!0),n){let s=i.constructor.name,a=t.constructor.name;if(s!==a)throw new Error(`Arrays are of different type. Actual: ${s}. Expected: ${a}`)}if(Array.isArray(i)&&Array.isArray(t)){let s=Pr(i),a=Pr(t);if(!io(s,a))throw new Error(`Arrays have different shapes. Actual: [${s}]. Expected: [${a}]`)}let r=Rn(i)?i:ha(i),o=Rn(t)?t:ha(t);if(r.length!==o.length)throw new Error(`Arrays have different lengths actual: ${r.length} vs expected: ${o.length}.
Actual:   ${r}.
Expected: ${o}.`);for(let s=0;s<o.length;++s){let a=r[s],c=o[s];if(!e(a,c))throw new Error(`Arrays differ: actual[${s}] = ${a}, expected[${s}] = ${c}.
Actual:   ${r}.
Expected: ${o}.`)}typeof expect<"u"&&expect().nothing()}function jpe(i,t){i().then(()=>t.fail(),()=>t()),typeof expect<"u"&&expect().nothing()}function $pe(i,t){let e=typeof t=="string"||typeof t=="number"||typeof t=="boolean"?[t]:t;return da(i)||da(i[0])||da(t)||da(t[0])?VR(i,e,(n,r)=>n==r):VR(i,t,(n,r)=>zR(n,r,0))}function Gpe(i,t,e){if(e==null&&(e=UR()),!zR(i,t,e))throw new Error(`Numbers differ: actual === ${i}, expected === ${t}`);typeof expect<"u"&&expect().nothing()}function zR(i,t,e){return!isFinite(i)&&!isFinite(t)?!0:!(isNaN(i)||isNaN(t)||Math.abs(i-t)>e)}function Wpe(i,t,e){for(let n=0;n<i.length;n++)if(i[n]<t||i[n]>e)throw new Error(`Value out of range:${i[n]} low: ${t}, high: ${e}`)}function qpe(i,t){let e=new Float32Array(i),n=new Float32Array(t);if(e.length!==n.length)throw new Error(`Expected ArrayBuffer to be of length ${n.length}, but it was ${e.length}`);for(let r=0;r<n.length;r++)if(e[r]!==n[r])throw new Error(`Expected ArrayBuffer value at ${r} to be ${n[r]} but got ${e[r]} instead`)}function C$(i){for(let t=0;t<i.length;t++){let e=i[t];Array.isArray(e)?C$(e):i[t]=gd(e)}return i}function Xpe(i){let t=document.createElement("video");return"playsInline"in t&&(t.playsInline=!0),t.muted=!0,t.loop=!0,t.style.position="fixed",t.style.left="0px",t.style.top="0px",t.preload="auto",t.appendChild(i),new Promise(e=>{t.addEventListener("loadeddata",n=>e(t)),t.load()})}function Ype(i){return oe(this,null,function*(){yield i.play(),"requestVideoFrameCallback"in i&&(yield new Promise(t=>{i.requestVideoFrameCallback(t)}))})}var zpe,M$,S$=D(()=>{"use strict";Z();$();fe();zpe=.001,M$=.1});var Dw,hh,Tw,Iw,J_=D(()=>{"use strict";Dw=g1(w$());hh=class{constructor(t,e,n,r,o){this.mean=t,this.stdDev=e,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+this.stdDev*2,this.lower=this.mean-this.stdDev*2);let s=o||Math.random();this.random=Dw.alea(s.toString())}nextValue(){if(!isNaN(this.nextVal)){let r=this.nextVal;return this.nextVal=NaN,r}let t,e,n=!1;for(;!n;){let r,o,s;do r=2*this.random()-1,o=2*this.random()-1,s=r*r+o*o;while(s>=1||s===0);let a=Math.sqrt(-2*Math.log(s)/s);t=this.mean+this.stdDev*r*a,e=this.mean+this.stdDev*o*a,(!this.truncated||this.isValidTruncated(t))&&(n=!0)}return(!this.truncated||this.isValidTruncated(e))&&(this.nextVal=this.convertValue(e)),this.convertValue(t)}convertValue(t){return this.dtype==null||this.dtype==="float32"?t:Math.round(t)}isValidTruncated(t){return t<=this.upper&&t>=this.lower}},Tw=class{constructor(t,e,n,r){this.alpha=t,this.beta=1/e,this.dtype=n;let o=r||Math.random();this.randu=Dw.alea(o.toString()),this.randn=new hh(0,1,n,!1,this.randu()),t<1?this.d=t+2/3:this.d=t-1/3,this.c=1/Math.sqrt(9*this.d)}nextValue(){let t,e,n,r,o,s;for(;;){do r=this.randn.nextValue(),s=1+this.c*r;while(s<=0);if(s*=s*s,t=r*r,e=1-.331*t*t,n=.5*t+this.d*(1-s+Math.log(s)),o=this.randu(),o<e||Math.log(o)<n)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)}convertValue(t){return this.dtype==="float32"?t:Math.round(t)}},Iw=class{constructor(t=0,e=1,n,r){if(this.canReturnFloat=()=>this.dtype==null||this.dtype==="float32",this.min=t,this.range=e-t,this.dtype=n,r==null&&(r=Math.random()),typeof r=="number"&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error(`The difference between ${t} - ${e} <= 1 and dtype is not float`);this.random=Dw.alea(r)}convertValue(t){return this.canReturnFloat()?t:Math.round(t)}nextValue(){return this.convertValue(this.min+this.range*this.random())}}});function Zpe(i,t,e=1,n="float32",r){if(fn(i),e==null&&(e=1),n==null&&(n="float32"),n!=="float32"&&n!=="int32")throw new Error(`Unsupported data type ${n}`);let o=new Tw(t,e,n,r),s=Nr(i,n);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}var jR,E$=D(()=>{"use strict";ar();sl();H();J_();jR=w({randomGamma_:Zpe})});function Kpe(i,t=0,e=1,n,r){if(fn(i),n!=null&&n==="bool")throw new Error(`Unsupported data type ${n}`);let o=new hh(t,e,n,!1,r),s=Nr(i,n);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}var e0,$R=D(()=>{"use strict";ar();sl();H();J_();e0=w({randomNormal_:Kpe})});function Qpe(i,t,e){if(t!=null&&t==="bool")throw new Error(`Unsupported data type ${t}`);return e0(i,0,1,t,e)}var GR,T$=D(()=>{"use strict";H();$R();GR=w({randomStandardNormal_:Qpe})});function Jpe(i,t=0,e=1,n="float32",r){fn(i);let o=Nr(i,n),s=new Iw(t,e,null,r);for(let a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}var mh,kw=D(()=>{"use strict";ar();sl();H();J_();mh=w({randomUniform_:Jpe})});function efe(i,t,e,n){return mh(i,t,e,"int32",n)}var WR,I$=D(()=>{"use strict";H();kw();WR=w({randomUniformInt_:efe})});function bl(i,t,e=1,n="float32"){if(e===0)throw new Error("Cannot have a step of zero");let r={start:i,stop:t,step:e,dtype:n};return I.runKernel(lP,{},r)}var Aw=D(()=>{"use strict";Z();re();});function tfe(i){let e={input:x(i,"input","real")};return I.runKernel(dP,e)}var lc,t0=D(()=>{"use strict";Z();re();$();H();lc=w({real_:tfe})});function ife(i){let e={x:x(i,"x","reciprocal")};return I.runKernel(uP,e)}var qR,D$=D(()=>{"use strict";Z();re();$();H();qR=w({reciprocal_:ife})});function nfe(i){let e={x:x(i,"x","relu")};return I.runKernel(hP,e)}var vl,i0=D(()=>{"use strict";Z();re();$();H();vl=w({relu_:nfe})});function rfe(i){let e={x:x(i,"x","relu6")};return I.runKernel(gP,e)}var n0,XR=D(()=>{"use strict";Z();re();$();H();n0=w({relu6_:rfe})});function ofe(i,t){let n={x:x(i,"x","reverse")},r={dims:t};return I.runKernel(_P,n,r)}var Yo,ph=D(()=>{"use strict";Z();re();$();H();Yo=w({reverse_:ofe})});function sfe(i){let t=x(i,"x","reverse");return A(t.rank===1,()=>`Error in reverse1D: x must be rank 1 but got rank ${t.rank}.`),Yo(t,0)}var YR,k$=D(()=>{"use strict";$();fe();H();ph();YR=w({reverse1d_:sfe})});function afe(i,t){let e=x(i,"x","reverse");return A(e.rank===2,()=>`Error in reverse2D: x must be rank 2 but got rank ${e.rank}.`),Yo(e,t)}var ZR,A$=D(()=>{"use strict";$();fe();H();ph();ZR=w({reverse2d_:afe})});function cfe(i,t){let e=x(i,"x","reverse");return A(e.rank===3,()=>`Error in reverse3D: x must be rank 3 but got rank ${e.rank}.`),Yo(e,t)}var KR,P$=D(()=>{"use strict";$();fe();H();ph();KR=w({reverse3d_:cfe})});function lfe(i,t){let e=x(i,"x","reverse");return A(e.rank===4,()=>`Error in reverse4D: x must be rank 4 but got rank ${e.rank}.`),Yo(e,t)}var QR,O$=D(()=>{"use strict";$();fe();H();ph();QR=w({reverse4d_:lfe})});function dfe(i){let e={x:x(i,"x","round")};return I.runKernel(bP,e)}var r0,JR=D(()=>{"use strict";Z();re();$();H();r0=w({round_:dfe})});function ufe(i){let e={x:x(i,"x","rsqrt","float32")};return I.runKernel(vP,e)}var e2,N$=D(()=>{"use strict";Z();re();$();H();e2=w({rsqrt_:ufe})});function hfe(i){let e={x:x(i,"x","selu")};return I.runKernel(CP,e)}var t2,R$=D(()=>{"use strict";Z();re();$();H();t2=w({selu_:hfe})});function mfe(i,t,e,n,r,o=[1,1],s="NHWC"){let a=x(i,"x","separableConv2d"),c=x(t,"depthwiseFilter","separableConv2d"),l=x(e,"pointwiseFilter","separableConv2d"),d=a,u=!1;if(a.rank===3&&(u=!0,d=ce(a,[1,a.shape[0],a.shape[1],a.shape[2]])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");A(d.rank===4,()=>`Error in separableConv2d: input must be rank 4, but got rank ${d.rank}.`),A(c.rank===4,()=>`Error in separableConv2d: depthwise filter must be rank 4, but got rank ${c.rank}.`),A(l.rank===4,()=>`Error in separableConv2d: pointwise filter must be rank 4, but got rank ${c.rank}.`),A(l.shape[0]===1,()=>`Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got ${l.shape[0]}.`),A(l.shape[1]===1,()=>`Error in separableConv2d: the second dimension of pointwise filter must be 1, but got ${l.shape[1]}.`);let h=c.shape[2],m=c.shape[3];A(l.shape[2]===h*m,()=>`Error in separableConv2d: the third dimension of pointwise filter must be ${h*m}, but got ${l.shape[2]}.`);let p=ch(d,c,n,r,s,o),f=ll(p,l,1,"valid",s);return u?ce(f,[f.shape[1],f.shape[2],f.shape[3]]):f}var i2,F$=D(()=>{"use strict";$();fe();D_();hw();H();ei();i2=w({separableConv2d_:mfe})});function pfe(i,t){return oe(this,null,function*(){let e=x(i,"x","setdiff1d"),n=x(t,"y","setdiff1d");A(e.dtype===n.dtype,()=>`x and y should have the same dtype, but got x (${e.dtype}) and y (${n.dtype}).`),A(e.rank===1,()=>`x should be 1D tensor, but got x (${e.shape}).`),A(n.rank===1,()=>`y should be 1D tensor, but got y (${n.shape}).`);let r=yield e.data(),o=yield n.data(),s=new Set(o),a=0;for(let d=0;d<r.length;d++)s.has(r[d])||a++;let c=new tl([a],e.dtype),l=new tl([a],"int32");for(let d=0,u=0;d<r.length;d++)s.has(r[d])||(c.values[u]=r[d],l.values[u]=d,u++);return[c.toTensor(),l.toTensor()]})}var n2,L$=D(()=>{"use strict";ps();$();fe();n2=pfe});function ffe(i){let e={x:x(i,"x","sign")};return I.runKernel(IP,e)}var r2,B$=D(()=>{"use strict";Z();re();$();H();r2=w({sign_:ffe})});function gfe(i){let e={x:x(i,"x","sin","float32")};return I.runKernel(EP,e)}var o2,V$=D(()=>{"use strict";Z();re();$();H();o2=w({sin_:gfe})});function _fe(i){let e={x:x(i,"x","sinh")};return I.runKernel(TP,e)}var s2,U$=D(()=>{"use strict";Z();re();$();H();s2=w({sinh_:_fe})});function bfe(i,t,e){let n=x(i,"x","slice1d");return A(n.rank===1,()=>`slice1d expects a rank-1 tensor, but got a rank-${n.rank} tensor`),vi(n,[t],[e])}var a2,z$=D(()=>{"use strict";$();fe();H();Hs();a2=w({slice1d_:bfe})});function vfe(i,t,e){let n=x(i,"x","slice2d");return A(n.rank===2,()=>`slice2d expects a rank-2 tensor, but got a rank-${n.rank} tensor`),vi(n,t,e)}var c2,H$=D(()=>{"use strict";$();fe();H();Hs();c2=w({slice2d_:vfe})});function yfe(i,t,e){let n=x(i,"x","slice3d");return A(n.rank===3,()=>`slice3d expects a rank-3 tensor, but got a rank-${n.rank} tensor`),vi(n,t,e)}var l2,j$=D(()=>{"use strict";$();fe();H();Hs();l2=w({slice3d_:yfe})});function xfe(i,t,e){let n=x(i,"x","slice4d");return A(n.rank===4,()=>`slice4d expects a rank-4 tensor, but got a rank-${n.rank} tensor`),vi(n,t,e)}var d2,$$=D(()=>{"use strict";$();fe();H();Hs();d2=w({slice4d_:xfe})});function wfe(i,t=-1){let e=x(i,"logits","softmax","float32");if(t===-1&&(t=e.rank-1),t!==e.rank-1)throw Error(`Softmax along a non-last dimension is not yet supported. Logits was rank ${e.rank} and dim was ${t}`);let n={logits:e},r={dim:t};return I.runKernel(RP,n,r)}var u2,G$=D(()=>{"use strict";Z();re();$();H();u2=w({softmax_:wfe})});function Mfe(i){A(i.dtype==="complex64",()=>`The dtype for tf.spectral.fft() must be complex64 but got ${i.dtype}.`);let t={input:i};return I.runKernel(uA,t)}var fh,Pw=D(()=>{"use strict";Z();re();fe();H();fh=w({fft_:Mfe})});function Cfe(i){A(i.dtype==="complex64",()=>`The dtype for tf.spectral.ifft() must be complex64 but got ${i.dtype}.`);let t={input:i};return I.runKernel(xA,t)}var Td,Ow=D(()=>{"use strict";Z();re();fe();H();Td=w({ifft_:Cfe})});function Sfe(i){let t=i.shape[i.shape.length-1],e=i.size/t,n;if(t<=2){let r=ce(i,[e,t]);n=Td(r)}else{let r=[e,2*(t-1)],o=ce(lc(i),[e,t]),s=ce(fl(i),[e,t]),a=Yo(vi(o,[0,1],[e,t-2]),1),c=Ie(Yo(vi(s,[0,1],[e,t-2]),1),Ct(-1)),l=sn([o,a],1),d=sn([s,c],1),u=ce(ro(l,d),[r[0],r[1]]);n=Td(u)}if(n=lc(n),i.rank===3&&i.shape[0]!==0){let r=n,o=i.shape[0];n=ce(n,[o,n.shape[0]/o,n.shape[1]]),r.dispose()}return n}var o0,h2=D(()=>{"use strict";_d();fa();V_();bn();H();t0();ei();ph();Gr();Hs();Ow();o0=w({irfft_:Sfe})});function Efe(i,t,e=0){let r={x:x(i,"x","split")},o={numOrSizeSplits:t,axis:e};return I.runKernel(NP,r,o)}var dc,s0=D(()=>{"use strict";Z();re();$();H();dc=w({split_:Efe})});function Tfe(i,t){A(i.dtype==="float32",()=>`The dtype for rfft() must be real value but got ${i.dtype}`);let e=i.shape[i.shape.length-1],n=i.size/e,r;if(t!=null&&t<e){let p=i.shape.map(f=>0),_=i.shape.map(f=>f);_[i.shape.length-1]=t,r=vi(i,p,_),e=t}else if(t!=null&&t>e){let p=i.shape.map(_=>_);p[i.shape.length-1]=t-e,r=sn([i,ya(p)],i.shape.length-1),e=t}else r=i;let o=qn(r),s=ce(ro(r,o),[n,e]),a=fh(s),c=Math.floor(e/2)+1,l=lc(a),d=fl(a),u=dc(l,[c,e-c],l.shape.length-1),h=dc(d,[c,e-c],d.shape.length-1),m=r.shape.slice();return m[r.shape.length-1]=c,ce(ro(u[0],h[0]),m)}var gh,Nw=D(()=>{"use strict";fe();_d();fa();V_();H();t0();ei();Hs();s0();Y_();dl();Pw();gh=w({rfft_:Tfe})});function Ife(i,t){let e=x(i,"a","squaredDifference"),n=x(t,"b","squaredDifference");[e,n]=Kt(e,n),ki(e.shape,n.shape);let r={a:e,b:n},o={};return I.runKernel(zP,r,o)}var a0,m2=D(()=>{"use strict";Z();re();_n();$();dr();H();a0=w({squaredDifference_:Ife})});function Dfe(i,t){let e=x(i,"x","squeeze","string_or_numeric");return ce(e,ck(e.shape,t).newShape)}var _h,Rw=D(()=>{"use strict";$();fe();H();ei();_h=w({squeeze_:Dfe})});function kfe(i,t=0){let e=il(i,"tensors","stack","string_or_numeric");A(e.length>=1,()=>"Pass at least one tensor to tf.stack"),e.length>0&&A(t<=e[0].rank,()=>"Axis must be <= rank of the tensor");let n=e,r={axis:t};return I.runKernel(tP,n,r)}var qr,c0=D(()=>{"use strict";Z();re();$();fe();H();qr=w({stack_:kfe})});function Afe(i,t=0){let n={x:x(i,"x","step")},r={alpha:t};return I.runKernel(iO,n,r)}var l0,p2=D(()=>{"use strict";Z();re();$();H();l0=w({step_:Afe})});function Pfe(i,t,e,n,r=0,o=0,s=0,a=0,c=0){let d={x:x(i,"x","stridedSlice","string_or_numeric")},u={begin:t,end:e,strides:n,beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:c};return I.runKernel(jP,d,u)}var f2,W$=D(()=>{"use strict";Z();re();$();H();f2=w({stridedSlice_:Pfe})});function Ofe(i){let e={x:x(i,"x","tan","float32")};return I.runKernel(XP,e)}var g2,q$=D(()=>{"use strict";Z();re();$();H();g2=w({tan_:Ofe})});function mr(i,t){ms(i);let e=Pr(i,t);if(e.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return oo(i,null,e,t)}var Id=D(()=>{"use strict";$();fe();nl();});function yl(i,t,e){if(ms(i),t!=null&&t.length!==2)throw new Error("tensor2d() requires shape to have two numbers");let n=Pr(i,e);if(n.length!==2&&n.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return oo(i,t,n,e)}var Fw=D(()=>{"use strict";$();fe();nl();});function d0(i,t,e){if(ms(i),t!=null&&t.length!==3)throw new Error("tensor3d() requires shape to have three numbers");let n=Pr(i,e);if(n.length!==3&&n.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return oo(i,t,n,e)}var _2=D(()=>{"use strict";$();fe();nl();});function b2(i,t,e){if(ms(i),t!=null&&t.length!==4)throw new Error("tensor4d() requires shape to have four numbers");let n=Pr(i,e);if(n.length!==4&&n.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return oo(i,t,n,e)}var X$=D(()=>{"use strict";$();fe();nl();});function v2(i,t,e){if(ms(i),t!=null&&t.length!==5)throw new Error("tensor5d() requires shape to have five numbers");let n=Pr(i,e);if(n.length!==5&&n.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return oo(i,t,n,e)}var Y$=D(()=>{"use strict";$();fe();nl();});function y2(i,t,e){if(ms(i),t!=null&&t.length!==6)throw new Error("tensor6d() requires shape to have six numbers");let n=Pr(i,e);if(n.length!==6&&n.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(n.length===1&&t==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return t=t||n,oo(i,t,n,e)}var Z$=D(()=>{"use strict";$();fe();nl();});var u0={};Ei(u0,{calculateShapes:()=>K$,validateInput:()=>Bp,validateUpdateShape:()=>x2});function x2(i,t,e){let n=t.rank>1?t.shape[t.rank-1]:1,r=t.rank>1?t.rank-1:1,o=`Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: ${e.shape}, indices.shape: ${t.shape}, shape: ${i}, sliceDim: ${n}, and batchDim: ${r}.`;if(e.rank<r)throw new Error(o+` update.rank < ${r}. `);if(i.length<n+(e.rank-r))throw new Error(o+` Output shape length < ${n+(e.rank-r)}`);if(e.rank!==r+i.length-n)throw new Error(o+` update.rank != ${r+i.length-n}`);for(let s=0;s<r;++s)if(e.shape[s]!==t.shape[s])throw new Error(o+` updates.shape[${s}] (${e.shape[s]}) != indices.shape[${s}] (${t.shape[s]}).`);for(let s=0;s<e.rank-r;++s)if(e.shape[s+r]!==i[s+n])throw new Error(o+` updates.shape[${s+r}] (${e.shape[s+r]}) != shape[${s+r}] (${i[s+r]})`)}function Bp(i,t,e){if(t.rank<1)throw new Error(`tf.scatterND() expects the indices to be rank 1 or higher, but the rank was ${t.rank}.`);if(i.rank<1)throw new Error(`tf.scatterND() expects the updates to be rank 1 or higher, but the rank was ${i.rank}.`);if(t.dtype!=="int32")throw new Error(`The dtype of 'indices' should be int32, but got dtype: ${t.dtype}`);if(e.length<1)throw new Error(`Output rank must be greater or equal to 1, but got shape: ${e}`);if(e.length===0){if(t.size===0)throw new Error(`Indices specified for empty output. indices shape: ${t.shape}`);if(i.size===0)throw new Error(`Updates specified for empty output. updates shape: ${i.shape}`)}x2(e,t,i)}function K$(i,t,e){let n=t.shape.length,r=n>1?t.shape[n-1]:1,o=e.length,s=1;for(let u=r;u<o;++u)s*=e[u];let a=r<1?1:r,c=oi(t.shape)/a,l=[...tc(e.slice(0,r)),1],d=oi(e);return{sliceRank:r,numUpdates:c,sliceSize:s,strides:l,outputSize:d}}var h0=D(()=>{"use strict";fe()});function Nfe(i,t,e){let n=x(i,"tensor","tensorScatterupdate"),r=x(t,"indices","tensorScatterupdate","int32"),o=x(e,"updates","tensorScatterupdate");if(Bp(o,r,n.shape),n.dtype!==o.dtype)throw new Error(`tensor and updates must have the same dtype, instead they are ${n.dtype} and ${o.dtype}.`);let s={tensor:n,indices:r,updates:o},a={};return I.runKernel(xP,s,a)}var w2,Q$=D(()=>{"use strict";Z();re();$();H();h0();w2=w({tensorScatterUpdate_:Nfe})});function Rfe(i,t=1,e=!0){let n=x(i,"x","topk");if(n.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");let r=n.shape[n.shape.length-1];if(t<0)throw new Error(`'k' passed to topk() must be >= 0 but got ${t}`);if(t>r)throw new Error(`'k' passed to topk() must be <= the last dimension (${r}) but got ${t}`);let o={x:n},s={k:t,sorted:e},[a,c]=I.runKernel(ZP,o,s);return{values:a,indices:c}}var M2,J$=D(()=>{"use strict";Z();re();$();H();M2=w({topk_:Rfe})});function Ffe(i,t=0,e=1,n,r){if(fn(i),n!=null&&n==="bool")throw new Error("Unsupported data type $ { dtype }");let o=new hh(t,e,n,!0,r),s=Nr(i,n);for(let a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}var C2,eG=D(()=>{"use strict";ar();sl();H();J_();C2=w({truncatedNormal_:Ffe})});function Lfe(i,t=0){let e=x(i,"x","unique","string_or_numeric");A(e.rank>0,()=>"The input tensor must be at least 1D");let n={x:e},r={axis:t},[o,s]=I.runKernel(QP,n,r);return{values:o,indices:s}}var S2,tG=D(()=>{"use strict";Z();re();$();fe();H();S2=w({unique_:Lfe})});function Bfe(i,t,e){let n=x(i,"x","unsortedSegmentSum"),r=x(t,"segmentIds","unsortedSegmentSum","int32");A(el(e),()=>"numSegments must be of dtype int");let o={x:n,segmentIds:r},s={numSegments:e};return I.runKernel(eO,o,s)}var E2,iG=D(()=>{"use strict";Z();re();$();fe();H();E2=w({unsortedSegmentSum_:Bfe})});function Vfe(i,t=0){let e=x(i,"x","unstack","string_or_numeric");A(t>=-e.shape.length&&t<e.shape.length,()=>`Axis = ${t} is not in [-${e.shape.length}, ${e.shape.length})`);let n={value:e},r={axis:t};return I.runKernel(JP,n,r)}var Zo,Lw=D(()=>{"use strict";Z();re();$();fe();H();Zo=w({unstack_:Vfe})});function T2(i,t){return Rp(i,t,"right")}var nG=D(()=>{"use strict";ww();});function I2(i,t=!0,e,n){return I.makeVariable(i,t,e,n)}var rG=D(()=>{"use strict";Z();});function Bw(i,t){let e=[];for(let o=0;o<t.length;o++)t[o]&&e.push(o);let n=Nr(i,"int32"),r=Nr([e.length,i.length],"int32");for(let o=0;o<e.length;o++){let s=n.indexToLoc(e[o]),a=o*i.length;r.values.set(s,a)}return r.toTensor()}var D2=D(()=>{"use strict";sl();});function Ufe(i){return oe(this,null,function*(){let t=x(i,"condition","whereAsync","bool"),e=yield t.data(),n=Bw(t.shape,e);return i!==t&&t.dispose(),n})}var m0,k2=D(()=>{"use strict";D2();$();m0=Ufe});function zfe(i,t,e){return oe(this,null,function*(){let n=x(i,"tensor","boolMask"),r=x(t,"mask","boolMask","bool"),o=e??0,s=r.rank,a=n.shape;A(s>0,()=>"mask cannot be scalar"),ln(a.slice(o,o+s),r.shape,"mask's shape must match the first K dimensions of tensor's shape,");let c=1;for(let _=o;_<o+s;_++)c*=a[_];let l=a.slice(0,o).concat([c],a.slice(o+s)),d=ce(n,l),u=ce(r,[-1]),h=yield m0(u),m=_h(h,[1]),p=L_(d,m,o);return i!==n&&n.dispose(),t!==r&&r.dispose(),m.dispose(),d.dispose(),u.dispose(),h.dispose(),p})}var oG,sG=D(()=>{"use strict";$();fe();jN();ei();Rw();k2();oG=zfe});function Hfe(i,t,e){let n=x(i,"x","transpose");if(t==null&&(t=n.shape.map((s,a)=>a).reverse()),A(n.rank===t.length,()=>`Error in transpose: rank of input ${n.rank} must match length of perm ${t}.`),t.forEach(s=>{A(s>=0&&s<n.rank,()=>`All entries in 'perm' must be between 0 and ${n.rank-1} but got ${t}`)}),n.rank<=1)return n.clone();let r={x:n},o={perm:t};return n.dtype==="complex64"?Jt(()=>{let s=lc(n),a=fl(n);return s=I.runKernel(d_,{x:s},o),a=I.runKernel(d_,{x:a},o),e&&(a=Mr(a)),ro(s,a)}):I.runKernel(d_,r,o)}var bh,Vw=D(()=>{"use strict";Z();qo();re();$();fe();_d();V_();_l();H();t0();bh=w({transpose_:Hfe})});function jfe(i,t,e,n,r=!0){let o=x(i,"v","movingAverage"),s=x(t,"x","movingAverage"),a=x(e,"decay","movingAverage");pO(o,s),A(io(o.shape,s.shape),()=>"Shape mismatch in v and x");let c=Ct(1),l=wt(c,a),d=Ie(wt(s,o),l);if(r){A(n!=null,()=>"When using zeroDebias: true, step is required.");let u=x(n,"step","movingAverage");d=bi(d,wt(c,ac(a,u)))}return at(o,d)}var aG,cG=D(()=>{"use strict";_n();$();fe();tr();Ao();bn();H();O_();Gr();hr();aG=w({movingAverage_:jfe})});function $fe(i,t,e){fn(e);let n=x(i,"indices","scatterND","int32"),r=x(t,"updates","scatterND");Bp(r,n,e);let o={indices:n,updates:r},s={shape:e};return I.runKernel(yP,o,s)}var lG,dG=D(()=>{"use strict";Z();re();$();ar();H();h0();lG=w({scatterND_:$fe})});function uG(i,t,e,n){if(i.dtype!=="int32")throw new Error(`tf.sparseToDense() expects the indices to be int32 type, but the dtype was ${i.dtype}.`);if(i.rank>2)throw new Error(`sparseIndices should be a scalar, vector, or matrix, but got shape ${i.shape}.`);let r=i.rank>0?i.shape[0]:1,o=i.rank>1?i.shape[1]:1;if(e.length!==o)throw new Error(`outputShape has incorrect number of elements:, ${e.length}, should be: ${o}.`);let s=t.size;if(!(t.rank===0||t.rank===1&&s===r))throw new Error(`sparseValues has incorrect shape ${t.shape}, should be [] or [${r}]`);if(t.dtype!==n.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}var hG=D(()=>{"use strict"});function Wfe(i,t,e,n=0){fn(e);let r=x(i,"sparseIndices","sparseToDense","int32"),o=x(t,"sparseValues","sparseToDense","string_or_numeric"),s=x(n,"defaultValue","sparseToDense",o.dtype);uG(r,o,e,s);let a={sparseIndices:r,sparseValues:o,defaultValue:s},c={outputShape:e};return I.runKernel(UP,a,c)}var mG,pG=D(()=>{"use strict";Z();re();hG();$();ar();H();mG=w({sparseToDense_:Wfe})});function qfe(i,t){let e=x(t,"indices","gatherND","int32"),r={params:x(i,"x","gatherND","string_or_numeric"),indices:e};return I.runKernel(bA,r)}var fG,gG=D(()=>{"use strict";Z();re();$();H();fG=w({gatherND_:qfe})});function _G(i,t){if(t==null)return i.shape.slice();if(io(i.shape,t))return t;if(i.shape.length===t.length){let e=[];for(let n=0;n<i.shape.length;n++)t[n]==null&&i.shape[n]!=null?e.push(i.shape[n]):e.push(t[n]);return e}return t}var bG=D(()=>{"use strict";fe();});function Xfe(i,t,e,n){let r=x(i,"x","dropout");if(A(r.dtype==="float32",()=>`x has to be a floating point tensor since it's going to be scaled, but got a ${r.dtype} tensor instead.`),A(t>=0&&t<1,()=>`rate must be a float in the range [0, 1), but got ${t}.`),t===0)return i instanceof Bi?r.clone():r;let o=_G(r,e),s=1-t,a=bi(F_(at(mh(o,0,1,"float32",n),s)),s);return Ie(r,a)}var vG,yG=D(()=>{"use strict";ps();$();fe();tr();Ao();bG();HN();bn();H();kw();vG=w({dropout_:Xfe})});function Uw(i){return Math.floor(Math.pow(2,Math.ceil(Math.log(i)/Math.log(2))))}function Vp(i,t,e){let n=1-i%2,r=new Float32Array(i);for(let o=0;o<i;++o){let s=2*Math.PI*o/(i+n-1);r[o]=t-e*Math.cos(s)}return mr(r,"float32")}var p0=D(()=>{"use strict";Id();});function Yfe(i,t,e=1){return oe(this,null,function*(){let n=x(i,"predictions","inTopK"),r=x(t,"targets","inTopK");A(n.rank>1,()=>`inTopK() expects the predictions to be of rank 2 or higher, but got ${n.rank}`),A(n.rank-1===r.rank,()=>`predictions rank should be 1 larger than targets rank, but got predictions rank ${n.rank} and targets rank ${r.rank}`),ln(n.shape.slice(0,n.shape.length-1),r.shape,"predictions's shape should be align with the targets' shape, except the last dimension.");let o=n.shape[n.shape.length-1];A(e>0&&e<=o,()=>`'k' passed to inTopK() must be > 0 && <= the predictions last dimension (${o}), but got ${e}`);let s=yield n.data(),a=yield r.data(),[c,l]=[s.length/o,o],d=lk("bool",c);for(let u=0;u<c;u++){let h=u*l,m=s.subarray(h,h+l),p=[];for(let _=0;_<m.length;_++)p.push({value:m[_],index:_});p.sort((_,f)=>f.value-_.value),d[u]=0;for(let _=0;_<e;_++)if(p[_].index===a[u]){d[u]=1;break}}return i!==n&&n.dispose(),t!==r&&r.dispose(),jr(d,r.shape,"bool")})}var xG,wG=D(()=>{"use strict";$();fe();b_();xG=Yfe});function Zfe(i,t,e,n,r,o="NHWC",s){let a=i;i.rank===3&&(a=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let c=t;c.rank===3&&(c=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]])),A(a.rank===4,()=>`Error in conv2dDerFilter: input must be rank 4, but got shape ${a.shape}.`),A(c.rank===4,()=>`Error in conv2dDerFilter: dy must be rank 4, but got shape ${c.shape}.`),A(e.length===4,()=>`Error in conv2dDerFilter: filterShape must be length 4, but got ${e}.`);let l=o==="NHWC"?a.shape[3]:a.shape[1],d=o==="NHWC"?c.shape[3]:c.shape[1];A(l===e[2],()=>`Error in conv2dDerFilter: depth of input ${l}) must match input depth in filter (${e[2]}.`),A(d===e[3],()=>`Error in conv2dDerFilter: depth of dy (${d}) must match output depth for filter (${e[3]}).`),Ln("conv2dDerFilter",r,s);let u={x:a,dy:c},h={strides:n,pad:r,dataFormat:o,dimRoundingMode:s,filterShape:e};return I.runKernel(zk,u,h)}var MG,CG=D(()=>{"use strict";Z();re();fe();Po();H();ei();MG=w({conv2DBackpropFilter_:Zfe})});function vh(i,t,e){if(e==null||e==="linear")return i;if(e==="relu")return Ie(i,l0(t));throw new Error(`Cannot compute gradient for fused activation ${e}.`)}function yh(i,t){let e=t,n=mw(i.shape,t.shape);return n.length>0&&(e=Ai(e,n)),ce(e,i.shape)}function xh(i,t,e,n){if(t==="linear")return i;if(t==="relu")return vl(i);if(t==="elu")return A_(i);if(t==="relu6")return n0(i);if(t==="prelu")return Q_(i,e);if(t==="leakyrelu")return U_(i,n);if(t==="sigmoid")return ga(i);throw new Error(`Unknown fused activation ${t}.`)}var wh,Up=D(()=>{"use strict";dr();NN();XN();bn();TR();i0();XR();ei();S_();p2();va();wh=(i,t)=>!(i>0)||t==="linear"});function Kfe({x:i,filter:t,strides:e,pad:n,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:a,activation:c="linear",preluActivationWeights:l,leakyreluAlpha:d}){if(c=c||"linear",wh(I.state.gradientDepth,c)===!1){A(r==="NHWC",()=>`Error in fused conv2d: got dataFormat of ${r} but only NHWC is currently supported for the case of gradient depth is 0 and the activation is not linear.`);let R=ll(i,t,e,n,r,o,s);return a!=null&&(R=at(R,a)),xh(R,c,l,d)}let u=x(i,"x","conv2d","float32"),h=x(t,"filter","conv2d","float32"),m=u,p=!1;u.rank===3&&(p=!0,m=ce(u,[1,u.shape[0],u.shape[1],u.shape[2]])),A(m.rank===4,()=>`Error in fused conv2d: input must be rank 4, but got rank ${m.rank}.`),A(h.rank===4,()=>`Error in fused conv2d: filter must be rank 4, but got rank ${h.rank}.`),Ln("fused conv2d",n,s);let _=r==="NHWC"?m.shape[3]:m.shape[1];A(h.shape[2]===_,()=>`Error in conv2d: depth of input (${_}) must match input depth for filter ${h.shape[2]}.`),A($r(e,o),()=>`Error in conv2D: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`);let f=sh(m.shape,h.shape,e,o,n,s),g;a!=null&&(g=x(a,"bias","fused conv2d"),[g]=Kt(g,u),r==="NHWC"?ki(f.outShape,g.shape):(A(g.shape.length<=1,()=>`Error in fused conv2d: only supports scalar or 1-D Tensor bias for NCHW format but got the bias of rank-${g.shape.length}.`),A(g.shape.length===0||g.shape[0]===f.outChannels||g.shape[0]===1,()=>`Error in fused conv2d: bias shape (${g.shape}) is not compatible with the number of output channels (${f.outChannels})`)));let S;if(l!=null){let R=l.shape;if(A(R.length<=1||R.length===3,()=>`Error in fused conv2d: only supports scalar, 1-D Tensor or 3-D Tensor PReLU activation weights but got a tensor of rank-${R.length}.`),R.length===1)A(R[0]===1||R[0]===f.outChannels,()=>`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the number of output channels (${f.outChannels}).`);else if(R.length===3)try{ki(R,f.outShape)}catch{let z=`Error in fused conv2d: PReLU activation weights (${R}) is not compatible with the output shape of the conv2d (${f.outShape}).`;throw Error(z)}S=x(l,"prelu weights","fused conv2d")}let C=(R,B)=>{A(r==="NHWC",()=>`Error in gradient of fused conv2D: got dataFormat of ${r} but only NHWC is currently supported.`);let[z,T,O,U]=B,X=vh(R,O,c);A(oh(o),()=>`Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '${o}'`);let ee=uw(T.shape,X,z,e,n),de=MG(T,X,z.shape,e,n),se=[ee,de];if(U!=null){let ue=yh(U,X);se.push(ue)}return se},E={x:m,filter:h,bias:g,preluActivationWeights:S},N={strides:e,pad:n,dataFormat:r,dilations:o,dimRoundingMode:s,activation:c,leakyreluAlpha:d};return a==null?Wr((B,z,T)=>{let O=I.runKernel($x,E,N);return T([z,B,O]),p&&(O=ce(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:C}})(m,h):Wr((B,z,T,O)=>{let U=I.runKernel($x,E,N);return O([z,B,U,T]),p&&(U=ce(U,[U.shape[1],U.shape[2],U.shape[3]])),{value:U,gradFunc:C}})(m,h,g)}var SG,EG=D(()=>{"use strict";Z();gl();re();_n();$();fe();tr();dr();D_();CG();bN();Po();Up();H();ei();SG=w({fusedConv2d_:Kfe})});function Qfe(i,t,e,n,r,o=[1,1],s){let a=i;i.rank===3&&(a=ce(i,[1,i.shape[0],i.shape[1],i.shape[2]]));let c=t;c.rank===3&&(c=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l={x:a,dy:c},d={strides:n,pad:r,dimRoundingMode:s,dilations:o,filterShape:e};return I.runKernel(Jk,l,d)}var TG,IG=D(()=>{"use strict";Z();re();H();ei();TG=w({depthwiseConv2dNativeBackpropFilter_:Qfe})});function Jfe(i,t,e,n,r,o=[1,1],s){let a=t,c=!1;t.rank===3&&(c=!0,a=ce(t,[1,t.shape[0],t.shape[1],t.shape[2]]));let l={dy:a,filter:e},d={strides:n,pad:r,dimRoundingMode:s,dilations:o,inputShape:i},u=I.runKernel(eA,l,d);return c?ce(u,[u.shape[1],u.shape[2],u.shape[3]]):u}var DG,kG=D(()=>{"use strict";Z();re();H();ei();DG=w({depthwiseConv2dNativeBackpropInput_:Jfe})});function ege({x:i,filter:t,strides:e,pad:n,dataFormat:r="NHWC",dilations:o=[1,1],dimRoundingMode:s,bias:a,activation:c="linear",preluActivationWeights:l,leakyreluAlpha:d}){if(wh(I.state.gradientDepth,c)===!1){let N=ch(i,t,e,n,r,o,s);return a!=null&&(N=at(N,a)),xh(N,c,l,d)}let u=x(i,"x","depthwiseConv2d","float32"),h=x(t,"filter","depthwiseConv2d","float32"),m=u,p=!1;u.rank===3&&(p=!0,m=ce(u,[1,u.shape[0],u.shape[1],u.shape[2]])),A(m.rank===4,()=>`Error in fused depthwiseConv2d: input must be rank 4, but got rank ${m.rank}.`),A(h.rank===4,()=>`Error in fused depthwiseConv2d: filter must be rank 4, but got rank ${h.rank}.`),A(m.shape[3]===h.shape[2],()=>`Error in fused depthwiseConv2d: number of input channels (${m.shape[3]}) must match the inChannels dimension in filter ${h.shape[2]}.`),o==null&&(o=[1,1]),A($r(e,o),()=>`Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides ${e} and dilations '${o}'`),Ln("fused depthwiseConv2d",n,s);let _=sh(m.shape,h.shape,e,o,n,s,!0),f;a!=null&&(f=x(a,"bias","fused conv2d"),[f]=Kt(f,u),ki(_.outShape,f.shape));let g;l!=null&&(g=x(l,"prelu weights","fused depthwiseConv2d"));let S=(N,R)=>{A(oh(o),()=>`Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '${o}'`);let[B,z,T,O]=R,U=vh(N,T,c),X=DG(z.shape,U,B,e,n,o,s),ee=TG(z,U,B.shape,e,n,o,s);if(O!=null){let de=yh(f,U);return[X,ee,de]}return[X,ee]},C={x:m,filter:h,bias:f,preluActivationWeights:g},E={strides:e,pad:n,dataFormat:r,dilations:o,dimRoundingMode:s,activation:c,leakyreluAlpha:d};return a==null?Wr((R,B,z)=>{let T=I.runKernel(Gx,C,E);return z([B,R,T]),p&&(T=ce(T,[T.shape[1],T.shape[2],T.shape[3]])),{value:T,gradFunc:S}})(m,h):Wr((R,B,z,T)=>{let O=I.runKernel(Gx,C,E);return T([B,R,O,z]),p&&(O=ce(O,[O.shape[1],O.shape[2],O.shape[3]])),{value:O,gradFunc:S}})(m,h,f)}var AG,PG=D(()=>{"use strict";Z();gl();re();_n();$();fe();tr();dr();Po();hw();IG();kG();Up();H();ei();AG=w({fusedDepthwiseConv2d_:ege})});function tge({a:i,b:t,transposeA:e=!1,transposeB:n=!1,bias:r,activation:o="linear",preluActivationWeights:s,leakyreluAlpha:a=.2}){if(wh(I.state.gradientDepth,o)===!1){let U=Mi(i,t,e,n);return r!=null&&(U=at(U,r)),xh(U,o,s,a)}let c=x(i,"a","fused matMul"),l=x(t,"b","fused matMul");[c,l]=Kt(c,l);let d=e?c.shape[c.rank-2]:c.shape[c.rank-1],u=n?l.shape[l.rank-1]:l.shape[l.rank-2],h=e?c.shape[c.rank-1]:c.shape[c.rank-2],m=n?l.shape[l.rank-2]:l.shape[l.rank-1],p=c.shape.slice(0,-2),_=l.shape.slice(0,-2),f=oi(p),g=oi(_);A(d===u,()=>`Error in fused matMul: inner shapes (${d}) and (${u}) of Tensors with shapes ${c.shape} and ${l.shape} and transposeA=${e} and transposeB=${n} must match.`);let C=ki(c.shape.slice(0,-2),l.shape.slice(0,-2)).concat([h,m]),E=e?ce(c,[f,d,h]):ce(c,[f,h,d]),N=n?ce(l,[g,m,u]):ce(l,[g,u,m]),R;r!=null&&(R=x(r,"bias","fused matMul"),[R]=Kt(R,c),ki(C,R.shape));let B;s!=null&&(B=x(s,"prelu weights","fused matMul"));let z=(U,X)=>{let[ee,de,se,ue]=X,ae=vh(ce(U,se.shape),se,o),Ce,Pe;if(!e&&!n?(Ce=Mi(ae,de,!1,!0),Pe=Mi(ee,ae,!0,!1)):!e&&n?(Ce=Mi(ae,de,!1,!1),Pe=Mi(ae,ee,!0,!1)):e&&!n?(Ce=Mi(de,ae,!1,!0),Pe=Mi(ee,ae,!1,!1)):(Ce=Mi(de,ae,!0,!0),Pe=Mi(ae,ee,!0,!0)),r!=null){let He=yh(ue,ae);return[Ce,Pe,He]}else return[Ce,Pe]},T={a:E,b:N,bias:R,preluActivationWeights:B},O={transposeA:e,transposeB:n,activation:o,leakyreluAlpha:a};return r==null?Wr((X,ee,de)=>{let se=I.runKernel(jx,T,O);return de([X,ee,se]),{value:ce(se,C),gradFunc:z}})(E,N):Wr((X,ee,de,se)=>{let ue=I.runKernel(jx,T,O);return se([X,ee,ue,de]),{value:ce(ue,C),gradFunc:z}})(E,N,R)}var OG,NG=D(()=>{"use strict";Z();gl();re();_n();$();fe();tr();dr();Up();al();H();ei();OG=w({fusedMatMul_:tge})});var zw={};Ei(zw,{conv2d:()=>SG,depthwiseConv2d:()=>AG,matMul:()=>OG});var RG=D(()=>{"use strict";EG();PG();NG();});function ige(i){return Vp(i,.54,.46)}var FG,LG=D(()=>{"use strict";H();p0();FG=w({hammingWindow_:ige})});function nge(i){return Vp(i,.5,.5)}var Hw,A2=D(()=>{"use strict";H();p0();Hw=w({hannWindow_:nge})});function rge(i,t,e,n=!1,r=0){let o=0,s=[];for(;o+t<=i.size;)s.push(vi(i,o,t)),o+=e;if(n)for(;o<i.size;){let a=o+t-i.size,c=sn([vi(i,o,t-a),_a([a],r)]);s.push(c),o+=e}return s.length===0?yl([],[0,t]):ce(sn(s),[s.length,t])}var jw,P2=D(()=>{"use strict";fa();Ip();H();ei();Hs();Fw();jw=w({frame_:rge})});function oge(i,t,e,n,r=Hw){n==null&&(n=Uw(t));let o=jw(i,t,e),s=Ie(o,r(t));return gh(s,n)}var BG,VG=D(()=>{"use strict";bn();H();p0();Nw();P2();A2();BG=w({stft_:oge})});function sge(i,t,e,n,r="bilinear",o=0){let s=x(i,"image","cropAndResize"),a=x(t,"boxes","cropAndResize","float32"),c=x(e,"boxInd","cropAndResize","int32"),l=a.shape[0];A(s.rank===4,()=>`Error in cropAndResize: image must be rank 4,but got rank ${s.rank}.`),A(a.rank===2&&a.shape[1]===4,()=>`Error in cropAndResize: boxes must be have size [${l},4] but had shape ${a.shape}.`),A(c.rank===1&&c.shape[0]===l,()=>`Error in cropAndResize: boxInd must be have size [${l}] but had shape ${a.shape}.`),A(n.length===2,()=>`Error in cropAndResize: cropSize must be of length 2, but got length ${n.length}.`),A(n[0]>=1&&n[1]>=1,()=>`cropSize must be atleast [1,1], but was ${n}`),A(r==="bilinear"||r==="nearest",()=>`method must be bilinear or nearest, but was ${r}`);let d={image:s,boxes:a,boxInd:c},u={method:r,extrapolationValue:o,cropSize:n};return I.runKernel(Yk,d,u)}var UG,zG=D(()=>{"use strict";Z();re();$();fe();H();UG=w({cropAndResize_:sge})});function age(i){let t=x(i,"image","flipLeftRight","float32");A(t.rank===4,()=>`Error in flipLeftRight: image must be rank 4,but got rank ${t.rank}.`);let e={image:t};return I.runKernel(mA,e,{})}var HG,jG=D(()=>{"use strict";Z();re();$();fe();H();HG=w({flipLeftRight_:age})});function cge(i){let t=x(i,"image","grayscaleToRGB"),e=t.rank-1,n=t.shape[e];A(t.rank>=2,()=>`Error in grayscaleToRGB: images must be at least rank 2, but got rank ${t.rank}.`),A(n===1,()=>`Error in grayscaleToRGB: last dimension of a grayscale image should be size 1, but got size ${n}.`);let r=new Array(t.rank);return r.fill(1,0,e),r[e]=3,pl(t,r)}var $G,GG=D(()=>{"use strict";$();fe();H();fw();$G=w({grayscaleToRGB_:cge})});function lge(i){let t=x(i,"image","RGBToGrayscale"),e=t.rank-1,n=t.shape[e];A(t.rank>=2,()=>`Error in RGBToGrayscale: images must be at least rank 2, but got rank ${t.rank}.`),A(n===3,()=>`Error in RGBToGrayscale: last dimension of an RGB image should be size 3, but got size ${n}.`);let r=t.dtype,o=si(t,"float32"),s=mr([.2989,.587,.114]),a;switch(t.rank){case 2:a=ul("ij,j->i",o,s);break;case 3:a=ul("ijk,k->ij",o,s);break;case 4:a=ul("ijkl,l->ijk",o,s);break;case 5:a=ul("ijklm,m->ijkl",o,s);break;case 6:a=ul("ijklmn,n->ijklm",o,s);break;default:throw new Error("Not a valid tensor rank.")}return a=js(a,-1),si(a,r)}var WG,qG=D(()=>{"use strict";$();fe();Rr();ON();pw();H();Id();WG=w({rgbToGrayscale_:lge})});function dge(i,t,e=0,n=.5){let r=x(i,"image","rotateWithOffset","float32");A(r.rank===4,()=>`Error in rotateWithOffset: image must be rank 4,but got rank ${r.rank}.`);let o={image:r},s={radians:t,fillValue:e,center:n};return I.runKernel(nO,o,s)}var XG,YG=D(()=>{"use strict";Z();re();$();fe();H();XG=w({rotateWithOffset_:dge})});function $s(i,t,e,n,r,o){n==null&&(n=.5),r==null&&(r=Number.NEGATIVE_INFINITY),o==null&&(o=0);let s=i.shape[0];return e=Math.min(e,s),A(0<=n&&n<=1,()=>`iouThreshold must be in [0, 1], but was '${n}'`),A(i.rank===2,()=>`boxes must be a 2D tensor, but was of rank '${i.rank}'`),A(i.shape[1]===4,()=>`boxes must have 4 columns, but 2nd dimension was ${i.shape[1]}`),A(t.rank===1,()=>"scores must be a 1D tensor"),A(t.shape[0]===s,()=>`scores has incompatible shape with boxes. Expected ${s}, but was ${t.shape[0]}`),A(0<=o&&o<=1,()=>`softNmsSigma must be in [0, 1], but was '${o}'`),{maxOutputSize:e,iouThreshold:n,scoreThreshold:r,softNmsSigma:o}}var Mh=D(()=>{"use strict";fe();});function uge(i,t,e,n=.5,r=Number.NEGATIVE_INFINITY){let o=x(i,"boxes","nonMaxSuppression","float32"),s=x(t,"scores","nonMaxSuppression","float32"),a=$s(o,s,e,n,r);e=a.maxOutputSize,n=a.iouThreshold,r=a.scoreThreshold;let c={maxOutputSize:e,iouThreshold:n,scoreThreshold:r};return I.runKernel(ZA,{boxes:o,scores:s},c)}var ZG,KG=D(()=>{"use strict";Z();re();$();Mh();H();ZG=w({nonMaxSuppression_:uge})});function QG(i,t,e){let n=hge(i,t,e),r=n<0?-(n+1):n;i.splice(r,0,t)}function hge(i,t,e){return pge(i,t,e||mge)}function mge(i,t){return i>t?1:i<t?-1:0}function pge(i,t,e){let n=0,r=i.length,o=0,s=!1;for(;n<r;){o=n+(r-n>>>1);let a=e(t,i[o]);a>0?n=o+1:(r=o,s=!a)}return s?n:-n-1}var JG=D(()=>{"use strict";});function $w(i,t,e,n,r){return O2(i,t,e,n,r,0)}function Gw(i,t,e,n,r,o){return O2(i,t,e,n,r,0,!1,o,!0)}function Ww(i,t,e,n,r,o){return O2(i,t,e,n,r,o,!0)}function O2(i,t,e,n,r,o,s=!1,a=!1,c=!1){let l=[];for(let f=0;f<t.length;f++)t[f]>r&&l.push({score:t[f],boxIndex:f,suppressBeginIndex:0});l.sort(eW);let d=o>0?-.5/o:0,u=[],h=[];for(;u.length<e&&l.length>0;){let f=l.pop(),{score:g,boxIndex:S,suppressBeginIndex:C}=f;if(g<r)break;let E=!1;for(let N=u.length-1;N>=C;--N){let R=fge(i,S,u[N]);if(R>=n){E=!0;break}if(f.score=f.score*gge(n,d,R),f.score<=r)break}f.suppressBeginIndex=u.length,E||(f.score===g?(u.push(S),h.push(f.score)):f.score>r&&QG(l,f,eW))}let m=u.length,p=e-m;a&&p>0&&(u.push(...new Array(p).fill(0)),h.push(...new Array(p).fill(0)));let _={selectedIndices:u};return s&&(_.selectedScores=h),c&&(_.validOutputs=m),_}function fge(i,t,e){let n=i.subarray(t*4,t*4+4),r=i.subarray(e*4,e*4+4),o=Math.min(n[0],n[2]),s=Math.min(n[1],n[3]),a=Math.max(n[0],n[2]),c=Math.max(n[1],n[3]),l=Math.min(r[0],r[2]),d=Math.min(r[1],r[3]),u=Math.max(r[0],r[2]),h=Math.max(r[1],r[3]),m=(a-o)*(c-s),p=(u-l)*(h-d);if(m<=0||p<=0)return 0;let _=Math.max(o,l),f=Math.max(s,d),g=Math.min(a,u),S=Math.min(c,h),C=Math.max(g-_,0)*Math.max(S-f,0);return C/(m+p-C)}function gge(i,t,e){let n=Math.exp(t*e*e);return e<=i?n:0}function eW(i,t){return i.score-t.score||i.score===t.score&&t.boxIndex-i.boxIndex}var f0=D(()=>{"use strict";JG();});function _ge(o,s,a){return oe(this,arguments,function*(i,t,e,n=.5,r=Number.NEGATIVE_INFINITY){let c=x(i,"boxes","nonMaxSuppressionAsync"),l=x(t,"scores","nonMaxSuppressionAsync"),d=$s(c,l,e,n,r);e=d.maxOutputSize,n=d.iouThreshold,r=d.scoreThreshold;let u=yield Promise.all([c.data(),l.data()]),h=u[0],m=u[1],{selectedIndices:p}=$w(h,m,e,n,r);return c!==i&&c.dispose(),l!==t&&l.dispose(),mr(p,"int32")})}var tW,iW=D(()=>{"use strict";f0();$();Mh();Id();tW=_ge});function bge(i,t,e,n=.5,r=Number.NEGATIVE_INFINITY,o=0){let s=x(i,"boxes","nonMaxSuppression"),a=x(t,"scores","nonMaxSuppression"),c=$s(s,a,e,n,r,o);e=c.maxOutputSize,n=c.iouThreshold,r=c.scoreThreshold,o=c.softNmsSigma;let l={boxes:s,scores:a},d={maxOutputSize:e,iouThreshold:n,scoreThreshold:r,softNmsSigma:o},u=I.runKernel(QA,l,d);return{selectedIndices:u[0],selectedScores:u[1]}}var nW,rW=D(()=>{"use strict";Z();re();$();Mh();H();nW=w({nonMaxSuppressionWithScore_:bge})});function vge(s,a,c){return oe(this,arguments,function*(i,t,e,n=.5,r=Number.NEGATIVE_INFINITY,o=0){let l=x(i,"boxes","nonMaxSuppressionAsync"),d=x(t,"scores","nonMaxSuppressionAsync"),u=$s(l,d,e,n,r,o);e=u.maxOutputSize,n=u.iouThreshold,r=u.scoreThreshold,o=u.softNmsSigma;let h=yield Promise.all([l.data(),d.data()]),m=h[0],p=h[1],{selectedIndices:_,selectedScores:f}=Ww(m,p,e,n,r,o);return l!==i&&l.dispose(),d!==t&&d.dispose(),{selectedIndices:mr(_,"int32"),selectedScores:mr(f)}})}var oW,sW=D(()=>{"use strict";f0();$();Mh();Id();oW=vge});function yge(i,t,e,n=.5,r=Number.NEGATIVE_INFINITY,o=!1){let s=x(i,"boxes","nonMaxSuppression"),a=x(t,"scores","nonMaxSuppression"),c=$s(s,a,e,n,r,null),l=c.maxOutputSize,d=c.iouThreshold,u=c.scoreThreshold,h={boxes:s,scores:a},m={maxOutputSize:l,iouThreshold:d,scoreThreshold:u,padToMaxOutputSize:o},p=I.runKernel(KA,h,m);return{selectedIndices:p[0],validOutputs:p[1]}}var aW,cW=D(()=>{"use strict";Z();re();$();Mh();H();aW=w({nonMaxSuppressionPadded_:yge})});function xge(s,a,c){return oe(this,arguments,function*(i,t,e,n=.5,r=Number.NEGATIVE_INFINITY,o=!1){let l=x(i,"boxes","nonMaxSuppressionAsync"),d=x(t,"scores","nonMaxSuppressionAsync"),u=$s(l,d,e,n,r,null),h=u.maxOutputSize,m=u.iouThreshold,p=u.scoreThreshold,[_,f]=yield Promise.all([l.data(),d.data()]),{selectedIndices:g,validOutputs:S}=Gw(_,f,h,m,p,o);return l!==i&&l.dispose(),d!==t&&d.dispose(),{selectedIndices:mr(g,"int32"),validOutputs:Ct(S,"int32")}})}var lW,dW=D(()=>{"use strict";f0();$();Mh();Gr();Id();lW=xge});function wge(i,t,e=!1,n=!1){let r=x(i,"images","resizeBilinear");A(r.rank===3||r.rank===4,()=>`Error in resizeBilinear: x must be rank 3 or 4, but got rank ${r.rank}.`),A(t.length===2,()=>`Error in resizeBilinear: new shape must 2D, but got shape ${t}.`),A(n===!1||e===!1,()=>"Error in resizeBilinear: If halfPixelCenters is true, alignCorners must be false.");let o=r,s=!1;r.rank===3&&(s=!0,o=ce(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let[]=t,a={images:o},c={alignCorners:e,halfPixelCenters:n,size:t},l=I.runKernel(fP,a,c);return s?ce(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var uW,hW=D(()=>{"use strict";Z();re();$();fe();H();ei();uW=w({resizeBilinear_:wge})});function Mge(i,t,e=!1,n=!1){let r=x(i,"images","resizeNearestNeighbor");A(r.rank===3||r.rank===4,()=>`Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank ${r.rank}.`),A(t.length===2,()=>`Error in resizeNearestNeighbor: new shape must 2D, but got shape ${t}.`),A(r.dtype==="float32"||r.dtype==="int32",()=>"`images` must have `int32` or `float32` as dtype"),A(n===!1||e===!1,()=>"Error in resizeNearestNeighbor: If halfPixelCenters is true, alignCorners must be false.");let o=r,s=!1;r.rank===3&&(s=!0,o=ce(r,[1,r.shape[0],r.shape[1],r.shape[2]]));let[]=t,a={images:o},c={alignCorners:e,halfPixelCenters:n,size:t},l=I.runKernel(pP,a,c);return s?ce(l,[l.shape[1],l.shape[2],l.shape[3]]):l}var mW,pW=D(()=>{"use strict";Z();re();$();fe();H();ei();mW=w({resizeNearestNeighbor_:Mge})});function Cge(i,t="binary",e=!1,n=.5){let r=x(i,"image","threshold"),o=.2989,s=.587,a=.114,c=r.shape[0]*r.shape[1],l=Ie(mr([n]),255),d,u,h,m;if(A(r.rank===3,()=>`Error in threshold: image must be rank 3,but got rank ${r.rank}.`),A(r.shape[2]===3||r.shape[2]===1,()=>`Error in threshold: image color channel must be equal to 3 or 1but got ${r.shape[2]}.`),A(r.dtype==="int32"||r.dtype==="float32",()=>`Error in dtype: image dtype must be int32 or float32,but got dtype ${r.dtype}.`),A(t==="otsu"||t==="binary",()=>`Method must be binary or otsu, but was ${t}`),r.shape[2]===3){[d,u,h]=dc(r,[1,1,1],-1);let f=Ie(d,o),g=Ie(u,s),S=Ie(h,a);m=at(at(f,g),S)}else m=i;if(t==="otsu"){let f=I_(si(r0(m),"int32"),jr([]),256);l=Sge(f,c)}let p=e?dh(m,l):Md(m,l);return si(Ie(p,255),"int32")}function Sge(i,t){let e=mr([-1]),n=mr([0]),r=mr([0]),o,s,a,c,l,d;for(let u=0;u<i.size-1;u++){o=vi(i,0,u+1),s=vi(i,u+1),l=bi(Ai(o),t),d=bi(Ai(s),t);let h=Ai(Ie(o,bl(0,o.size)));a=bi(h,Ai(o));let m=_a(s.shape,o.size),p=at(bl(0,s.size),m),_=Ie(s,p);c=bi(Ai(_),Ai(s));let f=wt(a,c),g=wt(a,c),S=Ie(l,d);r=Ie(Ie(S,f),g);let C=Md(r,n);n=Xo(C,r,n),e=Xo(C,mr([u]),e)}return e}var fW,gW=D(()=>{"use strict";Id();H();Rr();s0();aN();_w();gw();va();tr();bn();Ao();hr();JR();Dp();Ip();Hs();Aw();b_();fe();$();fW=w({threshold_:Cge})});function Ege(i,t,e="nearest",n="constant",r=0,o){let s=x(i,"image","transform","float32"),a=x(t,"transforms","transform","float32");A(s.rank===4,()=>`Error in transform: image must be rank 4,but got rank ${s.rank}.`),A(a.rank===2&&(a.shape[0]===s.shape[0]||a.shape[0]===1)&&a.shape[1]===8,()=>"Error in transform: Input transform should be batch x 8 or 1 x 8"),A(o==null||o.length===2,()=>`Error in transform: outputShape must be [height, width] or null, but got ${o}.`);let c={image:s,transforms:a},l={interpolation:e,fillMode:n,fillValue:r,outputShape:o};return I.runKernel(KP,c,l)}var _W,bW=D(()=>{"use strict";Z();re();$();fe();H();_W=w({transform_:Ege})});function Tge(i,t,e){let n=x(i,"a","bandPart");A(n.rank>=2,()=>`bandPart(): Rank must be at least 2, got ${n.rank}.`);let r=n.shape,[o,s]=n.shape.slice(-2),a,c;typeof t=="number"?(A(t%1===0,()=>`bandPart(): numLower must be an integer, got ${t}.`),A(t<=o,()=>`bandPart(): numLower (${t}) must not be greater than the number of rows (${o}).`),a=x(t<0?o:t,"numLower","bandPart")):(A(t.dtype==="int32",()=>"bandPart(): numLower's dtype must be an int32."),a=Xo(Np(t,0),o,Ed(t,o))),typeof e=="number"?(A(e%1===0,()=>`bandPart(): numUpper must be an integer, got ${e}.`),A(e<=s,()=>`bandPart(): numUpper (${e}) must not be greater than the number of columns (${s}).`),c=x(e<0?s:e,"numUpper","bandPart")):(A(e.dtype==="int32",()=>"bandPart(): numUpper's dtype must be an int32."),c=Xo(Np(e,0),s,Ed(e,s)));let l=ce(bl(0,o,1,"int32"),[-1,1]),d=bl(0,s,1,"int32"),u=wt(l,d),h=Cd(dh(u,a),B_(u,Mr(c))),m=ya([o,s],n.dtype);return ce(qr(Zo(ce(n,[-1,o,s])).map(p=>Xo(h,p,m))),r)}var vW,yW=D(()=>{"use strict";$();fe();$N();YN();_w();yw();Sw();_l();H();Aw();ei();c0();hr();Lw();Dp();Y_();vW=w({bandPart_:Tge})});function Ige(i){let t;if(Array.isArray(i)){t=!1,A(i!=null&&i.length>0,()=>"Gram-Schmidt process: input must not be null, undefined, or empty");let r=i[0].shape[0];for(let o=1;o<i.length;++o)A(i[o].shape[0]===r,()=>`Gram-Schmidt: Non-unique lengths found in the input vectors: (${i[o].shape[0]} vs. ${r})`)}else t=!0,i=dc(i,i.shape[0],0).map(r=>_h(r,[0]));A(i.length<=i[0].shape[0],()=>`Gram-Schmidt: Number of vectors (${i.length}) exceeds number of dimensions (${i[0].shape[0]}).`);let e=[],n=i;for(let r=0;r<i.length;++r)e.push(I.tidy(()=>{let o=n[r];if(r>0)for(let s=0;s<r;++s){let a=Ie(Ai(Ie(e[s],o)),e[s]);o=wt(o,a)}return bi(o,wd(o,"euclidean"))}));return t?qr(e,0):e}var xW,wW=D(()=>{"use strict";Z();fe();Ao();bn();N_();H();s0();Rw();c0();hr();va();xW=w({gramSchmidt_:Ige})});function Dge(i,t=!1){if(A(i.rank>=2,()=>`qr() requires input tensor to have a rank >= 2, but got rank ${i.rank}`),i.rank===2)return MW(i,t);{let e=i.shape.slice(0,i.shape.length-2).reduce((c,l)=>c*l),n=Zo(ce(i,[e,i.shape[i.shape.length-2],i.shape[i.shape.length-1]]),0),r=[],o=[];n.forEach(c=>{let[l,d]=MW(c,t);r.push(l),o.push(d)});let s=ce(qr(r,0),i.shape),a=ce(qr(o,0),i.shape);return[s,a]}}function MW(i,t=!1){return I.tidy(()=>{A(i.shape.length===2,()=>`qr2d() requires a 2D Tensor, but got a ${i.shape.length}D Tensor.`);let e=i.shape[0],n=i.shape[1],r=R_(e),o=ko(i),s=yl([[1]],[1,1]),a=ko(s),c=e>=n?n:e;for(let l=0;l<c;++l){let d=o,u=a,h=r;[a,o,r]=I.tidy(()=>{let m=vi(o,[l,l],[e-l,1]),p=wd(m),_=vi(o,[l,l],[1,1]),f=Xo(Md(_,0),yl([[-1]]),yl([[1]])),g=wt(_,Ie(f,p)),S=bi(m,g);S.shape[0]===1?a=ko(s):a=sn([s,vi(S,[1,0],[S.shape[0]-1,S.shape[1]])],0);let C=Mr(bi(Mi(f,g),p)),E=vi(o,[l,0],[e-l,n]),N=Ie(C,a),R=bh(a);if(l===0)o=wt(E,Mi(N,Mi(R,E)));else{let T=wt(E,Mi(N,Mi(R,E)));o=sn([vi(o,[0,0],[l,n]),T],0)}let B=bh(N),z=vi(r,[0,l],[e,r.shape[1]-l]);if(l===0)r=wt(z,Mi(Mi(z,a),B));else{let T=wt(z,Mi(Mi(z,a),B));r=sn([vi(r,[0,0],[e,l]),T],1)}return[a,o,r]}),Dn([d,u,h])}return!t&&e>n&&(r=vi(r,[0,0],[e,n]),o=vi(o,[0,0],[n,n])),[r,o]})}var CW,SW=D(()=>{"use strict";Z();qo();fe();Sp();fa();Ao();zN();gw();al();bn();_l();N_();H();ei();Hs();c0();hr();Fw();Vw();Lw();Dp();CW=w({qr_:Dge})});var kn,Ma=D(()=>{"use strict";kn=function(i){return i[i.NONE=0]="NONE",i[i.MEAN=1]="MEAN",i[i.SUM=2]="SUM",i[i.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS",i}(kn||{})});function kge(i,t,e=kn.SUM_BY_NONZERO_WEIGHTS){let n=x(i,"losses","computeWeightedLoss"),r=null;t!=null&&(r=x(t,"weights","computeWeightedLoss"));let o=r==null?n:Ie(n,r);if(e===kn.NONE)return o;if(e===kn.SUM)return Ai(o);if(e===kn.MEAN){if(r==null)return Sd(o);{let s=n.size/r.size,a=bi(Ai(o),Ai(r));return s>1?bi(a,Ct(s)):a}}if(e===kn.SUM_BY_NONZERO_WEIGHTS){if(r==null)return bi(Ai(o),Ct(n.size));{let s=Ie(r,xa(n.shape)),a=si(Ai(Z_(s,Ct(0))),"float32");return bi(Ai(o),a)}}throw Error(`Unknown reduction: ${e}`)}var Fr,uc=D(()=>{"use strict";$();Rr();Ao();Ma();Mw();bn();_R();Cw();H();Gr();va();Fr=w({computeWeightedLoss_:kge})});function Age(i,t,e,n=kn.SUM_BY_NONZERO_WEIGHTS){let r=x(i,"labels","absoluteDifference"),o=x(t,"predictions","absoluteDifference"),s=null;e!=null&&(s=x(e,"weights","absoluteDifference")),ln(r.shape,o.shape,"Error in absoluteDifference: ");let a=lr(wt(r,o));return Fr(a,s,n)}var EW,TW=D(()=>{"use strict";$();fe();rh();Ma();H();hr();uc();EW=w({absoluteDifference_:Age})});function Pge(i,t,e,n,r=kn.SUM_BY_NONZERO_WEIGHTS){let o=x(i,"labels","cosineDistance"),s=x(t,"predictions","cosineDistance"),a=null;n!=null&&(a=x(n,"weights","cosineDistance")),ln(o.shape,s.shape,"Error in cosineDistance: ");let c=Ct(1),l=wt(c,Ai(Ie(o,s),e,!0));return Fr(l,a,r)}var IW,DW=D(()=>{"use strict";$();fe();Ma();bn();H();Gr();hr();va();uc();IW=w({cosineDistance_:Pge})});function Oge(i,t,e,n=kn.SUM_BY_NONZERO_WEIGHTS){let r=x(i,"labels","hingeLoss"),o=x(t,"predictions","hingeLoss"),s=null;e!=null&&(s=x(e,"weights","hingeLoss")),ln(r.shape,o.shape,"Error in hingeLoss: ");let a=Ct(1);r=wt(Ie(Ct(2),r),a);let c=vl(wt(a,Ie(r,o)));return Fr(c,s,n)}var kW,AW=D(()=>{"use strict";$();fe();Ma();bn();H();i0();Gr();hr();uc();kW=w({hingeLoss_:Oge})});function Nge(i,t,e,n=1,r=kn.SUM_BY_NONZERO_WEIGHTS){let o=x(i,"labels","huberLoss"),s=x(t,"predictions","huberLoss"),a=null;e!=null&&(a=x(e,"weights","huberLoss")),ln(o.shape,s.shape,"Error in huberLoss: ");let c=Ct(n),l=lr(wt(s,o)),d=Ed(l,c),u=wt(l,d),h=at(Ie(Ct(.5),ur(d)),Ie(c,u));return Fr(h,a,r)}var PW,OW=D(()=>{"use strict";$();fe();rh();tr();Ma();Sw();bn();H();Gr();ml();hr();uc();PW=w({huberLoss_:Nge})});function Rge(i,t,e,n=1e-7,r=kn.SUM_BY_NONZERO_WEIGHTS){let o=x(i,"labels","logLoss"),s=x(t,"predictions","logLoss"),a=null;e!=null&&(a=x(e,"weights","logLoss")),ln(o.shape,s.shape,"Error in logLoss: ");let c=Ct(1),l=Ct(n),d=Mr(Ie(o,cc(at(s,l)))),u=Ie(wt(c,o),cc(at(wt(c,s),l))),h=wt(d,u);return Fr(h,a,r)}var NW,RW=D(()=>{"use strict";$();fe();tr();z_();Ma();bn();_l();H();Gr();hr();uc();NW=w({logLoss_:Rge})});function Fge(i,t,e,n=kn.SUM_BY_NONZERO_WEIGHTS){let r=x(i,"labels","meanSquaredError"),o=x(t,"predictions","meanSquaredError"),s=null;e!=null&&(s=x(e,"weights","meanSquaredError")),ln(r.shape,o.shape,"Error in meanSquaredError: ");let a=a0(r,o);return Fr(a,s,n)}var FW,LW=D(()=>{"use strict";$();fe();Ma();H();m2();uc();FW=w({meanSquaredError_:Fge})});function Lge(i,t){let e=x(i,"labels","sigmoidCrossEntropyWithLogits"),n=x(t,"logits","sigmoidCrossEntropyWithLogits");ln(e.shape,n.shape,"Error in sigmoidCrossEntropyWithLogits: ");let r=vl(n),o=Ie(n,e),s=H_(fs(Mr(lr(n))));return at(wt(r,o),s)}function Bge(i,t,e,n=0,r=kn.SUM_BY_NONZERO_WEIGHTS){let o=x(i,"multiClassLabels","sigmoidCrossEntropy"),s=x(t,"logits","sigmoidCrossEntropy"),a=null;if(e!=null&&(a=x(e,"weights","sigmoidCrossEntropy")),ln(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),n>0){let l=Ct(n),d=Ct(1),u=Ct(.5);o=at(Ie(o,wt(d,l)),Ie(u,l))}let c=Lge(o,s);return Fr(c,a,r)}var BW,VW=D(()=>{"use strict";$();fe();rh();tr();Op();QN();Ma();bn();_l();H();i0();Gr();hr();uc();BW=w({sigmoidCrossEntropy_:Bge})});function Vge(i,t,e=-1){if(e===-1&&(e=t.rank-1),e!==t.rank-1)throw Error(`Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank ${t.rank} and dim was ${e}`);return Wr((r,o,s)=>{let c=$_(o,[e],!0),l=wt(si(o,"float32"),c);s([r,l]);let d=Mr(Ie(l,r));return{value:Ai(d,[e]),gradFunc:(m,p)=>{let[_,f]=p,g=hl(m.shape,[e]);return[Ie(ce(m,g),wt(si(_,"float32"),fs(f))),Ie(ce(m,g),wt(fs(f),si(_,"float32")))]}}})(i,t)}function Uge(i,t,e,n=0,r=kn.SUM_BY_NONZERO_WEIGHTS){let o=x(i,"onehotLabels","softmaxCrossEntropy"),s=x(t,"logits","softmaxCrossEntropy"),a=null;if(e!=null&&(a=x(e,"weights","softmaxCrossEntropy")),ln(o.shape,s.shape,"Error in softmaxCrossEntropy: "),n>0){let l=Ct(n),d=Ct(1),u=Ct(o.shape[1]);o=at(Ie(o,wt(d,l)),bi(l,u))}let c=Vge(o,s);return Fr(c,a,r)}var UW,zW=D(()=>{"use strict";gl();$();fe();tr();kp();Rr();Ao();Op();iR();Ma();bn();_l();H();ei();Gr();hr();va();uc();UW=w({softmaxCrossEntropy_:Uge})});function zge(i,t,e,n){let r=x(i,"indices","sparseFillEmptyRows","int32"),o=x(t,"values","sparseFillEmptyRows"),s=x(e,"denseShape","sparseFillEmptyRows","int32"),a=x(n,"defaultValue","sparseFillEmptyRows",o.dtype);if(r.rank!==2)throw new Error(`Indices should be Tensor2D but received shape
        ${r.shape}`);if(o.rank!==1)throw new Error(`Values should be Tensor1D but received shape ${o.shape}`);if(s.rank!==1)throw new Error(`Dense shape should be Tensor1D but received shape ${s.shape}`);if(a.rank!==0)throw new Error(`Default value should be a scalar but received shape ${a.shape}`);let c={indices:r,values:o,denseShape:s,defaultValue:a},l=I.runKernel(FP,c);return{outputIndices:l[0],outputValues:l[1],emptyRowIndicator:l[2],reverseIndexMap:l[3]}}var HW,jW=D(()=>{"use strict";Z();re();$();H();HW=w({sparseFillEmptyRows_:zge})});function Hge(i,t,e){let n=x(i,"inputIndices","sparseReshape","int32"),r=x(t,"inputShape","sparseReshape","int32"),o=x(e,"newShape","sparseReshape","int32");if(n.rank!==2)throw new Error(`Input indices should be Tensor2D but received shape
        ${n.shape}`);if(r.rank!==1)throw new Error(`Input shape should be Tensor1D but received shape ${r.shape}`);if(o.rank!==1)throw new Error(`New shape should be Tensor1D but received shape ${o.shape}`);let s={inputIndices:n,inputShape:r,newShape:o},a=I.runKernel(LP,s);return{outputIndices:a[0],outputShape:a[1]}}var $W,GW=D(()=>{"use strict";Z();re();$();H();$W=w({sparseReshape_:Hge})});function jge(i,t,e){let n=x(i,"data","sparseSegmentMean"),r=x(t,"indices","sparseSegmentMean","int32"),o=x(e,"segmentIds","sparseSegmentMean","int32");if(n.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
          ${r.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
          ${o.shape}`);let s={data:n,indices:r,segmentIds:o};return I.runKernel(BP,s)}var WW,qW=D(()=>{"use strict";Z();re();$();H();WW=w({sparseSegmentMean_:jge})});function $ge(i,t,e){let n=x(i,"data","sparseSegmentSum"),r=x(t,"indices","sparseSegmentSum","int32"),o=x(e,"segmentIds","sparseSegmentSum","int32");if(n.rank<1)throw new Error("Data should be at least 1 dimensional but received scalar");if(r.rank!==1)throw new Error(`Indices should be Tensor1D but received shape
         ${r.shape}`);if(o.rank!==1)throw new Error(`Segment ids should be Tensor1D but received shape
         ${o.shape}`);let s={data:n,indices:r,segmentIds:o};return I.runKernel(VP,s)}var XW,YW=D(()=>{"use strict";Z();re();$();H();XW=w({sparseSegmentSum_:$ge})});function Gge(i,t,e,n,r,o,s,a){let c=x(i,"data","stringNGrams","string");if(c.dtype!=="string")throw new Error("Data must be of datatype string");if(c.shape.length!==1)throw new Error(`Data must be a vector, saw: ${c.shape}`);let l=x(t,"dataSplits","stringNGrams");if(l.dtype!=="int32")throw new Error("Data splits must be of datatype int32");let d={separator:e,nGramWidths:n,leftPad:r,rightPad:o,padWidth:s,preserveShortSequences:a},u={data:c,dataSplits:l},h=I.runKernel($P,u,d);return{nGrams:h[0],nGramsSplits:h[1]}}var ZW,KW=D(()=>{"use strict";Z();re();$();H();ZW=w({stringNGrams_:Gge})});function Wge(i,t,e=!0){let n=x(i,"input","stringSplit","string"),r=x(t,"delimiter","stringSplit","string");if(n.rank!==1)throw new Error(`Input should be Tensor1D but received shape ${n.shape}`);if(r.rank!==0)throw new Error(`Delimiter should be a scalar but received shape ${r.shape}`);let o={skipEmpty:e},s={input:n,delimiter:r},a=I.runKernel(GP,s,o);return{indices:a[0],values:a[1],shape:a[2]}}var QW,JW=D(()=>{"use strict";Z();re();$();H();QW=w({stringSplit_:Wge})});function qge(i,t){let e=x(i,"input","stringToHashBucketFast","string"),n={numBuckets:t};if(t<=0)throw new Error("Number of buckets must be at least 1");let r={input:e};return I.runKernel(WP,r,n)}var e9,t9=D(()=>{"use strict";Z();re();$();H();e9=w({stringToHashBucketFast_:qge})});function Xge(i,t,e,n=!0){let r=x(i,"input","staticRegexReplace","string"),o={pattern:t,rewrite:e,replaceGlobal:n};return I.runKernel(HP,{x:r},o)}var i9,n9=D(()=>{"use strict";Z();re();$();H();i9=w({staticRegexReplace_:Xge})});var r9,o9,s9,a9,c9,l9,d9,g0=D(()=>{"use strict";rh();D6();k6();tr();A6();P6();O6();N6();R6();F6();L6();B6();V6();U6();JO();j6();$6();nN();T_();q6();X6();Y6();aN();Z6();K6();dN();sl();Rr();Q6();J6();Sp();_d();fa();ej();tj();ij();nj();rj();D_();oj();sj();lj();dj();uj();hj();mj();pj();fj();hw();gj();_j();Ao();vj();yj();ON();NN();xj();kN();wj();Sj();Op();pw();Ej();zN();Ip();HN();LO();jN();gw();$N();V_();Tj();Ij();Dj();XN();YN();_w();kj();Aj();z_();QN();Fj();Lj();iR();yw();nR();rR();Bj();Vj();al();P_();aR();Uj();zj();dR();Mw();Hj();BN();Sw();jj();$j();Gj();bn();Wj();qj();_l();_R();bR();Cw();Xj();Yj();Lp();Zj();Kj();Qj();Jj();e$();O_();TR();FO();t$();i$();n$();r$();o$();E$();$R();T$();kw();I$();Aw();t0();D$();i0();XR();ei();ph();k$();A$();P$();O$();JR();N$();Gr();R$();F$();L$();S_();B$();V$();U$();Hs();z$();H$();j$();$$();G$();JN();SR();Pw();Ow();h2();Nw();s0();Pp();ml();m2();Rw();c0();p2();W$();hr();va();q$();tN();b_();Id();Fw();_2();X$();Y$();Z$();Q$();fw();J$();eG();tG();iG();Lw();nG();rG();Dp();k2();Y_();dl();sG();Vw();N_();cG();dG();ww();pG();gG();yG();p0();wG();H();Nw();Pw();Ow();h2();RG();LG();A2();P2();VG();zG();jG();GG();qG();YG();KG();iW();rW();sW();cW();dW();hW();pW();gW();bW();yW();wW();SW();TW();uc();DW();AW();OW();RW();LW();VW();zW();jW();GW();qW();YW();KW();JW();t9();n9();r9={fft:fh,ifft:Td,rfft:gh,irfft:o0},o9={hammingWindow:FG,hannWindow:Hw,frame:jw,stft:BG},s9={flipLeftRight:HG,grayscaleToRGB:$G,resizeNearestNeighbor:mW,resizeBilinear:uW,rgbToGrayscale:WG,rotateWithOffset:XG,cropAndResize:UG,nonMaxSuppression:ZG,nonMaxSuppressionAsync:tW,nonMaxSuppressionWithScore:nW,nonMaxSuppressionWithScoreAsync:oW,nonMaxSuppressionPadded:aW,nonMaxSuppressionPaddedAsync:lW,threshold:fW,transform:_W},a9={bandPart:vW,gramSchmidt:xW,qr:CW},c9={absoluteDifference:EW,computeWeightedLoss:Fr,cosineDistance:IW,hingeLoss:kW,huberLoss:PW,logLoss:NW,meanSquaredError:FW,sigmoidCrossEntropy:BW,softmaxCrossEntropy:UW},l9={sparseFillEmptyRows:HW,sparseReshape:$W,sparseSegmentMean:WW,sparseSegmentSum:XW},d9={stringNGrams:ZW,stringSplit:QW,stringToHashBucketFast:e9,staticRegexReplace:i9}});var F2={};Ei(F2,{Serializable:()=>_0,SerializationMap:()=>qw,getRegisteredName:()=>Zge,registerClass:()=>R2});function R2(i,t,e){A(i.className!=null,()=>"Class being registered does not have the static className property defined."),A(typeof i.className=="string",()=>"className is required to be a string, but got type "+typeof i.className),A(i.className.length>0,()=>"Class being registered has an empty-string as its className, which is disallowed."),typeof t>"u"&&(t="Custom"),typeof e>"u"&&(e=i.className);let n=e,r=t+">"+n;return qw.register(i),Yge.set(r,i),N2.set(i,r),i}function Zge(i){return N2.has(i)?N2.get(i):i.className}var Yge,N2,_0,qw,Xw=D(()=>{"use strict";fe();Yge=new Map,N2=new Map,_0=class{getClassName(){return this.constructor.className}static fromConfig(t,e){return new t(e)}},qw=class i{constructor(){this.classNameMap={}}static getMap(){return i.instance==null&&(i.instance=new i),i.instance}static register(t){i.getMap().classNameMap[t.className]=[t,t.fromConfig]}}});var Xr,Dd=D(()=>{"use strict";qo();gl();g0();Xw();Xr=class extends _0{minimize(t,e=!1,n){let{value:r,grads:o}=this.computeGradients(t,n);if(n!=null){let s=n.map(a=>({name:a.name,tensor:o[a.name]}));this.applyGradients(s)}else this.applyGradients(o);return Dn(o),e?r:(r.dispose(),null)}get iterations(){return this.iterations_==null&&(this.iterations_=0),this.iterations_}incrementIterations(){this.iterations_=this.iterations+1}computeGradients(t,e){return bw(t,e)}dispose(){this.iterations_!=null&&Dn(this.iterations_)}saveIterations(){return oe(this,null,function*(){return this.iterations_==null&&(this.iterations_=0),{name:"iter",tensor:Ct(this.iterations_,"int32")}})}getWeights(){return oe(this,null,function*(){throw new Error("getWeights() is not implemented for this optimizer yet.")})}setWeights(t){return oe(this,null,function*(){throw new Error(`setWeights() is not implemented for this optimizer class ${this.getClassName()}`)})}extractIterations(t){return oe(this,null,function*(){return this.iterations_=(yield t[0].tensor.data())[0],t.slice(1)})}};Object.defineProperty(Xr,Symbol.hasInstance,{value:i=>i.minimize!=null&&i.computeGradients!=null&&i.applyGradients!=null})});var kd,Yw=D(()=>{"use strict";Z();qo();tr();Ao();bn();g0();ml();dl();Dd();kd=class extends Xr{static get className(){return"Adadelta"}constructor(t,e,n=null){super(),this.learningRate=t,this.rho=e,this.epsilon=n,this.accumulatedGrads=[],this.accumulatedUpdates=[],n==null&&(this.epsilon=I.backend.epsilon())}applyGradients(t){(Array.isArray(t)?t.map(n=>n.name):Object.keys(t)).forEach((n,r)=>{let o=I.registeredVariables[n],s=!1;this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accum_grad`,variable:Jt(()=>qn(o).variable(s))}),this.accumulatedUpdates[r]==null&&(this.accumulatedUpdates[r]={originalName:`${n}/accum_var`,variable:Jt(()=>qn(o).variable(s))});let a=Array.isArray(t)?t[r].tensor:t[n];if(a==null)return;let c=this.accumulatedGrads[r].variable,l=this.accumulatedUpdates[r].variable;Jt(()=>{let d=at(Ie(c,this.rho),Ie(ur(a),1-this.rho)),u=Ie(bi(ao(at(l,this.epsilon)),ao(at(c,this.epsilon))),a),h=at(Ie(l,this.rho),Ie(ur(u),1-this.rho));c.assign(d),l.assign(h);let m=at(Ie(u,-this.learningRate),o);o.assign(m)})}),this.incrementIterations()}dispose(){this.accumulatedUpdates!=null&&(Dn(this.accumulatedGrads.map(t=>t.variable)),Dn(this.accumulatedUpdates.map(t=>t.variable)))}getWeights(){return oe(this,null,function*(){let t=[...this.accumulatedGrads,...this.accumulatedUpdates];return[yield this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(t){return oe(this,null,function*(){t=yield this.extractIterations(t);let e=t.length/2,n=!1;this.accumulatedGrads=t.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedUpdates=t.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.rho,e.epsilon)}}});var Ad,Zw=D(()=>{"use strict";Z();qo();tr();Ao();Ip();bn();Pp();ml();Dd();Ad=class extends Xr{static get className(){return"Adagrad"}constructor(t,e=.1){super(),this.learningRate=t,this.initialAccumulatorValue=e,this.accumulatedGrads=[]}applyGradients(t){(Array.isArray(t)?t.map(n=>n.name):Object.keys(t)).forEach((n,r)=>{let o=I.registeredVariables[n];this.accumulatedGrads[r]==null&&(this.accumulatedGrads[r]={originalName:`${n}/accumulator`,variable:Jt(()=>_a(o.shape,this.initialAccumulatorValue).variable(!1))});let s=Array.isArray(t)?t[r].tensor:t[n];if(s==null)return;let a=this.accumulatedGrads[r].variable;Jt(()=>{let c=at(a,ur(s));a.assign(c);let l=at(Ie(bi(s,ao(at(c,I.backend.epsilon()))),-this.learningRate),o);o.assign(l)})}),this.incrementIterations()}dispose(){this.accumulatedGrads!=null&&Dn(this.accumulatedGrads.map(t=>t.variable))}getWeights(){return oe(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulatedGrads.map(t=>({name:t.originalName,tensor:t.variable})))})}setWeights(t){return oe(this,null,function*(){t=yield this.extractIterations(t);let e=!1;this.accumulatedGrads=t.map(n=>({originalName:n.name,variable:n.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}}static fromConfig(t,e){return new t(e.learningRate,e.initialAccumulatorValue)}}});var Pd,Kw=D(()=>{"use strict";Z();qo();tr();Ao();bn();O_();Gr();Pp();ml();hr();dl();Dd();Pd=class extends Xr{static get className(){return"Adam"}constructor(t,e,n,r=null){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.accumulatedFirstMoment=[],this.accumulatedSecondMoment=[],Jt(()=>{this.accBeta1=Ct(e).variable(),this.accBeta2=Ct(n).variable()}),r==null&&(this.epsilon=I.backend.epsilon())}applyGradients(t){let e=Array.isArray(t)?t.map(n=>n.name):Object.keys(t);Jt(()=>{let n=wt(1,this.accBeta1),r=wt(1,this.accBeta2);e.forEach((o,s)=>{let a=I.registeredVariables[o],c=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${o}/m`,variable:Jt(()=>qn(a).variable(c))}),this.accumulatedSecondMoment[s]==null&&(this.accumulatedSecondMoment[s]={originalName:`${o}/v`,variable:Jt(()=>qn(a).variable(c))});let l=Array.isArray(t)?t[s].tensor:t[o];if(l==null)return;let d=this.accumulatedFirstMoment[s].variable,u=this.accumulatedSecondMoment[s].variable,h=at(Ie(d,this.beta1),Ie(l,1-this.beta1)),m=at(Ie(u,this.beta2),Ie(ur(l),1-this.beta2)),p=bi(h,n),_=bi(m,r);d.assign(h),u.assign(m);let f=at(Ie(bi(p,at(ao(_),this.epsilon)),-this.learningRate),a);a.assign(f)}),this.accBeta1.assign(Ie(this.accBeta1,this.beta1)),this.accBeta2.assign(Ie(this.accBeta2,this.beta2))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Dn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedSecondMoment!=null&&Dn(this.accumulatedSecondMoment.map(t=>t.variable))}getWeights(){return oe(this,null,function*(){let t=[...this.accumulatedFirstMoment,...this.accumulatedSecondMoment];return[yield this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(t){return oe(this,null,function*(){t=yield this.extractIterations(t),Jt(()=>{this.accBeta1.assign(ac(this.beta1,this.iterations_+1)),this.accBeta2.assign(ac(this.beta2,this.iterations_+1))});let e=t.length/2,n=!1;this.accumulatedFirstMoment=t.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedSecondMoment=t.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)}))})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon)}}});var Od,Qw=D(()=>{"use strict";Z();qo();rh();tr();Ao();dR();bn();Gr();hr();dl();Dd();Od=class extends Xr{static get className(){return"Adamax"}constructor(t,e,n,r=null,o=0){super(),this.learningRate=t,this.beta1=e,this.beta2=n,this.epsilon=r,this.decay=o,this.accumulatedFirstMoment=[],this.accumulatedWeightedInfNorm=[],Jt(()=>{this.iteration=Ct(0).variable(),this.accBeta1=Ct(e).variable()}),r==null&&(this.epsilon=I.backend.epsilon())}applyGradients(t){let e=Array.isArray(t)?t.map(n=>n.name):Object.keys(t);Jt(()=>{let n=wt(1,this.accBeta1),r=bi(-this.learningRate,at(Ie(this.iteration,this.decay),1));e.forEach((o,s)=>{let a=I.registeredVariables[o],c=!1;this.accumulatedFirstMoment[s]==null&&(this.accumulatedFirstMoment[s]={originalName:`${o}/m`,variable:qn(a).variable(c)}),this.accumulatedWeightedInfNorm[s]==null&&(this.accumulatedWeightedInfNorm[s]={originalName:`${o}/v`,variable:qn(a).variable(c)});let l=Array.isArray(t)?t[s].tensor:t[o];if(l==null)return;let d=this.accumulatedFirstMoment[s].variable,u=this.accumulatedWeightedInfNorm[s].variable,h=at(Ie(d,this.beta1),Ie(l,1-this.beta1)),m=Ie(u,this.beta2),p=lr(l),_=X_(m,p);d.assign(h),u.assign(_);let f=at(Ie(bi(r,n),bi(h,at(_,this.epsilon))),a);a.assign(f)}),this.iteration.assign(at(this.iteration,1)),this.accBeta1.assign(Ie(this.accBeta1,this.beta1))}),this.incrementIterations()}dispose(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Dn(this.accumulatedFirstMoment.map(t=>t.variable)),this.accumulatedWeightedInfNorm!=null&&Dn(this.accumulatedWeightedInfNorm.map(t=>t.variable))}getWeights(){return oe(this,null,function*(){throw new Error("getWeights() is not implemented for Adamax yet.")})}setWeights(t){return oe(this,null,function*(){throw new Error("setWeights() is not implemented for Adamax yet.")})}getConfig(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}}static fromConfig(t,e){return new t(e.learningRate,e.beta1,e.beta2,e.epsilon,e.decay)}}});var hc,b0=D(()=>{"use strict";Z();qo();tr();bn();Gr();Dd();hc=class extends Xr{static get className(){return"SGD"}constructor(t){super(),this.learningRate=t,this.setLearningRate(t)}applyGradients(t){(Array.isArray(t)?t.map(n=>n.name):Object.keys(t)).forEach((n,r)=>{let o=Array.isArray(t)?t[r].tensor:t[n];if(o==null)return;let s=I.registeredVariables[n];Jt(()=>{let a=at(Ie(this.c,o),s);s.assign(a)})}),this.incrementIterations()}setLearningRate(t){this.learningRate=t,this.c!=null&&this.c.dispose(),this.c=so(Ct(-t))}dispose(){this.c.dispose()}getWeights(){return oe(this,null,function*(){return[yield this.saveIterations()]})}setWeights(t){return oe(this,null,function*(){if(t=yield this.extractIterations(t),t.length!==0)throw new Error("SGD optimizer does not have settable weights.")})}getConfig(){return{learningRate:this.learningRate}}static fromConfig(t,e){return new t(e.learningRate)}}});var Nd,Jw=D(()=>{"use strict";Z();qo();tr();bn();Gr();dl();b0();Nd=class extends hc{static get className(){return"Momentum"}constructor(t,e,n=!1){super(t),this.learningRate=t,this.momentum=e,this.useNesterov=n,this.accumulations=[],this.m=Ct(this.momentum)}applyGradients(t){(Array.isArray(t)?t.map(n=>n.name):Object.keys(t)).forEach((n,r)=>{let o=I.registeredVariables[n];this.accumulations[r]==null&&(this.accumulations[r]={originalName:`${n}/momentum`,variable:Jt(()=>qn(o).variable(!1))});let s=this.accumulations[r].variable,a=Array.isArray(t)?t[r].tensor:t[n];a!=null&&Jt(()=>{let c,l=at(Ie(this.m,s),a);this.useNesterov?c=at(Ie(this.c,at(a,Ie(l,this.m))),o):c=at(Ie(this.c,l),o),s.assign(l),o.assign(c)})}),this.incrementIterations()}dispose(){this.m.dispose(),this.accumulations!=null&&Dn(this.accumulations.map(t=>t.variable))}setMomentum(t){this.momentum=t}getWeights(){return oe(this,null,function*(){return[yield this.saveIterations()].concat(this.accumulations.map(t=>({name:t.originalName,tensor:t.variable})))})}setWeights(t){return oe(this,null,function*(){t=yield this.extractIterations(t);let e=!1;this.accumulations=t.map(n=>({originalName:n.name,variable:n.tensor.variable(e)}))})}getConfig(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}}static fromConfig(t,e){return new t(e.learningRate,e.momentum,e.useNesterov)}}});var Rd,eM=D(()=>{"use strict";Z();qo();tr();Ao();bn();Pp();ml();hr();dl();Dd();Rd=class extends Xr{static get className(){return"RMSProp"}constructor(t,e=.9,n=0,r=null,o=!1){if(super(),this.learningRate=t,this.decay=e,this.momentum=n,this.epsilon=r,this.accumulatedMeanSquares=[],this.accumulatedMoments=[],this.accumulatedMeanGrads=[],this.centered=o,r==null&&(this.epsilon=I.backend.epsilon()),t==null)throw new Error("learningRate for RMSPropOptimizer must be defined.")}applyGradients(t){(Array.isArray(t)?t.map(n=>n.name):Object.keys(t)).forEach((n,r)=>{let o=I.registeredVariables[n],s=!1;this.accumulatedMeanSquares[r]==null&&(this.accumulatedMeanSquares[r]={originalName:`${n}/rms`,variable:Jt(()=>qn(o).variable(s))}),this.accumulatedMoments[r]==null&&(this.accumulatedMoments[r]={originalName:`${n}/momentum`,variable:Jt(()=>qn(o).variable(s))}),this.accumulatedMeanGrads[r]==null&&this.centered&&(this.accumulatedMeanGrads[r]={originalName:`${n}/mg`,variable:Jt(()=>qn(o).variable(s))});let a=Array.isArray(t)?t[r].tensor:t[n];if(a==null)return;let c=this.accumulatedMeanSquares[r].variable,l=this.accumulatedMoments[r].variable;Jt(()=>{let d=at(Ie(c,this.decay),Ie(ur(a),1-this.decay));if(this.centered){let u=this.accumulatedMeanGrads[r].variable,h=at(Ie(u,this.decay),Ie(a,1-this.decay)),m=bi(Ie(a,this.learningRate),ao(wt(d,at(ur(h),this.epsilon)))),p=at(Ie(l,this.momentum),m);c.assign(d),u.assign(h),l.assign(p);let _=wt(o,p);o.assign(_)}else{let u=at(Ie(c,this.decay),Ie(ur(a),1-this.decay)),h=at(Ie(l,this.momentum),bi(Ie(a,this.learningRate),ao(at(u,this.epsilon))));c.assign(u),l.assign(h);let m=wt(o,h);o.assign(m)}})}),this.incrementIterations()}dispose(){this.accumulatedMeanSquares!=null&&Dn(this.accumulatedMeanSquares.map(t=>t.variable)),this.accumulatedMeanGrads!=null&&this.centered&&Dn(this.accumulatedMeanGrads.map(t=>t.variable)),this.accumulatedMoments!=null&&Dn(this.accumulatedMoments.map(t=>t.variable))}getWeights(){return oe(this,null,function*(){let t=[...this.accumulatedMeanSquares,...this.accumulatedMoments];return this.centered&&t.push(...this.accumulatedMeanGrads),[yield this.saveIterations()].concat(t.map(e=>({name:e.originalName,tensor:e.variable})))})}setWeights(t){return oe(this,null,function*(){t=yield this.extractIterations(t);let e=this.centered?t.length/3:t.length/2,n=!1;this.accumulatedMeanSquares=t.slice(0,e).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.accumulatedMoments=t.slice(e,e*2).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})),this.centered&&(this.accumulatedMeanGrads=t.slice(e*2,e*3).map(r=>({originalName:r.name,variable:r.tensor.variable(n)})))})}getConfig(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}}static fromConfig(t,e){return new t(e.learningRate,e.decay,e.momentum,e.epsilon,e.centered)}}});function u9(){for(let i of Kge)R2(i)}var Kge,h9=D(()=>{"use strict";Yw();Zw();Kw();Qw();Jw();eM();b0();Xw();Kge=[kd,Ad,Pd,Od,Nd,Rd,hc]});function m9(i){return new Promise(t=>setTimeout(t)).then(i)}function i_e(i="model"){return new L2(i)}function p9(i){return new B2(i)}var Qge,Jge,e_e,L2,B2,t_e,f9=D(()=>{"use strict";yp();xr();yd();Ju();bd();Qge="model",Jge=".json",e_e=".weights.bin";L2=(()=>{class i{constructor(e){if(!st().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(i.URL_SCHEME)&&(e=e.slice(i.URL_SCHEME.length)),(e==null||e.length===0)&&(e=Qge),this.modelJsonFileName=e+Jge,this.weightDataFileName=e+e_e}save(e){return oe(this,null,function*(){if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");let n=Or.join(e.weightData),r=window.URL.createObjectURL(new Blob([n],{type:"application/octet-stream"}));if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");{let o=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],s=aw(e,o),a=window.URL.createObjectURL(new Blob([JSON.stringify(s)],{type:"application/json"})),c=this.modelJsonAnchor==null?document.createElement("a"):this.modelJsonAnchor;if(c.download=this.modelJsonFileName,c.href=a,yield m9(()=>c.dispatchEvent(new MouseEvent("click"))),e.weightData!=null){let l=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor;l.download=this.weightDataFileName,l.href=r,yield m9(()=>l.dispatchEvent(new MouseEvent("click")))}return{modelArtifactsInfo:rc(e)}}})}}return i.URL_SCHEME="downloads://",i})(),B2=class{constructor(t){if(t==null||t.length<1)throw new Error(`When calling browserFiles, at least 1 file is required, but received ${t}`);this.jsonFile=t[0],this.weightsFiles=t.slice(1)}load(){return oe(this,null,function*(){return new Promise((t,e)=>{let n=new FileReader;n.onload=r=>{let o=JSON.parse(r.target.result),s=o.modelTopology;if(s==null){e(new Error(`modelTopology field is missing from file ${this.jsonFile.name}`));return}if(o.weightsManifest==null){e(new Error(`weightManifest field is missing from file ${this.jsonFile.name}`));return}if(this.weightsFiles.length===0){t({modelTopology:s});return}let c=xp(o,l=>this.loadWeights(l));t(c)},n.onerror=r=>e(`Failed to read model topology and weights manifest JSON from file '${this.jsonFile.name}'. BrowserFiles supports loading Keras-style tf.Model artifacts only.`),n.readAsText(this.jsonFile)})})}loadWeights(t){let e=[],n=[];for(let s of t)e.push(...s.weights),n.push(...s.paths);let r=this.checkManifestAndWeightFiles(t),o=n.map(s=>this.loadWeightsFile(s,r[s]));return Promise.all(o).then(s=>[e,s])}loadWeightsFile(t,e){return new Promise((n,r)=>{let o=new FileReader;o.onload=s=>{let a=s.target.result;n(a)},o.onerror=s=>r(`Failed to weights data from file of path '${t}'.`),o.readAsArrayBuffer(e)})}checkManifestAndWeightFiles(t){let e=[],n=this.weightsFiles.map(o=>SO(o.name)),r={};for(let o of t)o.paths.forEach(s=>{let a=SO(s);if(e.indexOf(a)!==-1)throw new Error(`Duplicate file basename found in weights manifest: '${a}'`);if(e.push(a),n.indexOf(a)===-1)throw new Error(`Weight file with basename '${a}' is not provided.`);r[s]=this.weightsFiles[n.indexOf(a)]});if(e.length!==this.weightsFiles.length)throw new Error(`Mismatch in the number of files in weights manifest (${e.length}) and the number of weight files provided (${this.weightsFiles.length}).`);return r}},t_e=i=>st().getBool("IS_BROWSER")&&!Array.isArray(i)&&i.startsWith(L2.URL_SCHEME)?i_e(i.slice(L2.URL_SCHEME.length)):null;cr.registerSaveRouter(t_e)});function V2(i,t,e,n){s(i),e=e??0,n=n??1,a(e,n);let r=0,o=c=>(c.then(l=>{let d=e+ ++r/i.length*(n-e);return t(d),l}),c);function s(c){A(c!=null&&Array.isArray(c)&&c.length>0,()=>"promises must be a none empty array")}function a(c,l){A(c>=0&&c<=1,()=>`Progress fraction must be in range [0, 1], but got startFraction ${c}`),A(l>=0&&l<=1,()=>`Progress fraction must be in range [0, 1], but got endFraction ${l}`),A(l>=c,()=>`startFraction must be no more than endFraction, but got startFraction ${c} and endFraction ${l}`)}return Promise.all(i.map(o))}var g9=D(()=>{"use strict";fe();});function U2(i,t){return oe(this,null,function*(){t==null&&(t={});let e=t.fetchFunc==null?st().platform.fetch:t.fetchFunc,n=i.map(u=>e(u,t.requestInit,{isBinary:!0})),a=(t.onProgress==null?yield Promise.all(n):yield V2(n,t.onProgress,0,.5)).map(u=>u.arrayBuffer());return t.onProgress==null?yield Promise.all(a):yield V2(a,t.onProgress,.5,1)})}function _9(i,t){var e;let n=t.fetchFunc==null?st().platform.fetch:t.fetchFunc,r=0,o;return(e=t.onProgress)===null||e===void 0||e.call(t,0),new ReadableStream({pull:s=>oe(this,null,function*(){for(var a;r<i.length;){o||(o=(yield n(i[r],t.requestInit,{isBinary:!0})).body.getReader());let{done:c,value:l}=yield o.read();if(c){r++,o=void 0,(a=t.onProgress)===null||a===void 0||a.call(t,r/i.length);continue}s.enqueue(l);return}s.close()})})}function b9(i,t="",e,n){return oe(this,null,function*(){return z2(s=>U2(s,{requestInit:n}))(i,t,e)})}function z2(i){return(t,e="",n)=>oe(this,null,function*(){let r=t.map(()=>!1),o={},s=n!=null?n.map(()=>!1):[],a=[];if(t.forEach((m,p)=>{let _=0;m.weights.forEach(f=>{let g="quantization"in f?f.quantization.dtype:f.dtype,S=rl[g]*oi(f.shape),C=()=>{r[p]=!0,o[p]==null&&(o[p]=[]),o[p].push({manifestEntry:f,groupOffset:_,sizeBytes:S})};n!=null?n.forEach((E,N)=>{E===f.name&&(C(),s[N]=!0)}):C(),a.push(f.name),_+=S})}),!s.every(m=>m)){let m=n.filter((p,_)=>!s[_]);throw new Error(`Could not find weights in manifest with names: ${m.join(", ")}. 
Manifest JSON has weights with names: ${a.join(", ")}.`)}let c=r.reduce((m,p,_)=>(p&&m.push(_),m),[]),l=[];c.forEach(m=>{t[m].paths.forEach(p=>{let _=e+(e.endsWith("/")?"":"/")+p;l.push(_)})});let d=yield i(l),u={},h=0;return c.forEach(m=>{let p=t[m].paths.length,_=new Or(d.slice(h,h+p));o[m].forEach(g=>{let S=_.slice(g.groupOffset,g.groupOffset+g.sizeBytes),C=ow(S,[g.manifestEntry]);for(let E in C)u[E]=C[E]}),h+=p}),u})}var H2=D(()=>{"use strict";xr();fe();bd();yd();g9();xO();});function o_e(i){let t=i.lastIndexOf("/"),e=i.lastIndexOf("?"),n=i.substring(0,t),r=e>t?i.substring(e):"";return[n+"/",r]}function tM(i){return i.match(v9.URL_SCHEME_REGEX)!=null}function iM(i,t){return new v9(i,t)}function x9(i,t){return iM(i,t)}var n_e,r_e,v9,y9,w9=D(()=>{"use strict";xr();fe();yd();bd();Ju();H2();n_e="application/octet-stream",r_e="application/json",v9=(()=>{class i{constructor(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.weightUrlConverter=n.weightUrlConverter,n.fetchFunc!=null?(A(typeof n.fetchFunc=="function",()=>"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"),this.fetch=n.fetchFunc):this.fetch=st().platform.fetch,A(e!=null&&e.length>0,()=>"URL path for http must not be null, undefined or empty."),Array.isArray(e)&&A(e.length===2,()=>`URL paths for http must have a length of 2, (actual length is ${e.length}).`),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{},this.loadOptions=n}save(e){return oe(this,null,function*(){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");let n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit);n.body=new FormData;let r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],o=aw(e,r);if(n.body.append("model.json",new Blob([JSON.stringify(o)],{type:r_e}),"model.json"),e.weightData!=null){let a=Or.join(e.weightData);n.body.append("model.weights.bin",new Blob([a],{type:n_e}),"model.weights.bin")}let s=yield this.fetch(this.path,n);if(s.ok)return{modelArtifactsInfo:rc(e),responses:[s]};throw new Error(`BrowserHTTPRequest.save() failed due to HTTP response status ${s.status}.`)})}loadModelJSON(){return oe(this,null,function*(){let e=yield this.fetch(this.path,this.requestInit);if(!e.ok)throw new Error(`Request to ${this.path} failed with status code ${e.status}. Please verify this URL points to the model JSON of the model to load.`);let n;try{n=yield e.json()}catch{let a=`Failed to parse model JSON of response from ${this.path}.`;throw this.path.endsWith(".pb")?a+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":a+=" Please make sure the server is serving valid JSON for this request.",new Error(a)}let r=n.modelTopology,o=n.weightsManifest;if(r==null&&o==null)throw new Error(`The JSON from HTTP path ${this.path} contains neither model topology or manifest for weights.`);return n})}load(){return oe(this,null,function*(){if(this.loadOptions.streamWeights)return this.loadStream();let e=yield this.loadModelJSON();return xp(e,n=>this.loadWeights(n))})}loadStream(){return oe(this,null,function*(){let e=yield this.loadModelJSON(),n=yield this.getWeightUrls(e.weightsManifest),r=v_(e.weightsManifest),o=()=>_9(n,this.loadOptions);return Object.assign(Object.assign({},e),{weightSpecs:r,getWeightStream:o})})}getWeightUrls(e){return oe(this,null,function*(){let n=Array.isArray(this.path)?this.path[1]:this.path,[r,o]=o_e(n),s=this.weightPathPrefix||r,a=[],c=[];for(let l of e)for(let d of l.paths)this.weightUrlConverter!=null?c.push(this.weightUrlConverter(d)):a.push(s+d+o);return this.weightUrlConverter&&a.push(...yield Promise.all(c)),a})}loadWeights(e){return oe(this,null,function*(){let n=yield this.getWeightUrls(e),r=v_(e),o=yield U2(n,this.loadOptions);return[r,o]})}}return i.URL_SCHEME_REGEX=/^https?:\/\//,i})();y9=(i,t)=>{if(typeof fetch>"u"&&(t==null||t.fetchFunc==null))return null;{let e=!0;if(Array.isArray(i)?e=i.every(n=>tM(n)):e=tM(i),e)return iM(i,t)}return null};cr.registerSaveRouter(y9);cr.registerLoadRouter(y9)});function M9(i,t,e,n){let r=arguments;return new j2($2(...r))}function $2(i,t,e,n){return arguments.length===1?i.modelTopology!=null||i.weightSpecs!=null?new v0(i):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new v0({modelTopology:i})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new v0({modelTopology:i,weightSpecs:t,weightData:e,trainingConfig:n}))}function C9(i){return new nM(i)}function S9(i){return new nM(i)}var v0,nM,j2,E9=D(()=>{"use strict";v0=class{constructor(t){this.modelArtifacts=t}load(){return this.modelArtifacts}},nM=class{constructor(t){this.saveHandler=t}save(t){return this.saveHandler(t)}},j2=class{constructor(t){t.load&&(this.load=()=>Promise.resolve(t.load())),t.save&&(this.save=e=>Promise.resolve(t.save(e)))}}});var mc={};Ei(mc,{CompositeArrayBuffer:()=>Or,browserFiles:()=>p9,browserHTTPRequest:()=>x9,concatenateArrayBuffers:()=>a6,copyModel:()=>x6,decodeWeights:()=>ow,decodeWeightsStream:()=>sw,encodeWeights:()=>n6,fromMemory:()=>M9,fromMemorySync:()=>$2,getLoadHandlers:()=>u6,getModelArtifactsForJSON:()=>xp,getModelArtifactsForJSONSync:()=>EO,getModelArtifactsInfoForJSON:()=>rc,getSaveHandlers:()=>d6,getWeightSpecs:()=>v_,http:()=>iM,isHTTPScheme:()=>tM,listModels:()=>v6,loadWeights:()=>b9,moveModel:()=>w6,registerLoadRouter:()=>l6,registerSaveRouter:()=>c6,removeModel:()=>y6,weightsLoaderFactory:()=>z2,withSaveHandler:()=>C9,withSaveHandlerSync:()=>S9});var T9=D(()=>{"use strict";kO();AO();f9();w9();yd();E9();Ju();H2();bd();PO();});function s_e(i,t,e){let n=x(i,"labels","confusionMatrix"),r=x(t,"predictions","confusionMatrix");A(e==null||e>0&&Number.isInteger(e),()=>`If provided, numClasses must be a positive integer, but got ${e}`),A(n.rank===1,()=>`Expected the rank of labels to be 1, but got ${n.rank}`),A(r.rank===1,()=>`Expected the rank of predictions to be 1, but got ${r.rank}`),A(n.shape[0]===r.shape[0],()=>`Mismatch in the number of examples: ${n.shape[0]} vs. ${r.shape[0]}. Labels and predictions should have the same number of elements.`),A(e>0&&Number.isInteger(e),()=>`numClasses is required to be a positive integer, but got ${e}`);let o=Fp(si(n,"int32"),e),s=Fp(si(r,"int32"),e),a=bh(o),c=Mi(a,s);return si(c,"int32")}var I9,D9=D(()=>{"use strict";$();fe();Rr();al();bR();H();Vw();I9=w({confusionMatrix_:s_e})});var G2={};Ei(G2,{confusionMatrix:()=>I9});var k9=D(()=>{"use strict";D9();});var W2={};Ei(W2,{draw:()=>p_e,fromPixels:()=>f_e,fromPixelsAsync:()=>u_e,toPixels:()=>m_e});function P9(i,t=3){if(t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");if(i==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");let e=!1,n=!1,r=!1,o=!1,s=!1,a=!1;if(i.data instanceof Uint8Array)e=!0;else if(typeof ImageData<"u"&&i instanceof ImageData)n=!0;else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement)r=!0;else if(typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement)o=!0;else if(i.getContext!=null)s=!0;else if(typeof ImageBitmap<"u"&&i instanceof ImageBitmap)a=!0;else throw new Error(`pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was ${i.constructor.name}`);if(Wu(Hx,I.backendName)!=null){let p={pixels:i},_={numChannels:t};return I.runKernel(Hx,p,_)}let[l,d]=r?[i.videoWidth,i.videoHeight]:[i.width,i.height],u;if(s)u=i.getContext("2d").getImageData(0,0,l,d).data;else if(n||e)u=i.data;else if(o||r||a){if(Ch==null)if(typeof document>"u")if(typeof OffscreenCanvas<"u"&&typeof OffscreenCanvasRenderingContext2D<"u")Ch=new OffscreenCanvas(1,1).getContext("2d");else throw new Error("Cannot parse input in current context. Reason: OffscreenCanvas Context2D rendering is not supported.");else Ch=document.createElement("canvas").getContext("2d",{willReadFrequently:!0});Ch.canvas.width=l,Ch.canvas.height=d,Ch.drawImage(i,0,0,l,d),u=Ch.getImageData(0,0,l,d).data}let h;if(t===4)h=new Int32Array(u);else{let p=l*d;h=new Int32Array(p*t);for(let _=0;_<p;_++)for(let f=0;f<t;++f)h[_*t+f]=u[_*4+f]}return d0(h,[d,l,t],"int32")}function a_e(i){return i!=null&&i.data instanceof Uint8Array}function c_e(){return typeof window<"u"&&typeof ImageBitmap<"u"&&window.hasOwnProperty("createImageBitmap")}function l_e(i){return i!=null&&i.width!==0&&i.height!==0}function d_e(i){return c_e()&&!(i instanceof ImageBitmap)&&l_e(i)&&!a_e(i)}function u_e(i,t=3){return oe(this,null,function*(){let e=null;if(st().getBool("WRAP_TO_IMAGEBITMAP")&&d_e(i)){let n;try{n=yield createImageBitmap(i,{premultiplyAlpha:"none"})}catch{n=null}n!=null&&n.width===i.width&&n.height===i.height?e=n:e=i}else e=i;return P9(e,t)})}function O9(i){if(i.rank!==2&&i.rank!==3)throw new Error(`toPixels only supports rank 2 or 3 tensors, got rank ${i.rank}.`);let t=i.rank===2?1:i.shape[2];if(t>4||t===2)throw new Error(`toPixels only supports depth of size 1, 3 or 4 but got ${t}`);if(i.dtype!=="float32"&&i.dtype!=="int32")throw new Error(`Unsupported type for toPixels: ${i.dtype}. Please use float32 or int32 tensors.`)}function h_e(i){let t=i?.alpha||1;if(t>1||t<0)throw new Error(`Alpha value ${t} is suppoed to be in range [0 - 1].`)}function m_e(i,t){return oe(this,null,function*(){let e=x(i,"img","toPixels");if(!(i instanceof Bi)){let l=e;e=si(l,"int32"),l.dispose()}O9(e);let[n,r]=e.shape.slice(0,2),o=e.rank===2?1:e.shape[2],s=yield e.data(),a=e.dtype==="float32"?255:1,c=new Uint8ClampedArray(r*n*4);for(let l=0;l<n*r;++l){let d=[0,0,0,255];for(let h=0;h<o;h++){let m=s[l*o+h];if(e.dtype==="float32"){if(m<0||m>1)throw new Error(`Tensor values for a float32 Tensor must be in the range [0 - 1] but encountered ${m}.`)}else if(e.dtype==="int32"&&(m<0||m>255))throw new Error(`Tensor values for a int32 Tensor must be in the range [0 - 255] but encountered ${m}.`);o===1?(d[0]=m*a,d[1]=m*a,d[2]=m*a):d[h]=m*a}let u=l*4;c[u+0]=Math.round(d[0]),c[u+1]=Math.round(d[1]),c[u+2]=Math.round(d[2]),c[u+3]=Math.round(d[3])}if(t!=null){A9||Wu(zx,I.backendName)!=null&&(console.warn("tf.browser.toPixels is not efficient to draw tensor on canvas. Please try tf.browser.draw instead."),A9=!0),t.width=r,t.height=n;let l=t.getContext("2d"),d=new ImageData(c,r,n);l.putImageData(d,0,0)}return e!==i&&e.dispose(),c})}function p_e(i,t,e){let n=x(i,"img","draw");if(!(i instanceof Bi)){let s=n;n=si(s,"int32"),s.dispose()}O9(n),h_e(e?.imageOptions);let r={image:n},o={canvas:t,options:e};I.runKernel(zx,r,o)}var Ch,A9,f_e,N9=D(()=>{"use strict";Z();xr();re();Xx();ps();$();Rr();H();_2();A9=!1;f_e=w({fromPixels_:P9})});var q2={};Ei(q2,{prepareAndValidate:()=>R9});function R9(i,t){let e=i.shape.length,n=t.shape.length;if(e<1)throw new Error(`tf.gatherND() expects the input to be rank 1 or higher, but the rank was ${e}.`);if(n<1)throw new Error(`tf.gatherND() expects the indices to be rank 1 or higher, but the rank was ${n}.`);if(t.dtype!=="int32")throw new Error(`tf.gatherND() expects the indices to be int32 type, but the dtype was ${t.dtype}.`);if(t.shape[n-1]>e)throw new Error(`index innermost dimension length must be <= tensor rank; saw: ${t.shape[n-1]} vs. ${e}`);if(oi(i.shape)===0)throw new Error(`Requested more than 0 entries, but input is empty. Input shape: ${i.shape}.`);let r=t.shape,o=r[r.length-1],s=1;for(let u=0;u<r.length-1;++u)s*=r[u];let a=i.shape,c=r.slice();c.pop();let l=1;for(let u=o;u<e;++u)l*=a[u],c.push(a[u]);let d=[...tc(i.shape).map(u=>u/l),1].slice(0,o);return[c,s,l,d]}var X2=D(()=>{"use strict";fe()});var y0={};Ei(y0,{assertParamsValid:()=>__e,computeFlatOffset:()=>w_e,computeOutShape:()=>v_e,getNormalizedAxes:()=>y_e,isSliceContinous:()=>x_e,maskToAxes:()=>b_e,parseSliceParams:()=>M_e,sliceInfo:()=>C_e,startForAxis:()=>j9,startIndicesWithElidedDims:()=>U9,stopForAxis:()=>$9,stopIndicesWithElidedDims:()=>z9,stridesForAxis:()=>H9,stridesWithElidedDims:()=>L9});function __e(i,t,e){let n=i.shape.length;A(n===t.length,()=>`Error in slice${n}D: Length of begin ${t} must match the rank of the array (${n}).`),A(n===e.length,()=>`Error in slice${n}D: Length of size ${e} must match the rank of the array (${n}).`);for(let r=0;r<n;++r)A(t[r]+e[r]<=i.shape[r],()=>`Error in slice${n}D: begin[${r}] + size[${r}] (${t[r]+e[r]}) would overflow input.shape[${r}] (${i.shape[r]})`)}function b_e(i){let t=[],e=0;for(;i>0;)i&1&&t.push(e),i/=2,e++;return t}function v_e(i,t,e){let n=[];for(let r=0;r<i.length;r++)n[r]=Math.ceil((t[r]-i[r])/e[r]);return n}function L9(i,t,e,n){let r=[...i];for(let o=r.length;o<n.length;o++)r.push(1);for(let o=0;o<e;o++)o===0?r[t]=1:(r.splice(t,0,1),r.pop());return r}function B9(i,t,e){return e<=i?e:e-(t-1)}function V9(i,t){let e=[];for(let n=0;n<i;n++)e.push(t+n);return e}function y_e(i,t,e,n,r,o,s,a,c){let l=i.length,d=new Array(l),u=new Array(l),h=new Array(l);if(t.length&&e>0){let m=t[0],p=e+1;d=U9(s,m,p,n,i),u=z9(a,m,p,r,i),h=L9(o,m,p,i)}else for(let m=0;m<l;m++)d[m]=j9(s,n,o,i,m,c),u[m]=$9(a,r,o,i,m,c),h[m]=H9(o,m,c);return{begin:d,end:u,strides:h}}function U9(i,t,e,n,r){let o=[...r],s=V9(e,t);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=0;else{let c=B9(t,e,a),l=n[c];i&1<<c&&(l=0),o[a]=l}return o}function z9(i,t,e,n,r){let o=[...r],s=V9(e,t);for(let a=0;a<o.length;a++)if(s.indexOf(a)>-1)o[a]=Number.MAX_SAFE_INTEGER;else{let c=B9(t,e,a),l=n[c];i&1<<c&&(l=Number.MAX_SAFE_INTEGER),o[a]=l}for(let a=0;a<o.length;a++){let c=r[a];o[a]<0&&(o[a]+=c),o[a]=cp(0,o[a],r[a])}return o}function H9(i,t,e){let n=i[t];return(e&1<<t||n==null)&&(n=1),n}function j9(i,t,e,n,r,o){let s=t[r],a=e[r]||1;(i&1<<r||o&1<<r||s==null)&&(a>0?s=Number.MIN_SAFE_INTEGER:s=Number.MAX_SAFE_INTEGER);let c=n[r];return s<0&&(s+=c),s=cp(0,s,c-1),s}function $9(i,t,e,n,r,o){let s=t[r],a=e[r]||1;(i&1<<r||o&1<<r||s==null)&&(a>0?s=Number.MAX_SAFE_INTEGER:s=Number.MIN_SAFE_INTEGER);let c=n[r];return s<0&&(s+=c),a>0?s=cp(0,s,c):s=cp(-1,s,c-1),s}function x_e(i,t,e){let n=e.length;for(let r=0;r<e.length;r++)if(e[r]>1){n=r;break}for(let r=n+1;r<e.length;r++)if(t[r]>0||e[r]!==i[r])return!1;return!0}function w_e(i,t){let e=i.length>0?i[i.length-1]:1;for(let n=0;n<i.length-1;n++)e+=i[n]*t[n];return e}function M_e(i,t,e){let n,r=i.shape.length;typeof t=="number"?n=[t,...new Array(r-1).fill(0)]:t.length<r?n=t.concat(new Array(r-t.length).fill(0)):n=t.slice(),n.forEach(s=>{A(s!==-1,()=>"slice() does not support negative begin indexing.")});let o;return e==null?o=new Array(r).fill(-1):typeof e=="number"?o=[e,...new Array(r-1).fill(-1)]:e.length<r?o=e.concat(new Array(r-e.length).fill(-1)):o=e,o=o.map((s,a)=>s>=0?s:(A(s===-1,()=>`Negative size values should be exactly -1 but got ${s} for the slice() size at index ${a}.`),i.shape[a]-n[a])),[n,o]}function C_e(i,t,e,n,r,o,s,a,c){let l;if(n==null?(l=new Array(t.length),l.fill(1)):l=n,s!=null&&s&s-1)throw new Error("Multiple ellipses in slice is not allowed.");let d=!1,u={dims:l.length,numAddAxisAfterEllipsis:0,begin:t.slice(),end:e.slice(),strides:l.slice(),beginMask:r,endMask:o,ellipsisMask:s,newAxisMask:a,shrinkAxisMask:c};for(let C=0;C<u.dims;C++)d&&1<<C&a&&u.numAddAxisAfterEllipsis++,1<<C&s&&(d=!0);d||(u.ellipsisMask|=1<<u.dims,u.dims++);let h={dims:i.length,beginMask:0,endMask:0,beginValid:!1,endValid:!1};S_e(u,h);let m=!0,p=!0,_=!0,f=[],g=[];for(let C=0;C<i.length;++C){if(h.strides[C]===0)throw Error(`strides[${C}] must be non-zero`);let E=!!(h.shrinkAxisMask&1<<C),N=i[C];if(N===-1){f.push(E?1:-1);continue}let R=[h.beginMask&1<<C,h.endMask&1<<C],B=[h.strides[C]>0?0:-1,h.strides[C]>0?N:N-1];if(E&&h.strides[C]<=0)throw Error("only stride 1 allowed on non-range indexing.");_=_&&h.strides[C]===1;let z=!!(h.beginMask&1<<C&&h.endMask&1<<C);if(h.beginValid&&h.endValid){if(E){let X=h.begin[C]<0?N+h.begin[C]:h.begin[C];if(h.begin[C]=X,h.end[C]=h.begin[C]+1,X<0||X>=N)throw Error(`slice index ${h.begin[C]} of dimension ${C} out of bounds.`)}else h.begin[C]=F9(h.begin[C],0,h.strides[C],N,R,B),h.end[C]=F9(h.end[C],1,h.strides[C],N,R,B);let U=h.strides[C]===1&&h.begin[C]===0&&h.end[C]===N;m=m&&U,p=p&&(C===0&&h.strides[C]===1||U)}else m=m&&h.strides[C]===1&&z,p=p&&(C===0&&h.strides[C]===1||z);let T,O=!1;if(h.beginValid&&h.endValid?(T=h.end[C]-h.begin[C],O=!0):E?(T=1,O=!0):z&&N>=0&&(h.strides[C]<0?T=-N:T=N,O=!0),O){let U;T===0||T<0!=h.strides[C]<0?U=0:U=Math.trunc(T/h.strides[C])+(T%h.strides[C]!==0?1:0),f.push(U)}else f.push(-1)}for(let C=0;C<h.finalShapeGatherIndices.length;++C){let E=h.finalShapeGatherIndices[C];E>=0?g.push(f[E]):E===Y2&&g.push(1)}return{finalShapeSparse:g.filter((C,E)=>h.finalShapeGatherIndices[E]!==Y2),finalShape:g,isIdentity:m,sliceDim0:p,isSimpleSlice:_,begin:h.begin,end:h.end,strides:h.strides}}function S_e(i,t){t.beginMask=0,t.endMask=0,t.shrinkAxisMask=0;let e=0;t.beginValid=i.begin!=null,t.endValid=i.end!=null,t.begin=new Array(t.dims),t.end=new Array(t.dims),t.strides=new Array(t.dims),t.finalShapeGatherIndices=[],t.finalShapeGatherIndicesSparse=[],t.inputShapeGatherIndicesSparse=new Array(t.dims);for(let n=0;n<i.dims;n++)if(1<<n&i.ellipsisMask){let r=Math.min(t.dims-(i.dims-n)+1+i.numAddAxisAfterEllipsis,t.dims);for(;e<r;e++)t.begin[e]=0,t.end[e]=0,t.strides[e]=1,t.beginMask|=1<<e,t.endMask|=1<<e,t.finalShapeGatherIndices.push(e),t.finalShapeGatherIndicesSparse.push(-1),t.inputShapeGatherIndicesSparse[e]=n}else if(1<<n&i.newAxisMask)t.finalShapeGatherIndices.push(Y2),t.finalShapeGatherIndicesSparse.push(-1);else{if(e===t.begin.length)throw Error(`Index out of range using input dim ${e}; input has only ${t.dims} dims, ${t.begin.length}.`);i.begin!=null&&(t.begin[e]=i.begin[n]),i.end!=null&&(t.end[e]=i.end[n]),t.strides[e]=i.strides[n],i.beginMask&1<<n&&(t.beginMask|=1<<e),i.endMask&1<<n&&(t.endMask|=1<<e),i.shrinkAxisMask&1<<n?(t.finalShapeGatherIndices.push(g_e),t.finalShapeGatherIndicesSparse.push(-1),t.shrinkAxisMask|=1<<e):(t.finalShapeGatherIndices.push(e),t.finalShapeGatherIndicesSparse.push(n)),t.inputShapeGatherIndicesSparse[e]=n,e++}}function F9(i,t,e,n,r,o){if(r[t])return e>0?o[t]:o[t+1&1];{let s=i<0?n+i:i;return s<o[0]?o[0]:s>o[1]?o[1]:s}}var Y2,g_e,Z2=D(()=>{"use strict";fe();Y2=-2,g_e=-1});var G9,W9=D(()=>{"use strict";G9="4.22.0"});var zp,K2=D(()=>{"use strict";Yw();Zw();Kw();Qw();Jw();eM();b0();zp=class{static sgd(t){return new hc(t)}static momentum(t,e,n=!1){return new Nd(t,e,n)}static rmsprop(t,e=.9,n=0,r=null,o=!1){return new Rd(t,e,n,r,o)}static adam(t=.001,e=.9,n=.999,r=null){return new Pd(t,e,n,r)}static adadelta(t=.001,e=.95,n=null){return new kd(t,e,n)}static adamax(t=.002,e=.9,n=.999,r=null,o=0){return new Od(t,e,n,r,o)}static adagrad(t,e=.1){return new Ad(t,e)}}});var E_e,q9=D(()=>{"use strict";K2();E_e=zp});function X9(){return new Promise(i=>T_e(()=>i()))}var T_e,Y9=D(()=>{"use strict";T_e=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:i=>i()});function I_e(i,t){let e=i[0].length;i.forEach((r,o)=>{A(r.length===e,()=>`Error in concat${e}D: rank of tensors[${o}] must be the same as the rank of the rest (${e})`)}),A(t>=0&&t<e,()=>`Error in concat${e}D: axis must be between 0 and ${e-1}.`);let n=i[0];i.forEach((r,o)=>{for(let s=0;s<e;s++)A(s===t||r[s]===n[s],()=>`Error in concat${e}D: Shape of tensors[${o}] (${r}) does not match the shape of the rest (${n}) along the non-concatenated axis ${o}.`)})}function D_e(i,t){let e=i[0].slice();for(let n=1;n<i.length;n++)e[t]+=i[n][t];return e}var Z9=D(()=>{"use strict";fe();});var K9=D(()=>{"use strict";});function k_e(i,t,e){let n=new Array;if(e==null&&t==null)return n;if(t==null)for(;n.length<i+e.length;)n.push(-1);else n=t.slice();if(e==null)return n;if(i+e.length!==n.length)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.rank = ${i+e.length}, but shape.rank = ${n.length}`);for(let r=1;r<e.length;++r){let o=e[r],s=n[n.length-e.length+r],a=n[s];if(o>=0)if(a>=0){if(a!==o)throw new Error(`rt input.shape and shape=${t} are incompatible: rt input.shape[${r+i}] = ${o} but shape[${r+i}] = ${a}`)}else n[s]=o}return n}function A_e(i){let t={FIRST_DIM_SIZE:xl.FIRST_DIM_SIZE,VALUE_ROWIDS:xl.VALUE_ROWIDS,ROW_LENGTHS:xl.ROW_LENGTHS,ROW_SPLITS:xl.ROW_SPLITS,ROW_LIMITS:xl.ROW_LIMITS,ROW_STARTS:xl.ROW_STARTS},e=[];for(let n of i)if(n in t)e.push(t[n]);else break;return e}function P_e(i){return i.length===0?0:i[0]===xl.FIRST_DIM_SIZE?i.length-1:i.length}function O_e(i,t){if(i==null||t==null)return;let e=i.length,n=t.length;if(e>=n)throw new Error(`defaultValue.shape=${i} and ragged tensor flatValues.shape=${t}, are incompatible: defaultValue.rank = ${e} must be less than ragged tensor input flatValues.rank = ${n})`);for(let r=0;r<Math.min(e,n-1);++r){let o=i[r],s=t[r+1];if(o>=0&&s>=0&&o!==1&&o!==s)throw new Error(`defaultValue.shape=${i}, and ragged tensor input flatValues.shape=${t} are incompatible: defaultValue.shape[${r-i.length}] = ${o} but ragged tensor input.flatValues.shape[${r-i.length}] = ${s}`)}}var xl,Q9=D(()=>{"use strict";xl=function(i){return i[i.FIRST_DIM_SIZE=0]="FIRST_DIM_SIZE",i[i.VALUE_ROWIDS=1]="VALUE_ROWIDS",i[i.ROW_LENGTHS=2]="ROW_LENGTHS",i[i.ROW_SPLITS=3]="ROW_SPLITS",i[i.ROW_LIMITS=4]="ROW_LIMITS",i[i.ROW_STARTS=5]="ROW_STARTS",i}(xl||{})});function N_e(i){return i<=rM?i:dp(i,Math.floor(Math.sqrt(i)))}var rM,Q2=D(()=>{"use strict";fe();rM=30});function R_e(i,t,e){let n=e*(typeof i=="number"?i:i[0]),r=t*(typeof i=="number"?i:i[1]);return[n,r]}var J9=D(()=>{"use strict";});function F_e(i,t,e,n=!0){let r=[];if(n)r=r.concat(t.slice(0)),r.push(i[0]/e),r=r.concat(i.slice(1));else{r=r.concat(i[0]);let o=t.length;for(let s=0;s<o;++s)r=r.concat([i[s+1]/t[s],t[s]]);r=r.concat(i.slice(o+1))}return r}function L_e(i,t,e=!0){let n=[];if(e){n.push(t);for(let r=t+1;r<i;++r)r<=2*t?(n.push(r),n.push(r-(t+1))):n.push(r)}else{let r=[],o=[];for(let s=1;s<i;++s)s>=t*2+1||s%2===1?o.push(s):r.push(s);n.push(...r),n.push(0),n.push(...o)}return n}function B_e(i,t,e,n=!0){let r=[];n?r.push(i[0]/e):r.push(i[0]*e);for(let o=1;o<i.length;++o)o<=t.length?n?r.push(t[o-1]*i[o]):r.push(i[o]/t[o-1]):r.push(i[o]);return r}function V_e(i,t){let e=[0];for(let n=0;n<t;++n)e.push(i[n][0]);return e}function U_e(i,t,e){let n=i.slice(0,1);for(let r=0;r<e;++r)n.push(i[r+1]-t[r][0]-t[r][1]);return n}var e7=D(()=>{"use strict";});var z_e,H_e,t7=D(()=>{"use strict";z_e=1.7580993408473768,H_e=1.0507009873554805});var j_e,$_e,G_e,W_e,q_e,X_e,i7=D(()=>{"use strict";j_e=.3275911,$_e=.254829592,G_e=-.284496736,W_e=1.421413741,q_e=-1.453152027,X_e=1.061405429});function Y_e(i,t){if(i.length!==t.length)throw new Error(`Cannot merge real and imag arrays of different lengths. real:${i.length}, imag: ${t.length}.`);let e=new Float32Array(i.length*2);for(let n=0;n<e.length;n+=2)e[n]=i[n/2],e[n+1]=t[n/2];return e}function Z_e(i){let t=new Float32Array(i.length/2),e=new Float32Array(i.length/2);for(let n=0;n<i.length;n+=2)t[n/2]=i[n],e[n/2]=i[n+1];return{real:t,imag:e}}function K_e(i){let t=Math.ceil(i.length/4),e=new Float32Array(t),n=new Float32Array(t);for(let r=0;r<i.length;r+=4)e[Math.floor(r/4)]=i[r],n[Math.floor(r/4)]=i[r+1];return{real:e,imag:n}}function Q_e(i){let t=Math.floor(i.length/4),e=new Float32Array(t),n=new Float32Array(t);for(let r=2;r<i.length;r+=4)e[Math.floor(r/4)]=i[r],n[Math.floor(r/4)]=i[r+1];return{real:e,imag:n}}function J_e(i,t){let e=i[t*2],n=i[t*2+1];return{real:e,imag:n}}function e0e(i,t,e,n){i[n*2]=t,i[n*2+1]=e}function t0e(i,t){let e=new Float32Array(i/2),n=new Float32Array(i/2);for(let r=0;r<Math.ceil(i/2);r++){let o=(t?2:-2)*Math.PI*(r/i);e[r]=Math.cos(o),n[r]=Math.sin(o)}return{real:e,imag:n}}function i0e(i,t,e){let n=(e?2:-2)*Math.PI*(i/t),r=Math.cos(n),o=Math.sin(n);return{real:r,imag:o}}var n7=D(()=>{"use strict";});function r0e(i,t){i=i.replace(/\s/g,"");let e=(i.length-i.replace(n0e,"").length)/J2.length;if(e<1)throw new Error("Equations without an arrow are not supported.");if(e>1)throw new Error(`Equation must contain exactly one arrow ("${J2}").`);let[n,r]=i.split(J2);A(n.indexOf(o7)===-1,()=>`The ellipsis notation ("${o7}") is not supported yet.`);let o=n.split(r7),s=o.length;if(t!==s)throw new Error(`Expected ${s} input tensors, received ${t}`);if(s>2)throw new Error("Support for more than 2 input tensors is not implemented yet.");let a=[];for(let h=0;h<r.length;++h){let m=r[h];if(!o.some(p=>p.indexOf(m)!==-1))throw new Error(`Output subscripts contain the label ${m} not present in the input subscripts.`);a.indexOf(m)===-1&&a.push(m)}for(let h=0;h<n.length;++h){let m=n[h];a.indexOf(m)===-1&&m!==r7&&a.push(m)}let c=new Array(o.length);for(let h=0;h<s;++h){if(new Set(o[h].split("")).size!==o[h].length)throw new Error(`Found duplicate axes in input component ${o[h]}. Support for duplicate axes in input is not implemented yet.`);c[h]=[];for(let m=0;m<o[h].length;++m)c[h].push(a.indexOf(o[h][m]))}let l=a.length,d=r.length,u=[];for(let h=d;h<l;++h)u.push(h);return{allDims:a,summedDims:u,idDims:c}}function o0e(i,t){let e=new Array(i);e.fill(-1);for(let r=0;r<t.length;++r)e[t[r]]=r;let n=[];for(let r=0;r<i;++r)e[r]===-1&&n.push(r);return e=e.filter(r=>r!==-1),{permutationIndices:e,expandDims:n}}function s0e(i,t,e){let n=new Array(i);for(let r=0;r<e.length;++r){let o=e[r].shape;for(let s=0;s<t[r].length;++s)n[t[r][s]]===void 0?n[t[r][s]]=o[s]:A(n[t[r][s]]===o[s],()=>`Expected dimension ${n[t[r][s]]} at axis ${s} of input shaped ${JSON.stringify(o)}, but got dimension ${o[s]}`)}}function a0e(i,t){let e=i,n=[],r=0;i.length===0&&e.push(-1),r=i.length+1;for(let s=0;s<r;++s)n.push([]);let o=[];for(let s=0;s<e.length;++s){let a=e[s],c=l0e(t,a);for(let l of c)o.indexOf(l)===-1&&(n[s].push(l),o.push(l))}return{path:e,steps:n}}function c0e(i){return i.every((t,e)=>t===e)}function l0e(i,t){let e=[];for(let n=0;n<i.length;++n)(i[n].length===0||i[n].indexOf(t)!==-1||t===-1)&&e.push(n);return e}var J2,n0e,r7,o7,s7=D(()=>{"use strict";ar();J2="->",n0e=/->/g,r7=",",o7="..."});function d0e(i,t,e=0){let n=[];if(typeof t=="number")A(i.shape[e]%t===0,()=>"Number of splits must evenly divide the axis."),n=new Array(t).fill(i.shape[e]/t);else{let r=t.reduce((s,a)=>(a===-1&&(s+=1),s),0);A(r<=1,()=>"There should be only one negative value in split array.");let o=t.indexOf(-1);if(o!==-1){let s=t.reduce((a,c)=>c>0?a+c:a);t[o]=i.shape[e]-s}A(i.shape[e]===t.reduce((s,a)=>s+a),()=>"The sum of sizes must match the size of the axis dimension."),n=t}return n}var a7=D(()=>{"use strict";fe()});function u0e(i){return`Received SparseTensor with denseShape[0] = 0 but
  indices.shape[0] = ${i}`}function h0e(i,t){return`indices(${i}, 0) is invalid: ${t} < 0`}function m0e(i,t,e){return`indices(${i}, 0) is invalid: ${t} >= ${e}`}var c7=D(()=>{"use strict";});function p0e(i,t){return`only one output dimension may be -1, not both ${i} and ${t}`}function f0e(i,t){return`size ${i} must be non-negative, not ${t}`}function g0e(){return"reshape cannot infer the missing input size for an empty tensor unless all specified input sizes are non-zero"}function _0e(i,t){let e=oi(i),n=oi(t);return`Input to reshape is a SparseTensor with ${e}
  dense values, but the requested shape requires a multiple of ${n}. inputShape=${i} outputShape= ${t}`}function b0e(i,t){let e=oi(i),n=oi(t);return`Input to reshape is a tensor with ${e} dense values, but the requested shape has ${n}. inputShape=${i} outputShape=${t}`}var l7=D(()=>{"use strict";fe();});function v0e(){return"segment ids must be >= 0"}function y0e(){return"segment ids are not increasing"}function x0e(i,t){return`Segment id ${i} out of range [0, ${t}), possibly because segmentIds input is not sorted.`}function w0e(i,t,e){return`Bad: indices[${i}] == ${t} out of range [0, ${e})`}var d7=D(()=>{"use strict";});var eF={};Ei(eF,{collectGatherOpShapeInfo:()=>S0e,computeOutShape:()=>C0e,segOpComputeOptimalWindowSize:()=>M0e});function M0e(i,t){let e=!1,n;for(i<=rM?(n=i,e=!0):n=dp(i,Math.floor(Math.sqrt(i)));!e;)n>t||n===i?e=!0:n=dp(i,n+1);return n}function C0e(i,t,e){let n=[],r=i.length;for(let o=0;o<r;o++)o!==t?n.push(i[o]):n.push(e);return n}function S0e(i,t,e,n){let r=t.shape.length,o=i.shape.length;if(n!==0&&(n<-r||n>r))throw new Error(`Expect batchDims in the range of [-${r}, ${r}], but got ${n}`);if(n<0&&(n+=r),n>o)throw new Error(`batchDims (${n}) must be less than rank(x) (
    ${o}).`);if(e<n)throw new Error(`batchDims (${n}) must be less than or equal to axis (${e}).`);for(let u=0;u<n;++u)if(i.shape[u]!==t.shape[u])throw new Error(`x.shape[${u}]: ${i.shape[u]} should be equal to indices.shape[${u}]: ${t.shape[u]}.`);let s=i.shape[e],a=[],c=1,l=1,d=1;for(let u=0;u<n;++u)a.push(i.shape[u]),c*=i.shape[u];for(let u=n;u<e;u++)a.push(i.shape[u]),l*=i.shape[u];for(let u=n;u<r;u++)a.push(t.shape[u]);for(let u=e+1;u<o;u++)a.push(i.shape[u]),d*=i.shape[u];return{batchSize:c,sliceSize:d,outerSize:l,dimSize:s,outputShape:a}}var u7=D(()=>{"use strict";fe();Q2();});var tF={};Ei(tF,{ERF_A1:()=>$_e,ERF_A2:()=>G_e,ERF_A3:()=>W_e,ERF_A4:()=>q_e,ERF_A5:()=>X_e,ERF_P:()=>j_e,PARALLELIZE_THRESHOLD:()=>rM,RowPartitionType:()=>xl,SELU_SCALE:()=>H_e,SELU_SCALEALPHA:()=>z_e,applyActivation:()=>xh,assertAndGetBroadcastShape:()=>ki,assertAxesAreInnerMostDims:()=>gme,assertParamsConsistent:()=>I_e,assignToTypedArray:()=>e0e,axesAreInnerMostDims:()=>LN,calculateShapes:()=>K$,checkEinsumDimSizes:()=>s0e,checkPadOnDimRoundingMode:()=>Ln,combineLocations:()=>Mj,combineRaggedTensorToTensorShapes:()=>k_e,complexWithEvenIndex:()=>K_e,complexWithOddIndex:()=>Q_e,computeConv2DInfo:()=>sh,computeConv3DInfo:()=>z6,computeDefaultPad:()=>QO,computeDilation2DInfo:()=>phe,computeOptimalWindowSize:()=>N_e,computeOutAndReduceShapes:()=>fme,computeOutShape:()=>D_e,computePool2DInfo:()=>KO,computePool3DInfo:()=>fhe,convertConv2DDataFormat:()=>H6,decodeEinsumEquation:()=>r0e,eitherStridesOrDilationsAreOne:()=>$r,expandShapeToKeepDim:()=>hl,exponent:()=>i0e,exponents:()=>t0e,fromStringArrayToUint8:()=>T0e,fromUint8ToStringArray:()=>E0e,getAxesPermutation:()=>_me,getBroadcastDims:()=>bj,getComplexWithIndex:()=>J_e,getEinsumComputePath:()=>a0e,getEinsumPermutation:()=>o0e,getFusedBiasGradient:()=>yh,getFusedDyActivation:()=>vh,getImageCenter:()=>R_e,getInnerMostAxes:()=>vme,getPermuted:()=>L_e,getRaggedRank:()=>P_e,getReductionAxes:()=>mw,getReshaped:()=>F_e,getReshapedPermuted:()=>B_e,getRowPartitionTypesHelper:()=>A_e,getSliceBeginCoords:()=>V_e,getSliceSize:()=>U_e,getSparseFillEmptyRowsIndicesDenseShapeMismatch:()=>u0e,getSparseFillEmptyRowsNegativeIndexErrorMessage:()=>h0e,getSparseFillEmptyRowsOutOfRangeIndexErrorMessage:()=>m0e,getSparseReshapeEmptyTensorZeroOutputDimErrorMessage:()=>g0e,getSparseReshapeInputOutputMismatchErrorMessage:()=>b0e,getSparseReshapeInputOutputMultipleErrorMessage:()=>_0e,getSparseReshapeMultipleNegativeOneOutputDimErrorMessage:()=>p0e,getSparseReshapeNegativeOutputDimErrorMessage:()=>f0e,getSparseSegmentReductionIndicesOutOfRangeErrorMessage:()=>w0e,getSparseSegmentReductionNegativeSegmentIdsErrorMessage:()=>v0e,getSparseSegmentReductionNonIncreasingSegmentIdsErrorMessage:()=>y0e,getSparseSegmentReductionSegmentIdOutOfRangeErrorMessage:()=>x0e,getUndoAxesPermutation:()=>bme,isIdentityPermutation:()=>c0e,log:()=>zde,mergeRealAndImagArrays:()=>Y_e,prepareAndValidate:()=>R9,prepareSplitSize:()=>d0e,segment_util:()=>eF,shouldFuse:()=>wh,slice_util:()=>y0,splitRealAndImagArrays:()=>Z_e,stridesOrDilationsArePositive:()=>oc,tupleValuesAreOne:()=>oh,upcastType:()=>Qu,validateDefaultValueShape:()=>O_e,validateInput:()=>Bp,validateUpdateShape:()=>x2,warn:()=>ic});function E0e(i){try{return i.map(t=>_p(t))}catch(t){throw new Error(`Failed to decode encoded string bytes into utf-8, error: ${t}`)}}function T0e(i){return i.map(t=>gd(t))}var h7=D(()=>{"use strict";fe();kp();dr();Z9();Po();Up();K9();Q9();Q2();Z2();vp();J9();e7();X2();h0();t7();Up();i7();Wx();n7();s7();a7();c7();l7();d7();u7();});var iF={};Ei(iF,{nonMaxSuppressionV3Impl:()=>$w,nonMaxSuppressionV4Impl:()=>Gw,nonMaxSuppressionV5Impl:()=>Ww,whereImpl:()=>Bw});var m7=D(()=>{"use strict";f0();D2();});var p7=D(()=>{"use strict";T9();k9();dr();N9();X2();h0();Z2();Xw();_n();S$();fe();W9();Yw();Zw();Kw();Qw();Jw();Dd();K2();eM();b0();ps();vp();g0();Ma();q9();qo();Xx();gl();xr();Y9();h7();yO();m7();sk();re();});var nF={};Ei(nF,{Abs:()=>fk,Acos:()=>gk,Acosh:()=>_k,AdadeltaOptimizer:()=>kd,AdagradOptimizer:()=>Ad,AdamOptimizer:()=>Pd,AdamaxOptimizer:()=>Od,Add:()=>s_,AddN:()=>bk,All:()=>vk,Any:()=>yk,ArgMax:()=>xk,ArgMin:()=>wk,Asin:()=>Mk,Asinh:()=>Ck,Atan:()=>Sk,Atan2:()=>Tk,Atanh:()=>Ek,AvgPool:()=>Ik,AvgPool3D:()=>Dk,AvgPool3DGrad:()=>Mde,AvgPoolGrad:()=>wde,BatchMatMul:()=>kk,BatchToSpaceND:()=>Ak,Bincount:()=>Pk,BitwiseAnd:()=>Ok,BroadcastArgs:()=>Nk,BroadcastTo:()=>Cde,Cast:()=>a_,Ceil:()=>Rk,ClipByValue:()=>Fk,Complex:()=>Lk,ComplexAbs:()=>Bk,Concat:()=>Vk,Conv2D:()=>Uk,Conv2DBackpropFilter:()=>zk,Conv2DBackpropInput:()=>Hk,Conv3D:()=>jk,Conv3DBackpropFilterV2:()=>Sde,Conv3DBackpropInputV2:()=>$k,Cos:()=>Gk,Cosh:()=>Wk,CropAndResize:()=>Yk,Cumprod:()=>qk,Cumsum:()=>Xk,DataStorage:()=>Fx,DenseBincount:()=>Zk,DepthToSpace:()=>Kk,DepthwiseConv2dNative:()=>Qk,DepthwiseConv2dNativeBackpropFilter:()=>Jk,DepthwiseConv2dNativeBackpropInput:()=>eA,Diag:()=>tA,Dilation2D:()=>iA,Dilation2DBackpropFilter:()=>Tde,Dilation2DBackpropInput:()=>Ede,Draw:()=>zx,ENV:()=>Vx,Einsum:()=>rA,Elu:()=>oA,EluGrad:()=>Ide,Environment:()=>hp,Equal:()=>aA,Erf:()=>sA,Exp:()=>cA,ExpandDims:()=>lA,Expm1:()=>dA,FFT:()=>uA,Fill:()=>hA,FlipLeftRight:()=>mA,Floor:()=>pA,FloorDiv:()=>fA,FromPixels:()=>Hx,FusedBatchNorm:()=>gA,FusedConv2D:()=>$x,FusedDepthwiseConv2D:()=>Gx,GatherNd:()=>bA,GatherV2:()=>_A,Greater:()=>vA,GreaterEqual:()=>yA,IFFT:()=>xA,Identity:()=>c_,Imag:()=>wA,IsFinite:()=>MA,IsInf:()=>CA,IsNan:()=>SA,KernelBackend:()=>ap,LRN:()=>RA,LRNGrad:()=>Pde,LeakyRelu:()=>EA,Less:()=>TA,LessEqual:()=>IA,LinSpace:()=>DA,Log:()=>kA,Log1p:()=>AA,LogSoftmax:()=>kde,LogicalAnd:()=>PA,LogicalNot:()=>OA,LogicalOr:()=>NA,LogicalXor:()=>Dde,LowerBound:()=>Ade,MatrixBandPart:()=>Ode,Max:()=>FA,MaxPool:()=>BA,MaxPool3D:()=>VA,MaxPool3DGrad:()=>Rde,MaxPoolGrad:()=>Nde,MaxPoolWithArgmax:()=>UA,Maximum:()=>LA,Mean:()=>zA,Min:()=>HA,Minimum:()=>jA,MirrorPad:()=>$A,Mod:()=>GA,MomentumOptimizer:()=>Nd,Multinomial:()=>WA,Multiply:()=>qA,Neg:()=>XA,NonMaxSuppressionV3:()=>ZA,NonMaxSuppressionV4:()=>KA,NonMaxSuppressionV5:()=>QA,NotEqual:()=>YA,OP_SCOPE_SUFFIX:()=>rw,OneHot:()=>eP,OnesLike:()=>JA,Optimizer:()=>Xr,OptimizerConstructors:()=>zp,Pack:()=>tP,PadV2:()=>iP,Pool:()=>Fde,Pow:()=>nP,Prelu:()=>rP,Prod:()=>oP,RMSPropOptimizer:()=>Rd,RaggedGather:()=>sP,RaggedRange:()=>aP,RaggedTensorToTensor:()=>cP,Range:()=>lP,Rank:()=>mO,Real:()=>dP,RealDiv:()=>nA,Reciprocal:()=>uP,Reduction:()=>kn,Relu:()=>hP,Relu6:()=>gP,Reshape:()=>mP,ResizeBilinear:()=>fP,ResizeBilinearGrad:()=>Bde,ResizeNearestNeighbor:()=>pP,ResizeNearestNeighborGrad:()=>Lde,Reverse:()=>_P,RotateWithOffset:()=>nO,Round:()=>bP,Rsqrt:()=>vP,SGDOptimizer:()=>hc,ScatterNd:()=>yP,SearchSorted:()=>wP,Select:()=>MP,Selu:()=>CP,Sigmoid:()=>DP,Sign:()=>IP,Sin:()=>EP,Sinh:()=>TP,Slice:()=>SP,Softmax:()=>RP,Softplus:()=>kP,SpaceToBatchND:()=>OP,SparseFillEmptyRows:()=>FP,SparseReshape:()=>LP,SparseSegmentMean:()=>BP,SparseSegmentSum:()=>VP,SparseToDense:()=>UP,SplitV:()=>NP,Sqrt:()=>AP,Square:()=>Vde,SquaredDifference:()=>zP,StaticRegexReplace:()=>HP,Step:()=>iO,StridedSlice:()=>jP,StringNGrams:()=>$P,StringSplit:()=>GP,StringToHashBucketFast:()=>WP,Sub:()=>qP,Sum:()=>PP,Tan:()=>XP,Tanh:()=>YP,Tensor:()=>Bi,TensorBuffer:()=>tl,TensorScatterUpdate:()=>xP,Tile:()=>l_,TopK:()=>ZP,Transform:()=>KP,Transpose:()=>d_,Unique:()=>QP,Unpack:()=>JP,UnsortedSegmentSum:()=>eO,UpperBound:()=>Ude,Variable:()=>nc,ZerosLike:()=>tO,_FusedMatMul:()=>jx,abs:()=>lr,acos:()=>BO,acosh:()=>VO,add:()=>at,addN:()=>UO,all:()=>zO,any:()=>HO,argMax:()=>jO,argMin:()=>$O,asin:()=>GO,asinh:()=>WO,atan:()=>qO,atan2:()=>XO,atanh:()=>YO,avgPool:()=>C_,avgPool3d:()=>eN,backend:()=>MO,backend_util:()=>tF,basicLSTMCell:()=>iN,batchNorm:()=>cl,batchNorm2d:()=>rN,batchNorm3d:()=>oN,batchNorm4d:()=>sN,batchToSpaceND:()=>E_,bincount:()=>I_,bitwiseAnd:()=>cN,booleanMaskAsync:()=>oG,broadcastArgs:()=>lN,broadcastTo:()=>ah,broadcast_util:()=>lh,browser:()=>W2,buffer:()=>Nr,cast:()=>si,ceil:()=>uN,clipByValue:()=>hN,clone:()=>ko,complex:()=>ro,concat:()=>sn,concat1d:()=>mN,concat2d:()=>pN,concat3d:()=>fN,concat4d:()=>gN,conv1d:()=>_N,conv2d:()=>ll,conv2dTranspose:()=>vN,conv3d:()=>yN,conv3dTranspose:()=>xN,copyRegisteredKernels:()=>Gde,cos:()=>wN,cosh:()=>MN,cosineWindow:()=>Vp,cumprod:()=>CN,cumsum:()=>SN,customGrad:()=>Wr,denseBincount:()=>EN,deprecationWarn:()=>e6,depthToSpace:()=>TN,depthwiseConv2d:()=>ch,device_util:()=>nw,diag:()=>IN,dilation2d:()=>DN,disableDeprecationWarnings:()=>_ue,dispose:()=>Dn,disposeVariables:()=>bue,div:()=>bi,divNoNan:()=>AN,dot:()=>PN,dropout:()=>vG,einsum:()=>ul,elu:()=>A_,enableDebugMode:()=>gue,enableProdMode:()=>fue,enclosingPowerOfTwo:()=>Uw,engine:()=>vue,ensureShape:()=>RN,env:()=>st,equal:()=>k_,erf:()=>FN,euclideanNorm:()=>VN,exp:()=>fs,expandDims:()=>js,expm1:()=>UN,eye:()=>R_,fft:()=>fh,fill:()=>_a,findBackend:()=>Eue,findBackendFactory:()=>Tue,floor:()=>F_,floorDiv:()=>x_,fused:()=>zw,gather:()=>L_,gatherND:()=>fG,gather_util:()=>q2,getBackend:()=>wO,getGradient:()=>qx,getKernel:()=>Wu,getKernelsForBackend:()=>h_,grad:()=>Pj,grads:()=>Oj,greater:()=>Md,greaterEqual:()=>B_,ifft:()=>Td,imag:()=>fl,image:()=>s9,inTopKAsync:()=>xG,io:()=>mc,irfft:()=>o0,isFinite:()=>GN,isInf:()=>WN,isNaN:()=>qN,keep:()=>so,kernel_impls:()=>iF,leakyRelu:()=>U_,less:()=>Np,lessEqual:()=>dh,linalg:()=>a9,linspace:()=>ZN,localResponseNormalization:()=>KN,log:()=>cc,log1p:()=>H_,logSigmoid:()=>eR,logSoftmax:()=>tR,logSumExp:()=>$_,logicalAnd:()=>Cd,logicalNot:()=>G_,logicalOr:()=>W_,logicalXor:()=>oR,losses:()=>c9,lowerBound:()=>sR,matMul:()=>Mi,math:()=>G2,max:()=>ba,maxPool:()=>q_,maxPool3d:()=>cR,maxPoolWithArgmax:()=>lR,maximum:()=>X_,mean:()=>Sd,memory:()=>yue,meshgrid:()=>uR,min:()=>Ap,minimum:()=>Ed,mirrorPad:()=>hR,mod:()=>mR,moments:()=>pR,movingAverage:()=>aG,mul:()=>Ie,multiRNNCell:()=>fR,multinomial:()=>gR,neg:()=>Mr,nextFrame:()=>X9,norm:()=>wd,notEqual:()=>Z_,oneHot:()=>Fp,ones:()=>xa,onesLike:()=>vR,op:()=>w,outerProduct:()=>yR,pad:()=>wa,pad1d:()=>xR,pad2d:()=>wR,pad3d:()=>MR,pad4d:()=>CR,pool:()=>ER,pow:()=>ac,prelu:()=>Q_,print:()=>y_,prod:()=>IR,profile:()=>xue,raggedGather:()=>DR,raggedRange:()=>kR,raggedTensorToTensor:()=>AR,rand:()=>PR,randomGamma:()=>jR,randomNormal:()=>e0,randomStandardNormal:()=>GR,randomUniform:()=>mh,randomUniformInt:()=>WR,range:()=>bl,ready:()=>Cue,real:()=>lc,reciprocal:()=>qR,registerBackend:()=>Iue,registerGradient:()=>Hde,registerKernel:()=>v8,relu:()=>vl,relu6:()=>n0,removeBackend:()=>Sue,reshape:()=>ce,reverse:()=>Yo,reverse1d:()=>YR,reverse2d:()=>ZR,reverse3d:()=>KR,reverse4d:()=>QR,rfft:()=>gh,round:()=>r0,rsqrt:()=>e2,scalar:()=>Ct,scatterND:()=>lG,scatter_util:()=>u0,searchSorted:()=>Rp,selu:()=>t2,separableConv2d:()=>i2,serialization:()=>F2,setBackend:()=>Mue,setPlatform:()=>Due,setdiff1dAsync:()=>n2,sigmoid:()=>ga,sign:()=>r2,signal:()=>o9,sin:()=>o2,sinh:()=>s2,slice:()=>vi,slice1d:()=>a2,slice2d:()=>c2,slice3d:()=>l2,slice4d:()=>d2,slice_util:()=>y0,softmax:()=>u2,softplus:()=>j_,spaceToBatchND:()=>K_,sparse:()=>l9,sparseToDense:()=>mG,spectral:()=>r9,split:()=>dc,sqrt:()=>ao,square:()=>ur,squaredDifference:()=>a0,squeeze:()=>_h,stack:()=>qr,step:()=>l0,stridedSlice:()=>f2,string:()=>d9,sub:()=>wt,sum:()=>Ai,sumOutType:()=>Z8,tan:()=>g2,tanh:()=>Tp,tensor:()=>jr,tensor1d:()=>mr,tensor2d:()=>yl,tensor3d:()=>d0,tensor4d:()=>b2,tensor5d:()=>v2,tensor6d:()=>y2,tensorScatterUpdate:()=>w2,tensor_util:()=>fO,test_util:()=>HR,tidy:()=>Jt,tile:()=>pl,time:()=>wue,topk:()=>M2,train:()=>E_e,transpose:()=>bh,truncatedNormal:()=>C2,unique:()=>S2,unregisterGradient:()=>$de,unregisterKernel:()=>jde,unsortedSegmentSum:()=>E2,unstack:()=>Zo,upcastType:()=>Qu,upperBound:()=>T2,util:()=>ke,valueAndGrad:()=>Nj,valueAndGrads:()=>Rj,variable:()=>I2,variableGrads:()=>bw,version_core:()=>G9,where:()=>Xo,whereAsync:()=>m0,zeros:()=>ya,zerosLike:()=>qn});var Ko=D(()=>{"use strict";I6();h9();p7();u9()});var I0e,f7=D(()=>{"use strict";Ko();I0e=st();I0e.registerFlag("KEEP_INTERMEDIATE_TENSORS",()=>!1,i=>{i&&console.warn("Keep intermediate tensors is ON. This will print the values of all intermediate tensors during model inference. Not all models support this mode. For details, check e2e/benchmarks/ model_config.js. This significantly impacts performance.")})});var Qo,g7,_7=D(()=>{"use strict";Qo=function(i){return i[i.DT_INVALID=0]="DT_INVALID",i[i.DT_FLOAT=1]="DT_FLOAT",i[i.DT_DOUBLE=2]="DT_DOUBLE",i[i.DT_INT32=3]="DT_INT32",i[i.DT_UINT8=4]="DT_UINT8",i[i.DT_INT16=5]="DT_INT16",i[i.DT_INT8=6]="DT_INT8",i[i.DT_STRING=7]="DT_STRING",i[i.DT_COMPLEX64=8]="DT_COMPLEX64",i[i.DT_INT64=9]="DT_INT64",i[i.DT_BOOL=10]="DT_BOOL",i[i.DT_QINT8=11]="DT_QINT8",i[i.DT_QUINT8=12]="DT_QUINT8",i[i.DT_QINT32=13]="DT_QINT32",i[i.DT_BFLOAT16=14]="DT_BFLOAT16",i[i.DT_QINT16=15]="DT_QINT16",i[i.DT_QUINT16=16]="DT_QUINT16",i[i.DT_UINT16=17]="DT_UINT16",i[i.DT_COMPLEX128=18]="DT_COMPLEX128",i[i.DT_HALF=19]="DT_HALF",i[i.DT_RESOURCE=20]="DT_RESOURCE",i[i.DT_VARIANT=21]="DT_VARIANT",i[i.DT_UINT32=22]="DT_UINT32",i[i.DT_UINT64=23]="DT_UINT64",i[i.DT_FLOAT_REF=101]="DT_FLOAT_REF",i[i.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",i[i.DT_INT32_REF=103]="DT_INT32_REF",i[i.DT_UINT8_REF=104]="DT_UINT8_REF",i[i.DT_INT16_REF=105]="DT_INT16_REF",i[i.DT_INT8_REF=106]="DT_INT8_REF",i[i.DT_STRING_REF=107]="DT_STRING_REF",i[i.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",i[i.DT_INT64_REF=109]="DT_INT64_REF",i[i.DT_BOOL_REF=110]="DT_BOOL_REF",i[i.DT_QINT8_REF=111]="DT_QINT8_REF",i[i.DT_QUINT8_REF=112]="DT_QUINT8_REF",i[i.DT_QINT32_REF=113]="DT_QINT32_REF",i[i.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF",i[i.DT_QINT16_REF=115]="DT_QINT16_REF",i[i.DT_QUINT16_REF=116]="DT_QUINT16_REF",i[i.DT_UINT16_REF=117]="DT_UINT16_REF",i[i.DT_COMPLEX128_REF=118]="DT_COMPLEX128_REF",i[i.DT_HALF_REF=119]="DT_HALF_REF",i[i.DT_RESOURCE_REF=120]="DT_RESOURCE_REF",i[i.DT_VARIANT_REF=121]="DT_VARIANT_REF",i[i.DT_UINT32_REF=122]="DT_UINT32_REF",i[i.DT_UINT64_REF=123]="DT_UINT64_REF",i}(Qo||{});(function(i){let t;(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t=i.CheckpointFormatVersion||(i.CheckpointFormatVersion={}))})(g7||(g7={}))});function b7(i,t){let e={tfOpName:i,category:"custom",inputs:[],attrs:[],customExecutor:t};rF[i]=e}function oM(i){return rF[i]}function v7(i){delete rF[i]}var rF,sM=D(()=>{"use strict";rF={}});function y(i,t,e,n,r){let o=t.inputParams[i];if(o&&o.inputIndexStart!==void 0){let a=o.inputIndexStart,c=o.inputIndexEnd===0?void 0:o.inputIndexEnd===void 0?a+1:o.inputIndexEnd,l=a<0?t.inputNames.length+a:a;if(o.type==="tensor")return Bn(t.inputNames[l],e,n,r);if(o.type==="tensors"){let h=t.inputs.slice(a,c);return t.inputNames.slice(a,c).filter((p,_)=>{var f;return((f=h[_])===null||f===void 0?void 0:f.op)!=="NoOp"}).map(p=>Bn(p,e,n,r))}let d=Bn(t.inputNames[l],e,n,r),u=d.dataSync();return o.type==="number"?u[0]:ke.toNestedArray(d.shape,u)}let s=t.attrParams[i];return s&&s.value}function Bn(i,t,e,n){let[r,o]=co(i,e);if(n!=null){let a=n.getHashTableHandleByName(r);if(a!=null)return a}let s=e.currentContextIds.find(a=>!!t[aM(r,a)]);return s!==void 0?t[aM(r,s)][o]:void 0}function oF(i,t,e){return t[aM(i,e.currentContextId)]}function Ca(i,t){let[e,n,r]=co(i,t);return[aM(e,t&&t.currentContextId),n,r]}function aM(i,t){return t?`${i}-${t}`:i}function co(i,t){if(i==="")return["",0,void 0];let e=t!=null&&t.parseNodeNameCache!=null;if(e){let o=t.parseNodeNameCache.get(i);if(o!=null)return o}let n=i.split(":"),r;if(n.length===1)r=[i,0,void 0];else{let o=n[0],s=n.length===3?n[1]:void 0,a=Number(n[n.length-1]);r=[o,a,s]}return e&&t.parseNodeNameCache.set(i,r),r}function x0(i,t,e){let n=y("pad",i,t,e);if(n==="explicit"){n=y("explicitPaddings",i,t,e);let r=[[0,0],[0,0],[0,0],[0,0]];for(let o=0;o<4;o++)r[o][0]=n[o*2],r[o][1]=n[o*2+1];return r}return n}function Sa(i){return i.kept?i:ko(i)}var An=D(()=>{"use strict";Ko();});var sF={};Ei(sF,{json:()=>k0e});var k0e,y7=D(()=>{"use strict";k0e=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"DivNoNan",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var aF={};Ei(aF,{json:()=>A0e});var A0e,x7=D(()=>{"use strict";A0e=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"clipValueMin",type:"number"},{start:2,name:"clipValueMax",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsNan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsFinite",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"IsInf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var cF={};Ei(cF,{json:()=>P0e});var P0e,w7=D(()=>{"use strict";P0e=[{tfOpName:"EmptyTensorList",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"maxNumElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"tensor"}]},{tfOpName:"StatelessIf",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"If",category:"control",inputs:[{start:0,name:"cond",type:"tensor"},{start:1,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"then_branch",name:"thenBranch",type:"func"},{tfName:"else_branch",name:"elseBranch",type:"func"}]},{tfOpName:"StatelessWhile",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"While",category:"control",inputs:[{start:0,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"cond",name:"cond",type:"func"},{tfName:"body",name:"body",type:"func"}]},{tfOpName:"TensorListScatter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListScatterV2",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"},{start:3,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGather",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"indices",type:"number[]"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListGetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListSetItem",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListReserve",category:"control",inputs:[{start:0,name:"elementShape",type:"shape"},{start:1,name:"numElements",type:"number"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListFromTensor",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListStack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"},{tfName:"num_elements",name:"numElements",type:"dtype"}]},{tfOpName:"TensorListSplit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"elementShape",type:"shape"},{start:2,name:"lengths",type:"number[]"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcat",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListConcatV2",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}],attrs:[{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPopBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"elementShape",type:"shape"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListPushBack",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"tensor",type:"tensor"}],attrs:[{tfName:"element_dtype",name:"elementDType",type:"dtype"}]},{tfOpName:"TensorListLength",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"}]},{tfOpName:"TensorListResize",category:"control",inputs:[{start:0,name:"tensorListId",type:"tensor"},{start:1,name:"size",type:"number"}]}]});var lF={};Ei(lF,{json:()=>O0e});var O0e,M7=D(()=>{"use strict";O0e=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[],notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPoolWithArgmax",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"include_batch_in_index",name:"includeBatchInIndex",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"FusedDepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Dilation2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"rates",name:"dilations",type:"number[]"},{tfName:"padding",name:"pad",type:"string"}]}]});var dF={};Ei(dF,{json:()=>N0e});var N0e,C7=D(()=>{"use strict";N0e=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomStandardNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"RandomUniformInt",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number"},{tfName:"maxval",name:"maxval",type:"number"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]});var uF={};Ei(uF,{json:()=>R0e});var R0e,S7=D(()=>{"use strict";R0e=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV4",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"T_threshold",name:"threshold",type:"dtype",notSupported:!0},{tfName:"pad_to_max_output_size",name:"padToMaxOutputSize",type:"bool"}]},{tfOpName:"NonMaxSuppressionV5",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"},{start:5,name:"softNmsSigma",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]});var hF={};Ei(hF,{json:()=>F0e});var F0e,E7=D(()=>{"use strict";F0e=[{tfOpName:"LowerBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]},{tfOpName:"UpperBound",category:"evaluation",inputs:[{start:0,name:"sortedSequence",type:"tensor"},{start:1,name:"values",type:"tensor"}]},{tfOpName:"Unique",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"UniqueV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]}]});var mF={};Ei(mF,{json:()=>L0e});var L0e,T7=D(()=>{"use strict";L0e=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]});var pF={};Ei(pF,{json:()=>B0e});var B0e,I7=D(()=>{"use strict";B0e=[{tfOpName:"HashTable",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"HashTableV2",category:"hash_table",inputs:[],attrs:[{tfName:"shared_name",name:"sharedName",type:"string"},{tfName:"use_node_name_sharing",name:"useNodeNameSharing",type:"bool"},{tfName:"key_dtype",name:"keyDType",type:"dtype"},{tfName:"value_dtype",name:"valueDType",type:"dtype"}]},{tfOpName:"LookupTableImport",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableImportV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFind",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableFindV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"Tin",name:"tIn",type:"dtype",notSupported:!0},{tfName:"Tout",name:"tOut",type:"dtype",notSupported:!0}]},{tfOpName:"LookupTableSize",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"LookupTableSizeV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"}]},{tfOpName:"InitializeTable",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]},{tfOpName:"InitializeTableV2",category:"hash_table",inputs:[{start:0,name:"tableHandle",type:"tensor"},{start:1,name:"keys",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]});var fF={};Ei(fF,{json:()=>V0e});var V0e,D7=D(()=>{"use strict";V0e=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"half_pixel_centers",name:"halfPixelCenters",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]},{tfOpName:"ImageProjectiveTransformV3",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"transforms",type:"tensor"},{start:2,name:"outputShape",type:"number[]"},{start:3,name:"fillValue",type:"number"}],attrs:[{tfName:"interpolation",name:"interpolation",type:"string"},{tfName:"fill_mode",name:"fillMode",type:"string"}]}]});var gF={};Ei(gF,{json:()=>U0e});var U0e,k7=D(()=>{"use strict";U0e=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SelectV2",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BitwiseAnd",category:"logical",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}]}]});var _F={};Ei(_F,{json:()=>z0e});var z0e,A7=D(()=>{"use strict";z0e=[{tfOpName:"_FusedMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4},{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"leakyrelu_alpha",name:"leakyreluAlpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Einsum",category:"matrices",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"equation",name:"equation",type:"string"},{tfName:"N",name:"n",type:"number",defaultValue:2},{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"MatrixBandPart",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"numLower",type:"tensor"},{start:1,name:"numUpper",type:"tensor"}]}]});var bF={};Ei(bF,{json:()=>H0e});var H0e,P7=D(()=>{"use strict";H0e=[{tfOpName:"EuclideanNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",defaultValue:!1}]},{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]}]});var vF={};Ei(vF,{json:()=>j0e});var j0e,O7=D(()=>{"use strict";j0e=[{tfOpName:"Bincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}]},{tfOpName:"DenseBincount",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"size",type:"number"},{start:2,name:"weights",type:"tensor"}],attrs:[{tfName:"binary_output",name:"binaryOutput",type:"bool"}]},{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cumprod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]},{tfOpName:"Cumsum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}],attrs:[{tfName:"exclusive",name:"exclusive",type:"bool"},{tfName:"reverse",name:"reverse",type:"bool"}]}]});var yF={};Ei(yF,{json:()=>$0e});var $0e,N7=D(()=>{"use strict";$0e=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}],attrs:[{tfName:"N",name:"n",type:"number",defaultValue:2}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}],attrs:[{tfName:"batch_dims",name:"batchDims",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool[]"}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]},{tfOpName:"TensorScatterUpdate",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"values",type:"tensor"}]}]});var xF={};Ei(xF,{json:()=>G0e});var G0e,R7=D(()=>{"use strict";G0e=[{tfOpName:"SparseFillEmptyRows",category:"sparse",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"denseShape",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}]},{tfOpName:"SparseReshape",category:"sparse",inputs:[{start:0,name:"inputIndices",type:"tensor"},{start:1,name:"inputShape",type:"tensor"},{start:2,name:"newShape",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SparseSegmentMean",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]},{tfOpName:"SparseSegmentSum",category:"sparse",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"segmentIds",type:"tensor"}]}]});var wF={};Ei(wF,{json:()=>W0e});var W0e,F7=D(()=>{"use strict";W0e=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]});var MF={};Ei(MF,{json:()=>q0e});var q0e,L7=D(()=>{"use strict";q0e=[{tfOpName:"StaticRegexReplace",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"pattern",name:"pattern",type:"string"},{tfName:"rewrite",name:"rewrite",type:"string"},{tfName:"replace_global",name:"replaceGlobal",type:"bool"}]},{tfOpName:"StringNGrams",category:"string",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"dataSplits",type:"tensor"}],attrs:[{tfName:"separator",name:"separator",type:"string"},{tfName:"ngram_widths",name:"nGramWidths",type:"number[]"},{tfName:"left_pad",name:"leftPad",type:"string"},{tfName:"right_pad",name:"rightPad",type:"string"},{tfName:"pad_width",name:"padWidth",type:"number"},{tfName:"preserve_short_sequences",name:"preserveShortSequences",type:"bool"}],outputs:["ngrams","ngrams_splits"]},{tfOpName:"StringSplit",category:"string",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"delimiter",type:"tensor"}],attrs:[{tfName:"skip_empty",name:"skipEmpty",type:"bool"}],outputs:["indices","values","shape"]},{tfOpName:"StringToHashBucketFast",category:"string",inputs:[{start:0,name:"input",type:"tensor"}],attrs:[{tfName:"num_buckets",name:"numBuckets",type:"number"}]}]});var CF={};Ei(CF,{json:()=>X0e});var X0e,B7=D(()=>{"use strict";X0e=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"MirrorPad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"mode",name:"mode",type:"string"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"EnsureShape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]},{tfOpName:"BroadcastTo",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}],attrs:[]},{tfOpName:"BroadcastArgs",category:"transformation",inputs:[{start:0,name:"s0",type:"tensor"},{start:1,name:"s1",type:"tensor"}],attrs:[]}]});function Y0e(i){let t=st().global;if(typeof t.atob<"u")return t.atob(i);if(typeof Buffer<"u")return new Buffer(i,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function U7(i,t){let e=Array.isArray(i)?String.fromCharCode.apply(null,i):Y0e(i);return t?e:e.toLowerCase()}function cM(i,t,e,n=!1){let r=i[t];return r!=null?U7(r.s,n):e}function lM(i,t,e){let n=i[t];return n?n.b:e}function dM(i,t,e){let n=i[t]||{},r=n.i!=null?n.i:n.f!=null?n.f:e;return typeof r=="number"?r:parseInt(r,10)}function SF(i){switch(typeof i=="string"&&(i=Qo[i]),i){case Qo.DT_FLOAT:case Qo.DT_HALF:return"float32";case Qo.DT_INT32:case Qo.DT_INT64:case Qo.DT_INT8:case Qo.DT_UINT8:return"int32";case Qo.DT_BOOL:return"bool";case Qo.DT_DOUBLE:return"float32";case Qo.DT_STRING:return"string";case Qo.DT_COMPLEX64:case Qo.DT_COMPLEX128:return"complex64";default:return null}}function V7(i,t,e){let n=i[t];return n&&n.func?n.func.name:e}function uM(i,t,e){let n=i[t];return n&&n.type?SF(n.type):e}function hM(i,t,e){let n=i[t];return n&&n.list&&n.list.type?n.list.type.map(r=>SF(r)):e}function z7(i){if(!i.unknownRank)return i.dim!=null?i.dim.map(t=>typeof t.size=="number"?t.size:parseInt(t.size,10)):[]}function mM(i,t,e){let n=i[t];return n&&n.shape?z7(n.shape):e}function pM(i,t,e){let n=i[t];return n?((n.list.f&&n.list.f.length?n.list.f:n.list.i)||[]).map(r=>typeof r=="number"?r:parseInt(r,10)):e}function fM(i,t,e,n=!1){let r=i[t];return r&&r.list&&r.list.s?r.list.s.map(o=>U7(o,n)):e}function gM(i,t,e){let n=i[t];return n&&n.list&&n.list.shape?n.list.shape.map(r=>z7(r)):e}function _M(i,t,e){let n=i[t];return n&&n.list&&n.list.b?n.list.b:e}var w0,EF=D(()=>{"use strict";Ko();_7();sM();An();y7();x7();w7();M7();C7();S7();E7();T7();I7();D7();k7();A7();P7();O7();N7();R7();F7();L7();B7();w0=class{static get Instance(){return this._instance||(this._instance=new this)}constructor(){let t=[sF,aF,cF,lF,dF,uF,hF,mF,pF,fF,gF,_F,bF,vF,yF,xF,wF,MF,CF],e=[].concat(...t.map(n=>n.json));this.opMappers=e.reduce((n,r)=>(n[r.tfOpName]=r,n),{})}transformGraph(t,e={}){let n=t.node,r=[],o=[],s=[],a=n.reduce((_,f)=>(_[f.name]=this.mapNode(f),f.op.startsWith("Placeholder")?r.push(_[f.name]):f.op==="Const"?o.push(_[f.name]):(f.input==null||f.input.length===0)&&s.push(_[f.name]),_),{}),c=[],l=[],d={},u={};e!=null&&(d=this.mapSignatureEntries(e.inputs),u=this.mapSignatureEntries(e.outputs));let h=Object.keys(a);h.forEach(_=>{let f=a[_];f.inputNames.forEach((g,S)=>{let[C,,E]=Ca(g),N=a[C];if(N.outputs!=null){let R=N.outputs.indexOf(E);if(R!==-1){let B=`${C}:${R}`;f.inputNames[S]=B}}f.inputs.push(N),N.children.push(f)})}),Object.keys(u).length===0?h.forEach(_=>{let f=a[_];f.children.length===0&&l.push(f)}):Object.keys(u).forEach(_=>{let[f]=Ca(_),g=a[f];g!=null&&(g.signatureKey=u[_],l.push(g))}),Object.keys(d).length>0?Object.keys(d).forEach(_=>{let[f]=Ca(_),g=a[f];g&&(g.signatureKey=d[_],c.push(g))}):c=r;let m={};t.library!=null&&t.library.function!=null&&(m=t.library.function.reduce((_,f)=>(_[f.signature.name]=this.mapFunction(f),_),{}));let p={nodes:a,inputs:c,outputs:l,weights:o,placeholders:r,signature:e,functions:m};return s.length>0&&(p.initNodes=s),p}mapSignatureEntries(t){return Object.keys(t||{}).reduce((e,n)=>(e[t[n].name]=n,e),{})}mapNode(t){let e=oM(t.op)||this.opMappers[t.op]||{};t.attr==null&&(t.attr={});let n={name:t.name,op:t.op,category:e.category,inputNames:(t.input||[]).map(r=>r.startsWith("^")?r.slice(1):r),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:t.attr,outputs:e.outputs};return e.inputs!=null&&(n.inputParams=e.inputs.reduce((r,o)=>(r[o.name]={type:o.type,inputIndexStart:o.start,inputIndexEnd:o.end},r),{})),e.attrs!=null&&(n.attrParams=e.attrs.reduce((r,o)=>{let s=o.type,a;switch(o.type){case"string":a=cM(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=cM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"string[]":a=fM(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=fM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"number":a=dM(t.attr,o.tfName,o.defaultValue||0),a===void 0&&o.tfDeprecatedName&&(a=dM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"number[]":a=pM(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=pM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool":a=lM(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=lM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool[]":a=_M(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=_M(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape":a=mM(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=mM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape[]":a=gM(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=gM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype":a=uM(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=uM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype[]":a=hM(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=hM(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"func":a=V7(t.attr,o.tfName,o.defaultValue),a===void 0&&o.tfDeprecatedName&&(a=V7(t.attr,o.tfDeprecatedName,o.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error(`Unsupported param type: ${o.type} for op: ${t.op}`)}return r[o.name]={value:a,type:s},r},{})),n}mapFunction(t){let e=t.nodeDef,n=[],r=[],o={};e!=null&&(o=e.reduce((u,h)=>(u[h.name]=this.mapNode(h),h.op==="Const"&&r.push(u[h.name]),u),{}));let s=[],a=[];t.signature.inputArg.forEach(u=>{let[h]=Ca(u.name),m={name:h,op:"Placeholder",inputs:[],inputNames:[],category:"graph",inputParams:{},attrParams:{dtype:{value:SF(u.type),type:"dtype"}},children:[]};m.signatureKey=u.name,s.push(m),o[h]=m}),Object.keys(o).forEach(u=>{let h=o[u];h.inputNames.forEach((m,p)=>{let[_,,f]=Ca(m),g=o[_];if(g.outputs!=null){let S=g.outputs.indexOf(f);if(S!==-1){let C=`${_}:${S}`;h.inputNames[p]=C}}h.inputs.push(g),g.children.push(h)})});let l=t.ret;t.signature.outputArg.forEach(u=>{let[h,m]=Ca(l[u.name]),p=o[h];p!=null&&(p.defaultOutput=m,a.push(p))});let d=this.mapArgsToSignature(t);return{nodes:o,inputs:s,outputs:a,weights:r,placeholders:n,signature:d}}mapArgsToSignature(t){return{methodName:t.signature.name,inputs:t.signature.inputArg.reduce((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n),e),{}),outputs:t.signature.outputArg.reduce((e,n)=>(e[n.name]=this.mapArgToTensorInfo(n,t.ret),e),{})}}mapArgToTensorInfo(t,e){let n=t.name;return e!=null&&(n=e[n]),{name:n,dtype:t.type}}}});var bM,H7=D(()=>{"use strict";An();EF();bM=class{constructor(t,e,n){this.node=t,this.tensorMap=e,this.context=n,this.inputs=[],this.attrs={},this.inputs=t.inputNames.map(r=>this.getInput(r)),t.rawAttrs!=null&&(this.attrs=Object.keys(t.rawAttrs).reduce((r,o)=>(r[o]=this.getAttr(o),r),{}))}getInput(t){return Bn(t,this.tensorMap,this.context)}getAttr(t,e){let n=this.node.rawAttrs[t];if(n.tensor!=null)return Bn(t,this.tensorMap,this.context);if(n.i!=null||n.f!=null)return dM(this.node.rawAttrs,t,e);if(n.s!=null)return cM(this.node.rawAttrs,t,e);if(n.b!=null)return lM(this.node.rawAttrs,t,e);if(n.shape!=null)return mM(this.node.rawAttrs,t,e);if(n.type!=null)return uM(this.node.rawAttrs,t,e);if(n.list!=null){if(n.list.i!=null||n.list.f!=null)return pM(this.node.rawAttrs,t,e);if(n.list.s!=null)return fM(this.node.rawAttrs,t,e);if(n.list.shape!=null)return gM(this.node.rawAttrs,t,e);if(n.list.b!=null)return _M(this.node.rawAttrs,t,e);if(n.list.type!=null)return hM(this.node.rawAttrs,t,e)}return e}}});var Ii={};Ei(Ii,{OP_SCOPE_SUFFIX:()=>rw,abs:()=>lr,acos:()=>BO,acosh:()=>VO,add:()=>at,addN:()=>UO,all:()=>zO,any:()=>HO,argMax:()=>jO,argMin:()=>$O,asin:()=>GO,asinh:()=>WO,atan:()=>qO,atan2:()=>XO,atanh:()=>YO,avgPool:()=>C_,avgPool3d:()=>eN,basicLSTMCell:()=>iN,batchNorm:()=>cl,batchNorm2d:()=>rN,batchNorm3d:()=>oN,batchNorm4d:()=>sN,batchToSpaceND:()=>E_,bincount:()=>I_,bitwiseAnd:()=>cN,booleanMaskAsync:()=>oG,broadcastArgs:()=>lN,broadcastTo:()=>ah,buffer:()=>Nr,cast:()=>si,ceil:()=>uN,clipByValue:()=>hN,clone:()=>ko,complex:()=>ro,concat:()=>sn,concat1d:()=>mN,concat2d:()=>pN,concat3d:()=>fN,concat4d:()=>gN,conv1d:()=>_N,conv2d:()=>ll,conv2dTranspose:()=>vN,conv3d:()=>yN,conv3dTranspose:()=>xN,cos:()=>wN,cosh:()=>MN,cosineWindow:()=>Vp,cumprod:()=>CN,cumsum:()=>SN,denseBincount:()=>EN,depthToSpace:()=>TN,depthwiseConv2d:()=>ch,diag:()=>IN,dilation2d:()=>DN,div:()=>bi,divNoNan:()=>AN,dot:()=>PN,dropout:()=>vG,einsum:()=>ul,elu:()=>A_,enclosingPowerOfTwo:()=>Uw,ensureShape:()=>RN,equal:()=>k_,erf:()=>FN,euclideanNorm:()=>VN,exp:()=>fs,expandDims:()=>js,expm1:()=>UN,eye:()=>R_,fft:()=>fh,fill:()=>_a,floor:()=>F_,floorDiv:()=>x_,fused:()=>zw,gather:()=>L_,gatherND:()=>fG,greater:()=>Md,greaterEqual:()=>B_,ifft:()=>Td,imag:()=>fl,image:()=>s9,inTopKAsync:()=>xG,irfft:()=>o0,isFinite:()=>GN,isInf:()=>WN,isNaN:()=>qN,leakyRelu:()=>U_,less:()=>Np,lessEqual:()=>dh,linalg:()=>a9,linspace:()=>ZN,localResponseNormalization:()=>KN,log:()=>cc,log1p:()=>H_,logSigmoid:()=>eR,logSoftmax:()=>tR,logSumExp:()=>$_,logicalAnd:()=>Cd,logicalNot:()=>G_,logicalOr:()=>W_,logicalXor:()=>oR,losses:()=>c9,lowerBound:()=>sR,matMul:()=>Mi,max:()=>ba,maxPool:()=>q_,maxPool3d:()=>cR,maxPoolWithArgmax:()=>lR,maximum:()=>X_,mean:()=>Sd,meshgrid:()=>uR,min:()=>Ap,minimum:()=>Ed,mirrorPad:()=>hR,mod:()=>mR,moments:()=>pR,movingAverage:()=>aG,mul:()=>Ie,multiRNNCell:()=>fR,multinomial:()=>gR,neg:()=>Mr,norm:()=>wd,notEqual:()=>Z_,oneHot:()=>Fp,ones:()=>xa,onesLike:()=>vR,op:()=>w,outerProduct:()=>yR,pad:()=>wa,pad1d:()=>xR,pad2d:()=>wR,pad3d:()=>MR,pad4d:()=>CR,pool:()=>ER,pow:()=>ac,prelu:()=>Q_,print:()=>y_,prod:()=>IR,raggedGather:()=>DR,raggedRange:()=>kR,raggedTensorToTensor:()=>AR,rand:()=>PR,randomGamma:()=>jR,randomNormal:()=>e0,randomStandardNormal:()=>GR,randomUniform:()=>mh,randomUniformInt:()=>WR,range:()=>bl,real:()=>lc,reciprocal:()=>qR,relu:()=>vl,relu6:()=>n0,reshape:()=>ce,reverse:()=>Yo,reverse1d:()=>YR,reverse2d:()=>ZR,reverse3d:()=>KR,reverse4d:()=>QR,rfft:()=>gh,round:()=>r0,rsqrt:()=>e2,scalar:()=>Ct,scatterND:()=>lG,searchSorted:()=>Rp,selu:()=>t2,separableConv2d:()=>i2,setdiff1dAsync:()=>n2,sigmoid:()=>ga,sign:()=>r2,signal:()=>o9,sin:()=>o2,sinh:()=>s2,slice:()=>vi,slice1d:()=>a2,slice2d:()=>c2,slice3d:()=>l2,slice4d:()=>d2,softmax:()=>u2,softplus:()=>j_,spaceToBatchND:()=>K_,sparse:()=>l9,sparseToDense:()=>mG,spectral:()=>r9,split:()=>dc,sqrt:()=>ao,square:()=>ur,squaredDifference:()=>a0,squeeze:()=>_h,stack:()=>qr,step:()=>l0,stridedSlice:()=>f2,string:()=>d9,sub:()=>wt,sum:()=>Ai,tan:()=>g2,tanh:()=>Tp,tensor:()=>jr,tensor1d:()=>mr,tensor2d:()=>yl,tensor3d:()=>d0,tensor4d:()=>b2,tensor5d:()=>v2,tensor6d:()=>y2,tensorScatterUpdate:()=>w2,tile:()=>pl,topk:()=>M2,transpose:()=>bh,truncatedNormal:()=>C2,unique:()=>S2,unsortedSegmentSum:()=>E2,unstack:()=>Zo,upperBound:()=>T2,variable:()=>I2,where:()=>Xo,whereAsync:()=>m0,zeros:()=>ya,zerosLike:()=>qn});var pr=D(()=>{"use strict";g0();});var j7,$7=D(()=>{"use strict";pr();An();j7=(i,t,e,n=Ii)=>{switch(i.op){case"BiasAdd":case"AddV2":case"Add":return[n.add(y("a",i,t,e),y("b",i,t,e))];case"AddN":return[n.addN(y("tensors",i,t,e))];case"FloorMod":case"Mod":return[n.mod(y("a",i,t,e),y("b",i,t,e))];case"Mul":return[n.mul(y("a",i,t,e),y("b",i,t,e))];case"RealDiv":case"Div":return[n.div(y("a",i,t,e),y("b",i,t,e))];case"DivNoNan":return[n.divNoNan(y("a",i,t,e),y("b",i,t,e))];case"FloorDiv":return[n.floorDiv(y("a",i,t,e),y("b",i,t,e))];case"Sub":return[n.sub(y("a",i,t,e),y("b",i,t,e))];case"Minimum":return[n.minimum(y("a",i,t,e),y("b",i,t,e))];case"Maximum":return[n.maximum(y("a",i,t,e),y("b",i,t,e))];case"Pow":return[n.pow(y("a",i,t,e),y("b",i,t,e))];case"SquaredDifference":return[n.squaredDifference(y("a",i,t,e),y("b",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var G7,W7=D(()=>{"use strict";pr();An();G7=(i,t,e,n=Ii)=>{switch(i.op){case"Abs":case"ComplexAbs":return[n.abs(y("x",i,t,e))];case"Acos":return[n.acos(y("x",i,t,e))];case"Acosh":return[n.acosh(y("x",i,t,e))];case"Asin":return[n.asin(y("x",i,t,e))];case"Asinh":return[n.asinh(y("x",i,t,e))];case"Atan":return[n.atan(y("x",i,t,e))];case"Atan2":return[n.atan2(y("x",i,t,e),y("y",i,t,e))];case"Atanh":return[n.atanh(y("x",i,t,e))];case"Ceil":return[n.ceil(y("x",i,t,e))];case"Complex":return[n.complex(y("real",i,t,e),y("imag",i,t,e))];case"Cos":return[n.cos(y("x",i,t,e))];case"Cosh":return[n.cosh(y("x",i,t,e))];case"Elu":return[n.elu(y("x",i,t,e))];case"Erf":return[n.erf(y("x",i,t,e))];case"Exp":return[n.exp(y("x",i,t,e))];case"Expm1":return[n.expm1(y("x",i,t,e))];case"Floor":return[n.floor(y("x",i,t,e))];case"Log":return[n.log(y("x",i,t,e))];case"Log1p":return[n.log1p(y("x",i,t,e))];case"Imag":return[n.imag(y("x",i,t,e))];case"Neg":return[n.neg(y("x",i,t,e))];case"Reciprocal":return[n.reciprocal(y("x",i,t,e))];case"Real":return[n.real(y("x",i,t,e))];case"Relu":return[n.relu(y("x",i,t,e))];case"Round":return[n.round(y("x",i,t,e))];case"Selu":return[n.selu(y("x",i,t,e))];case"Sigmoid":return[n.sigmoid(y("x",i,t,e))];case"Sin":return[n.sin(y("x",i,t,e))];case"Sign":return[n.sign(y("x",i,t,e))];case"Sinh":return[n.sinh(y("x",i,t,e))];case"Softplus":return[n.softplus(y("x",i,t,e))];case"Sqrt":return[n.sqrt(y("x",i,t,e))];case"Square":return[n.square(y("x",i,t,e))];case"Tanh":return[n.tanh(y("x",i,t,e))];case"Tan":return[n.tan(y("x",i,t,e))];case"ClipByValue":return[n.clipByValue(y("x",i,t,e),y("clipValueMin",i,t,e),y("clipValueMax",i,t,e))];case"Relu6":return[n.relu6(y("x",i,t,e))];case"Rsqrt":return[n.rsqrt(Bn(i.inputNames[0],t,e))];case"LeakyRelu":return[n.leakyRelu(y("x",i,t,e),y("alpha",i,t,e))];case"Prelu":return[n.prelu(y("x",i,t,e),y("alpha",i,t,e))];case"IsNan":return[n.isNaN(Bn(i.inputNames[0],t,e))];case"IsInf":return[n.isInf(Bn(i.inputNames[0],t,e))];case"IsFinite":return[n.isFinite(Bn(i.inputNames[0],t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});function Jo(i,t,e=""){if(!(typeof i=="number"||typeof t=="number")){ke.assert(i.length===t.length,()=>e+` Shapes ${i} and ${t} must match`);for(let n=0;n<i.length;n++){let r=i[n],o=t[n];ke.assert(r<0||o<0||r===o,()=>e+` Shapes ${i} and ${t} must match`)}}}function q7(i){return!(typeof i=="number"||i.some(t=>t<0))}function Hp(i,t,e){let n=vM(i,e),r=!q7(n);if(r&&t.length===0)throw new Error(`Tried to calculate elements of an empty list with non-fully-defined elementShape: ${n}`);if(r&&t.forEach(o=>{n=vM(o.shape,n)}),!q7(n))throw new Error(`Non-fully-defined elementShape: ${n}`);return n}function vM(i,t){if(typeof i=="number")return t;if(typeof t=="number")return i;if(i.length!==t.length)throw new Error(`Incompatible ranks during merge: ${i} vs. ${t}`);let e=[];for(let n=0;n<i.length;++n){let r=i[n],o=t[n];if(r>=0&&o>=0&&r!==o)throw new Error(`Incompatible shape during merge: ${i} vs. ${t}`);e[n]=r>=0?r:o}return e}var TF=D(()=>{"use strict";Ko();});var yM,X7=D(()=>{"use strict";Ko();TF();yM=class{constructor(t,e,n,r,o,s,a){this.name=t,this.dtype=e,this.maxSize=n,this.elementShape=r,this.identicalElementShapes=o,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.idTensor=Ct(0),so(this.idTensor)}get id(){return this.idTensor.id}get closed(){return this.closed_}clearAndClose(t){this.tensors.forEach(e=>{(t==null||!t.has(e.tensor.id))&&e.tensor.dispose()}),this.tensors=[],this.closed_=!0,this.idTensor.dispose()}size(){return this.tensors.length}read(t){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||t>=this.size())throw new Error(`Tried to read from index ${t}, but array size is: ${this.size()}`);let e=this.tensors[t];if(e.cleared)throw new Error(`TensorArray ${this.name}: Could not read index ${t} twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).`);return this.clearAfterRead&&(e.cleared=!0),e.read=!0,e.tensor}readMany(t){return t.map(e=>this.read(e))}write(t,e){if(this.closed_)throw new Error(`TensorArray ${this.name} has already been closed.`);if(t<0||!this.dynamicSize&&t>=this.maxSize)throw new Error(`Tried to write to index ${t}, but array is not resizeable and size is: ${this.maxSize}`);let n=this.tensors[t]||{};if(e.dtype!==this.dtype)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t},
          because the value dtype is ${e.dtype}, but TensorArray dtype is ${this.dtype}.`);if(this.size()===0&&(this.elementShape==null||this.elementShape.length===0)&&(this.elementShape=e.shape),Jo(this.elementShape,e.shape,`TensorArray ${this.name}: Could not write to TensorArray index ${t}.`),n.read)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been read.`);if(n.written)throw new Error(`TensorArray ${this.name}: Could not write to TensorArray index ${t}, because it has already been written.`);n.tensor=e,so(e),n.written=!0,this.tensors[t]=n}writeMany(t,e){if(t.length!==e.length)throw new Error(`TensorArray ${this.name}: could not write multiple tensors,because the index size: ${t.length} is not the same as tensors size: ${e.length}.`);t.forEach((n,r)=>this.write(n,e[r]))}gather(t,e){if(e&&e!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but gather requested dtype ${e}`);if(t)t=t.slice(0,this.size());else{t=[];for(let r=0;r<this.size();r++)t.push(r)}if(t.length===0)return jr([],[0].concat(this.elementShape));let n=this.readMany(t);return Jo(this.elementShape,n[0].shape,"TensorArray shape mismatch: "),qr(n,0)}concat(t){if(t&&t!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but concat requested dtype ${t}`);if(this.size()===0)return jr([],[0].concat(this.elementShape));let e=[];for(let r=0;r<this.size();r++)e.push(r);let n=this.readMany(e);return Jo(this.elementShape,n[0].shape,`TensorArray shape mismatch: tensor array shape (${this.elementShape}) vs first tensor shape (${n[0].shape})`),sn(n,0)}scatter(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);if(t.length!==e.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${e.shape[0]}`);let n=Math.max(...t);if(!this.dynamicSize&&n>=this.maxSize)throw new Error(`Max index must be < array size (${n}  vs. ${this.maxSize})`);this.writeMany(t,Zo(e,0))}split(t,e){if(e.dtype!==this.dtype)throw new Error(`TensorArray dtype is ${this.dtype} but tensor has dtype ${e.dtype}`);let n=0,r=t.map(c=>(n+=c,n));if(n!==e.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${n}, and tensor's shape is: ${e.shape}`);if(!this.dynamicSize&&t.length!==this.maxSize)throw new Error(`TensorArray's size is not equal to the size of lengths (${this.maxSize} vs. ${t.length}), and the TensorArray is not marked as dynamically resizeable`);let o=n===0?0:e.size/n,s=[];Jt(()=>{e=ce(e,[1,n,o]);for(let c=0;c<t.length;++c){let d=[0,c===0?0:r[c-1],0],u=[1,t[c],o];s[c]=ce(vi(e,d,u),this.elementShape)}return s});let a=[];for(let c=0;c<t.length;c++)a[c]=c;this.writeMany(a,s)}}});function Y7(i,t,e){let n=i.dtype;if(i.shape.length<1)throw new Error(`Tensor must be at least a vector, but saw shape: ${i.shape}`);if(i.dtype!==e)throw new Error(`Invalid data types; op elements ${i.dtype}, but list elements ${e}`);let r=i.shape.slice(1);Jo(r,t,"TensorList shape mismatch: ");let o=Zo(i);return new jp(o,t,n)}function Z7(i,t,e,n){return new jp([],i,t,n)}function K7(i,t,e,n){if(t.length!==i.shape[0])throw new Error(`Expected len(indices) == tensor.shape[0], but saw: ${t.length} vs. ${i.shape[0]}`);let r=Math.max(...t);if(n!=null&&n!==-1&&r>=n)throw new Error(`Max index must be < array size (${r}  vs. ${n})`);let o=new jp([],e,i.dtype,n),s=Zo(i,0);return t.forEach((a,c)=>{o.setItem(a,s[c])}),o}function Q7(i,t,e){let n=0,r=t.map(d=>(n+=d,n));if(n!==i.shape[0])throw new Error(`Expected sum of lengths to be equal to
          tensor.shape[0], but sum of lengths is
        ${n}, and tensor's shape is: ${i.shape}`);let o=i.shape.slice(1),s=vM(o,e),a=n===0?0:i.size/n,c=Jt(()=>{let d=[];i=ce(i,[1,n,a]);for(let u=0;u<t.length;++u){let m=[0,u===0?0:r[u-1],0],p=[1,t[u],a];d[u]=ce(vi(i,m,p),s)}return i.dispose(),d}),l=new jp([],e,i.dtype,t.length);for(let d=0;d<c.length;d++)l.setItem(d,c[d]);return l}var jp,J7=D(()=>{"use strict";Ko();TF();jp=class i{get id(){return this.idTensor.id}constructor(t,e,n,r=-1){this.tensors=t,this.elementShape=e,this.elementDtype=n,t?.forEach(o=>{if(n!==o.dtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${o.dtype}`);Jo(e,o.shape,"TensorList shape mismatch: "),so(o)}),this.idTensor=Ct(0),this.maxNumElements=r,so(this.idTensor)}copy(){return new i([...this.tensors],this.elementShape,this.elementDtype)}clearAndClose(t){this.tensors.forEach(e=>{(t==null||!t.has(e.id))&&e.dispose()}),this.tensors.length=0,this.idTensor.dispose()}size(){return this.tensors.length}stack(t,e,n=-1){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(n!==-1&&this.tensors.length!==n)throw new Error(`Operation expected a list with ${n} elements but got a list with ${this.tensors.length} elements.`);Jo(t,this.elementShape,"TensorList shape mismatch: ");let r=Hp(this.elementShape,this.tensors,t);return Jt(()=>{let o=this.tensors.map(s=>ce(s,r));return qr(o,0)})}popBack(t,e){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);if(this.size()===0)throw new Error("Trying to pop from an empty list.");let n=Hp(this.elementShape,this.tensors,t),r=this.tensors.pop();return r.kept=!1,Jo(r.shape,t,"TensorList shape mismatch: "),ce(r,n)}pushBack(t){if(t.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${t.dtype}, but list elements ${this.elementDtype}`);if(Jo(t.shape,this.elementShape,"TensorList shape mismatch: "),this.maxNumElements===this.size())throw new Error("Trying to push element into a full list.");so(t),this.tensors.push(t)}resize(t){if(t<0)throw new Error(`TensorListResize expects size to be non-negative. Got: ${t}`);if(this.maxNumElements!==-1&&t>this.maxNumElements)throw new Error(`TensorListResize input size ${t} is greater maxNumElement ${this.maxNumElements}.`);let e=new i([],this.elementShape,this.elementDtype,this.maxNumElements);e.tensors.length=t;for(let n=0;n<Math.min(this.tensors.length,t);++n)e.tensors[n]=this.tensors[n];return e}getItem(t,e,n){if(n!==this.elementDtype)throw new Error(`Invalid data types; op elements ${n}, but list elements ${this.elementDtype}`);if(t<0||t>this.tensors.length)throw new Error(`Trying to access element ${t} in a list with ${this.tensors.length} elements.`);if(this.tensors[t]==null)throw new Error(`element at index ${t} is null.`);Jo(this.tensors[t].shape,e,"TensorList shape mismatch: ");let r=Hp(this.elementShape,this.tensors,e);return ce(this.tensors[t],r)}setItem(t,e){if(e.dtype!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e.dtype}, but list elements ${this.elementDtype}`);if(t<0||this.maxNumElements!==-1&&t>=this.maxNumElements)throw new Error(`Trying to set element ${t} in a list with max ${this.maxNumElements} elements.`);Jo(this.elementShape,e.shape,"TensorList shape mismatch: "),so(e),this.tensors[t]!=null&&(this.tensors[t].kept=!1),this.tensors[t]=e}gather(t,e,n){if(e!==this.elementDtype)throw new Error(`Invalid data types; op elements ${e}, but list elements ${this.elementDtype}`);Jo(this.elementShape,n,"TensorList shape mismatch: "),t=t.slice(0,this.size());let r=Hp(this.elementShape,this.tensors,n);return t.length===0?jr([],[0].concat(r)):Jt(()=>{let o=t.map(s=>ce(this.tensors[s],r));return qr(o,0)})}concat(t,e){if(t&&t!==this.elementDtype)throw new Error(`TensorList dtype is ${this.elementDtype} but concat requested dtype ${t}`);Jo(this.elementShape,e,"TensorList shape mismatch: ");let n=Hp(this.elementShape,this.tensors,e);return this.size()===0?jr([],[0].concat(n)):Jt(()=>{let r=this.tensors.map(o=>ce(o,n));return sn(r,0)})}}});var eq,tq=D(()=>{"use strict";Ko();X7();J7();An();eq=(i,t,e)=>oe(void 0,null,function*(){switch(i.op){case"If":case"StatelessIf":{let n=y("thenBranch",i,t,e),r=y("elseBranch",i,t,e),o=y("cond",i,t,e),s=y("args",i,t,e);return(yield o.data())[0]?e.functionMap[n].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap):e.functionMap[r].executeFunctionAsync(s,e.tensorArrayMap,e.tensorListMap)}case"While":case"StatelessWhile":{let n=y("body",i,t,e),r=y("cond",i,t,e),o=y("args",i,t,e),s=yield e.functionMap[r].executeFunctionAsync(o,e.tensorArrayMap,e.tensorListMap),a=o.map(d=>d.id),c=yield s[0].data();s.forEach(d=>{!d.kept&&a.indexOf(d.id)===-1&&d.dispose()});let l=o;for(;c[0];){let d=l;l=yield e.functionMap[n].executeFunctionAsync(l,e.tensorArrayMap,e.tensorListMap);let u=l.map(m=>m.id);d.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&u.indexOf(m.id)===-1&&m.dispose()});let h=yield e.functionMap[r].executeFunctionAsync(l,e.tensorArrayMap,e.tensorListMap);c=yield h[0].data(),h.forEach(m=>{!m.kept&&a.indexOf(m.id)===-1&&u.indexOf(m.id)===-1&&m.dispose()})}return l}case"LoopCond":{let n=y("pred",i,t,e);return[Sa(n)]}case"Switch":{let n=y("pred",i,t,e),r=y("data",i,t,e);return r.kept||(r=Sa(r)),(yield n.data())[0]?[void 0,r]:[r,void 0]}case"Merge":{let n=i.inputNames.find(r=>Bn(r,t,e)!==void 0);if(n){let r=Bn(n,t,e);return[Sa(r)]}return}case"Enter":{let n=y("frameName",i,t,e),r=y("tensor",i,t,e);return e.enterFrame(n),[Sa(r)]}case"Exit":{let n=y("tensor",i,t,e);return e.exitFrame(),[Sa(n)]}case"NextIteration":{let n=y("tensor",i,t,e);return e.nextIteration(),[Sa(n)]}case"TensorArrayV3":{let n=y("size",i,t,e),r=y("dtype",i,t,e),o=y("elementShape",i,t,e),s=y("dynamicSize",i,t,e),a=y("clearAfterRead",i,t,e),c=y("identicalElementShapes",i,t,e),l=y("name",i,t,e),d=new yM(l,r,n,o,c,s,a);return e.addTensorArray(d),[d.idTensor,Ct(1)]}case"TensorArrayWriteV3":{let n=y("tensorArrayId",i,t,e),r=y("index",i,t,e),o=y("tensor",i,t,e),s=e.getTensorArray(n.id);return s.write(r,o),[s.idTensor]}case"TensorArrayReadV3":{let n=y("tensorArrayId",i,t,e),r=y("index",i,t,e);return[e.getTensorArray(n.id).read(r)]}case"TensorArrayGatherV3":{let n=y("tensorArrayId",i,t,e),r=y("indices",i,t,e),o=y("dtype",i,t,e);return[e.getTensorArray(n.id).gather(r,o)]}case"TensorArrayScatterV3":{let n=y("tensorArrayId",i,t,e),r=y("indices",i,t,e),o=y("tensor",i,t,e),s=e.getTensorArray(n.id);return s.scatter(r,o),[s.idTensor]}case"TensorArrayConcatV3":{let n=y("tensorArrayId",i,t,e),r=e.getTensorArray(n.id),o=y("dtype",i,t,e);return[r.concat(o)]}case"TensorArraySplitV3":{let n=y("tensorArrayId",i,t,e),r=y("tensor",i,t,e),o=y("lengths",i,t,e),s=e.getTensorArray(n.id);return s.split(o,r),[s.idTensor]}case"TensorArraySizeV3":{let n=y("tensorArrayId",i,t,e),r=e.getTensorArray(n.id);return[Ct(r.size(),"int32")]}case"TensorArrayCloseV3":{let n=y("tensorArrayId",i,t,e),r=e.getTensorArray(n.id);return r.clearAndClose(),[r.idTensor]}case"TensorListSetItem":{let n=y("tensorListId",i,t,e),r=y("index",i,t,e),o=y("tensor",i,t,e),s=e.getTensorList(n.id);return s.setItem(r,o),[s.idTensor]}case"TensorListGetItem":{let n=y("tensorListId",i,t,e),r=y("index",i,t,e),o=y("elementShape",i,t,e),s=y("elementDType",i,t,e);return[e.getTensorList(n.id).getItem(r,o,s)]}case"TensorListScatterV2":case"TensorListScatter":{let n=y("indices",i,t,e),r=y("tensor",i,t,e),o=y("elementShape",i,t,e),s=y("numElements",i,t,e),a=K7(r,n,o,s);return e.addTensorList(a),[a.idTensor]}case"TensorListReserve":case"EmptyTensorList":{let n=y("elementShape",i,t,e),r=y("elementDType",i,t,e),o;i.op==="TensorListReserve"?o="numElements":o="maxNumElements";let s=y(o,i,t,e),a=i.op==="TensorListReserve"?-1:s,c=Z7(n,r,s,a);return e.addTensorList(c),[c.idTensor]}case"TensorListGather":{let n=y("tensorListId",i,t,e),r=y("indices",i,t,e),o=y("elementShape",i,t,e),s=y("elementDType",i,t,e);return[e.getTensorList(n.id).gather(r,s,o)]}case"TensorListStack":{let n=y("tensorListId",i,t,e),r=y("elementShape",i,t,e),o=y("elementDType",i,t,e),s=y("numElements",i,t,e);return[e.getTensorList(n.id).stack(r,o,s)]}case"TensorListFromTensor":{let n=y("tensor",i,t,e),r=y("elementShape",i,t,e),o=y("elementDType",i,t,e),s=Y7(n,r,o);return e.addTensorList(s),[s.idTensor]}case"TensorListConcat":case"TensorListConcatV2":{let n=y("tensorListId",i,t,e),r=e.getTensorList(n.id),o=y("dtype",i,t,e),s=y("elementShape",i,t,e);return[r.concat(o,s)]}case"TensorListPushBack":{let n=y("tensorListId",i,t,e),r=y("tensor",i,t,e),o=e.getTensorList(n.id);return o.pushBack(r),[o.idTensor]}case"TensorListPopBack":{let n=y("tensorListId",i,t,e),r=y("elementShape",i,t,e),o=y("elementDType",i,t,e);return[e.getTensorList(n.id).popBack(r,o)]}case"TensorListSplit":{let n=y("tensor",i,t,e),r=y("elementShape",i,t,e),o=y("lengths",i,t,e),s=Q7(n,o,r);return e.addTensorList(s),[s.idTensor]}case"TensorListLength":{let n=y("tensorListId",i,t,e),r=e.getTensorList(n.id);return[Ct(r.size(),"int32")]}case"TensorListResize":{let n=y("tensorListId",i,t,e),r=y("size",i,t,e),s=e.getTensorList(n.id).resize(r);return e.addTensorList(s),[s.idTensor]}default:throw TypeError(`Node type ${i.op} is not implemented`)}})});function iq(i,t,e){let[n,r]=y("fusedOps",i,t,e),o=n==="biasadd",s=!o,a=r==="prelu",c=n==="fusedbatchnorm",l=y("numArgs",i,t,e);if(o){if(a&&l!==2)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&o&&l!==1)throw new Error("FusedConv2d and DepthwiseConv2d with BiasAdd must have one extra argument: bias.")}if(c)throw new Error("FusedConv2d and DepthwiseConv2d with FusedBatchNorm is not supported");let d=y("strides",i,t,e),u=x0(i,t,e),h=y("dataFormat",i,t,e).toUpperCase(),m=y("dilations",i,t,e),[p,_]=y("args",i,t,e);s&&(_=p,p=void 0);let f=y("leakyreluAlpha",i,t,e);return{stride:d,pad:u,dataFormat:h,dilations:m,biasArg:p,preluArg:_,activationFunc:r,leakyreluAlpha:f}}var nq,rq=D(()=>{"use strict";pr();An();nq=(i,t,e,n=Ii)=>{switch(i.op){case"Conv1D":{let r=y("stride",i,t,e),o=y("pad",i,t,e),s=y("dataFormat",i,t,e).toUpperCase(),a=y("dilation",i,t,e);return[n.conv1d(y("x",i,t,e),y("filter",i,t,e),r,o,s,a)]}case"Conv2D":{let r=y("strides",i,t,e),o=x0(i,t,e),s=y("dataFormat",i,t,e).toUpperCase(),a=y("dilations",i,t,e);return[n.conv2d(y("x",i,t,e),y("filter",i,t,e),[r[1],r[2]],o,s,[a[1],a[2]])]}case"_FusedConv2D":{let{stride:r,pad:o,dataFormat:s,dilations:a,biasArg:c,preluArg:l,activationFunc:d,leakyreluAlpha:u}=iq(i,t,e);return[n.fused.conv2d({x:y("x",i,t,e),filter:y("filter",i,t,e),strides:[r[1],r[2]],pad:o,dataFormat:s,dilations:[a[1],a[2]],bias:c,activation:d,preluActivationWeights:l,leakyreluAlpha:u})]}case"FusedDepthwiseConv2dNative":{let{stride:r,pad:o,dataFormat:s,dilations:a,biasArg:c,preluArg:l,activationFunc:d,leakyreluAlpha:u}=iq(i,t,e);return[n.fused.depthwiseConv2d({x:y("x",i,t,e),filter:y("filter",i,t,e),strides:[r[1],r[2]],pad:o,dataFormat:s,dilations:[a[1],a[2]],bias:c,activation:d,preluActivationWeights:l,leakyreluAlpha:u})]}case"Conv2DBackpropInput":case"Conv2dTranspose":{let r=y("outputShape",i,t,e),o=y("strides",i,t,e),s=x0(i,t,e);return[n.conv2dTranspose(y("x",i,t,e),y("filter",i,t,e),r,[o[1],o[2]],s)]}case"DepthwiseConv2dNative":case"DepthwiseConv2d":{let r=y("strides",i,t,e),o=x0(i,t,e),s=y("dilations",i,t,e),a=y("dataFormat",i,t,e).toUpperCase();return[n.depthwiseConv2d(y("input",i,t,e),y("filter",i,t,e),[r[1],r[2]],o,a,[s[1],s[2]])]}case"Conv3D":{let r=y("strides",i,t,e),o=y("pad",i,t,e),s=y("dataFormat",i,t,e).toUpperCase(),a=y("dilations",i,t,e);return[n.conv3d(y("x",i,t,e),y("filter",i,t,e),[r[1],r[2],r[3]],o,s,[a[1],a[2],a[3]])]}case"AvgPool":{let r=y("strides",i,t,e),o=y("pad",i,t,e),s=y("kernelSize",i,t,e);return[n.avgPool(y("x",i,t,e),[s[1],s[2]],[r[1],r[2]],o)]}case"MaxPool":{let r=y("strides",i,t,e),o=y("pad",i,t,e),s=y("kernelSize",i,t,e);return[n.maxPool(y("x",i,t,e),[s[1],s[2]],[r[1],r[2]],o)]}case"MaxPoolWithArgmax":{let r=y("strides",i,t,e),o=y("pad",i,t,e),s=y("kernelSize",i,t,e),a=y("includeBatchInIndex",i,t,e),{result:c,indexes:l}=n.maxPoolWithArgmax(y("x",i,t,e),[s[1],s[2]],[r[1],r[2]],o,a);return[c,l]}case"AvgPool3D":{let r=y("strides",i,t,e),o=y("pad",i,t,e),s=y("kernelSize",i,t,e);return[n.avgPool3d(y("x",i,t,e),[s[1],s[2],s[3]],[r[1],r[2],r[3]],o)]}case"MaxPool3D":{let r=y("strides",i,t,e),o=y("pad",i,t,e),s=y("kernelSize",i,t,e);return[n.maxPool3d(y("x",i,t,e),[s[1],s[2],s[3]],[r[1],r[2],r[3]],o)]}case"Dilation2D":{let r=y("strides",i,t,e),o=y("pad",i,t,e),s=y("dilations",i,t,e),a=r[1],c=r[2],l=s[1],d=s[2];return[n.dilation2d(y("x",i,t,e),y("filter",i,t,e),[a,c],o,[l,d],"NHWC")]}default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var oq,sq=D(()=>{"use strict";pr();An();oq=(i,t,e,n=Ii)=>{switch(i.op){case"Fill":{let r=y("shape",i,t,e),o=y("dtype",i,t,e),s=y("value",i,t,e);return[n.fill(r,s,o)]}case"LinSpace":{let r=y("start",i,t,e),o=y("stop",i,t,e),s=y("num",i,t,e);return[n.linspace(r,o,s)]}case"Multinomial":{let r=y("logits",i,t,e),o=y("numSamples",i,t,e),s=y("seed",i,t,e);return[n.multinomial(r,o,s)]}case"OneHot":{let r=y("indices",i,t,e),o=y("depth",i,t,e),s=y("onValue",i,t,e),a=y("offValue",i,t,e),c=y("dtype",i,t,e);return[n.oneHot(r,o,s,a,c)]}case"Ones":return[n.ones(y("shape",i,t,e),y("dtype",i,t,e))];case"OnesLike":return[n.onesLike(y("x",i,t,e))];case"RandomStandardNormal":return[n.randomStandardNormal(y("shape",i,t,e),y("dtype",i,t,e),y("seed",i,t,e))];case"RandomUniform":return[n.randomUniform(y("shape",i,t,e),y("minval",i,t,e),y("maxval",i,t,e),y("dtype",i,t,e))];case"RandomUniformInt":return[n.randomUniformInt(y("shape",i,t,e),y("minval",i,t,e),y("maxval",i,t,e),y("seed",i,t,e))];case"Range":{let r=y("start",i,t,e),o=y("stop",i,t,e),s=y("step",i,t,e);return[n.range(r,o,s,y("dtype",i,t,e))]}case"TruncatedNormal":{let r=y("shape",i,t,e),o=y("mean",i,t,e),s=y("stdDev",i,t,e),a=y("seed",i,t,e);return[n.truncatedNormal(r,o,s,y("dtype",i,t,e),a)]}case"Zeros":return[n.zeros(y("shape",i,t,e),y("dtype",i,t,e))];case"ZerosLike":return[n.zerosLike(y("x",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});function IF(i,t,e){let n=y("boxes",i,t,e),r=y("scores",i,t,e),o=y("maxOutputSize",i,t,e),s=y("iouThreshold",i,t,e),a=y("scoreThreshold",i,t,e),c=y("softNmsSigma",i,t,e);return{boxes:n,scores:r,maxOutputSize:o,iouThreshold:s,scoreThreshold:a,softNmsSigma:c}}var aq,cq=D(()=>{"use strict";pr();An();aq=(o,s,a,c,...l)=>oe(void 0,[o,s,a,c,...l],function*(i,t,e,n,r=Ii){switch(i.op){case"NonMaxSuppressionV5":{let{boxes:d,scores:u,maxOutputSize:h,iouThreshold:m,scoreThreshold:p,softNmsSigma:_}=IF(i,t,e),f=yield r.image.nonMaxSuppressionWithScoreAsync(d,u,h,m,p,_);return[f.selectedIndices,f.selectedScores]}case"NonMaxSuppressionV4":{let{boxes:d,scores:u,maxOutputSize:h,iouThreshold:m,scoreThreshold:p}=IF(i,t,e),_=y("padToMaxOutputSize",i,t,e),f=yield r.image.nonMaxSuppressionPaddedAsync(d,u,h,m,p,_);return[f.selectedIndices,f.validOutputs]}case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":{let{boxes:d,scores:u,maxOutputSize:h,iouThreshold:m,scoreThreshold:p}=IF(i,t,e);return[yield r.image.nonMaxSuppressionAsync(d,u,h,m,p)]}case"Where":{let d=r.cast(y("condition",i,t,e),"bool"),u=[yield r.whereAsync(d)];return d.dispose(),u}case"ListDiff":return r.setdiff1dAsync(y("x",i,t,e),y("y",i,t,e));default:throw TypeError(`Node type ${i.op} is not implemented`)}})});var lq,dq=D(()=>{"use strict";pr();An();lq=(i,t,e,n=Ii)=>{switch(i.op){case"LowerBound":{let r=y("sortedSequence",i,t,e),o=y("values",i,t,e);return[n.lowerBound(r,o)]}case"TopKV2":{let r=y("x",i,t,e),o=y("k",i,t,e),s=y("sorted",i,t,e),a=n.topk(r,o,s);return[a.values,a.indices]}case"UpperBound":{let r=y("sortedSequence",i,t,e),o=y("values",i,t,e);return[n.upperBound(r,o)]}case"Unique":{let r=y("x",i,t,e),o=n.unique(r);return[o.values,o.indices]}case"UniqueV2":{let r=y("x",i,t,e),o=y("axis",i,t,e),s=n.unique(r,o);return[s.values,s.indices]}default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var uq,hq=D(()=>{"use strict";pr();An();uq=(i,t,e,n=Ii)=>{switch(i.op){case"Const":return t[i.name];case"PlaceholderWithDefault":let r=y("default",i,t,e);return[Bn(i.name,t,e)||r];case"Placeholder":return[Bn(i.name,t,e)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":{let d=y("x",i,t,e);return[Sa(d)]}case"IdentityN":return y("x",i,t,e).map(d=>Sa(d));case"Snapshot":let o=y("x",i,t,e);return[Sa(o)];case"Shape":return[n.tensor1d(y("x",i,t,e).shape,"int32")];case"ShapeN":return y("x",i,t,e).map(d=>n.tensor1d(d.shape));case"Size":return[n.scalar(y("x",i,t,e).size,"int32")];case"Rank":return[n.scalar(y("x",i,t,e).rank,"int32")];case"NoOp":return[n.scalar(1)];case"Print":let s=y("x",i,t,e),a=y("data",i,t,e),c=y("message",i,t,e),l=y("summarize",i,t,e);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(c);for(let d=0;d<a.length;d++)console.log(Array.prototype.slice.call(a[d].dataSync()).slice(0,l));return[s];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var xM,mq=D(()=>{"use strict";Ko();pr();xM=class{get id(){return this.handle.id}constructor(t,e){this.keyDType=t,this.valueDType=e,this.handle=Ct(0),this.tensorMap=new Map,so(this.handle)}clearAndClose(){this.tensorMap.forEach(t=>t.dispose()),this.tensorMap.clear(),this.handle.dispose()}size(){return this.tensorMap.size}tensorSize(){return Ct(this.size(),"int32")}import(t,e){return oe(this,null,function*(){this.checkKeyAndValueTensor(t,e);let n=yield t.data();return this.tensorMap.forEach(r=>r.dispose()),this.tensorMap.clear(),Jt(()=>{let r=Zo(e),o=n.length,s=r.length;ke.assert(o===s,()=>`The number of elements doesn't match, keys has ${o} elements, the values has ${s} elements.`);for(let a=0;a<o;a++){let c=n[a],l=r[a];so(l),this.tensorMap.set(c,l)}return this.handle})})}find(t,e){return oe(this,null,function*(){this.checkKeyAndValueTensor(t,e);let n=yield t.data();return Jt(()=>{let r=[];for(let o=0;o<n.length;o++){let s=n[o],a=this.findWithDefault(s,e);r.push(a)}return qr(r)})})}findWithDefault(t,e){let n=this.tensorMap.get(t);return n??e}checkKeyAndValueTensor(t,e){if(t.dtype!==this.keyDType)throw new Error(`Expect key dtype ${this.keyDType}, but got ${t.dtype}`);if(e.dtype!==this.valueDType)throw new Error(`Expect value dtype ${this.valueDType}, but got ${e.dtype}`)}}});var pq,fq=D(()=>{"use strict";mq();An();pq=(i,t,e,n)=>oe(void 0,null,function*(){switch(i.op){case"HashTable":case"HashTableV2":{let r=n.getHashTableHandleByName(i.name);if(r!=null)return[r];{let o=y("keyDType",i,t,e),s=y("valueDType",i,t,e),a=new xM(o,s);return n.addHashTable(i.name,a),[a.handle]}}case"InitializeTable":case"InitializeTableV2":case"LookupTableImport":case"LookupTableImportV2":{let r=y("tableHandle",i,t,e,n),o=y("keys",i,t,e),s=y("values",i,t,e);return[yield n.getHashTableById(r.id).import(o,s)]}case"LookupTableFind":case"LookupTableFindV2":{let r=y("tableHandle",i,t,e,n),o=y("keys",i,t,e),s=y("defaultValue",i,t,e);return[yield n.getHashTableById(r.id).find(o,s)]}case"LookupTableSize":case"LookupTableSizeV2":{let r=y("tableHandle",i,t,e,n);return[n.getHashTableById(r.id).tensorSize()]}default:throw TypeError(`Node type ${i.op} is not implemented`)}})});var gq,_q=D(()=>{"use strict";pr();An();gq=(i,t,e,n=Ii)=>{switch(i.op){case"ResizeBilinear":{let r=y("images",i,t,e),o=y("size",i,t,e),s=y("alignCorners",i,t,e),a=y("halfPixelCenters",i,t,e);return[n.image.resizeBilinear(r,[o[0],o[1]],s,a)]}case"ResizeNearestNeighbor":{let r=y("images",i,t,e),o=y("size",i,t,e),s=y("alignCorners",i,t,e),a=y("halfPixelCenters",i,t,e);return[n.image.resizeNearestNeighbor(r,[o[0],o[1]],s,a)]}case"CropAndResize":{let r=y("image",i,t,e),o=y("boxes",i,t,e),s=y("boxInd",i,t,e),a=y("cropSize",i,t,e),c=y("method",i,t,e),l=y("extrapolationValue",i,t,e);return[n.image.cropAndResize(r,o,s,a,c,l)]}case"ImageProjectiveTransformV3":{let r=y("images",i,t,e),o=y("transforms",i,t,e),s=y("outputShape",i,t,e),a=y("fillValue",i,t,e),c=y("interpolation",i,t,e),l=y("fillMode",i,t,e);return[n.image.transform(r,o,c.toLowerCase(),l.toLowerCase(),a,s)]}default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var bq,vq=D(()=>{"use strict";pr();An();bq=(i,t,e,n=Ii)=>{switch(i.op){case"Equal":return[n.equal(y("a",i,t,e),y("b",i,t,e))];case"NotEqual":return[n.notEqual(y("a",i,t,e),y("b",i,t,e))];case"Greater":return[n.greater(y("a",i,t,e),y("b",i,t,e))];case"GreaterEqual":return[n.greaterEqual(y("a",i,t,e),y("b",i,t,e))];case"Less":return[n.less(y("a",i,t,e),y("b",i,t,e))];case"LessEqual":return[n.lessEqual(y("a",i,t,e),y("b",i,t,e))];case"LogicalAnd":return[n.logicalAnd(y("a",i,t,e),y("b",i,t,e))];case"LogicalNot":return[n.logicalNot(y("a",i,t,e))];case"LogicalOr":return[n.logicalOr(y("a",i,t,e),y("b",i,t,e))];case"Select":case"SelectV2":return[n.where(y("condition",i,t,e),y("a",i,t,e),y("b",i,t,e))];case"BitwiseAnd":return[n.bitwiseAnd(y("a",i,t,e),y("b",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var yq,xq=D(()=>{"use strict";pr();An();yq=(i,t,e,n=Ii)=>{switch(i.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[n.matMul(y("a",i,t,e),y("b",i,t,e),y("transposeA",i,t,e),y("transposeB",i,t,e))];case"Einsum":return[n.einsum(y("equation",i,t,e),...y("tensors",i,t,e))];case"Transpose":return[n.transpose(y("x",i,t,e),y("perm",i,t,e))];case"_FusedMatMul":let[r,o]=y("fusedOps",i,t,e),s=r==="biasadd",a=o==="prelu",c=y("numArgs",i,t,e),l=y("leakyreluAlpha",i,t,e);if(s){if(a&&c!==2)throw new Error("Fused MatMul with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!a&&c!==1)throw new Error("Fused MatMul with BiasAdd must have one extra argument: bias.")}let[d,u]=y("args",i,t,e);return[n.fused.matMul({a:y("a",i,t,e),b:y("b",i,t,e),transposeA:y("transposeA",i,t,e),transposeB:y("transposeB",i,t,e),bias:d,activation:o,preluActivationWeights:u,leakyreluAlpha:l})];case"MatrixBandPart":return[n.linalg.bandPart(y("a",i,t,e),y("numLower",i,t,e),y("numUpper",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var wq,Mq=D(()=>{"use strict";pr();An();wq=(i,t,e,n=Ii)=>{switch(i.op){case"EuclideanNorm":return[n.euclideanNorm(y("x",i,t,e),y("axis",i,t,e),y("keepDims",i,t,e))];case"FusedBatchNorm":case"FusedBatchNormV2":return[n.batchNorm(y("x",i,t,e),y("mean",i,t,e),y("variance",i,t,e),y("offset",i,t,e),y("scale",i,t,e),y("epsilon",i,t,e))];case"FusedBatchNormV3":return[n.batchNorm(y("x",i,t,e),y("mean",i,t,e),y("variance",i,t,e),y("offset",i,t,e),y("scale",i,t,e),y("epsilon",i,t,e))];case"LRN":return[n.localResponseNormalization(y("x",i,t,e),y("radius",i,t,e),y("bias",i,t,e),y("alpha",i,t,e),y("beta",i,t,e))];case"Softmax":return[n.softmax(y("x",i,t,e))];case"LogSoftmax":return[n.logSoftmax(y("x",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var Cq,Sq=D(()=>{"use strict";pr();An();Cq=(i,t,e,n=Ii)=>{switch(i.op){case"RaggedGather":{let{outputNestedSplits:r,outputDenseValues:o}=n.raggedGather(y("paramsNestedSplits",i,t,e),y("paramsDenseValues",i,t,e),y("indices",i,t,e),y("outputRaggedRank",i,t,e));return r.concat(o)}case"RaggedRange":{let{rtNestedSplits:r,rtDenseValues:o}=n.raggedRange(y("starts",i,t,e),y("limits",i,t,e),y("splits",i,t,e));return[r,o]}case"RaggedTensorToTensor":return[n.raggedTensorToTensor(y("shape",i,t,e),y("values",i,t,e),y("defaultValue",i,t,e),y("rowPartitionTensors",i,t,e),y("rowPartitionTypes",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var Eq,Tq=D(()=>{"use strict";pr();An();Eq=(i,t,e,n=Ii)=>{switch(i.op){case"Max":{let a=y("axis",i,t,e),c=y("keepDims",i,t,e);return[n.max(y("x",i,t,e),a,c)]}case"Mean":{let a=y("axis",i,t,e),c=y("keepDims",i,t,e);return[n.mean(y("x",i,t,e),a,c)]}case"Min":{let a=y("axis",i,t,e),c=y("keepDims",i,t,e);return[n.min(y("x",i,t,e),a,c)]}case"Sum":{let a=y("axis",i,t,e),c=y("keepDims",i,t,e);return[n.sum(y("x",i,t,e),a,c)]}case"All":{let a=y("axis",i,t,e),c=y("keepDims",i,t,e);return[n.all(y("x",i,t,e),a,c)]}case"Any":{let a=y("axis",i,t,e),c=y("keepDims",i,t,e);return[n.any(y("x",i,t,e),a,c)]}case"ArgMax":{let a=y("axis",i,t,e);return[n.argMax(y("x",i,t,e),a)]}case"ArgMin":{let a=y("axis",i,t,e);return[n.argMin(y("x",i,t,e),a)]}case"Prod":{let a=y("axis",i,t,e),c=y("keepDims",i,t,e);return[n.prod(y("x",i,t,e),a,c)]}case"Cumprod":{let a=y("axis",i,t,e),c=y("exclusive",i,t,e),l=y("reverse",i,t,e);return[n.cumprod(y("x",i,t,e),a,c,l)]}case"Cumsum":{let a=y("axis",i,t,e),c=y("exclusive",i,t,e),l=y("reverse",i,t,e);return[n.cumsum(y("x",i,t,e),a,c,l)]}case"Bincount":let r=y("x",i,t,e),o=y("weights",i,t,e),s=y("size",i,t,e);return[n.bincount(r,o,s)];case"DenseBincount":{let a=y("x",i,t,e),c=y("weights",i,t,e),l=y("size",i,t,e),d=y("binaryOutput",i,t,e);return[n.denseBincount(a,c,l,d)]}default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var Iq,Dq=D(()=>{"use strict";Ko();pr();An();Iq=(i,t,e,n=Ii)=>{switch(i.op){case"ConcatV2":case"Concat":{let r=y("n",i,t,e),o=y("axis",i,t,e),s=y("tensors",i,t,e);return s=s.slice(0,r),[n.concat(s,o)]}case"Gather":{let r=y("x",i,t,e),o=y("indices",i,t,e);return[n.gather(r,n.cast(o,"int32"),0)]}case"GatherV2":{let r=y("axis",i,t,e),o=y("batchDims",i,t,e),s=y("x",i,t,e),a=y("indices",i,t,e);return[n.gather(s,n.cast(a,"int32"),r,o)]}case"Reverse":{let r=y("dims",i,t,e),o=[];for(let a=0;a<r.length;a++)r[a]&&o.push(a);let s=y("x",i,t,e);return[n.reverse(s,o)]}case"ReverseV2":{let r=y("axis",i,t,e),o=y("x",i,t,e);return[n.reverse(o,r)]}case"Slice":{let r=y("begin",i,t,e),o=y("size",i,t,e);return[n.slice(y("x",i,t,e),r,o)]}case"StridedSlice":{let r=y("begin",i,t,e),o=y("end",i,t,e),s=y("strides",i,t,e),a=y("beginMask",i,t,e),c=y("endMask",i,t,e),l=y("ellipsisMask",i,t,e),d=y("newAxisMask",i,t,e),u=y("shrinkAxisMask",i,t,e),h=y("x",i,t,e);return[n.stridedSlice(h,r,o,s,a,c,l,d,u)]}case"Pack":return Jt(()=>{let r=y("axis",i,t,e),o=y("tensors",i,t,e),s=o[0].shape,a=n.squeeze(o[0]).shape,c=o.map(l=>{let d=ke.arraysEqual(l.shape,s);if(!d&&!ke.arraysEqual(n.squeeze(l).shape,a))throw new Error("the input tensors shape does not match");return d?l:n.reshape(l,s)});return[n.stack(c,r)]});case"Unpack":{let r=y("axis",i,t,e),o=y("tensor",i,t,e);return n.unstack(o,r)}case"Tile":{let r=y("reps",i,t,e);return[n.tile(y("x",i,t,e),r)]}case"Split":case"SplitV":{let r=y("axis",i,t,e),o=y("numOrSizeSplits",i,t,e),s=y("x",i,t,e);return n.split(s,o,r)}case"ScatterNd":{let r=y("indices",i,t,e),o=y("values",i,t,e),s=y("shape",i,t,e);return[n.scatterND(r,o,s)]}case"GatherNd":{let r=y("x",i,t,e),o=y("indices",i,t,e);return[n.gatherND(r,o)]}case"SparseToDense":{let r=y("sparseIndices",i,t,e),o=y("outputShape",i,t,e),s=y("sparseValues",i,t,e),a=y("defaultValue",i,t,e);return[n.sparseToDense(r,s,o,s.dtype===a.dtype?a:n.cast(a,s.dtype))]}case"TensorScatterUpdate":{let r=y("indices",i,t,e),o=y("values",i,t,e),s=y("tensor",i,t,e);return[n.tensorScatterUpdate(s,r,o)]}default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var kq,Aq=D(()=>{"use strict";pr();An();kq=(i,t,e,n=Ii)=>{switch(i.op){case"SparseFillEmptyRows":{let{outputIndices:r,outputValues:o,emptyRowIndicator:s,reverseIndexMap:a}=n.sparse.sparseFillEmptyRows(y("indices",i,t,e),y("values",i,t,e),y("denseShape",i,t,e),y("defaultValue",i,t,e));return[r,o,s,a]}case"SparseReshape":{let{outputIndices:r,outputShape:o}=n.sparse.sparseReshape(y("inputIndices",i,t,e),y("inputShape",i,t,e),y("newShape",i,t,e));return[r,o]}case"SparseSegmentMean":return[n.sparse.sparseSegmentMean(y("data",i,t,e),y("indices",i,t,e),y("segmentIds",i,t,e))];case"SparseSegmentSum":return[n.sparse.sparseSegmentSum(y("data",i,t,e),y("indices",i,t,e),y("segmentIds",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var Pq,Oq=D(()=>{"use strict";pr();An();Pq=(i,t,e,n=Ii)=>{switch(i.op){case"FFT":return[n.fft(y("x",i,t,e))];case"IFFT":return[n.ifft(y("x",i,t,e))];case"RFFT":return[n.rfft(y("x",i,t,e))];case"IRFFT":return[n.irfft(y("x",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var Nq,Rq=D(()=>{"use strict";pr();An();Nq=(i,t,e,n=Ii)=>{switch(i.op){case"StaticRegexReplace":return[n.string.staticRegexReplace(y("input",i,t,e),y("pattern",i,t,e),y("rewrite",i,t,e),y("replaceGlobal",i,t,e))];case"StringNGrams":{let{nGrams:r,nGramsSplits:o}=n.string.stringNGrams(y("data",i,t,e),y("dataSplits",i,t,e),y("separator",i,t,e),y("nGramWidths",i,t,e),y("leftPad",i,t,e),y("rightPad",i,t,e),y("padWidth",i,t,e),y("preserveShortSequences",i,t,e));return[r,o]}case"StringSplit":{let{indices:r,values:o,shape:s}=n.string.stringSplit(y("input",i,t,e),y("delimiter",i,t,e),y("skipEmpty",i,t,e));return[r,o,s]}case"StringToHashBucketFast":return[n.string.stringToHashBucketFast(y("input",i,t,e),y("numBuckets",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});var Fq,Lq=D(()=>{"use strict";pr();An();Fq=(i,t,e,n=Ii)=>{switch(i.op){case"Cast":return[n.cast(y("x",i,t,e),y("dtype",i,t,e))];case"ExpandDims":{let r=y("axis",i,t,e);return[n.expandDims(y("x",i,t,e),r)]}case"Squeeze":{let r=y("axis",i,t,e);return[n.squeeze(y("x",i,t,e),r)]}case"Reshape":return[n.reshape(y("x",i,t,e),y("shape",i,t,e))];case"EnsureShape":return[n.ensureShape(y("x",i,t,e),y("shape",i,t,e))];case"MirrorPad":return[n.mirrorPad(y("x",i,t,e),y("padding",i,t,e),y("mode",i,t,e))];case"PadV2":case"Pad":return[n.pad(y("x",i,t,e),y("padding",i,t,e),y("constantValue",i,t,e))];case"SpaceToBatchND":{let r=y("blockShape",i,t,e),o=y("paddings",i,t,e);return[n.spaceToBatchND(y("x",i,t,e),r,o)]}case"BatchToSpaceND":{let r=y("blockShape",i,t,e),o=y("crops",i,t,e);return[n.batchToSpaceND(y("x",i,t,e),r,o)]}case"DepthToSpace":{let r=y("blockSize",i,t,e),o=y("dataFormat",i,t,e).toUpperCase();return[n.depthToSpace(y("x",i,t,e),r,o)]}case"BroadcastTo":return[n.broadcastTo(y("x",i,t,e),y("shape",i,t,e))];case"BroadcastArgs":return[n.broadcastArgs(y("s0",i,t,e),y("s1",i,t,e))];default:throw TypeError(`Node type ${i.op} is not implemented`)}}});function DF(i,t,e,n,r=Jt){let o=((s,a,c)=>{switch(s.category){case"arithmetic":return r(()=>j7(s,a,c));case"basic_math":return r(()=>G7(s,a,c));case"control":return eq(s,a,c);case"convolution":return r(()=>nq(s,a,c));case"creation":return r(()=>oq(s,a,c));case"dynamic":return aq(s,a,c);case"evaluation":return r(()=>lq(s,a,c));case"image":return r(()=>gq(s,a,c));case"graph":return r(()=>uq(s,a,c));case"logical":return r(()=>bq(s,a,c));case"matrices":return r(()=>yq(s,a,c));case"normalization":return r(()=>wq(s,a,c));case"ragged":return r(()=>Cq(s,a,c));case"reduction":return r(()=>Eq(s,a,c));case"slice_join":return r(()=>Iq(s,a,c));case"sparse":return r(()=>kq(s,a,c));case"spectral":return r(()=>Pq(s,a,c));case"string":return r(()=>Nq(s,a,c));case"transformation":return r(()=>Fq(s,a,c));case"hash_table":return pq(s,a,c,n);case"custom":let l=oM(s.op);if(l&&l.customExecutor)return l.customExecutor(new bM(s,a,c));throw TypeError(`Custom op ${s.op} is not registered.`);default:throw TypeError(`Unknown op '${s.op}'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()`)}})(i,t,e);return ke.isPromise(o)?o.then(s=>[].concat(s)):[].concat(o)}var Bq=D(()=>{"use strict";Ko();H7();sM();$7();W7();tq();rq();sq();cq();dq();hq();fq();_q();vq();xq();Mq();Sq();Tq();Dq();Aq();Oq();Rq();Lq();});var M0,Vq=D(()=>{"use strict";M0=class{constructor(t={},e={},n={},r={},o){this.weightMap=t,this.tensorArrayMap=e,this.tensorListMap=n,this.functionMap=r,this.parseNodeNameCache=o,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}newFrame(t,e){return{id:t,frameName:e,iterationId:0}}set currentContext(t){this.contexts!==t&&(this.contexts=t,this.generateCurrentContextIds())}get currentContext(){return this.contexts}get currentContextId(){return this._currentContextIds[0]}get currentContextIds(){return this._currentContextIds}generateCurrentContextIds(){let t=[];for(let e=0;e<this.contexts.length-1;e++){let n=this.contexts.slice(0,this.contexts.length-e);t.push(this.contextIdforContexts(n))}t.push(""),this._currentContextIds=t}contextIdforContexts(t){return t?t.map(e=>e.id===0&&e.iterationId===0?"":`${e.frameName}-${e.iterationId}`).join("/"):""}enterFrame(t){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,t)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))}exitFrame(){if(this.contexts&&this.contexts.length>1)this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift();else throw new Error("Cannot exit frame, the context is empty")}nextIteration(){if(this.contexts&&this.contexts.length>0){this.contexts=this.contexts.slice(),this.lastId++;let t=Object.assign({},this.contexts[this.contexts.length-1]);t.iterationId+=1,t.id=this.lastId,this.contexts.splice(-1,1,t),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))}else throw new Error("Cannot increase frame iteration, the context is empty")}getWeight(t){return this.weightMap[t]}addTensorArray(t){this.tensorArrayMap[t.id]=t}getTensorArray(t){return this.tensorArrayMap[t]}addTensorList(t){this.tensorListMap[t.id]=t}getTensorList(t){return this.tensorListMap[t]}dispose(t){for(let e in this.tensorArrayMap)this.tensorArrayMap[e].clearAndClose(t);for(let e in this.tensorListMap)this.tensorListMap[e].clearAndClose(t)}}});function kF(i,t,e,n){let r=new Set,o=[],s=null,a=null,c=new Set,l=new Set(Object.keys(i).map(h=>co(h)[0]));n=n||[];let d=new Set(n.map(h=>co(h.name)[0])),u=[...t];for(;u.length>0;){let h=u.pop();if((Fd(h)||xbe(h)||wbe(h))&&s==null&&(s=h,a=s.children.map(m=>m.name).filter(m=>r.has(m))),r.add(h.name),e[h.name]==null&&!l.has(h.name)&&!d.has(h.name)){if(h.inputs.length===0){o.push(h.name);continue}h.inputs.forEach(m=>{c.has(m.name)||(c.add(m.name),u.push(m))})}}return{inputs:i,outputs:t,usedNodes:r,missingInputs:o,dynamicNode:s,syncInputs:a}}function Uq(i,t){let{usedNodes:e,inputs:n}=t,r=Object.keys(n).map(f=>co(f)[0]).map(f=>i.nodes[f]),o=i.initNodes||[],s=f=>e.has(typeof f=="string"?f:f.name);function a(f){return[...new Map(f.map(g=>[g.name,g])).values()]}let c=a([...r,...i.weights,...o]).filter(s),l=a([...c,...Object.values(i.nodes)]).filter(s),d=new Map(l.map(f=>[f.name,f])),u={};for(let f of l){u[f.name]=u[f.name]||0;for(let g of f.children)s(g)||(u[g.name]=Number.POSITIVE_INFINITY),u[g.name]=(u[g.name]||0)+1}let h=Object.entries(u).filter(([,f])=>f===0).map(([f])=>f),m=[...h];for(;h.length>0;){let f=h.pop(),g=d.get(f);for(let S of g.children.filter(s))--u[S.name]===0&&(m.push(S.name),h.push(S.name))}let p=m.map(f=>d.get(f)),_=gbe(p,c);return _be(_,c),_}function gbe(i,t){let e=new Map(i.map(s=>[s.name,s])),n=t.map(s=>s.name),r=new Set(n);for(;n.length>0;){let s=n.pop(),a=e.get(s);for(let c of a.children)!e.has(c.name)||r.has(c.name)||(r.add(c.name),n.push(c.name))}return i.filter(s=>r.has(s.name))}function _be(i,t){let e=new Map(i.map((a,c)=>[a.name,c])),n=new Set(t.map(a=>a.name)),r=a=>n.has(typeof a=="string"?a:a.name),o=new Set(i.map(a=>a.name)),s=a=>o.has(typeof a=="string"?a:a.name);for(let a of i){for(let c of a.children.filter(s)){if(!e.has(c.name))throw new $p(`Child ${c.name} of node ${a.name} is unreachable.`);if(e.get(a.name)>e.get(c.name))throw new $p(`Node ${a.name} is scheduled to run after its child ${c.name}.`)}if(!r(a))for(let c of a.inputs){if(!e.has(c.name))throw new $p(`Input ${c.name} of node ${a.name} is unreachable.`);if(e.get(c.name)>e.get(a.name))throw new $p(`Node ${a.name} is scheduled to run before its input ${c.name}.`)}}}function zq(i){let t=new Map(i.map((a,c)=>[a.name,c])),e=Number.MAX_SAFE_INTEGER,n=i.map((a,c)=>Fd(a)?e:c),r=a=>{let c=n[t.get(a.name)];return c??-1},o=i.map((a,c)=>a.children.map(r).reduce((l,d)=>Math.max(l,d),n[c])),s=new Map;for(let a=0;a<i.length;++a){let c=o[a];if(c===e)continue;let l=i[a],d=i[c];s.has(d.name)||s.set(d.name,[]),s.get(d.name).push(l)}return s}function Fd(i){return bbe.has(i.op)}function xbe(i){return vbe.has(i.op)}function wbe(i){return ybe.has(i.op)}var $p,bbe,vbe,ybe,Hq=D(()=>{"use strict";An();$p=class extends Error{constructor(t){super(`NodesExecutionOrderError: ${t}`)}};bbe=new Set(["Switch","Merge","Enter","Exit","NextIteration","StatelessIf","StatelessWhile","if","While"]),vbe=new Set(["NonMaxSuppressionV2","NonMaxSuppressionV3","NonMaxSuppressionV5","Where"]),ybe=new Set(["HashTable","HashTableV2","LookupTableImport","LookupTableImportV2","LookupTableFind","LookupTableFindV2","LookupTableSize","LookupTableSizeV2"])});var C0,jq=D(()=>{"use strict";Ko();An();Bq();Vq();Hq();C0=class i{get weightIds(){return this.parent?this.parent.weightIds:this._weightIds}get functionExecutorMap(){return this.parent?this.parent.functionExecutorMap:this._functionExecutorMap}get weightMap(){return this.parent?this.parent.weightMap:this._weightMap}set weightMap(t){let e=Object.keys(t).map(n=>t[n].map(r=>r.id));this._weightIds=[].concat(...e),this._weightMap=t}set resourceManager(t){this._resourceManager=t}get inputs(){return this._inputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get outputs(){return this._outputs.map(t=>({name:t.name,shape:t.attrParams.shape?t.attrParams.shape.value:void 0,dtype:t.attrParams.dtype?t.attrParams.dtype.value:void 0}))}get inputNodes(){return this._inputs.map(t=>t.signatureKey||t.name)}get outputNodes(){return this._outputs.map(t=>{let e=t.signatureKey||t.name;return t.defaultOutput?`${e}:${t.defaultOutput}`:e})}get functions(){return Object.keys(this._functions).reduce((t,e)=>(t[e]=this._functions[e].signature,t),{})}constructor(t,e){this.graph=t,this.parent=e,this.compiledMap=new Map,this.parseNodeNameCache=new Map,this._weightMap={},this.SEPARATOR=",",this._functions={},this._functionExecutorMap={},this.keepIntermediateTensors=!1,this._outputs=t.outputs,this._inputs=t.inputs,this._initNodes=t.initNodes,this._signature=t.signature,this._functions=t.functions,t.functions!=null&&Object.keys(t.functions).forEach(n=>{this._functionExecutorMap[n]=new i(t.functions[n],this)})}getCompilationKey(t,e){let n=t.map(o=>o.name).sort(),r=e.map(o=>o.name).sort();return n.join(this.SEPARATOR)+"--"+r.join(this.SEPARATOR)}compile(t,e){let n=kF(t,e,this.weightMap,this._initNodes),{missingInputs:r,dynamicNode:o,syncInputs:s}=n;if(o!=null)throw new Error(`This execution contains the node '${o.name}', which has the dynamic op '${o.op}'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs [${s}]`);if(r.length>0){let l=e.map(u=>u.name),d=Object.keys(t);throw new Error(`Cannot compute the outputs [${l}] from the provided inputs [${d}]. Missing the following inputs: [${r}]`)}let a=Uq(this.graph,n),c=zq(a);return{orderedNodes:a,nodeLiveUntilMap:c}}cloneAndKeepTensor(t){if(t==null)return null;let e=t.clone();return so(e),e}cloneTensorList(t){return t?t.map(n=>this.cloneAndKeepTensor(n)):null}cloneTensorMap(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e,this.cloneTensorList(n)]))}execute(t,e){this.disposeIntermediateTensors(),t=this.mapInputs(t);let n=Object.keys(t).sort();this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e);let r=n.map(h=>this.graph.nodes[co(h)[0]]),o=e.map(h=>co(h)[0]),s=new Set(o),a=o.map(h=>this.graph.nodes[h]);a.length===0&&(a=this._outputs);let c=this.getCompilationKey(r,a),l=this.compiledMap.get(c);l==null&&(l=this.compile(t,a),this.compiledMap.set(c,l));try{this.keepIntermediateTensors=st().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(h){this.keepIntermediateTensors=!1,console.warn(h.message)}let d={},u={};return Jt(()=>{let h=new M0(this.weightMap,d,u,this.functionExecutorMap,this.parseNodeNameCache),m=Object.assign({},this.weightMap);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap)),Object.keys(t).forEach(g=>{let[S,C]=co(g,h),E=[];E[C]=t[g],m[S]=E,this.keepIntermediateTensors&&(this.clonedTensorsMap[S]=this.cloneTensorList(E))});let p=this.getFrozenTensorIds(m),{orderedNodes:_,nodeLiveUntilMap:f}=l;for(let g of _){if(m[g.name])continue;let S=DF(g,m,h,this._resourceManager);if(ke.isPromise(S))throw new Error(`The execution of the op '${g.op}' returned a promise. Please use model.executeAsync() instead.`);m[g.name]=S,this.keepIntermediateTensors&&(this.clonedTensorsMap[g.name]=this.cloneTensorList(S)),this.checkTensorForDisposalWithNodeLiveUntilInfo(g,m,h,p,s,f.get(g.name))}return this.parent==null&&h.dispose(p),e.map(g=>Bn(g,m,h))})}getFrozenTensorIds(t){let e=[].concat.apply([],Object.keys(t).map(n=>t[n]).map(n=>n.map(r=>r.id)));return new Set(e)}checkTensorForDisposal(t,e,n,r,o,s,a){if(!(Fd(e)||s.has(t))){for(let c of n[t])c!=null&&(a[c.id]=(a[c.id]||0)+e.children.length);for(let c of e.inputs){if(Fd(c))continue;let l=oF(c.name,n,r);if(l!=null)for(let d of l){if(!d||d.kept||o.has(d.id))continue;let u=a[d.id];u===1?(d.dispose(),delete a[d.id]):u!=null&&a[d.id]--}}}}checkTensorForDisposalWithNodeLiveUntilInfo(t,e,n,r,o,s){function a(c){return Fd(c)||o.has(c.name)}if(!(Fd(t)||s==null))for(let c of s){if(a(c))continue;let l=oF(c.name,e,n);for(let d of l)!d||d.kept||r.has(d.id)||d.dispose()}}executeAsync(t,e){return oe(this,null,function*(){return this._executeAsync(t,e)})}disposeIntermediateTensors(){this.clonedTensorsMap&&(Object.values(this.clonedTensorsMap).forEach(t=>{for(let e of t)e&&!e.isDisposed&&e.dispose()}),this.clonedTensorsMap=null)}getIntermediateTensors(){return this.clonedTensorsMap}_executeAsync(s,a){return oe(this,arguments,function*(t,e,n=!1,r={},o={}){this.disposeIntermediateTensors(),n||(t=this.mapInputs(t),this.checkInputs(t),this.checkInputShapeAndType(t),e=this.mapOutputs(e),this.checkOutputs(e));try{this.keepIntermediateTensors=st().getBool("KEEP_INTERMEDIATE_TENSORS")}catch(p){this.keepIntermediateTensors=!1,console.warn(p.message)}let c=new M0(this.weightMap,r,o,this.functionExecutorMap,this.parseNodeNameCache);this.keepIntermediateTensors&&(this.clonedTensorsMap=this.cloneTensorMap(this.weightMap));let l=yield this.executeWithControlFlow(t,c,e,n),d=e.map(p=>Bn(p,l,c)),u=d.map(p=>p.id),h=Object.keys(t).map(p=>t[p].id),m=new Set([...u,...h,...this.weightIds]);return Object.values(l).forEach(p=>{p.forEach(_=>{_&&!_.isDisposed&&!m.has(_.id)&&_.dispose()})}),this.parent==null&&c.dispose(m),d})}executeFunctionAsync(t,e,n){return oe(this,null,function*(){let r=t.reduce((o,s,a)=>(o[this.inputs[a].name]=s,o),{});return this._executeAsync(r,this.outputNodes,!0,e,n)})}executeWithControlFlow(t,e,n,r){return oe(this,null,function*(){let o=Object.keys(t),s=o.map(E=>this.graph.nodes[co(E)[0]]),a=n.map(E=>co(E)[0]),c=new Set(a),l=a.map(E=>this.graph.nodes[E]);l.length===0&&(l=this._outputs);let{usedNodes:d,missingInputs:u,dynamicNode:h,syncInputs:m}=kF(t,l,this.weightMap,this._initNodes),p=[...s,...this.graph.weights,...this._initNodes||[]].map(E=>({node:E,contexts:e.currentContext})),_=Object.assign({},this.weightMap);Object.keys(t).forEach(E=>{let[N,R]=co(E),B=[];B[R]=t[E],_[N]=B});let f={},g=this.getFrozenTensorIds(_),S={};for(;p.length>0;){let E=this.processStack(s,p,e,_,S,g,c,f,d);yield Promise.all(E)}h==null&&!r&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead.");let C=l.filter(E=>!Fd(E)&&!Bn(E.name,_,e)).map(E=>E.name);if(C.length>0){let E="";throw h!=null&&(E=`Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs [${m}]`),new Error(`Cannot compute the outputs [${C}] from the provided inputs [${o}]. Consider providing the following inputs: [${u}]. ${E}`)}return _})}processStack(t,e,n,r,o,s,a,c,l){let d=[];for(;e.length>0;){let u=e.pop();n.currentContext=u.contexts;let h="";if(u.node.op==="Enter"&&y("isConstant",u.node,r,n)&&([h]=Ca(u.node.name,n)),r[u.node.name]==null){let m=DF(u.node,r,n,this._resourceManager);h||([h]=Ca(u.node.name,n));let p=n.currentContext;ke.isPromise(m)?d.push(m.then(_=>(r[h]=_,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(_)),n.currentContext=p,this.checkTensorForDisposal(h,u.node,r,n,s,a,c),this.processChildNodes(u.node,e,n,r,o,l),_))):(r[h]=m,this.keepIntermediateTensors&&(this.clonedTensorsMap[h]=this.cloneTensorList(m)),this.checkTensorForDisposal(h,u.node,r,n,s,a,c),this.processChildNodes(u.node,e,n,r,o,l))}else this.processChildNodes(u.node,e,n,r,o,l)}return d}processChildNodes(t,e,n,r,o,s){t.children.forEach(a=>{let[c]=Ca(a.name,n);o[c]||!s.has(a.name)||(a.op==="Merge"?a.inputNames.some(l=>!!Bn(l,r,n))&&(o[c]=!0,e.push({contexts:n.currentContext,node:a})):a.inputNames.every(l=>!!Bn(l,r,n))&&(o[c]=!0,e.push({contexts:n.currentContext,node:a})))})}dispose(){Object.keys(this.weightMap).forEach(t=>this.weightMap[t].forEach(e=>e.dispose()))}checkInputShapeAndType(t){Object.keys(t).forEach(e=>{let n=t[e],[r]=co(e),o=this.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){let s=o.attrParams.shape.value,a=s.length===n.shape.length&&n.shape.every((c,l)=>s[l]===-1||s[l]===c);ke.assert(a,()=>`The shape of dict['${o.name}'] provided in model.execute(dict) must be [${s}], but was [${n.shape}]`)}o.attrParams.dtype&&o.attrParams.dtype.value&&ke.assert(n.dtype===o.attrParams.dtype.value,()=>`The dtype of dict['${o.name}'] provided in model.execute(dict) must be ${o.attrParams.dtype.value}, but was ${n.dtype}`)})}mapInputs(t){var e,n;let r={};for(let o in t){let s=(n=(e=this._signature)===null||e===void 0?void 0:e.inputs)===null||n===void 0?void 0:n[o];s!=null?r[s.name]=t[o]:r[o]=t[o]}return r}checkInputs(t){let e=Object.keys(t).filter(n=>{let[r]=co(n);return this.graph.nodes[r]==null});if(e.length>0)throw new Error(`The dict provided in model.execute(dict) has keys: [${e}] that are not part of graph`)}mapOutputs(t){return t.map(e=>{var n,r;let o=(r=(n=this._signature)===null||n===void 0?void 0:n.outputs)===null||r===void 0?void 0:r[e];return o!=null?o.name:e},{})}checkOutputs(t){t.forEach(e=>{let[n]=co(e);if(!this.graph.nodes[n])throw new Error(`The output '${e}' is not found in the graph`)})}}});var wM,$q=D(()=>{"use strict";wM=class{constructor(t={},e={}){this.hashTableNameToHandle=t,this.hashTableMap=e}addHashTable(t,e){this.hashTableNameToHandle[t]=e.handle,this.hashTableMap[e.id]=e}getHashTableHandleByName(t){return this.hashTableNameToHandle[t]}getHashTableById(t){return this.hashTableMap[t]}dispose(){for(let t in this.hashTableMap)this.hashTableMap[t].clearAndClose(),delete this.hashTableMap[t];for(let t in this.hashTableNameToHandle)this.hashTableNameToHandle[t].dispose(),delete this.hashTableNameToHandle[t]}}});function Gq(n){return oe(this,arguments,function*(i,t={},e=mc){if(i==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");t==null&&(t={}),t.fromTFHub&&typeof i=="string"&&(i=Sbe(i));let r=new Gp(i,t,e);return yield r.load(),r})}function Wq(i){if(i==null)throw new Error("modelUrl in loadGraphModelSync() cannot be null. Please provide model artifacts or an IOHandler that loads the model");let t;if(i instanceof Array){let[n,r]=i;if(!n)throw new Error("modelJSON must be the first element of the array");if(!r||!(r instanceof ArrayBuffer))throw new Error("An ArrayBuffer of weights must be the second element of the array");if(!("modelTopology"in n))throw new Error("Model JSON is missing 'modelTopology'");if(!("weightsManifest"in n))throw new Error("Model JSON is missing 'weightsManifest'");let o=mc.getWeightSpecs(n.weightsManifest),s=mc.getModelArtifactsForJSONSync(n,o,r);t=mc.fromMemorySync(s)}else if("load"in i)t=i;else if("modelTopology"in i&&"weightSpecs"in i&&"weightData"in i)t=mc.fromMemorySync(i);else throw new Error("Unknown model format");let e=new Gp(t);return e.load(),e}function Sbe(i){return i.endsWith("/")||(i=i+"/"),`${i}${Cbe}${Mbe}`}var Mbe,Cbe,Gp,qq=D(()=>{"use strict";Ko();EF();jq();$q();yd();Mbe="?tfjs-format=file",Cbe="model.json",Gp=class{get modelVersion(){return this.version}get inputNodes(){return this.executor.inputNodes}get outputNodes(){return this.executor.outputNodes}get inputs(){return this.executor.inputs}get outputs(){return this.executor.outputs}get weights(){return this.executor.weightMap}get metadata(){return this.artifacts.userDefinedMetadata}get modelSignature(){return this.signature}get modelStructuredOutputKeys(){return this.structuredOutputKeys}constructor(t,e={},n=mc){this.modelUrl=t,this.loadOptions=e,this.version="n/a",this.io=n,e==null&&(this.loadOptions={}),this.resourceManager=new wM}findIOHandler(){let t=this.modelUrl;if(t.load!=null)this.handler=t;else if(this.loadOptions.requestInit!=null)this.handler=this.io.browserHTTPRequest(t,this.loadOptions);else{let e=this.io.getLoadHandlers(t,this.loadOptions);if(e.length===0)e.push(this.io.browserHTTPRequest(t,this.loadOptions));else if(e.length>1)throw new Error(`Found more than one (${e.length}) load handlers for URL '${[t]}'`);this.handler=e[0]}}load(){if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");let t=this.handler.load();return ke.isPromise(t)?t.then(e=>e.getWeightStream==null?this.loadSync(e):this.loadStreaming(e)):this.loadSync(t)}loadSync(t){let e=this.io.decodeWeights(t.weightData,t.weightSpecs);return this.loadWithWeightMap(t,e)}loadStreaming(t){return oe(this,null,function*(){if(t.getWeightStream==null)throw new Error("Model artifacts missing streamWeights function");let e=yield sw(t.getWeightStream(),t.weightSpecs);return this.loadWithWeightMap(t,e)})}loadWithWeightMap(t,e){this.artifacts=t;let n=this.artifacts.modelTopology,r=this.artifacts.signature;if(this.artifacts.userDefinedMetadata!=null){let o=this.artifacts.userDefinedMetadata;o.signature!=null&&(r=o.signature),o.structuredOutputKeys!=null&&(this.structuredOutputKeys=o.structuredOutputKeys)}if(this.signature=r,this.version=`${n.versions.producer}.${n.versions.minConsumer}`,this.executor=new C0(w0.Instance.transformGraph(n,this.signature)),this.executor.weightMap=this.convertTensorMapToTensorsMap(e),this.executor.resourceManager=this.resourceManager,t.modelInitializer!=null&&t.modelInitializer.node!=null){let o=w0.Instance.transformGraph(t.modelInitializer);this.initializer=new C0(o),this.initializer.weightMap=this.executor.weightMap,this.initializer.resourceManager=this.resourceManager,this.initializerSignature=t.initializerSignature}return!0}save(t,e){return oe(this,null,function*(){if(typeof t=="string"){let n=this.io.getSaveHandlers(t);if(n.length===0)throw new Error(`Cannot find any save handlers for URL '${t}'`);if(n.length>1)throw new Error(`Found more than one (${n.length}) save handlers for URL '${t}'`);t=n[0]}if(t.save==null)throw new Error("GraphModel.save() cannot proceed because the IOHandler provided does not have the `save` attribute defined.");return t.save(this.artifacts)})}addStructuredOutputNames(t){if(this.structuredOutputKeys){let e=t instanceof Bi?[t]:t,n={};return e.forEach((r,o)=>n[this.structuredOutputKeys[o]]=r),n}return t}predict(t,e){let n=this.execute(t,this.outputNodes);return this.addStructuredOutputNames(n)}predictAsync(t,e){return oe(this,null,function*(){let n=yield this.executeAsync(t,this.outputNodes);return this.addStructuredOutputNames(n)})}normalizeInputs(t){var e;if(!(t instanceof Bi)&&!Array.isArray(t)){let o=(e=this.signature)===null||e===void 0?void 0:e.inputs;if(o!=null)for(let s in o){let a=o[s];a.resourceId!=null&&(t[s]=this.resourceIdToCapturedInput[a.resourceId])}return t}t=Array.isArray(t)?t:[t];let n=Object.keys(this.resourceIdToCapturedInput).length;if(t.length+n!==this.inputNodes.length)throw new Error(`Input tensor count mismatch, the graph model has ${this.inputNodes.length-n} non-resource placeholders, while there are ${t.length} input tensors provided.`);let r=0;return this.inputNodes.reduce((o,s)=>{var a,c,l;let d=(l=(c=(a=this.signature)===null||a===void 0?void 0:a.inputs)===null||c===void 0?void 0:c[s])===null||l===void 0?void 0:l.resourceId;return d!=null?o[s]=this.resourceIdToCapturedInput[d]:o[s]=t[r++],o},{})}normalizeOutputs(t){return t=t||this.outputNodes,Array.isArray(t)?t:[t]}executeInitializerGraph(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.execute({},[]):this.initializer.execute({},Object.keys(this.initializerSignature.outputs))}executeInitializerGraphAsync(){return oe(this,null,function*(){return this.initializer==null?[]:this.initializerSignature==null?this.initializer.executeAsync({},[]):this.initializer.executeAsync({},Object.keys(this.initializerSignature.outputs))})}setResourceIdToCapturedInput(t){if(this.resourceIdToCapturedInput={},this.initializerSignature){let e=this.initializerSignature.outputs,n=Object.keys(e);for(let r=0;r<n.length;r++){let o=n[r],s=e[o];this.resourceIdToCapturedInput[s.resourceId]=t[r]}}}execute(t,e){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(this.executeInitializerGraph()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);let n=this.executor.execute(t,e);return n.length>1?n:n[0]}executeAsync(t,e){return oe(this,null,function*(){this.resourceIdToCapturedInput==null&&this.setResourceIdToCapturedInput(yield this.executeInitializerGraphAsync()),t=this.normalizeInputs(t),e=this.normalizeOutputs(e);let n=yield this.executor.executeAsync(t,e);return n.length>1?n:n[0]})}getIntermediateTensors(){return this.executor.getIntermediateTensors()}disposeIntermediateTensors(){this.executor.disposeIntermediateTensors()}convertTensorMapToTensorsMap(t){return Object.keys(t).reduce((e,n)=>(e[n]=[t[n]],e),{})}dispose(){this.executor.dispose(),this.initializer&&(this.initializer.dispose(),this.resourceIdToCapturedInput&&Dn(this.resourceIdToCapturedInput)),this.resourceManager.dispose()}}});var Xq,Yq=D(()=>{"use strict";Xq="4.22.0"});var Zq={};Ei(Zq,{GraphModel:()=>Gp,deregisterOp:()=>v7,loadGraphModel:()=>Gq,loadGraphModelSync:()=>Wq,registerOp:()=>b7,version_converter:()=>Xq});var Kq=D(()=>{"use strict";f7();qq();sM();Yq();});var Jq=os((MM,Qq)=>{"use strict";(function(i,t){typeof MM=="object"&&typeof Qq<"u"?t(MM,(Kq(),iB(Zq)),(Ko(),iB(nF))):typeof define=="function"&&define.amd?define(["exports","@tensorflow/tfjs-converter","@tensorflow/tfjs-core"],t):t((i=i||self).cocoSsd=i.cocoSsd||{},i.tf,i.tf)})(MM,function(i,t,e){"use strict";let n={1:{name:"/m/01g317",id:1,displayName:"person"},2:{name:"/m/0199g",id:2,displayName:"bicycle"},3:{name:"/m/0k4j",id:3,displayName:"car"},4:{name:"/m/04_sv",id:4,displayName:"motorcycle"},5:{name:"/m/05czz6l",id:5,displayName:"airplane"},6:{name:"/m/01bjv",id:6,displayName:"bus"},7:{name:"/m/07jdr",id:7,displayName:"train"},8:{name:"/m/07r04",id:8,displayName:"truck"},9:{name:"/m/019jd",id:9,displayName:"boat"},10:{name:"/m/015qff",id:10,displayName:"traffic light"},11:{name:"/m/01pns0",id:11,displayName:"fire hydrant"},13:{name:"/m/02pv19",id:13,displayName:"stop sign"},14:{name:"/m/015qbp",id:14,displayName:"parking meter"},15:{name:"/m/0cvnqh",id:15,displayName:"bench"},16:{name:"/m/015p6",id:16,displayName:"bird"},17:{name:"/m/01yrx",id:17,displayName:"cat"},18:{name:"/m/0bt9lr",id:18,displayName:"dog"},19:{name:"/m/03k3r",id:19,displayName:"horse"},20:{name:"/m/07bgp",id:20,displayName:"sheep"},21:{name:"/m/01xq0k1",id:21,displayName:"cow"},22:{name:"/m/0bwd_0j",id:22,displayName:"elephant"},23:{name:"/m/01dws",id:23,displayName:"bear"},24:{name:"/m/0898b",id:24,displayName:"zebra"},25:{name:"/m/03bk1",id:25,displayName:"giraffe"},27:{name:"/m/01940j",id:27,displayName:"backpack"},28:{name:"/m/0hnnb",id:28,displayName:"umbrella"},31:{name:"/m/080hkjn",id:31,displayName:"handbag"},32:{name:"/m/01rkbr",id:32,displayName:"tie"},33:{name:"/m/01s55n",id:33,displayName:"suitcase"},34:{name:"/m/02wmf",id:34,displayName:"frisbee"},35:{name:"/m/071p9",id:35,displayName:"skis"},36:{name:"/m/06__v",id:36,displayName:"snowboard"},37:{name:"/m/018xm",id:37,displayName:"sports ball"},38:{name:"/m/02zt3",id:38,displayName:"kite"},39:{name:"/m/03g8mr",id:39,displayName:"baseball bat"},40:{name:"/m/03grzl",id:40,displayName:"baseball glove"},41:{name:"/m/06_fw",id:41,displayName:"skateboard"},42:{name:"/m/019w40",id:42,displayName:"surfboard"},43:{name:"/m/0dv9c",id:43,displayName:"tennis racket"},44:{name:"/m/04dr76w",id:44,displayName:"bottle"},46:{name:"/m/09tvcd",id:46,displayName:"wine glass"},47:{name:"/m/08gqpm",id:47,displayName:"cup"},48:{name:"/m/0dt3t",id:48,displayName:"fork"},49:{name:"/m/04ctx",id:49,displayName:"knife"},50:{name:"/m/0cmx8",id:50,displayName:"spoon"},51:{name:"/m/04kkgm",id:51,displayName:"bowl"},52:{name:"/m/09qck",id:52,displayName:"banana"},53:{name:"/m/014j1m",id:53,displayName:"apple"},54:{name:"/m/0l515",id:54,displayName:"sandwich"},55:{name:"/m/0cyhj_",id:55,displayName:"orange"},56:{name:"/m/0hkxq",id:56,displayName:"broccoli"},57:{name:"/m/0fj52s",id:57,displayName:"carrot"},58:{name:"/m/01b9xk",id:58,displayName:"hot dog"},59:{name:"/m/0663v",id:59,displayName:"pizza"},60:{name:"/m/0jy4k",id:60,displayName:"donut"},61:{name:"/m/0fszt",id:61,displayName:"cake"},62:{name:"/m/01mzpv",id:62,displayName:"chair"},63:{name:"/m/02crq1",id:63,displayName:"couch"},64:{name:"/m/03fp41",id:64,displayName:"potted plant"},65:{name:"/m/03ssj5",id:65,displayName:"bed"},67:{name:"/m/04bcr3",id:67,displayName:"dining table"},70:{name:"/m/09g1w",id:70,displayName:"toilet"},72:{name:"/m/07c52",id:72,displayName:"tv"},73:{name:"/m/01c648",id:73,displayName:"laptop"},74:{name:"/m/020lf",id:74,displayName:"mouse"},75:{name:"/m/0qjjc",id:75,displayName:"remote"},76:{name:"/m/01m2v",id:76,displayName:"keyboard"},77:{name:"/m/050k8",id:77,displayName:"cell phone"},78:{name:"/m/0fx9l",id:78,displayName:"microwave"},79:{name:"/m/029bxz",id:79,displayName:"oven"},80:{name:"/m/01k6s3",id:80,displayName:"toaster"},81:{name:"/m/0130jx",id:81,displayName:"sink"},82:{name:"/m/040b_t",id:82,displayName:"refrigerator"},84:{name:"/m/0bt_c3",id:84,displayName:"book"},85:{name:"/m/01x3z",id:85,displayName:"clock"},86:{name:"/m/02s195",id:86,displayName:"vase"},87:{name:"/m/01lsmm",id:87,displayName:"scissors"},88:{name:"/m/0kmg4",id:88,displayName:"teddy bear"},89:{name:"/m/03wvsk",id:89,displayName:"hair drier"},90:{name:"/m/012xff",id:90,displayName:"toothbrush"}};class r{constructor(s,a){this.modelPath=a||`https://storage.googleapis.com/tfjs-models/savedmodel/${this.getPrefix(s)}/model.json`}getPrefix(s){return s==="lite_mobilenet_v2"?`ssd${s}`:`ssd_${s}`}load(){return oe(this,null,function*(){this.model=yield t.loadGraphModel(this.modelPath);let s=e.zeros([1,300,300,3],"int32"),a=yield this.model.executeAsync(s);yield Promise.all(a.map(c=>c.data())),a.map(c=>c.dispose()),s.dispose()})}infer(s,a,c){return oe(this,null,function*(){let l=e.tidy(()=>(s instanceof e.Tensor||(s=e.browser.fromPixels(s)),e.expandDims(s))),d=l.shape[1],u=l.shape[2],h=yield this.model.executeAsync(l),m=h[0].dataSync(),p=h[1].dataSync();l.dispose(),e.dispose(h);let[_,f]=this.calculateMaxScores(m,h[0].shape[1],h[0].shape[2]),g=e.getBackend();e.getBackend()==="webgl"&&e.setBackend("cpu");let S=e.tidy(()=>{let E=e.tensor2d(p,[h[1].shape[1],h[1].shape[3]]);return e.image.nonMaxSuppression(E,_,a,c,c)}),C=S.dataSync();return S.dispose(),g!==e.getBackend()&&e.setBackend(g),this.buildDetectedObjects(u,d,p,_,C,f)})}buildDetectedObjects(s,a,c,l,d,u){let h=d.length,m=[];for(let p=0;p<h;p++){let _=[];for(let E=0;E<4;E++)_[E]=c[4*d[p]+E];let f=_[0]*a,g=_[1]*s,S=_[2]*a,C=_[3]*s;_[0]=g,_[1]=f,_[2]=C-g,_[3]=S-f,m.push({bbox:_,class:n[u[d[p]]+1].displayName,score:l[d[p]]})}return m}calculateMaxScores(s,a,c){let l=[],d=[];for(let u=0;u<a;u++){let h=Number.MIN_VALUE,m=-1;for(let p=0;p<c;p++)s[u*c+p]>h&&(h=s[u*c+p],m=p);l[u]=h,d[u]=m}return[l,d]}detect(s,a=20,c=.5){return oe(this,null,function*(){return this.infer(s,a,c)})}dispose(){this.model!=null&&this.model.dispose()}}i.ObjectDetection=r,i.load=function(){return oe(this,arguments,function*(o={}){if(e==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");let s=o.base||"lite_mobilenet_v2",a=o.modelUrl;if(["mobilenet_v1","mobilenet_v2","lite_mobilenet_v2"].indexOf(s)===-1)throw new Error(`ObjectDetection constructed with invalid base model ${s}. Valid names are 'mobilenet_v1', 'mobilenet_v2' and 'lite_mobilenet_v2'.`);let c=new r(s,a);return yield c.load(),c})},i.version="2.2.3",Object.defineProperty(i,"__esModule",{value:!0})})});var nB=null,bb=!1,_1=1,yb=Symbol("SIGNAL");function Ni(i){let t=nB;return nB=i,t}function HK(){return bb}var v1={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function jK(i){if(!(C1(i)&&!i.dirty)&&!(!i.dirty&&i.lastCleanEpoch===_1)){if(!i.producerMustRecompute(i)&&!xb(i)){i.dirty=!1,i.lastCleanEpoch=_1;return}i.producerRecomputeValue(i),i.dirty=!1,i.lastCleanEpoch=_1}}function $K(i){if(i.liveConsumerNode===void 0)return;let t=bb;bb=!0;try{for(let e of i.liveConsumerNode)e.dirty||rB(e)}finally{bb=t}}function rB(i){i.dirty=!0,$K(i),i.consumerMarkedDirty?.(i)}function y1(i){return i&&(i.nextProducerIndex=0),Ni(i)}function x1(i,t){if(Ni(t),!(!i||i.producerNode===void 0||i.producerIndexOfThis===void 0||i.producerLastReadVersion===void 0)){if(C1(i))for(let e=i.nextProducerIndex;e<i.producerNode.length;e++)M1(i.producerNode[e],i.producerIndexOfThis[e]);for(;i.producerNode.length>i.nextProducerIndex;)i.producerNode.pop(),i.producerLastReadVersion.pop(),i.producerIndexOfThis.pop()}}function xb(i){vb(i);for(let t=0;t<i.producerNode.length;t++){let e=i.producerNode[t],n=i.producerLastReadVersion[t];if(n!==e.version||(jK(e),n!==e.version))return!0}return!1}function w1(i){if(vb(i),C1(i))for(let t=0;t<i.producerNode.length;t++)M1(i.producerNode[t],i.producerIndexOfThis[t]);i.producerNode.length=i.producerLastReadVersion.length=i.producerIndexOfThis.length=0,i.liveConsumerNode&&(i.liveConsumerNode.length=i.liveConsumerIndexOfThis.length=0)}function M1(i,t){if(GK(i),vb(i),i.liveConsumerNode.length===1)for(let n=0;n<i.producerNode.length;n++)M1(i.producerNode[n],i.producerIndexOfThis[n]);let e=i.liveConsumerNode.length-1;if(i.liveConsumerNode[t]=i.liveConsumerNode[e],i.liveConsumerIndexOfThis[t]=i.liveConsumerIndexOfThis[e],i.liveConsumerNode.length--,i.liveConsumerIndexOfThis.length--,t<i.liveConsumerNode.length){let n=i.liveConsumerIndexOfThis[t],r=i.liveConsumerNode[t];vb(r),r.producerIndexOfThis[n]=t}}function C1(i){return i.consumerIsAlwaysLive||(i?.liveConsumerNode?.length??0)>0}function vb(i){i.producerNode??=[],i.producerIndexOfThis??=[],i.producerLastReadVersion??=[]}function GK(i){i.liveConsumerNode??=[],i.liveConsumerIndexOfThis??=[]}function WK(){throw new Error}var qK=WK;function oB(i){qK=i}function sB(i,t,e){let n=Object.create(XK);e&&(n.consumerAllowSignalWrites=!0),n.fn=i,n.schedule=t;let r=c=>{n.cleanupFn=c};function o(c){return c.fn===null&&c.schedule===null}function s(c){o(c)||(w1(c),c.cleanupFn(),c.fn=null,c.schedule=null,c.cleanupFn=b1)}let a=()=>{if(n.fn===null)return;if(HK())throw new Error("Schedulers cannot synchronously execute watches while scheduling.");if(n.dirty=!1,n.hasRun&&!xb(n))return;n.hasRun=!0;let c=y1(n);try{n.cleanupFn(),n.cleanupFn=b1,n.fn(r)}finally{x1(n,c)}};return n.ref={notify:()=>rB(n),run:a,cleanup:()=>n.cleanupFn(),destroy:()=>s(n),[yb]:n},n.ref}var b1=()=>{},XK=Nt(ge({},v1),{consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!1,consumerMarkedDirty:i=>{i.schedule!==null&&i.schedule(i.ref)},hasRun:!1,cleanupFn:b1});function Ft(i){return typeof i=="function"}function Kh(i){let e=i(n=>{Error.call(n),n.stack=new Error().stack});return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var wb=Kh(i=>function(e){i(this),this.message=e?`${e.length} errors occurred during unsubscription:
${e.map((n,r)=>`${r+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=e});function cu(i,t){if(i){let e=i.indexOf(t);0<=e&&i.splice(e,1)}}var Yt=class i{constructor(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let t;if(!this.closed){this.closed=!0;let{_parentage:e}=this;if(e)if(this._parentage=null,Array.isArray(e))for(let o of e)o.remove(this);else e.remove(this);let{initialTeardown:n}=this;if(Ft(n))try{n()}catch(o){t=o instanceof wb?o.errors:[o]}let{_finalizers:r}=this;if(r){this._finalizers=null;for(let o of r)try{aB(o)}catch(s){t=t??[],s instanceof wb?t=[...t,...s.errors]:t.push(s)}}if(t)throw new wb(t)}}add(t){var e;if(t&&t!==this)if(this.closed)aB(t);else{if(t instanceof i){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}}_hasParent(t){let{_parentage:e}=this;return e===t||Array.isArray(e)&&e.includes(t)}_addParent(t){let{_parentage:e}=this;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t}_removeParent(t){let{_parentage:e}=this;e===t?this._parentage=null:Array.isArray(e)&&cu(e,t)}remove(t){let{_finalizers:e}=this;e&&cu(e,t),t instanceof i&&t._removeParent(this)}};Yt.EMPTY=(()=>{let i=new Yt;return i.closed=!0,i})();var S1=Yt.EMPTY;function Mb(i){return i instanceof Yt||i&&"closed"in i&&Ft(i.remove)&&Ft(i.add)&&Ft(i.unsubscribe)}function aB(i){Ft(i)?i():i.unsubscribe()}var Ys={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Qh={setTimeout(i,t,...e){let{delegate:n}=Qh;return n?.setTimeout?n.setTimeout(i,t,...e):setTimeout(i,t,...e)},clearTimeout(i){let{delegate:t}=Qh;return(t?.clearTimeout||clearTimeout)(i)},delegate:void 0};function Cb(i){Qh.setTimeout(()=>{let{onUnhandledError:t}=Ys;if(t)t(i);else throw i})}function Of(){}var cB=E1("C",void 0,void 0);function lB(i){return E1("E",void 0,i)}function dB(i){return E1("N",i,void 0)}function E1(i,t,e){return{kind:i,value:t,error:e}}var lu=null;function Jh(i){if(Ys.useDeprecatedSynchronousErrorHandling){let t=!lu;if(t&&(lu={errorThrown:!1,error:null}),i(),t){let{errorThrown:e,error:n}=lu;if(lu=null,e)throw n}}else i()}function uB(i){Ys.useDeprecatedSynchronousErrorHandling&&lu&&(lu.errorThrown=!0,lu.error=i)}var du=class extends Yt{constructor(t){super(),this.isStopped=!1,t?(this.destination=t,Mb(t)&&t.add(this)):this.destination=KK}static create(t,e,n){return new Ic(t,e,n)}next(t){this.isStopped?I1(dB(t),this):this._next(t)}error(t){this.isStopped?I1(lB(t),this):(this.isStopped=!0,this._error(t))}complete(){this.isStopped?I1(cB,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(t){this.destination.next(t)}_error(t){try{this.destination.error(t)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},YK=Function.prototype.bind;function T1(i,t){return YK.call(i,t)}var D1=class{constructor(t){this.partialObserver=t}next(t){let{partialObserver:e}=this;if(e.next)try{e.next(t)}catch(n){Sb(n)}}error(t){let{partialObserver:e}=this;if(e.error)try{e.error(t)}catch(n){Sb(n)}else Sb(t)}complete(){let{partialObserver:t}=this;if(t.complete)try{t.complete()}catch(e){Sb(e)}}},Ic=class extends du{constructor(t,e,n){super();let r;if(Ft(t)||!t)r={next:t??void 0,error:e??void 0,complete:n??void 0};else{let o;this&&Ys.useDeprecatedNextContext?(o=Object.create(t),o.unsubscribe=()=>this.unsubscribe(),r={next:t.next&&T1(t.next,o),error:t.error&&T1(t.error,o),complete:t.complete&&T1(t.complete,o)}):r=t}this.destination=new D1(r)}};function Sb(i){Ys.useDeprecatedSynchronousErrorHandling?uB(i):Cb(i)}function ZK(i){throw i}function I1(i,t){let{onStoppedNotification:e}=Ys;e&&Qh.setTimeout(()=>e(i,t))}var KK={closed:!0,next:Of,error:ZK,complete:Of};var em=typeof Symbol=="function"&&Symbol.observable||"@@observable";function bo(i){return i}function k1(...i){return A1(i)}function A1(i){return i.length===0?bo:i.length===1?i[0]:function(e){return i.reduce((n,r)=>r(n),e)}}var Gt=(()=>{class i{constructor(e){e&&(this._subscribe=e)}lift(e){let n=new i;return n.source=this,n.operator=e,n}subscribe(e,n,r){let o=JK(e)?e:new Ic(e,n,r);return Jh(()=>{let{operator:s,source:a}=this;o.add(s?s.call(o,a):a?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(e){try{return this._subscribe(e)}catch(n){e.error(n)}}forEach(e,n){return n=hB(n),new n((r,o)=>{let s=new Ic({next:a=>{try{e(a)}catch(c){o(c),s.unsubscribe()}},error:o,complete:r});this.subscribe(s)})}_subscribe(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)}[em](){return this}pipe(...e){return A1(e)(this)}toPromise(e){return e=hB(e),new e((n,r)=>{let o;this.subscribe(s=>o=s,s=>r(s),()=>n(o))})}}return i.create=t=>new i(t),i})();function hB(i){var t;return(t=i??Ys.Promise)!==null&&t!==void 0?t:Promise}function QK(i){return i&&Ft(i.next)&&Ft(i.error)&&Ft(i.complete)}function JK(i){return i&&i instanceof du||QK(i)&&Mb(i)}function P1(i){return Ft(i?.lift)}function ii(i){return t=>{if(P1(t))return t.lift(function(e){try{return i(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Qt(i,t,e,n,r){return new O1(i,t,e,n,r)}var O1=class extends du{constructor(t,e,n,r,o,s){super(t),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=e?function(a){try{e(a)}catch(c){t.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){t.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(a){t.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:e}=this;super.unsubscribe(),!e&&((t=this.onFinalize)===null||t===void 0||t.call(this))}}};function tm(){return ii((i,t)=>{let e=null;i._refCount++;let n=Qt(t,void 0,void 0,void 0,()=>{if(!i||i._refCount<=0||0<--i._refCount){e=null;return}let r=i._connection,o=e;e=null,r&&(!o||r===o)&&r.unsubscribe(),t.unsubscribe()});i.subscribe(n),n.closed||(e=i.connect())})}var Nl=class extends Gt{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._subject=null,this._refCount=0,this._connection=null,P1(t)&&(this.lift=t.lift)}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){let t=this._subject;return(!t||t.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:t}=this;this._subject=this._connection=null,t?.unsubscribe()}connect(){let t=this._connection;if(!t){t=this._connection=new Yt;let e=this.getSubject();t.add(this.source.subscribe(Qt(e,void 0,()=>{this._teardown(),e.complete()},n=>{this._teardown(),e.error(n)},()=>this._teardown()))),t.closed&&(this._connection=null,t=Yt.EMPTY)}return t}refCount(){return tm()(this)}};var mB=Kh(i=>function(){i(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Le=(()=>{class i extends Gt{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(e){let n=new Eb(this,this);return n.operator=e,n}_throwIfClosed(){if(this.closed)throw new mB}next(e){Jh(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(e)}})}error(e){Jh(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=e;let{observers:n}=this;for(;n.length;)n.shift().error(e)}})}complete(){Jh(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:e}=this;for(;e.length;)e.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0}_trySubscribe(e){return this._throwIfClosed(),super._trySubscribe(e)}_subscribe(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)}_innerSubscribe(e){let{hasError:n,isStopped:r,observers:o}=this;return n||r?S1:(this.currentObservers=null,o.push(e),new Yt(()=>{this.currentObservers=null,cu(o,e)}))}_checkFinalizedStatuses(e){let{hasError:n,thrownError:r,isStopped:o}=this;n?e.error(r):o&&e.complete()}asObservable(){let e=new Gt;return e.source=this,e}}return i.create=(t,e)=>new Eb(t,e),i})(),Eb=class extends Le{constructor(t,e){super(),this.destination=t,this.source=e}next(t){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.next)===null||n===void 0||n.call(e,t)}error(t){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.error)===null||n===void 0||n.call(e,t)}complete(){var t,e;(e=(t=this.destination)===null||t===void 0?void 0:t.complete)===null||e===void 0||e.call(t)}_subscribe(t){var e,n;return(n=(e=this.source)===null||e===void 0?void 0:e.subscribe(t))!==null&&n!==void 0?n:S1}};var Ri=class extends Le{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){let e=super._subscribe(t);return!e.closed&&t.next(this._value),e}getValue(){let{hasError:t,thrownError:e,_value:n}=this;if(t)throw e;return this._throwIfClosed(),n}next(t){super.next(this._value=t)}};var Nf={now(){return(Nf.delegate||Date).now()},delegate:void 0};var uu=class extends Le{constructor(t=1/0,e=1/0,n=Nf){super(),this._bufferSize=t,this._windowTime=e,this._timestampProvider=n,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=e===1/0,this._bufferSize=Math.max(1,t),this._windowTime=Math.max(1,e)}next(t){let{isStopped:e,_buffer:n,_infiniteTimeWindow:r,_timestampProvider:o,_windowTime:s}=this;e||(n.push(t),!r&&n.push(o.now()+s)),this._trimBuffer(),super.next(t)}_subscribe(t){this._throwIfClosed(),this._trimBuffer();let e=this._innerSubscribe(t),{_infiniteTimeWindow:n,_buffer:r}=this,o=r.slice();for(let s=0;s<o.length&&!t.closed;s+=n?1:2)t.next(o[s]);return this._checkFinalizedStatuses(t),e}_trimBuffer(){let{_bufferSize:t,_timestampProvider:e,_buffer:n,_infiniteTimeWindow:r}=this,o=(r?1:2)*t;if(t<1/0&&o<n.length&&n.splice(0,n.length-o),!r){let s=e.now(),a=0;for(let c=1;c<n.length&&n[c]<=s;c+=2)a=c;a&&n.splice(0,a+1)}}};var Tb=class extends Yt{constructor(t,e){super()}schedule(t,e=0){return this}};var Rf={setInterval(i,t,...e){let{delegate:n}=Rf;return n?.setInterval?n.setInterval(i,t,...e):setInterval(i,t,...e)},clearInterval(i){let{delegate:t}=Rf;return(t?.clearInterval||clearInterval)(i)},delegate:void 0};var Ib=class extends Tb{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){var n;if(this.closed)return this;this.state=t;let r=this.id,o=this.scheduler;return r!=null&&(this.id=this.recycleAsyncId(o,r,e)),this.pending=!0,this.delay=e,this.id=(n=this.id)!==null&&n!==void 0?n:this.requestAsyncId(o,this.id,e),this}requestAsyncId(t,e,n=0){return Rf.setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(n!=null&&this.delay===n&&this.pending===!1)return e;e!=null&&Rf.clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let n=this._execute(t,e);if(n)return n;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n=!1,r;try{this.work(t)}catch(o){n=!0,r=o||new Error("Scheduled action threw falsy error")}if(n)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){let{id:t,scheduler:e}=this,{actions:n}=e;this.work=this.state=this.scheduler=null,this.pending=!1,cu(n,this),t!=null&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null,super.unsubscribe()}}};var im=class i{constructor(t,e=i.now){this.schedulerActionCtor=t,this.now=e}schedule(t,e=0,n){return new this.schedulerActionCtor(this,t).schedule(n,e)}};im.now=Nf.now;var Db=class extends im{constructor(t,e=im.now){super(t,e),this.actions=[],this._active=!1}flush(t){let{actions:e}=this;if(this._active){e.push(t);return}let n;this._active=!0;do if(n=t.execute(t.state,t.delay))break;while(t=e.shift());if(this._active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}};var Ff=new Db(Ib),pB=Ff;var Zn=new Gt(i=>i.complete());function kb(i){return i&&Ft(i.schedule)}function N1(i){return i[i.length-1]}function Ab(i){return Ft(N1(i))?i.pop():void 0}function Fa(i){return kb(N1(i))?i.pop():void 0}function fB(i,t){return typeof N1(i)=="number"?i.pop():t}function _B(i,t,e,n){function r(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function a(d){try{l(n.next(d))}catch(u){s(u)}}function c(d){try{l(n.throw(d))}catch(u){s(u)}}function l(d){d.done?o(d.value):r(d.value).then(a,c)}l((n=n.apply(i,t||[])).next())})}function gB(i){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&i[t],n=0;if(e)return e.call(i);if(i&&typeof i.length=="number")return{next:function(){return i&&n>=i.length&&(i=void 0),{value:i&&i[n++],done:!i}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function hu(i){return this instanceof hu?(this.v=i,this):new hu(i)}function bB(i,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(i,t||[]),r,o=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(m){return function(p){return Promise.resolve(p).then(m,u)}}function a(m,p){n[m]&&(r[m]=function(_){return new Promise(function(f,g){o.push([m,_,f,g])>1||c(m,_)})},p&&(r[m]=p(r[m])))}function c(m,p){try{l(n[m](p))}catch(_){h(o[0][3],_)}}function l(m){m.value instanceof hu?Promise.resolve(m.value.v).then(d,u):h(o[0][2],m)}function d(m){c("next",m)}function u(m){c("throw",m)}function h(m,p){m(p),o.shift(),o.length&&c(o[0][0],o[0][1])}}function vB(i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=i[Symbol.asyncIterator],e;return t?t.call(i):(i=typeof gB=="function"?gB(i):i[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=i[o]&&function(s){return new Promise(function(a,c){s=i[o](s),r(a,c,s.done,s.value)})}}function r(o,s,a,c){Promise.resolve(c).then(function(l){o({value:l,done:a})},s)}}var nm=i=>i&&typeof i.length=="number"&&typeof i!="function";function Pb(i){return Ft(i?.then)}function Ob(i){return Ft(i[em])}function Nb(i){return Symbol.asyncIterator&&Ft(i?.[Symbol.asyncIterator])}function Rb(i){return new TypeError(`You provided ${i!==null&&typeof i=="object"?"an invalid object":`'${i}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function eQ(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Fb=eQ();function Lb(i){return Ft(i?.[Fb])}function Bb(i){return bB(this,arguments,function*(){let e=i.getReader();try{for(;;){let{value:n,done:r}=yield hu(e.read());if(r)return yield hu(void 0);yield yield hu(n)}}finally{e.releaseLock()}})}function Vb(i){return Ft(i?.getReader)}function tn(i){if(i instanceof Gt)return i;if(i!=null){if(Ob(i))return tQ(i);if(nm(i))return iQ(i);if(Pb(i))return nQ(i);if(Nb(i))return yB(i);if(Lb(i))return rQ(i);if(Vb(i))return oQ(i)}throw Rb(i)}function tQ(i){return new Gt(t=>{let e=i[em]();if(Ft(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function iQ(i){return new Gt(t=>{for(let e=0;e<i.length&&!t.closed;e++)t.next(i[e]);t.complete()})}function nQ(i){return new Gt(t=>{i.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,Cb)})}function rQ(i){return new Gt(t=>{for(let e of i)if(t.next(e),t.closed)return;t.complete()})}function yB(i){return new Gt(t=>{sQ(i,t).catch(e=>t.error(e))})}function oQ(i){return yB(Bb(i))}function sQ(i,t){var e,n,r,o;return _B(this,void 0,void 0,function*(){try{for(e=vB(i);n=yield e.next(),!n.done;){let s=n.value;if(t.next(s),t.closed)return}}catch(s){r={error:s}}finally{try{n&&!n.done&&(o=e.return)&&(yield o.call(e))}finally{if(r)throw r.error}}t.complete()})}function Bo(i,t,e,n=0,r=!1){let o=t.schedule(function(){e(),r?i.add(this.schedule(null,n)):this.unsubscribe()},n);if(i.add(o),!r)return o}function Ub(i,t=0){return ii((e,n)=>{e.subscribe(Qt(n,r=>Bo(n,i,()=>n.next(r),t),()=>Bo(n,i,()=>n.complete(),t),r=>Bo(n,i,()=>n.error(r),t)))})}function zb(i,t=0){return ii((e,n)=>{n.add(i.schedule(()=>e.subscribe(n),t))})}function xB(i,t){return tn(i).pipe(zb(t),Ub(t))}function wB(i,t){return tn(i).pipe(zb(t),Ub(t))}function MB(i,t){return new Gt(e=>{let n=0;return t.schedule(function(){n===i.length?e.complete():(e.next(i[n++]),e.closed||this.schedule())})})}function CB(i,t){return new Gt(e=>{let n;return Bo(e,t,()=>{n=i[Fb](),Bo(e,t,()=>{let r,o;try{({value:r,done:o}=n.next())}catch(s){e.error(s);return}o?e.complete():e.next(r)},0,!0)}),()=>Ft(n?.return)&&n.return()})}function Hb(i,t){if(!i)throw new Error("Iterable cannot be null");return new Gt(e=>{Bo(e,t,()=>{let n=i[Symbol.asyncIterator]();Bo(e,t,()=>{n.next().then(r=>{r.done?e.complete():e.next(r.value)})},0,!0)})})}function SB(i,t){return Hb(Bb(i),t)}function EB(i,t){if(i!=null){if(Ob(i))return xB(i,t);if(nm(i))return MB(i,t);if(Pb(i))return wB(i,t);if(Nb(i))return Hb(i,t);if(Lb(i))return CB(i,t);if(Vb(i))return SB(i,t)}throw Rb(i)}function cn(i,t){return t?EB(i,t):tn(i)}function ut(...i){let t=Fa(i);return cn(i,t)}function Rl(i,t){let e=Ft(i)?i:()=>i,n=r=>r.error(e());return new Gt(t?r=>t.schedule(n,0,r):n)}function mu(i){return!!i&&(i instanceof Gt||Ft(i.lift)&&Ft(i.subscribe))}var Dc=Kh(i=>function(){i(this),this.name="EmptyError",this.message="no elements in sequence"});function TB(i){return i instanceof Date&&!isNaN(i)}function Et(i,t){return ii((e,n)=>{let r=0;e.subscribe(Qt(n,o=>{n.next(i.call(t,o,r++))}))})}var{isArray:aQ}=Array;function cQ(i,t){return aQ(t)?i(...t):i(t)}function rm(i){return Et(t=>cQ(i,t))}var{isArray:lQ}=Array,{getPrototypeOf:dQ,prototype:uQ,keys:hQ}=Object;function jb(i){if(i.length===1){let t=i[0];if(lQ(t))return{args:t,keys:null};if(mQ(t)){let e=hQ(t);return{args:e.map(n=>t[n]),keys:e}}}return{args:i,keys:null}}function mQ(i){return i&&typeof i=="object"&&dQ(i)===uQ}function $b(i,t){return i.reduce((e,n,r)=>(e[n]=t[r],e),{})}function pu(...i){let t=Fa(i),e=Ab(i),{args:n,keys:r}=jb(i);if(n.length===0)return cn([],t);let o=new Gt(pQ(n,t,r?s=>$b(r,s):bo));return e?o.pipe(rm(e)):o}function pQ(i,t,e=bo){return n=>{IB(t,()=>{let{length:r}=i,o=new Array(r),s=r,a=r;for(let c=0;c<r;c++)IB(t,()=>{let l=cn(i[c],t),d=!1;l.subscribe(Qt(n,u=>{o[c]=u,d||(d=!0,a--),a||n.next(e(o.slice()))},()=>{--s||n.complete()}))},n)},n)}}function IB(i,t,e){i?Bo(e,i,t):t()}function DB(i,t,e,n,r,o,s,a){let c=[],l=0,d=0,u=!1,h=()=>{u&&!c.length&&!l&&t.complete()},m=_=>l<n?p(_):c.push(_),p=_=>{o&&t.next(_),l++;let f=!1;tn(e(_,d++)).subscribe(Qt(t,g=>{r?.(g),o?m(g):t.next(g)},()=>{f=!0},void 0,()=>{if(f)try{for(l--;c.length&&l<n;){let g=c.shift();s?Bo(t,s,()=>p(g)):p(g)}h()}catch(g){t.error(g)}}))};return i.subscribe(Qt(t,m,()=>{u=!0,h()})),()=>{a?.()}}function jn(i,t,e=1/0){return Ft(t)?jn((n,r)=>Et((o,s)=>t(n,o,r,s))(tn(i(n,r))),e):(typeof t=="number"&&(e=t),ii((n,r)=>DB(n,r,i,e)))}function Fl(i=1/0){return jn(bo,i)}function kB(){return Fl(1)}function Ll(...i){return kB()(cn(i,Fa(i)))}function om(i){return new Gt(t=>{tn(i()).subscribe(t)})}function Lf(...i){let t=Ab(i),{args:e,keys:n}=jb(i),r=new Gt(o=>{let{length:s}=e;if(!s){o.complete();return}let a=new Array(s),c=s,l=s;for(let d=0;d<s;d++){let u=!1;tn(e[d]).subscribe(Qt(o,h=>{u||(u=!0,l--),a[d]=h},()=>c--,void 0,()=>{(!c||!u)&&(l||o.next(n?$b(n,a):a),o.complete())}))}});return t?r.pipe(rm(t)):r}var fQ=["addListener","removeListener"],gQ=["addEventListener","removeEventListener"],_Q=["on","off"];function Zs(i,t,e,n){if(Ft(e)&&(n=e,e=void 0),n)return Zs(i,t,e).pipe(rm(n));let[r,o]=yQ(i)?gQ.map(s=>a=>i[s](t,a,e)):bQ(i)?fQ.map(AB(i,t)):vQ(i)?_Q.map(AB(i,t)):[];if(!r&&nm(i))return jn(s=>Zs(s,t,e))(tn(i));if(!r)throw new TypeError("Invalid event target");return new Gt(s=>{let a=(...c)=>s.next(1<c.length?c:c[0]);return r(a),()=>o(a)})}function AB(i,t){return e=>n=>i[e](t,n)}function bQ(i){return Ft(i.addListener)&&Ft(i.removeListener)}function vQ(i){return Ft(i.on)&&Ft(i.off)}function yQ(i){return Ft(i.addEventListener)&&Ft(i.removeEventListener)}function Bf(i=0,t,e=pB){let n=-1;return t!=null&&(kb(t)?e=t:n=t),new Gt(r=>{let o=TB(i)?+i-e.now():i;o<0&&(o=0);let s=0;return e.schedule(function(){r.closed||(r.next(s++),0<=n?this.schedule(void 0,n):r.complete())},o)})}function rr(...i){let t=Fa(i),e=fB(i,1/0),n=i;return n.length?n.length===1?tn(n[0]):Fl(e)(cn(n,t)):Zn}function Pi(i,t){return ii((e,n)=>{let r=0;e.subscribe(Qt(n,o=>i.call(t,o,r++)&&n.next(o)))})}function PB(i){return ii((t,e)=>{let n=!1,r=null,o=null,s=!1,a=()=>{if(o?.unsubscribe(),o=null,n){n=!1;let l=r;r=null,e.next(l)}s&&e.complete()},c=()=>{o=null,s&&e.complete()};t.subscribe(Qt(e,l=>{n=!0,r=l,o||tn(i(l)).subscribe(o=Qt(e,a,c))},()=>{s=!0,(!n||!o||o.closed)&&e.complete()}))})}function Gb(i,t=Ff){return PB(()=>Bf(i,t))}function La(i){return ii((t,e)=>{let n=null,r=!1,o;n=t.subscribe(Qt(e,void 0,void 0,s=>{o=tn(i(s,La(i)(t))),n?(n.unsubscribe(),n=null,o.subscribe(e)):r=!0})),r&&(n.unsubscribe(),n=null,o.subscribe(e))})}function OB(i,t,e,n,r){return(o,s)=>{let a=e,c=t,l=0;o.subscribe(Qt(s,d=>{let u=l++;c=a?i(c,d,u):(a=!0,d),n&&s.next(c)},r&&(()=>{a&&s.next(c),s.complete()})))}}function kc(i,t){return Ft(t)?jn(i,t,1):jn(i,1)}function fu(i,t=Ff){return ii((e,n)=>{let r=null,o=null,s=null,a=()=>{if(r){r.unsubscribe(),r=null;let l=o;o=null,n.next(l)}};function c(){let l=s+i,d=t.now();if(d<l){r=this.schedule(void 0,l-d),n.add(r);return}a()}e.subscribe(Qt(n,l=>{o=l,s=t.now(),r||(r=t.schedule(c,i),n.add(r))},()=>{a(),n.complete()},void 0,()=>{o=r=null}))})}function Bl(i){return ii((t,e)=>{let n=!1;t.subscribe(Qt(e,r=>{n=!0,e.next(r)},()=>{n||e.next(i),e.complete()}))})}function nn(i){return i<=0?()=>Zn:ii((t,e)=>{let n=0;t.subscribe(Qt(e,r=>{++n<=i&&(e.next(r),i<=n&&e.complete())}))})}function R1(i){return Et(()=>i)}function Vl(i,t=bo){return i=i??xQ,ii((e,n)=>{let r,o=!0;e.subscribe(Qt(n,s=>{let a=t(s);(o||!i(r,a))&&(o=!1,r=a,n.next(s))}))})}function xQ(i,t){return i===t}function Wb(i=wQ){return ii((t,e)=>{let n=!1;t.subscribe(Qt(e,r=>{n=!0,e.next(r)},()=>n?e.complete():e.error(i())))})}function wQ(){return new Dc}function Ul(i){return ii((t,e)=>{try{t.subscribe(e)}finally{e.add(i)}})}function Ba(i,t){let e=arguments.length>=2;return n=>n.pipe(i?Pi((r,o)=>i(r,o,n)):bo,nn(1),e?Bl(t):Wb(()=>new Dc))}function sm(i){return i<=0?()=>Zn:ii((t,e)=>{let n=[];t.subscribe(Qt(e,r=>{n.push(r),i<n.length&&n.shift()},()=>{for(let r of n)e.next(r);e.complete()},void 0,()=>{n=null}))})}function F1(i,t){let e=arguments.length>=2;return n=>n.pipe(i?Pi((r,o)=>i(r,o,n)):bo,sm(1),e?Bl(t):Wb(()=>new Dc))}function L1(i,t){return ii(OB(i,t,arguments.length>=2,!0))}function Vf(i={}){let{connector:t=()=>new Le,resetOnError:e=!0,resetOnComplete:n=!0,resetOnRefCountZero:r=!0}=i;return o=>{let s,a,c,l=0,d=!1,u=!1,h=()=>{a?.unsubscribe(),a=void 0},m=()=>{h(),s=c=void 0,d=u=!1},p=()=>{let _=s;m(),_?.unsubscribe()};return ii((_,f)=>{l++,!u&&!d&&h();let g=c=c??t();f.add(()=>{l--,l===0&&!u&&!d&&(a=B1(p,r))}),g.subscribe(f),!s&&l>0&&(s=new Ic({next:S=>g.next(S),error:S=>{u=!0,h(),a=B1(m,e,S),g.error(S)},complete:()=>{d=!0,h(),a=B1(m,n),g.complete()}}),tn(_).subscribe(s))})(o)}}function B1(i,t,...e){if(t===!0){i();return}if(t===!1)return;let n=new Ic({next:()=>{n.unsubscribe(),i()}});return tn(t(...e)).subscribe(n)}function qb(i,t,e){let n,r=!1;return i&&typeof i=="object"?{bufferSize:n=1/0,windowTime:t=1/0,refCount:r=!1,scheduler:e}=i:n=i??1/0,Vf({connector:()=>new uu(n,t,e),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:r})}function gu(i){return Pi((t,e)=>i<=e)}function or(...i){let t=Fa(i);return ii((e,n)=>{(t?Ll(i,e,t):Ll(i,e)).subscribe(n)})}function Kn(i,t){return ii((e,n)=>{let r=null,o=0,s=!1,a=()=>s&&!r&&n.complete();e.subscribe(Qt(n,c=>{r?.unsubscribe();let l=0,d=o++;tn(i(c,d)).subscribe(r=Qt(n,u=>n.next(t?t(c,u,d,l++):u),()=>{r=null,a()}))},()=>{s=!0,a()}))})}function Rt(i){return ii((t,e)=>{tn(i).subscribe(Qt(e,()=>e.complete(),Of)),!e.closed&&t.subscribe(e)})}function V1(i,t=!1){return ii((e,n)=>{let r=0;e.subscribe(Qt(n,o=>{let s=i(o,r++);(s||t)&&n.next(o),!s&&n.complete()}))})}function Pn(i,t,e){let n=Ft(i)||t||e?{next:i,error:t,complete:e}:i;return n?ii((r,o)=>{var s;(s=n.subscribe)===null||s===void 0||s.call(n);let a=!0;r.subscribe(Qt(o,c=>{var l;(l=n.next)===null||l===void 0||l.call(n,c),o.next(c)},()=>{var c;a=!1,(c=n.complete)===null||c===void 0||c.call(n),o.complete()},c=>{var l;a=!1,(l=n.error)===null||l===void 0||l.call(n,c),o.error(c)},()=>{var c,l;a&&((c=n.unsubscribe)===null||c===void 0||c.call(n)),(l=n.finalize)===null||l===void 0||l.call(n)}))}):bo}var xV="https://g.co/ng/security#xss",pt=class extends Error{constructor(t,e){super(dT(t,e)),this.code=t}};function dT(i,t){return`${`NG0${Math.abs(i)}`}${t?": "+t:""}`}function tg(i){return{toString:i}.toString()}var Xb="__parameters__";function MQ(i){return function(...e){if(i){let n=i(...e);for(let r in n)this[r]=n[r]}}}function wV(i,t,e){return tg(()=>{let n=MQ(t);function r(...o){if(this instanceof r)return n.apply(this,o),this;let s=new r(...o);return a.annotation=s,a;function a(c,l,d){let u=c.hasOwnProperty(Xb)?c[Xb]:Object.defineProperty(c,Xb,{value:[]})[Xb];for(;u.length<=d;)u.push(null);return(u[d]=u[d]||[]).push(s),c}}return e&&(r.prototype=Object.create(e.prototype)),r.prototype.ngMetadataName=i,r.annotationCls=r,r})}var Qn=globalThis;function mn(i){for(let t in i)if(i[t]===mn)return t;throw Error("Could not find renamed property on target object.")}function CQ(i,t){for(let e in t)t.hasOwnProperty(e)&&!i.hasOwnProperty(e)&&(i[e]=t[e])}function yo(i){if(typeof i=="string")return i;if(Array.isArray(i))return"["+i.map(yo).join(", ")+"]";if(i==null)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;let t=i.toString();if(t==null)return""+t;let e=t.indexOf(`
`);return e===-1?t:t.substring(0,e)}function tE(i,t){return i==null||i===""?t===null?"":t:t==null||t===""?i:i+" "+t}var SQ=mn({__forward_ref__:mn});function br(i){return i.__forward_ref__=br,i.toString=function(){return yo(this())},i}function vo(i){return MV(i)?i():i}function MV(i){return typeof i=="function"&&i.hasOwnProperty(SQ)&&i.__forward_ref__===br}function we(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function je(i){return{providers:i.providers||[],imports:i.imports||[]}}function Av(i){return NB(i,SV)||NB(i,EV)}function CV(i){return Av(i)!==null}function NB(i,t){return i.hasOwnProperty(t)?i[t]:null}function EQ(i){let t=i&&(i[SV]||i[EV]);return t||null}function RB(i){return i&&(i.hasOwnProperty(FB)||i.hasOwnProperty(TQ))?i[FB]:null}var SV=mn({\u0275prov:mn}),FB=mn({\u0275inj:mn}),EV=mn({ngInjectableDef:mn}),TQ=mn({ngInjectorDef:mn}),_e=class{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof e=="number"?this.__NG_ELEMENT_ID__=e:e!==void 0&&(this.\u0275prov=we({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function TV(i){return i&&!!i.\u0275providers}var IQ=mn({\u0275cmp:mn}),DQ=mn({\u0275dir:mn}),kQ=mn({\u0275pipe:mn}),AQ=mn({\u0275mod:mn}),cv=mn({\u0275fac:mn}),Uf=mn({__NG_ELEMENT_ID__:mn}),LB=mn({__NG_ENV_ID__:mn});function Ac(i){return typeof i=="string"?i:i==null?"":String(i)}function PQ(i){return typeof i=="function"?i.name||i.toString():typeof i=="object"&&i!=null&&typeof i.type=="function"?i.type.name||i.type.toString():Ac(i)}function OQ(i,t){let e=t?`. Dependency path: ${t.join(" > ")} > ${i}`:"";throw new pt(-200,i)}function uT(i,t){throw new pt(-201,!1)}var Ti=function(i){return i[i.Default=0]="Default",i[i.Host=1]="Host",i[i.Self=2]="Self",i[i.SkipSelf=4]="SkipSelf",i[i.Optional=8]="Optional",i}(Ti||{}),iE;function IV(){return iE}function Vo(i){let t=iE;return iE=i,t}function DV(i,t,e){let n=Av(i);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(e&Ti.Optional)return null;if(t!==void 0)return t;uT(i,"Injector")}var NQ={},Hf=NQ,nE="__NG_DI_FLAG__",lv="ngTempTokenPath",RQ="ngTokenPath",FQ=/\n/gm,LQ="\u0275",BB="__source",um;function BQ(){return um}function zl(i){let t=um;return um=i,t}function VQ(i,t=Ti.Default){if(um===void 0)throw new pt(-203,!1);return um===null?DV(i,void 0,t):um.get(i,t&Ti.Optional?null:void 0,t)}function pe(i,t=Ti.Default){return(IV()||VQ)(vo(i),t)}function ye(i,t=Ti.Default){return pe(i,Pv(t))}function Pv(i){return typeof i>"u"||typeof i=="number"?i:0|(i.optional&&8)|(i.host&&1)|(i.self&&2)|(i.skipSelf&&4)}function rE(i){let t=[];for(let e=0;e<i.length;e++){let n=vo(i[e]);if(Array.isArray(n)){if(n.length===0)throw new pt(900,!1);let r,o=Ti.Default;for(let s=0;s<n.length;s++){let a=n[s],c=UQ(a);typeof c=="number"?c===-1?r=a.token:o|=c:r=a}t.push(pe(r,o))}else t.push(pe(n))}return t}function kV(i,t){return i[nE]=t,i.prototype[nE]=t,i}function UQ(i){return i[nE]}function zQ(i,t,e,n){let r=i[lv];throw t[BB]&&r.unshift(t[BB]),i.message=HQ(`
`+i.message,r,e,n),i[RQ]=r,i[lv]=null,i}function HQ(i,t,e,n=null){i=i&&i.charAt(0)===`
`&&i.charAt(1)==LQ?i.slice(2):i;let r=yo(t);if(Array.isArray(t))r=t.map(yo).join(" -> ");else if(typeof t=="object"){let o=[];for(let s in t)if(t.hasOwnProperty(s)){let a=t[s];o.push(s+":"+(typeof a=="string"?JSON.stringify(a):yo(a)))}r=`{${o.join(", ")}}`}return`${e}${n?"("+n+")":""}[${r}]: ${i.replace(FQ,`
  `)}`}var Iu=kV(wV("Optional"),8);var wm=kV(wV("SkipSelf"),4);function yu(i,t){let e=i.hasOwnProperty(cv);return e?i[cv]:null}function jQ(i,t,e){if(i.length!==t.length)return!1;for(let n=0;n<i.length;n++){let r=i[n],o=t[n];if(e&&(r=e(r),o=e(o)),o!==r)return!1}return!0}function $Q(i){return i.flat(Number.POSITIVE_INFINITY)}function hT(i,t){i.forEach(e=>Array.isArray(e)?hT(e,t):t(e))}function AV(i,t,e){t>=i.length?i.push(e):i.splice(t,0,e)}function dv(i,t){return t>=i.length-1?i.pop():i.splice(t,1)[0]}function GQ(i,t){let e=[];for(let n=0;n<i;n++)e.push(t);return e}function WQ(i,t,e,n){let r=i.length;if(r==t)i.push(e,n);else if(r===1)i.push(n,i[0]),i[0]=e;else{for(r--,i.push(i[r-1],i[r]);r>t;){let o=r-2;i[r]=i[o],r--}i[t]=e,i[t+1]=n}}function Ov(i,t,e){let n=ig(i,t);return n>=0?i[n|1]=e:(n=~n,WQ(i,n,t,e)),n}function U1(i,t){let e=ig(i,t);if(e>=0)return i[e|1]}function ig(i,t){return qQ(i,t,1)}function qQ(i,t,e){let n=0,r=i.length>>e;for(;r!==n;){let o=n+(r-n>>1),s=i[o<<e];if(t===s)return o<<e;s>t?r=o:n=o+1}return~(r<<e)}var mm={},Uo=[],pm=new _e(""),PV=new _e("",-1),OV=new _e(""),uv=class{get(t,e=Hf){if(e===Hf){let n=new Error(`NullInjectorError: No provider for ${yo(t)}!`);throw n.name="NullInjectorError",n}return e}},NV=function(i){return i[i.OnPush=0]="OnPush",i[i.Default=1]="Default",i}(NV||{}),za=function(i){return i[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",i}(za||{}),ie=function(i){return i[i.None=0]="None",i[i.SignalBased=1]="SignalBased",i[i.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",i}(ie||{});function XQ(i,t,e){let n=i.length;for(;;){let r=i.indexOf(t,e);if(r===-1)return r;if(r===0||i.charCodeAt(r-1)<=32){let o=t.length;if(r+o===n||i.charCodeAt(r+o)<=32)return r}e=r+1}}function oE(i,t,e){let n=0;for(;n<e.length;){let r=e[n];if(typeof r=="number"){if(r!==0)break;n++;let o=e[n++],s=e[n++],a=e[n++];i.setAttribute(t,s,a,o)}else{let o=r,s=e[++n];YQ(o)?i.setProperty(t,o,s):i.setAttribute(t,o,s),n++}}return n}function RV(i){return i===3||i===4||i===6}function YQ(i){return i.charCodeAt(0)===64}function jf(i,t){if(!(t===null||t.length===0))if(i===null||i.length===0)i=t.slice();else{let e=-1;for(let n=0;n<t.length;n++){let r=t[n];typeof r=="number"?e=r:e===0||(e===-1||e===2?VB(i,e,r,null,t[++n]):VB(i,e,r,null,null))}}return i}function VB(i,t,e,n,r){let o=0,s=i.length;if(t===-1)s=-1;else for(;o<i.length;){let a=i[o++];if(typeof a=="number"){if(a===t){s=-1;break}else if(a>t){s=o-1;break}}}for(;o<i.length;){let a=i[o];if(typeof a=="number")break;if(a===e){if(n===null){r!==null&&(i[o+1]=r);return}else if(n===i[o+1]){i[o+2]=r;return}}o++,n!==null&&o++,r!==null&&o++}s!==-1&&(i.splice(s,0,t),o=s+1),i.splice(o++,0,e),n!==null&&i.splice(o++,0,n),r!==null&&i.splice(o++,0,r)}var FV="ng-template";function ZQ(i,t,e,n){let r=0;if(n){for(;r<t.length&&typeof t[r]=="string";r+=2)if(t[r]==="class"&&XQ(t[r+1].toLowerCase(),e,0)!==-1)return!0}else if(mT(i))return!1;if(r=t.indexOf(1,r),r>-1){let o;for(;++r<t.length&&typeof(o=t[r])=="string";)if(o.toLowerCase()===e)return!0}return!1}function mT(i){return i.type===4&&i.value!==FV}function KQ(i,t,e){let n=i.type===4&&!e?FV:i.value;return t===n}function QQ(i,t,e){let n=4,r=i.attrs,o=r!==null?tJ(r):0,s=!1;for(let a=0;a<t.length;a++){let c=t[a];if(typeof c=="number"){if(!s&&!Ks(n)&&!Ks(c))return!1;if(s&&Ks(c))continue;s=!1,n=c|n&1;continue}if(!s)if(n&4){if(n=2|n&1,c!==""&&!KQ(i,c,e)||c===""&&t.length===1){if(Ks(n))return!1;s=!0}}else if(n&8){if(r===null||!ZQ(i,r,c,e)){if(Ks(n))return!1;s=!0}}else{let l=t[++a],d=JQ(c,r,mT(i),e);if(d===-1){if(Ks(n))return!1;s=!0;continue}if(l!==""){let u;if(d>o?u="":u=r[d+1].toLowerCase(),n&2&&l!==u){if(Ks(n))return!1;s=!0}}}}return Ks(n)||s}function Ks(i){return(i&1)===0}function JQ(i,t,e,n){if(t===null)return-1;let r=0;if(n||!e){let o=!1;for(;r<t.length;){let s=t[r];if(s===i)return r;if(s===3||s===6)o=!0;else if(s===1||s===2){let a=t[++r];for(;typeof a=="string";)a=t[++r];continue}else{if(s===4)break;if(s===0){r+=4;continue}}r+=o?1:2}return-1}else return iJ(t,i)}function LV(i,t,e=!1){for(let n=0;n<t.length;n++)if(QQ(i,t[n],e))return!0;return!1}function eJ(i){let t=i.attrs;if(t!=null){let e=t.indexOf(5);if(!(e&1))return t[e+1]}return null}function tJ(i){for(let t=0;t<i.length;t++){let e=i[t];if(RV(e))return t}return i.length}function iJ(i,t){let e=i.indexOf(4);if(e>-1)for(e++;e<i.length;){let n=i[e];if(typeof n=="number")return-1;if(n===t)return e;e++}return-1}function nJ(i,t){e:for(let e=0;e<t.length;e++){let n=t[e];if(i.length===n.length){for(let r=0;r<i.length;r++)if(i[r]!==n[r])continue e;return!0}}return!1}function UB(i,t){return i?":not("+t.trim()+")":t}function rJ(i){let t=i[0],e=1,n=2,r="",o=!1;for(;e<i.length;){let s=i[e];if(typeof s=="string")if(n&2){let a=i[++e];r+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else n&8?r+="."+s:n&4&&(r+=" "+s);else r!==""&&!Ks(s)&&(t+=UB(o,r),r=""),n=s,o=o||!Ks(n);e++}return r!==""&&(t+=UB(o,r)),t}function oJ(i){return i.map(rJ).join(",")}function sJ(i){let t=[],e=[],n=1,r=2;for(;n<i.length;){let o=i[n];if(typeof o=="string")r===2?o!==""&&t.push(o,i[++n]):r===8&&e.push(o);else{if(!Ks(r))break;r=o}n++}return{attrs:t,classes:e}}function rt(i){return tg(()=>{let t=HV(i),e=Nt(ge({},t),{decls:i.decls,vars:i.vars,template:i.template,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,onPush:i.changeDetection===NV.OnPush,directiveDefs:null,pipeDefs:null,dependencies:t.standalone&&i.dependencies||null,getStandaloneInjector:null,signals:i.signals??!1,data:i.data||{},encapsulation:i.encapsulation||za.Emulated,styles:i.styles||Uo,_:null,schemas:i.schemas||null,tView:null,id:""});jV(e);let n=i.dependencies;return e.directiveDefs=HB(n,!1),e.pipeDefs=HB(n,!0),e.id=lJ(e),e})}function aJ(i){return jl(i)||BV(i)}function cJ(i){return i!==null}function $e(i){return tg(()=>({type:i.type,bootstrap:i.bootstrap||Uo,declarations:i.declarations||Uo,imports:i.imports||Uo,exports:i.exports||Uo,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function zB(i,t){if(i==null)return mm;let e={};for(let n in i)if(i.hasOwnProperty(n)){let r=i[n],o,s,a=ie.None;Array.isArray(r)?(a=r[0],o=r[1],s=r[2]??o):(o=r,s=r),t?(e[o]=a!==ie.None?[n,a]:n,t[o]=s):e[o]=n}return e}function Me(i){return tg(()=>{let t=HV(i);return jV(t),t})}function ng(i){return{type:i.type,name:i.name,factory:null,pure:i.pure!==!1,standalone:i.standalone===!0,onDestroy:i.type.prototype.ngOnDestroy||null}}function jl(i){return i[IQ]||null}function BV(i){return i[DQ]||null}function VV(i){return i[kQ]||null}function UV(i){let t=jl(i)||BV(i)||VV(i);return t!==null?t.standalone:!1}function zV(i,t){let e=i[AQ]||null;if(!e&&t===!0)throw new Error(`Type ${yo(i)} does not have '\u0275mod' property.`);return e}function HV(i){let t={};return{type:i.type,providersResolver:null,factory:null,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:t,inputTransforms:null,inputConfig:i.inputs||mm,exportAs:i.exportAs||null,standalone:i.standalone===!0,signals:i.signals===!0,selectors:i.selectors||Uo,viewQuery:i.viewQuery||null,features:i.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:zB(i.inputs,t),outputs:zB(i.outputs),debugInfo:null}}function jV(i){i.features?.forEach(t=>t(i))}function HB(i,t){if(!i)return null;let e=t?VV:aJ;return()=>(typeof i=="function"?i():i).map(n=>e(n)).filter(cJ)}function lJ(i){let t=0,e=[i.selectors,i.ngContentSelectors,i.hostVars,i.hostAttrs,i.consts,i.vars,i.decls,i.encapsulation,i.standalone,i.signals,i.exportAs,JSON.stringify(i.inputs),JSON.stringify(i.outputs),Object.getOwnPropertyNames(i.type.prototype),!!i.contentQueries,!!i.viewQuery].join("|");for(let r of e)t=Math.imul(31,t)+r.charCodeAt(0)<<0;return t+=2147483648,"c"+t}function dJ(...i){return{\u0275providers:$V(!0,i),\u0275fromNgModule:!0}}function $V(i,...t){let e=[],n=new Set,r,o=s=>{e.push(s)};return hT(t,s=>{let a=s;sE(a,o,[],n)&&(r||=[],r.push(a))}),r!==void 0&&GV(r,o),e}function GV(i,t){for(let e=0;e<i.length;e++){let{ngModule:n,providers:r}=i[e];pT(r,o=>{t(o,n)})}}function sE(i,t,e,n){if(i=vo(i),!i)return!1;let r=null,o=RB(i),s=!o&&jl(i);if(!o&&!s){let c=i.ngModule;if(o=RB(c),o)r=c;else return!1}else{if(s&&!s.standalone)return!1;r=i}let a=n.has(r);if(s){if(a)return!1;if(n.add(r),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)sE(l,t,e,n)}}else if(o){if(o.imports!=null&&!a){n.add(r);let l;try{hT(o.imports,d=>{sE(d,t,e,n)&&(l||=[],l.push(d))})}finally{}l!==void 0&&GV(l,t)}if(!a){let l=yu(r)||(()=>new r);t({provide:r,useFactory:l,deps:Uo},r),t({provide:OV,useValue:r,multi:!0},r),t({provide:pm,useValue:()=>pe(r),multi:!0},r)}let c=o.providers;if(c!=null&&!a){let l=i;pT(c,d=>{t(d,l)})}}else return!1;return r!==i&&i.providers!==void 0}function pT(i,t){for(let e of i)TV(e)&&(e=e.\u0275providers),Array.isArray(e)?pT(e,t):t(e)}var uJ=mn({provide:String,useValue:mn});function WV(i){return i!==null&&typeof i=="object"&&uJ in i}function hJ(i){return!!(i&&i.useExisting)}function mJ(i){return!!(i&&i.useFactory)}function fm(i){return typeof i=="function"}function pJ(i){return!!i.useClass}var Nv=new _e(""),tv={},fJ={},z1;function fT(){return z1===void 0&&(z1=new uv),z1}var xo=class{},$f=class extends xo{get destroyed(){return this._destroyed}constructor(t,e,n,r){super(),this.parent=e,this.source=n,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,cE(t,s=>this.processProvider(s)),this.records.set(PV,am(void 0,this)),r.has("environment")&&this.records.set(xo,am(void 0,this));let o=this.records.get(Nv);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(OV,Uo,Ti.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let t=Ni(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let e=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of e)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ni(t)}}onDestroy(t){return this.assertNotDestroyed(),this._onDestroyHooks.push(t),()=>this.removeOnDestroy(t)}runInContext(t){this.assertNotDestroyed();let e=zl(this),n=Vo(void 0),r;try{return t()}finally{zl(e),Vo(n)}}get(t,e=Hf,n=Ti.Default){if(this.assertNotDestroyed(),t.hasOwnProperty(LB))return t[LB](this);n=Pv(n);let r,o=zl(this),s=Vo(void 0);try{if(!(n&Ti.SkipSelf)){let c=this.records.get(t);if(c===void 0){let l=yJ(t)&&Av(t);l&&this.injectableDefInScope(l)?c=am(aE(t),tv):c=null,this.records.set(t,c)}if(c!=null)return this.hydrate(t,c)}let a=n&Ti.Self?fT():this.parent;return e=n&Ti.Optional&&e===Hf?null:e,a.get(t,e)}catch(a){if(a.name==="NullInjectorError"){if((a[lv]=a[lv]||[]).unshift(yo(t)),o)throw a;return zQ(a,t,"R3InjectorError",this.source)}else throw a}finally{Vo(s),zl(o)}}resolveInjectorInitializers(){let t=Ni(null),e=zl(this),n=Vo(void 0),r;try{let o=this.get(pm,Uo,Ti.Self);for(let s of o)s()}finally{zl(e),Vo(n),Ni(t)}}toString(){let t=[],e=this.records;for(let n of e.keys())t.push(yo(n));return`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new pt(205,!1)}processProvider(t){t=vo(t);let e=fm(t)?t:vo(t&&t.provide),n=_J(t);if(!fm(t)&&t.multi===!0){let r=this.records.get(e);r||(r=am(void 0,tv,!0),r.factory=()=>rE(r.multi),this.records.set(e,r)),e=t,r.multi.push(t)}this.records.set(e,n)}hydrate(t,e){let n=Ni(null);try{return e.value===tv&&(e.value=fJ,e.value=e.factory()),typeof e.value=="object"&&e.value&&vJ(e.value)&&this._ngOnDestroyHooks.add(e.value),e.value}finally{Ni(n)}}injectableDefInScope(t){if(!t.providedIn)return!1;let e=vo(t.providedIn);return typeof e=="string"?e==="any"||this.scopes.has(e):this.injectorDefTypes.has(e)}removeOnDestroy(t){let e=this._onDestroyHooks.indexOf(t);e!==-1&&this._onDestroyHooks.splice(e,1)}};function aE(i){let t=Av(i),e=t!==null?t.factory:yu(i);if(e!==null)return e;if(i instanceof _e)throw new pt(204,!1);if(i instanceof Function)return gJ(i);throw new pt(204,!1)}function gJ(i){if(i.length>0)throw new pt(204,!1);let e=EQ(i);return e!==null?()=>e.factory(i):()=>new i}function _J(i){if(WV(i))return am(void 0,i.useValue);{let t=qV(i);return am(t,tv)}}function qV(i,t,e){let n;if(fm(i)){let r=vo(i);return yu(r)||aE(r)}else if(WV(i))n=()=>vo(i.useValue);else if(mJ(i))n=()=>i.useFactory(...rE(i.deps||[]));else if(hJ(i))n=()=>pe(vo(i.useExisting));else{let r=vo(i&&(i.useClass||i.provide));if(bJ(i))n=()=>new r(...rE(i.deps));else return yu(r)||aE(r)}return n}function am(i,t,e=!1){return{factory:i,value:t,multi:e?[]:void 0}}function bJ(i){return!!i.deps}function vJ(i){return i!==null&&typeof i=="object"&&typeof i.ngOnDestroy=="function"}function yJ(i){return typeof i=="function"||typeof i=="object"&&i instanceof _e}function cE(i,t){for(let e of i)Array.isArray(e)?cE(e,t):e&&TV(e)?cE(e.\u0275providers,t):t(e)}function Fc(i,t){i instanceof $f&&i.assertNotDestroyed();let e,n=zl(i),r=Vo(void 0);try{return t()}finally{zl(n),Vo(r)}}function XV(){return IV()!==void 0||BQ()!=null}function YV(i){if(!XV())throw new pt(-203,!1)}function xJ(i){let t=Qn.ng;if(t&&t.\u0275compilerFacade)return t.\u0275compilerFacade;throw new Error("JIT compiler unavailable")}function wJ(i){return typeof i=="function"}var ja=0,ni=1,Wt=2,Vr=3,Js=4,ss=5,gm=6,Gf=7,Yr=8,_m=9,ea=10,On=11,Wf=12,jB=13,Mm=14,Es=15,rg=16,cm=17,Pc=18,Rv=19,ZV=20,Hl=21,iv=22,xu=23,Ir=25,gT=1;var wu=7,hv=8,bm=9,Zr=10,_T=function(i){return i[i.None=0]="None",i[i.HasTransplantedViews=2]="HasTransplantedViews",i}(_T||{});function bu(i){return Array.isArray(i)&&typeof i[gT]=="object"}function Lc(i){return Array.isArray(i)&&i[gT]===!0}function bT(i){return(i.flags&4)!==0}function Fv(i){return i.componentOffset>-1}function Lv(i){return(i.flags&1)===1}function Oc(i){return!!i.template}function MJ(i){return(i[Wt]&512)!==0}var lE=class{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}};function KV(i,t,e,n){t!==null?t.applyValueToInputSignal(t,n):i[e]=n}function zi(){return QV}function QV(i){return i.type.prototype.ngOnChanges&&(i.setInput=SJ),CJ}zi.ngInherit=!0;function CJ(){let i=e4(this),t=i?.current;if(t){let e=i.previous;if(e===mm)i.previous=t;else for(let n in t)e[n]=t[n];i.current=null,this.ngOnChanges(t)}}function SJ(i,t,e,n,r){let o=this.declaredInputs[n],s=e4(i)||EJ(i,{previous:mm,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[o];a[o]=new lE(l&&l.currentValue,e,c===mm),KV(i,t,r,e)}var JV="__ngSimpleChanges__";function e4(i){return i[JV]||null}function EJ(i,t){return i[JV]=t}var $B=null;var Va=function(i,t,e){$B?.(i,t,e)},t4="svg",TJ="math",IJ=!1;function DJ(){return IJ}function Ha(i){for(;Array.isArray(i);)i=i[ja];return i}function kJ(i){for(;Array.isArray(i);){if(typeof i[gT]=="object")return i;i=i[ja]}return null}function i4(i,t){return Ha(t[i])}function Is(i,t){return Ha(t[i.index])}function vT(i,t){return i.data[t]}function Bv(i,t){return i[t]}function Wl(i,t){let e=t[i];return bu(e)?e:e[ja]}function AJ(i){return(i[Wt]&4)===4}function yT(i){return(i[Wt]&128)===128}function PJ(i){return Lc(i[Vr])}function vm(i,t){return t==null?null:i[t]}function n4(i){i[cm]=0}function OJ(i){i[Wt]&1024||(i[Wt]|=1024,yT(i)&&qf(i))}function NJ(i,t){for(;i>0;)t=t[Mm],i--;return t}function xT(i){return!!(i[Wt]&9216||i[xu]?.dirty)}function dE(i){i[ea].changeDetectionScheduler?.notify(1),xT(i)?qf(i):i[Wt]&64&&(DJ()?(i[Wt]|=1024,qf(i)):i[ea].changeDetectionScheduler?.notify())}function qf(i){i[ea].changeDetectionScheduler?.notify();let t=Xf(i);for(;t!==null&&!(t[Wt]&8192||(t[Wt]|=8192,!yT(t)));)t=Xf(t)}function r4(i,t){if((i[Wt]&256)===256)throw new pt(911,!1);i[Hl]===null&&(i[Hl]=[]),i[Hl].push(t)}function RJ(i,t){if(i[Hl]===null)return;let e=i[Hl].indexOf(t);e!==-1&&i[Hl].splice(e,1)}function Xf(i){let t=i[Vr];return Lc(t)?t[Vr]:t}var di={lFrame:h4(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function FJ(){return di.lFrame.elementDepthCount}function LJ(){di.lFrame.elementDepthCount++}function BJ(){di.lFrame.elementDepthCount--}function o4(){return di.bindingsEnabled}function s4(){return di.skipHydrationRootTNode!==null}function VJ(i){return di.skipHydrationRootTNode===i}function UJ(){di.skipHydrationRootTNode=null}function qt(){return di.lFrame.lView}function Nn(){return di.lFrame.tView}function Q(i){return di.lFrame.contextLView=i,i[Yr]}function J(i){return di.lFrame.contextLView=null,i}function Ur(){let i=a4();for(;i!==null&&i.type===64;)i=i.parent;return i}function a4(){return di.lFrame.currentTNode}function zJ(){let i=di.lFrame,t=i.currentTNode;return i.isParent?t:t.parent}function Du(i,t){let e=di.lFrame;e.currentTNode=i,e.isParent=t}function wT(){return di.lFrame.isParent}function MT(){di.lFrame.isParent=!1}function HJ(){return di.lFrame.contextLView}function og(){let i=di.lFrame,t=i.bindingRootIndex;return t===-1&&(t=i.bindingRootIndex=i.tView.bindingStartIndex),t}function c4(){return di.lFrame.bindingIndex}function jJ(i){return di.lFrame.bindingIndex=i}function ql(){return di.lFrame.bindingIndex++}function Vv(i){let t=di.lFrame,e=t.bindingIndex;return t.bindingIndex=t.bindingIndex+i,e}function $J(){return di.lFrame.inI18n}function GJ(i,t){let e=di.lFrame;e.bindingIndex=e.bindingRootIndex=i,uE(t)}function WJ(){return di.lFrame.currentDirectiveIndex}function uE(i){di.lFrame.currentDirectiveIndex=i}function CT(i){let t=di.lFrame.currentDirectiveIndex;return t===-1?null:i[t]}function l4(){return di.lFrame.currentQueryIndex}function ST(i){di.lFrame.currentQueryIndex=i}function qJ(i){let t=i[ni];return t.type===2?t.declTNode:t.type===1?i[ss]:null}function d4(i,t,e){if(e&Ti.SkipSelf){let r=t,o=i;for(;r=r.parent,r===null&&!(e&Ti.Host);)if(r=qJ(o),r===null||(o=o[Mm],r.type&10))break;if(r===null)return!1;t=r,i=o}let n=di.lFrame=u4();return n.currentTNode=t,n.lView=i,!0}function ET(i){let t=u4(),e=i[ni];di.lFrame=t,t.currentTNode=e.firstChild,t.lView=i,t.tView=e,t.contextLView=i,t.bindingIndex=e.bindingStartIndex,t.inI18n=!1}function u4(){let i=di.lFrame,t=i===null?null:i.child;return t===null?h4(i):t}function h4(i){let t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return i!==null&&(i.child=t),t}function m4(){let i=di.lFrame;return di.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}var p4=m4;function TT(){let i=m4();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function XJ(i){return(di.lFrame.contextLView=NJ(i,di.lFrame.contextLView))[Yr]}function $a(){return di.lFrame.selectedIndex}function Mu(i){di.lFrame.selectedIndex=i}function sg(){let i=di.lFrame;return vT(i.tView,i.selectedIndex)}function Kr(){di.lFrame.currentNamespace=t4}function ku(){YJ()}function YJ(){di.lFrame.currentNamespace=null}function ZJ(){return di.lFrame.currentNamespace}var f4=!0;function Uv(){return f4}function zv(i){f4=i}function KJ(i,t,e){let{ngOnChanges:n,ngOnInit:r,ngDoCheck:o}=t.type.prototype;if(n){let s=QV(t);(e.preOrderHooks??=[]).push(i,s),(e.preOrderCheckHooks??=[]).push(i,s)}r&&(e.preOrderHooks??=[]).push(0-i,r),o&&((e.preOrderHooks??=[]).push(i,o),(e.preOrderCheckHooks??=[]).push(i,o))}function Hv(i,t){for(let e=t.directiveStart,n=t.directiveEnd;e<n;e++){let o=i.data[e].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:d}=o;s&&(i.contentHooks??=[]).push(-e,s),a&&((i.contentHooks??=[]).push(e,a),(i.contentCheckHooks??=[]).push(e,a)),c&&(i.viewHooks??=[]).push(-e,c),l&&((i.viewHooks??=[]).push(e,l),(i.viewCheckHooks??=[]).push(e,l)),d!=null&&(i.destroyHooks??=[]).push(e,d)}}function nv(i,t,e){g4(i,t,3,e)}function rv(i,t,e,n){(i[Wt]&3)===e&&g4(i,t,e,n)}function H1(i,t){let e=i[Wt];(e&3)===t&&(e&=16383,e+=1,i[Wt]=e)}function g4(i,t,e,n){let r=n!==void 0?i[cm]&65535:0,o=n??-1,s=t.length-1,a=0;for(let c=r;c<s;c++)if(typeof t[c+1]=="number"){if(a=t[c],n!=null&&a>=n)break}else t[c]<0&&(i[cm]+=65536),(a<o||o==-1)&&(QJ(i,e,t,c),i[cm]=(i[cm]&4294901760)+c+2),c++}function GB(i,t){Va(4,i,t);let e=Ni(null);try{t.call(i)}finally{Ni(e),Va(5,i,t)}}function QJ(i,t,e,n){let r=e[n]<0,o=e[n+1],s=r?-e[n]:e[n],a=i[s];r?i[Wt]>>14<i[cm]>>16&&(i[Wt]&3)===t&&(i[Wt]+=16384,GB(a,o)):GB(a,o)}var hm=-1,Cu=class{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}};function JJ(i){return i instanceof Cu}function eee(i){return(i.flags&8)!==0}function tee(i){return(i.flags&16)!==0}function _4(i){return i!==hm}function mv(i){return i&32767}function iee(i){return i>>16}function pv(i,t){let e=iee(i),n=t;for(;e>0;)n=n[Mm],e--;return n}var hE=!0;function fv(i){let t=hE;return hE=i,t}var nee=256,b4=nee-1,v4=5,ree=0,Ua={};function oee(i,t,e){let n;typeof e=="string"?n=e.charCodeAt(0)||0:e.hasOwnProperty(Uf)&&(n=e[Uf]),n==null&&(n=e[Uf]=ree++);let r=n&b4,o=1<<r;t.data[i+(r>>v4)]|=o}function gv(i,t){let e=y4(i,t);if(e!==-1)return e;let n=t[ni];n.firstCreatePass&&(i.injectorIndex=t.length,j1(n.data,i),j1(t,null),j1(n.blueprint,null));let r=IT(i,t),o=i.injectorIndex;if(_4(r)){let s=mv(r),a=pv(r,t),c=a[ni].data;for(let l=0;l<8;l++)t[o+l]=a[s+l]|c[s+l]}return t[o+8]=r,o}function j1(i,t){i.push(0,0,0,0,0,0,0,0,t)}function y4(i,t){return i.injectorIndex===-1||i.parent&&i.parent.injectorIndex===i.injectorIndex||t[i.injectorIndex+8]===null?-1:i.injectorIndex}function IT(i,t){if(i.parent&&i.parent.injectorIndex!==-1)return i.parent.injectorIndex;let e=0,n=null,r=t;for(;r!==null;){if(n=S4(r),n===null)return hm;if(e++,r=r[Mm],n.injectorIndex!==-1)return n.injectorIndex|e<<16}return hm}function mE(i,t,e){oee(i,t,e)}function see(i,t){if(t==="class")return i.classes;if(t==="style")return i.styles;let e=i.attrs;if(e){let n=e.length,r=0;for(;r<n;){let o=e[r];if(RV(o))break;if(o===0)r=r+2;else if(typeof o=="number")for(r++;r<n&&typeof e[r]=="string";)r++;else{if(o===t)return e[r+1];r=r+2}}}return null}function x4(i,t,e){if(e&Ti.Optional||i!==void 0)return i;uT(t,"NodeInjector")}function w4(i,t,e,n){if(e&Ti.Optional&&n===void 0&&(n=null),!(e&(Ti.Self|Ti.Host))){let r=i[_m],o=Vo(void 0);try{return r?r.get(t,n,e&Ti.Optional):DV(t,n,e&Ti.Optional)}finally{Vo(o)}}return x4(n,t,e)}function M4(i,t,e,n=Ti.Default,r){if(i!==null){if(t[Wt]&2048&&!(n&Ti.Self)){let s=dee(i,t,e,n,Ua);if(s!==Ua)return s}let o=C4(i,t,e,n,Ua);if(o!==Ua)return o}return w4(t,e,n,r)}function C4(i,t,e,n,r){let o=cee(e);if(typeof o=="function"){if(!d4(t,i,n))return n&Ti.Host?x4(r,e,n):w4(t,e,n,r);try{let s;if(s=o(n),s==null&&!(n&Ti.Optional))uT(e);else return s}finally{p4()}}else if(typeof o=="number"){let s=null,a=y4(i,t),c=hm,l=n&Ti.Host?t[Es][ss]:null;for((a===-1||n&Ti.SkipSelf)&&(c=a===-1?IT(i,t):t[a+8],c===hm||!qB(n,!1)?a=-1:(s=t[ni],a=mv(c),t=pv(c,t)));a!==-1;){let d=t[ni];if(WB(o,a,d.data)){let u=aee(a,t,e,s,n,l);if(u!==Ua)return u}c=t[a+8],c!==hm&&qB(n,t[ni].data[a+8]===l)&&WB(o,a,t)?(s=d,a=mv(c),t=pv(c,t)):a=-1}}return r}function aee(i,t,e,n,r,o){let s=t[ni],a=s.data[i+8],c=n==null?Fv(a)&&hE:n!=s&&(a.type&3)!==0,l=r&Ti.Host&&o===a,d=ov(a,s,e,c,l);return d!==null?Su(t,s,d,a):Ua}function ov(i,t,e,n,r){let o=i.providerIndexes,s=t.data,a=o&1048575,c=i.directiveStart,l=i.directiveEnd,d=o>>20,u=n?a:a+d,h=r?a+d:l;for(let m=u;m<h;m++){let p=s[m];if(m<c&&e===p||m>=c&&p.type===e)return m}if(r){let m=s[c];if(m&&Oc(m)&&m.type===e)return c}return null}function Su(i,t,e,n){let r=i[e],o=t.data;if(JJ(r)){let s=r;s.resolving&&OQ(PQ(o[e]));let a=fv(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?Vo(s.injectImpl):null,d=d4(i,n,Ti.Default);try{r=i[e]=s.factory(void 0,o,i,n),t.firstCreatePass&&e>=n.directiveStart&&KJ(e,o[e],t)}finally{l!==null&&Vo(l),fv(a),s.resolving=!1,p4()}}return r}function cee(i){if(typeof i=="string")return i.charCodeAt(0)||0;let t=i.hasOwnProperty(Uf)?i[Uf]:void 0;return typeof t=="number"?t>=0?t&b4:lee:t}function WB(i,t,e){let n=1<<i;return!!(e[t+(i>>v4)]&n)}function qB(i,t){return!(i&Ti.Self)&&!(i&Ti.Host&&t)}var vu=class{constructor(t,e){this._tNode=t,this._lView=e}get(t,e,n){return M4(this._tNode,this._lView,t,Pv(n),e)}};function lee(){return new vu(Ur(),qt())}function Yi(i){return tg(()=>{let t=i.prototype.constructor,e=t[cv]||pE(t),n=Object.prototype,r=Object.getPrototypeOf(i.prototype).constructor;for(;r&&r!==n;){let o=r[cv]||pE(r);if(o&&o!==e)return o;r=Object.getPrototypeOf(r)}return o=>new o})}function pE(i){return MV(i)?()=>{let t=pE(vo(i));return t&&t()}:yu(i)}function dee(i,t,e,n,r){let o=i,s=t;for(;o!==null&&s!==null&&s[Wt]&2048&&!(s[Wt]&512);){let a=C4(o,s,e,n|Ti.Self,Ua);if(a!==Ua)return a;let c=o.parent;if(!c){let l=s[ZV];if(l){let d=l.get(e,Ua,n);if(d!==Ua)return d}c=S4(s),s=s[Mm]}o=c}return r}function S4(i){let t=i[ni],e=t.type;return e===2?t.declTNode:e===1?i[ss]:null}function zr(i){return see(Ur(),i)}function XB(i,t=null,e=null,n){let r=E4(i,t,e,n);return r.resolveInjectorInitializers(),r}function E4(i,t=null,e=null,n,r=new Set){let o=[e||Uo,dJ(i)];return n=n||(typeof i=="object"?void 0:yo(i)),new $f(o,t||fT(),n||null,r)}var Jn=(()=>{class i{static{this.THROW_IF_NOT_FOUND=Hf}static{this.NULL=new uv}static create(e,n){if(Array.isArray(e))return XB({name:""},n,e,"");{let r=e.name??"";return XB({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=we({token:i,providedIn:"any",factory:()=>pe(PV)})}static{this.__NG_ELEMENT_ID__=-1}}return i})();var uee="ngOriginalError";function $1(i){return i[uee]}var wo=class{constructor(){this._console=console}handleError(t){let e=this._findOriginalError(t);this._console.error("ERROR",t),e&&this._console.error("ORIGINAL ERROR",e)}_findOriginalError(t){let e=t&&$1(t);for(;e&&$1(e);)e=$1(e);return e||null}},T4=new _e("",{providedIn:"root",factory:()=>ye(wo).handleError.bind(void 0)}),jv=(()=>{class i{static{this.__NG_ELEMENT_ID__=hee}static{this.__NG_ENV_ID__=e=>e}}return i})(),fE=class extends jv{constructor(t){super(),this._lView=t}onDestroy(t){return r4(this._lView,t),()=>RJ(this._lView,t)}};function hee(){return new fE(qt())}function mee(){return Cm(Ur(),qt())}function Cm(i,t){return new Re(Is(i,t))}var Re=(()=>{class i{constructor(e){this.nativeElement=e}static{this.__NG_ELEMENT_ID__=mee}}return i})();function pee(i){return i instanceof Re?i.nativeElement:i}var gE=class extends Le{constructor(t=!1){super(),this.destroyRef=void 0,this.__isAsync=t,XV()&&(this.destroyRef=ye(jv,{optional:!0})??void 0)}emit(t){let e=Ni(null);try{super.next(t)}finally{Ni(e)}}subscribe(t,e,n){let r=t,o=e||(()=>null),s=n;if(t&&typeof t=="object"){let c=t;r=c.next?.bind(c),o=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(o=G1(o),r&&(r=G1(r)),s&&(s=G1(s)));let a=super.subscribe({next:r,error:o,complete:s});return t instanceof Yt&&t.add(a),a}};function G1(i){return t=>{setTimeout(i,void 0,t)}}var Qe=gE;function fee(){return this._results[Symbol.iterator]()}var Ts=class i{get changes(){return this._changes??=new Qe}constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let e=i.prototype;e[Symbol.iterator]||(e[Symbol.iterator]=fee)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){this.dirty=!1;let n=$Q(t);(this._changesDetected=!jQ(this._results,n,e))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(t){this._onDirty=t}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function I4(i){return(i.flags&128)===128}var D4=new Map,gee=0;function _ee(){return gee++}function bee(i){D4.set(i[Rv],i)}function vee(i){D4.delete(i[Rv])}var YB="__ngContext__";function $l(i,t){bu(t)?(i[YB]=t[Rv],bee(t)):i[YB]=t}function k4(i){return P4(i[Wf])}function A4(i){return P4(i[Js])}function P4(i){for(;i!==null&&!Lc(i);)i=i[Js];return i}var _E;function O4(i){_E=i}function yee(){if(_E!==void 0)return _E;if(typeof document<"u")return document;throw new pt(210,!1)}var Sm=new _e("",{providedIn:"root",factory:()=>xee}),xee="ng",DT=new _e(""),Ga=new _e("",{providedIn:"platform",factory:()=>"unknown"});var $i=new _e(""),ag=new _e("",{providedIn:"root",factory:()=>yee().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var wee="h",Mee="b";var Cee=()=>null;function kT(i,t,e=!1){return Cee(i,t,e)}var N4=!1,See=new _e("",{providedIn:"root",factory:()=>N4});var Yb;function Eee(){if(Yb===void 0&&(Yb=null,Qn.trustedTypes))try{Yb=Qn.trustedTypes.createPolicy("angular",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Yb}function $v(i){return Eee()?.createHTML(i)||i}var Zb;function Tee(){if(Zb===void 0&&(Zb=null,Qn.trustedTypes))try{Zb=Qn.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:i=>i,createScript:i=>i,createScriptURL:i=>i})}catch{}return Zb}function ZB(i){return Tee()?.createScriptURL(i)||i}var Nc=class{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${xV})`}},bE=class extends Nc{getTypeName(){return"HTML"}},vE=class extends Nc{getTypeName(){return"Style"}},yE=class extends Nc{getTypeName(){return"Script"}},xE=class extends Nc{getTypeName(){return"URL"}},wE=class extends Nc{getTypeName(){return"ResourceURL"}};function ta(i){return i instanceof Nc?i.changingThisBreaksApplicationSecurity:i}function Xl(i,t){let e=Iee(i);if(e!=null&&e!==t){if(e==="ResourceURL"&&t==="URL")return!0;throw new Error(`Required a safe ${t}, got a ${e} (see ${xV})`)}return e===t}function Iee(i){return i instanceof Nc&&i.getTypeName()||null}function R4(i){return new bE(i)}function F4(i){return new vE(i)}function L4(i){return new yE(i)}function B4(i){return new xE(i)}function V4(i){return new wE(i)}function Dee(i){let t=new CE(i);return kee()?new ME(t):t}var ME=class{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{let e=new window.DOMParser().parseFromString($v(t),"text/html").body;return e===null?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch{return null}}},CE=class{constructor(t){this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(t){let e=this.inertDocument.createElement("template");return e.innerHTML=$v(t),e}};function kee(){try{return!!new window.DOMParser().parseFromString($v(""),"text/html")}catch{return!1}}var Aee=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Gv(i){return i=String(i),i.match(Aee)?i:"unsafe:"+i}function Bc(i){let t={};for(let e of i.split(","))t[e]=!0;return t}function cg(...i){let t={};for(let e of i)for(let n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}var U4=Bc("area,br,col,hr,img,wbr"),z4=Bc("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),H4=Bc("rp,rt"),Pee=cg(H4,z4),Oee=cg(z4,Bc("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nee=cg(H4,Bc("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),KB=cg(U4,Oee,Nee,Pee),j4=Bc("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),Ree=Bc("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Fee=Bc("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"),Lee=cg(j4,Ree,Fee),Bee=Bc("script,style,template"),SE=class{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0,r=[];for(;e;){if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild){r.push(e),e=zee(e);continue}for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let o=Uee(e);if(o){e=o;break}e=r.pop()}}return this.buf.join("")}startElement(t){let e=QB(t).toLowerCase();if(!KB.hasOwnProperty(e))return this.sanitizedSomething=!0,!Bee.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);let n=t.attributes;for(let r=0;r<n.length;r++){let o=n.item(r),s=o.name,a=s.toLowerCase();if(!Lee.hasOwnProperty(a)){this.sanitizedSomething=!0;continue}let c=o.value;j4[a]&&(c=Gv(c)),this.buf.push(" ",s,'="',JB(c),'"')}return this.buf.push(">"),!0}endElement(t){let e=QB(t).toLowerCase();KB.hasOwnProperty(e)&&!U4.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(JB(t))}};function Vee(i,t){return(i.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}function Uee(i){let t=i.nextSibling;if(t&&i!==t.previousSibling)throw $4(t);return t}function zee(i){let t=i.firstChild;if(t&&Vee(i,t))throw $4(t);return t}function QB(i){let t=i.nodeName;return typeof t=="string"?t:"FORM"}function $4(i){return new Error(`Failed to sanitize html because the element is clobbered: ${i.outerHTML}`)}var Hee=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,jee=/([^\#-~ |!])/g;function JB(i){return i.replace(/&/g,"&amp;").replace(Hee,function(t){let e=t.charCodeAt(0),n=t.charCodeAt(1);return"&#"+((e-55296)*1024+(n-56320)+65536)+";"}).replace(jee,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}var Kb;function G4(i,t){let e=null;try{Kb=Kb||Dee(i);let n=t?String(t):"";e=Kb.getInertBodyElement(n);let r=5,o=n;do{if(r===0)throw new Error("Failed to sanitize html because the input is unstable");r--,n=o,o=e.innerHTML,e=Kb.getInertBodyElement(n)}while(n!==o);let a=new SE().sanitizeChildren(eV(e)||e);return $v(a)}finally{if(e){let n=eV(e)||e;for(;n.firstChild;)n.removeChild(n.firstChild)}}}function eV(i){return"content"in i&&$ee(i)?i.content:null}function $ee(i){return i.nodeType===Node.ELEMENT_NODE&&i.nodeName==="TEMPLATE"}var Qr=function(i){return i[i.NONE=0]="NONE",i[i.HTML=1]="HTML",i[i.STYLE=2]="STYLE",i[i.SCRIPT=3]="SCRIPT",i[i.URL=4]="URL",i[i.RESOURCE_URL=5]="RESOURCE_URL",i}(Qr||{});function W4(i){let t=X4();return t?t.sanitize(Qr.URL,i)||"":Xl(i,"URL")?ta(i):Gv(Ac(i))}function q4(i){let t=X4();if(t)return ZB(t.sanitize(Qr.RESOURCE_URL,i)||"");if(Xl(i,"ResourceURL"))return ZB(ta(i));throw new pt(904,!1)}function X4(){let i=qt();return i&&i[ea].sanitizer}var Gee=/^>|^->|<!--|-->|--!>|<!-$/g,Wee=/(<|>)/g,qee="\u200B$1\u200B";function Xee(i){return i.replace(Gee,t=>t.replace(Wee,qee))}function Y4(i){return i instanceof Function?i():i}function Yee(i){return(i??ye(Jn)).get(Ga)==="browser"}var Rc=function(i){return i[i.Important=1]="Important",i[i.DashCase=2]="DashCase",i}(Rc||{}),Zee;function AT(i,t){return Zee(i,t)}function lm(i,t,e,n,r){if(n!=null){let o,s=!1;Lc(n)?o=n:bu(n)&&(s=!0,n=n[ja]);let a=Ha(n);i===0&&e!==null?r==null?eU(t,e,a):_v(t,e,a,r||null,!0):i===1&&e!==null?_v(t,e,a,r||null,!0):i===2?hte(t,a,s):i===3&&t.destroyNode(a),o!=null&&pte(t,i,o,e,r)}}function Kee(i,t){return i.createText(t)}function Qee(i,t,e){i.setValue(t,e)}function Jee(i,t){return i.createComment(Xee(t))}function Z4(i,t,e){return i.createElement(t,e)}function ete(i,t){K4(i,t),t[ja]=null,t[ss]=null}function tte(i,t,e,n,r,o){n[ja]=r,n[ss]=t,Xv(i,n,e,1,r,o)}function K4(i,t){t[ea].changeDetectionScheduler?.notify(1),Xv(i,t,t[On],2,null,null)}function ite(i){let t=i[Wf];if(!t)return W1(i[ni],i);for(;t;){let e=null;if(bu(t))e=t[Wf];else{let n=t[Zr];n&&(e=n)}if(!e){for(;t&&!t[Js]&&t!==i;)bu(t)&&W1(t[ni],t),t=t[Vr];t===null&&(t=i),bu(t)&&W1(t[ni],t),e=t&&t[Js]}t=e}}function nte(i,t,e,n){let r=Zr+n,o=e.length;n>0&&(e[r-1][Js]=t),n<o-Zr?(t[Js]=e[r],AV(e,Zr+n,t)):(e.push(t),t[Js]=null),t[Vr]=e;let s=t[rg];s!==null&&e!==s&&rte(s,t);let a=t[Pc];a!==null&&a.insertView(i),dE(t),t[Wt]|=128}function rte(i,t){let e=i[bm],r=t[Vr][Vr][Es];t[Es]!==r&&(i[Wt]|=_T.HasTransplantedViews),e===null?i[bm]=[t]:e.push(t)}function Q4(i,t){let e=i[bm],n=e.indexOf(t);e.splice(n,1)}function Yf(i,t){if(i.length<=Zr)return;let e=Zr+t,n=i[e];if(n){let r=n[rg];r!==null&&r!==i&&Q4(r,n),t>0&&(i[e-1][Js]=n[Js]);let o=dv(i,Zr+t);ete(n[ni],n);let s=o[Pc];s!==null&&s.detachView(o[ni]),n[Vr]=null,n[Js]=null,n[Wt]&=-129}return n}function Wv(i,t){if(!(t[Wt]&256)){let e=t[On];e.destroyNode&&Xv(i,t,e,3,null,null),ite(t)}}function W1(i,t){if(t[Wt]&256)return;let e=Ni(null);try{t[Wt]&=-129,t[Wt]|=256,t[xu]&&w1(t[xu]),ste(i,t),ote(i,t),t[ni].type===1&&t[On].destroy();let n=t[rg];if(n!==null&&Lc(t[Vr])){n!==t[Vr]&&Q4(n,t);let r=t[Pc];r!==null&&r.detachView(i)}vee(t)}finally{Ni(e)}}function ote(i,t){let e=i.cleanup,n=t[Gf];if(e!==null)for(let o=0;o<e.length-1;o+=2)if(typeof e[o]=="string"){let s=e[o+3];s>=0?n[s]():n[-s].unsubscribe(),o+=2}else{let s=n[e[o+1]];e[o].call(s)}n!==null&&(t[Gf]=null);let r=t[Hl];if(r!==null){t[Hl]=null;for(let o=0;o<r.length;o++){let s=r[o];s()}}}function ste(i,t){let e;if(i!=null&&(e=i.destroyHooks)!=null)for(let n=0;n<e.length;n+=2){let r=t[e[n]];if(!(r instanceof Cu)){let o=e[n+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let a=r[o[s]],c=o[s+1];Va(4,a,c);try{c.call(a)}finally{Va(5,a,c)}}else{Va(4,r,o);try{o.call(r)}finally{Va(5,r,o)}}}}}function J4(i,t,e){return ate(i,t.parent,e)}function ate(i,t,e){let n=t;for(;n!==null&&n.type&40;)t=n,n=t.parent;if(n===null)return e[ja];{let{componentOffset:r}=n;if(r>-1){let{encapsulation:o}=i.data[n.directiveStart+r];if(o===za.None||o===za.Emulated)return null}return Is(n,e)}}function _v(i,t,e,n,r){i.insertBefore(t,e,n,r)}function eU(i,t,e){i.appendChild(t,e)}function tV(i,t,e,n,r){n!==null?_v(i,t,e,n,r):eU(i,t,e)}function cte(i,t,e,n){i.removeChild(t,e,n)}function PT(i,t){return i.parentNode(t)}function lte(i,t){return i.nextSibling(t)}function tU(i,t,e){return ute(i,t,e)}function dte(i,t,e){return i.type&40?Is(i,e):null}var ute=dte,iV;function qv(i,t,e,n){let r=J4(i,n,t),o=t[On],s=n.parent||t[ss],a=tU(s,n,t);if(r!=null)if(Array.isArray(e))for(let c=0;c<e.length;c++)tV(o,r,e[c],a,!1);else tV(o,r,e,a,!1);iV!==void 0&&iV(o,n,t,e,r)}function sv(i,t){if(t!==null){let e=t.type;if(e&3)return Is(t,i);if(e&4)return EE(-1,i[t.index]);if(e&8){let n=t.child;if(n!==null)return sv(i,n);{let r=i[t.index];return Lc(r)?EE(-1,r):Ha(r)}}else{if(e&32)return AT(t,i)()||Ha(i[t.index]);{let n=iU(i,t);if(n!==null){if(Array.isArray(n))return n[0];let r=Xf(i[Es]);return sv(r,n)}else return sv(i,t.next)}}}return null}function iU(i,t){if(t!==null){let n=i[Es][ss],r=t.projection;return n.projection[r]}return null}function EE(i,t){let e=Zr+i+1;if(e<t.length){let n=t[e],r=n[ni].firstChild;if(r!==null)return sv(n,r)}return t[wu]}function hte(i,t,e){let n=PT(i,t);n&&cte(i,n,t,e)}function OT(i,t,e,n,r,o,s){for(;e!=null;){let a=n[e.index],c=e.type;if(s&&t===0&&(a&&$l(Ha(a),n),e.flags|=2),(e.flags&32)!==32)if(c&8)OT(i,t,e.child,n,r,o,!1),lm(t,i,r,a,o);else if(c&32){let l=AT(e,n),d;for(;d=l();)lm(t,i,r,d,o);lm(t,i,r,a,o)}else c&16?nU(i,t,n,e,r,o):lm(t,i,r,a,o);e=s?e.projectionNext:e.next}}function Xv(i,t,e,n,r,o){OT(e,n,i.firstChild,t,r,o,!1)}function mte(i,t,e){let n=t[On],r=J4(i,e,t),o=e.parent||t[ss],s=tU(o,e,t);nU(n,0,t,e,r,s)}function nU(i,t,e,n,r,o){let s=e[Es],c=s[ss].projection[n.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let d=c[l];lm(t,i,r,d,o)}else{let l=c,d=s[Vr];I4(n)&&(l.flags|=128),OT(i,t,l,d,r,o,!0)}}function pte(i,t,e,n,r){let o=e[wu],s=Ha(e);o!==s&&lm(t,i,n,o,r);for(let a=Zr;a<e.length;a++){let c=e[a];Xv(c[ni],c,i,t,n,o)}}function fte(i,t,e,n,r){if(t)r?i.addClass(e,n):i.removeClass(e,n);else{let o=n.indexOf("-")===-1?void 0:Rc.DashCase;r==null?i.removeStyle(e,n,o):(typeof r=="string"&&r.endsWith("!important")&&(r=r.slice(0,-10),o|=Rc.Important),i.setStyle(e,n,r,o))}}function gte(i,t,e){i.setAttribute(t,"style",e)}function rU(i,t,e){e===""?i.removeAttribute(t,"class"):i.setAttribute(t,"class",e)}function oU(i,t,e){let{mergedAttrs:n,classes:r,styles:o}=e;n!==null&&oE(i,t,n),r!==null&&rU(i,t,r),o!==null&&gte(i,t,o)}var as={};function P(i=1){sU(Nn(),qt(),$a()+i,!1)}function sU(i,t,e,n){if(!n)if((t[Wt]&3)===3){let o=i.preOrderCheckHooks;o!==null&&nv(t,o,e)}else{let o=i.preOrderHooks;o!==null&&rv(t,o,0,e)}Mu(e)}function F(i,t=Ti.Default){let e=qt();if(e===null)return pe(i,t);let n=Ur();return M4(n,e,vo(i),t)}function Yv(){let i="invalid";throw new Error(i)}function aU(i,t,e,n,r,o){let s=Ni(null);try{let a=null;r&ie.SignalBased&&(a=t[n][yb]),a!==null&&a.transformFn!==void 0&&(o=a.transformFn(o)),r&ie.HasDecoratorInputTransform&&(o=i.inputTransforms[n].call(t,o)),i.setInput!==null?i.setInput(t,a,o,e,n):KV(t,a,n,o)}finally{Ni(s)}}function _te(i,t){let e=i.hostBindingOpCodes;if(e!==null)try{for(let n=0;n<e.length;n++){let r=e[n];if(r<0)Mu(~r);else{let o=r,s=e[++n],a=e[++n];GJ(s,o);let c=t[o];a(2,c)}}}finally{Mu(-1)}}function Zv(i,t,e,n,r,o,s,a,c,l,d){let u=t.blueprint.slice();return u[ja]=r,u[Wt]=n|4|128|8|64,(l!==null||i&&i[Wt]&2048)&&(u[Wt]|=2048),n4(u),u[Vr]=u[Mm]=i,u[Yr]=e,u[ea]=s||i&&i[ea],u[On]=a||i&&i[On],u[_m]=c||i&&i[_m]||null,u[ss]=o,u[Rv]=_ee(),u[gm]=d,u[ZV]=l,u[Es]=t.type==2?i[Es]:u,u}function Em(i,t,e,n,r){let o=i.data[t];if(o===null)o=bte(i,t,e,n,r),$J()&&(o.flags|=32);else if(o.type&64){o.type=e,o.value=n,o.attrs=r;let s=zJ();o.injectorIndex=s===null?-1:s.injectorIndex}return Du(o,!0),o}function bte(i,t,e,n,r){let o=a4(),s=wT(),a=s?o:o&&o.parent,c=i.data[t]=Cte(i,a,e,t,n,r);return i.firstChild===null&&(i.firstChild=c),o!==null&&(s?o.child==null&&c.parent!==null&&(o.child=c):o.next===null&&(o.next=c,c.prev=o)),c}function cU(i,t,e,n){if(e===0)return-1;let r=t.length;for(let o=0;o<e;o++)t.push(n),i.blueprint.push(n),i.data.push(null);return r}function lU(i,t,e,n,r){let o=$a(),s=n&2;try{Mu(-1),s&&t.length>Ir&&sU(i,t,Ir,!1),Va(s?2:0,r),e(n,r)}finally{Mu(o),Va(s?3:1,r)}}function NT(i,t,e){if(bT(t)){let n=Ni(null);try{let r=t.directiveStart,o=t.directiveEnd;for(let s=r;s<o;s++){let a=i.data[s];if(a.contentQueries){let c=e[s];a.contentQueries(1,c,s)}}}finally{Ni(n)}}}function RT(i,t,e){o4()&&(kte(i,t,e,Is(e,t)),(e.flags&64)===64&&hU(i,t,e))}function FT(i,t,e=Is){let n=t.localNames;if(n!==null){let r=t.index+1;for(let o=0;o<n.length;o+=2){let s=n[o+1],a=s===-1?e(t,i):i[s];i[r++]=a}}}function dU(i){let t=i.tView;return t===null||t.incompleteFirstPass?i.tView=LT(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts,i.id):t}function LT(i,t,e,n,r,o,s,a,c,l,d){let u=Ir+n,h=u+r,m=vte(u,h),p=typeof l=="function"?l():l;return m[ni]={type:i,blueprint:m,template:e,queries:null,viewQuery:a,declTNode:t,data:m.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:d}}function vte(i,t){let e=[];for(let n=0;n<t;n++)e.push(n<i?null:as);return e}function yte(i,t,e,n){let o=n.get(See,N4)||e===za.ShadowDom,s=i.selectRootElement(t,o);return xte(s),s}function xte(i){wte(i)}var wte=()=>null;function Mte(i,t,e,n){let r=fU(t);r.push(e),i.firstCreatePass&&gU(i).push(n,r.length-1)}function Cte(i,t,e,n,r,o){let s=t?t.injectorIndex:-1,a=0;return s4()&&(a|=128),{type:e,index:n,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:r,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function nV(i,t,e,n,r){for(let o in t){if(!t.hasOwnProperty(o))continue;let s=t[o];if(s===void 0)continue;n??={};let a,c=ie.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=o;if(r!==null){if(!r.hasOwnProperty(o))continue;l=r[o]}i===0?rV(n,e,l,a,c):rV(n,e,l,a)}return n}function rV(i,t,e,n,r){let o;i.hasOwnProperty(e)?(o=i[e]).push(t,n):o=i[e]=[t,n],r!==void 0&&o.push(r)}function Ste(i,t,e){let n=t.directiveStart,r=t.directiveEnd,o=i.data,s=t.attrs,a=[],c=null,l=null;for(let d=n;d<r;d++){let u=o[d],h=e?e.get(u):null,m=h?h.inputs:null,p=h?h.outputs:null;c=nV(0,u.inputs,d,c,m),l=nV(1,u.outputs,d,l,p);let _=c!==null&&s!==null&&!mT(t)?zte(c,d,s):null;a.push(_)}c!==null&&(c.hasOwnProperty("class")&&(t.flags|=8),c.hasOwnProperty("style")&&(t.flags|=16)),t.initialInputs=a,t.inputs=c,t.outputs=l}function Ete(i){return i==="class"?"className":i==="for"?"htmlFor":i==="formaction"?"formAction":i==="innerHtml"?"innerHTML":i==="readonly"?"readOnly":i==="tabindex"?"tabIndex":i}function Kv(i,t,e,n,r,o,s,a){let c=Is(t,e),l=t.inputs,d;!a&&l!=null&&(d=l[n])?(VT(i,e,d,n,r),Fv(t)&&Tte(e,t.index)):t.type&3?(n=Ete(n),r=s!=null?s(r,t.value||"",n):r,o.setProperty(c,n,r)):t.type&12}function Tte(i,t){let e=Wl(t,i);e[Wt]&16||(e[Wt]|=64)}function BT(i,t,e,n){if(o4()){let r=n===null?null:{"":-1},o=Pte(i,e),s,a;o===null?s=a=null:[s,a]=o,s!==null&&uU(i,t,e,s,r,a),r&&Ote(e,n,r)}e.mergedAttrs=jf(e.mergedAttrs,e.attrs)}function uU(i,t,e,n,r,o){for(let l=0;l<n.length;l++)mE(gv(e,t),i,n[l].type);Rte(e,i.data.length,n.length);for(let l=0;l<n.length;l++){let d=n[l];d.providersResolver&&d.providersResolver(d)}let s=!1,a=!1,c=cU(i,t,n.length,null);for(let l=0;l<n.length;l++){let d=n[l];e.mergedAttrs=jf(e.mergedAttrs,d.hostAttrs),Fte(i,e,t,c,d),Nte(c,d,r),d.contentQueries!==null&&(e.flags|=4),(d.hostBindings!==null||d.hostAttrs!==null||d.hostVars!==0)&&(e.flags|=64);let u=d.type.prototype;!s&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((i.preOrderHooks??=[]).push(e.index),s=!0),!a&&(u.ngOnChanges||u.ngDoCheck)&&((i.preOrderCheckHooks??=[]).push(e.index),a=!0),c++}Ste(i,e,o)}function Ite(i,t,e,n,r){let o=r.hostBindings;if(o){let s=i.hostBindingOpCodes;s===null&&(s=i.hostBindingOpCodes=[]);let a=~t.index;Dte(s)!=a&&s.push(a),s.push(e,n,o)}}function Dte(i){let t=i.length;for(;t>0;){let e=i[--t];if(typeof e=="number"&&e<0)return e}return 0}function kte(i,t,e,n){let r=e.directiveStart,o=e.directiveEnd;Fv(e)&&Lte(t,e,i.data[r+e.componentOffset]),i.firstCreatePass||gv(e,t),$l(n,t);let s=e.initialInputs;for(let a=r;a<o;a++){let c=i.data[a],l=Su(t,i,a,e);if($l(l,t),s!==null&&Ute(t,a-r,l,c,e,s),Oc(c)){let d=Wl(e.index,t);d[Yr]=Su(t,i,a,e)}}}function hU(i,t,e){let n=e.directiveStart,r=e.directiveEnd,o=e.index,s=WJ();try{Mu(o);for(let a=n;a<r;a++){let c=i.data[a],l=t[a];uE(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&Ate(c,l)}}finally{Mu(-1),uE(s)}}function Ate(i,t){i.hostBindings!==null&&i.hostBindings(1,t)}function Pte(i,t){let e=i.directiveRegistry,n=null,r=null;if(e)for(let o=0;o<e.length;o++){let s=e[o];if(LV(t,s.selectors,!1))if(n||(n=[]),Oc(s))if(s.findHostDirectiveDefs!==null){let a=[];r=r||new Map,s.findHostDirectiveDefs(s,a,r),n.unshift(...a,s);let c=a.length;TE(i,t,c)}else n.unshift(s),TE(i,t,0);else r=r||new Map,s.findHostDirectiveDefs?.(s,n,r),n.push(s)}return n===null?null:[n,r]}function TE(i,t,e){t.componentOffset=e,(i.components??=[]).push(t.index)}function Ote(i,t,e){if(t){let n=i.localNames=[];for(let r=0;r<t.length;r+=2){let o=e[t[r+1]];if(o==null)throw new pt(-301,!1);n.push(t[r],o)}}}function Nte(i,t,e){if(e){if(t.exportAs)for(let n=0;n<t.exportAs.length;n++)e[t.exportAs[n]]=i;Oc(t)&&(e[""]=i)}}function Rte(i,t,e){i.flags|=1,i.directiveStart=t,i.directiveEnd=t+e,i.providerIndexes=t}function Fte(i,t,e,n,r){i.data[n]=r;let o=r.factory||(r.factory=yu(r.type,!0)),s=new Cu(o,Oc(r),F);i.blueprint[n]=s,e[n]=s,Ite(i,t,n,cU(i,e,r.hostVars,as),r)}function Lte(i,t,e){let n=Is(t,i),r=dU(e),o=i[ea].rendererFactory,s=16;e.signals?s=4096:e.onPush&&(s=64);let a=Qv(i,Zv(i,r,null,s,n,t,null,o.createRenderer(n,e),null,null,null));i[t.index]=a}function Bte(i,t,e,n,r,o){let s=Is(i,t);Vte(t[On],s,o,i.value,e,n,r)}function Vte(i,t,e,n,r,o,s){if(o==null)i.removeAttribute(t,r,e);else{let a=s==null?Ac(o):s(o,n||"",r);i.setAttribute(t,r,a,e)}}function Ute(i,t,e,n,r,o){let s=o[t];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],d=s[a++],u=s[a++];aU(n,e,c,l,d,u)}}function zte(i,t,e){let n=null,r=0;for(;r<e.length;){let o=e[r];if(o===0){r+=4;continue}else if(o===5){r+=2;continue}if(typeof o=="number")break;if(i.hasOwnProperty(o)){n===null&&(n=[]);let s=i[o];for(let a=0;a<s.length;a+=3)if(s[a]===t){n.push(o,s[a+1],s[a+2],e[r+1]);break}}r+=2}return n}function mU(i,t,e,n){return[i,!0,0,t,null,n,null,e,null,null]}function pU(i,t){let e=i.contentQueries;if(e!==null){let n=Ni(null);try{for(let r=0;r<e.length;r+=2){let o=e[r],s=e[r+1];if(s!==-1){let a=i.data[s];ST(o),a.contentQueries(2,t[s],s)}}}finally{Ni(n)}}}function Qv(i,t){return i[Wf]?i[jB][Js]=t:i[Wf]=t,i[jB]=t,t}function IE(i,t,e){ST(0);let n=Ni(null);try{t(i,e)}finally{Ni(n)}}function fU(i){return i[Gf]||(i[Gf]=[])}function gU(i){return i.cleanup||(i.cleanup=[])}function _U(i,t,e){return(i===null||Oc(i))&&(e=kJ(e[t.index])),e[On]}function bU(i,t){let e=i[_m],n=e?e.get(wo,null):null;n&&n.handleError(t)}function VT(i,t,e,n,r){for(let o=0;o<e.length;){let s=e[o++],a=e[o++],c=e[o++],l=t[s],d=i.data[s];aU(d,l,n,a,c,r)}}function UT(i,t,e){let n=i4(t,i);Qee(i[On],n,e)}function Hte(i,t){let e=Wl(t,i),n=e[ni];jte(n,e);let r=e[ja];r!==null&&e[gm]===null&&(e[gm]=kT(r,e[_m])),zT(n,e,e[Yr])}function jte(i,t){for(let e=t.length;e<i.blueprint.length;e++)t.push(i.blueprint[e])}function zT(i,t,e){ET(t);try{let n=i.viewQuery;n!==null&&IE(1,n,e);let r=i.template;r!==null&&lU(i,t,r,1,e),i.firstCreatePass&&(i.firstCreatePass=!1),t[Pc]?.finishViewCreation(i),i.staticContentQueries&&pU(i,t),i.staticViewQueries&&IE(2,i.viewQuery,e);let o=i.components;o!==null&&$te(t,o)}catch(n){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),n}finally{t[Wt]&=-5,TT()}}function $te(i,t){for(let e=0;e<t.length;e++)Hte(i,t[e])}function Jv(i,t,e,n){let r=Ni(null);try{let o=t.tView,a=i[Wt]&4096?4096:16,c=Zv(i,o,e,a,null,t,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),l=i[t.index];c[rg]=l;let d=i[Pc];return d!==null&&(c[Pc]=d.createEmbeddedView(o)),zT(o,c,e),c}finally{Ni(r)}}function vU(i,t){let e=Zr+t;if(e<i.length)return i[e]}function Zf(i,t){return!t||t.firstChild===null||I4(i)}function ey(i,t,e,n=!0){let r=t[ni];if(nte(r,t,i,e),n){let s=EE(e,i),a=t[On],c=PT(a,i[wu]);c!==null&&tte(r,i[ss],a,t,c,s)}let o=t[gm];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function yU(i,t){let e=Yf(i,t);return e!==void 0&&Wv(e[ni],e),e}function bv(i,t,e,n,r=!1){for(;e!==null;){let o=t[e.index];o!==null&&n.push(Ha(o)),Lc(o)&&Gte(o,n);let s=e.type;if(s&8)bv(i,t,e.child,n);else if(s&32){let a=AT(e,t),c;for(;c=a();)n.push(c)}else if(s&16){let a=iU(t,e);if(Array.isArray(a))n.push(...a);else{let c=Xf(t[Es]);bv(c[ni],c,a,n,!0)}}e=r?e.projectionNext:e.next}return n}function Gte(i,t){for(let e=Zr;e<i.length;e++){let n=i[e],r=n[ni].firstChild;r!==null&&bv(n[ni],n,r,t)}i[wu]!==i[ja]&&t.push(i[wu])}var xU=[];function Wte(i){return i[xu]??qte(i)}function qte(i){let t=xU.pop()??Object.create(Yte);return t.lView=i,t}function Xte(i){i.lView[xu]!==i&&(i.lView=null,xU.push(i))}var Yte=Nt(ge({},v1),{consumerIsAlwaysLive:!0,consumerMarkedDirty:i=>{qf(i.lView)},consumerOnSignalRead(){this.lView[xu]=this}}),wU=100;function MU(i,t=!0,e=0){let n=i[ea],r=n.rendererFactory,o=!1;o||r.begin?.();try{Zte(i,e)}catch(s){throw t&&bU(i,s),s}finally{o||(r.end?.(),n.inlineEffectRunner?.flush())}}function Zte(i,t){DE(i,t);let e=0;for(;xT(i);){if(e===wU)throw new pt(103,!1);e++,DE(i,1)}}function Kte(i,t,e,n){let r=t[Wt];if((r&256)===256)return;let o=!1;!o&&t[ea].inlineEffectRunner?.flush(),ET(t);let s=null,a=null;!o&&Qte(i)&&(a=Wte(t),s=y1(a));try{n4(t),jJ(i.bindingStartIndex),e!==null&&lU(i,t,e,2,n);let c=(r&3)===3;if(!o)if(c){let u=i.preOrderCheckHooks;u!==null&&nv(t,u,null)}else{let u=i.preOrderHooks;u!==null&&rv(t,u,0,null),H1(t,0)}if(Jte(t),CU(t,0),i.contentQueries!==null&&pU(i,t),!o)if(c){let u=i.contentCheckHooks;u!==null&&nv(t,u)}else{let u=i.contentHooks;u!==null&&rv(t,u,1),H1(t,1)}_te(i,t);let l=i.components;l!==null&&EU(t,l,0);let d=i.viewQuery;if(d!==null&&IE(2,d,n),!o)if(c){let u=i.viewCheckHooks;u!==null&&nv(t,u)}else{let u=i.viewHooks;u!==null&&rv(t,u,2),H1(t,2)}if(i.firstUpdatePass===!0&&(i.firstUpdatePass=!1),t[iv]){for(let u of t[iv])u();t[iv]=null}o||(t[Wt]&=-73)}catch(c){throw qf(t),c}finally{a!==null&&(x1(a,s),Xte(a)),TT()}}function Qte(i){return i.type!==2}function CU(i,t){for(let e=k4(i);e!==null;e=A4(e))for(let n=Zr;n<e.length;n++){let r=e[n];SU(r,t)}}function Jte(i){for(let t=k4(i);t!==null;t=A4(t)){if(!(t[Wt]&_T.HasTransplantedViews))continue;let e=t[bm];for(let n=0;n<e.length;n++){let r=e[n],o=r[Vr];OJ(r)}}}function eie(i,t,e){let n=Wl(t,i);SU(n,e)}function SU(i,t){yT(i)&&DE(i,t)}function DE(i,t){let n=i[ni],r=i[Wt],o=i[xu],s=!!(t===0&&r&16);if(s||=!!(r&64&&t===0),s||=!!(r&1024),s||=!!(o?.dirty&&xb(o)),o&&(o.dirty=!1),i[Wt]&=-9217,s)Kte(n,i,n.template,i[Yr]);else if(r&8192){CU(i,1);let a=n.components;a!==null&&EU(i,a,1)}}function EU(i,t,e){for(let n=0;n<t.length;n++)eie(i,t[n],e)}function HT(i){for(i[ea].changeDetectionScheduler?.notify();i;){i[Wt]|=64;let t=Xf(i);if(MJ(i)&&!t)return i;i=t}return null}var Eu=class{get rootNodes(){let t=this._lView,e=t[ni];return bv(e,t,e.firstChild,[])}constructor(t,e,n=!0){this._lView=t,this._cdRefInjectingView=e,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Yr]}set context(t){this._lView[Yr]=t}get destroyed(){return(this._lView[Wt]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let t=this._lView[Vr];if(Lc(t)){let e=t[hv],n=e?e.indexOf(this):-1;n>-1&&(Yf(t,n),dv(e,n))}this._attachedToViewContainer=!1}Wv(this._lView[ni],this._lView)}onDestroy(t){r4(this._lView,t)}markForCheck(){HT(this._cdRefInjectingView||this._lView)}detach(){this._lView[Wt]&=-129}reattach(){dE(this._lView),this._lView[Wt]|=128}detectChanges(){this._lView[Wt]|=1024,MU(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new pt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,K4(this._lView[ni],this._lView)}attachToAppRef(t){if(this._attachedToViewContainer)throw new pt(902,!1);this._appRef=t,dE(this._lView)}},ji=(()=>{class i{static{this.__NG_ELEMENT_ID__=nie}}return i})(),tie=ji,iie=class extends tie{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(t,e){return this.createEmbeddedViewImpl(t,e)}createEmbeddedViewImpl(t,e,n){let r=Jv(this._declarationLView,this._declarationTContainer,t,{embeddedViewInjector:e,dehydratedView:n});return new Eu(r)}};function nie(){return ty(Ur(),qt())}function ty(i,t){return i.type&4?new iie(t,i,Cm(i,t)):null}var g2e=new RegExp(`^(\\d+)*(${Mee}|${wee})*(.*)`);var rie=()=>null;function Kf(i,t){return rie(i,t)}var vv=class{},kE=class{},yv=class{};function oie(i){let t=Error(`No component factory found for ${yo(i)}.`);return t[sie]=i,t}var sie="ngComponent";var AE=class{resolveComponentFactory(t){throw oie(t)}},Wa=(()=>{class i{static{this.NULL=new AE}}return i})(),Qf=class{},Vc=(()=>{class i{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>aie()}}return i})();function aie(){let i=qt(),t=Ur(),e=Wl(t.index,i);return(bu(e)?e:i)[On]}var cie=(()=>{class i{static{this.\u0275prov=we({token:i,providedIn:"root",factory:()=>null})}}return i})(),q1={};var oV=new Set;function Tm(i){oV.has(i)||(oV.add(i),performance?.mark?.("mark_feature_usage",{detail:{feature:i}}))}function sV(...i){}function lie(){let i=typeof Qn.requestAnimationFrame=="function",t=Qn[i?"requestAnimationFrame":"setTimeout"],e=Qn[i?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&t&&e){let n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);let r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}var Ne=class i{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Qe(!1),this.onMicrotaskEmpty=new Qe(!1),this.onStable=new Qe(!1),this.onError=new Qe(!1),typeof Zone>"u")throw new pt(908,!1);Zone.assertZonePatched();let r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=lie().nativeRequestAnimationFrame,hie(r)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!i.isInAngularZone())throw new pt(909,!1)}static assertNotInAngularZone(){if(i.isInAngularZone())throw new pt(909,!1)}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+r,t,die,sV,sV);try{return o.runTask(s,e,n)}finally{o.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}},die={};function jT(i){if(i._nesting==0&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function uie(i){i.isCheckStableRunning||i.lastRequestAnimationFrameId!==-1||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Qn,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,PE(i),i.isCheckStableRunning=!0,jT(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),PE(i))}function hie(i){let t=()=>{uie(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(e,n,r,o,s,a)=>{if(mie(a))return e.invokeTask(r,o,s,a);try{return aV(i),e.invokeTask(r,o,s,a)}finally{(i.shouldCoalesceEventChangeDetection&&o.type==="eventTask"||i.shouldCoalesceRunChangeDetection)&&t(),cV(i)}},onInvoke:(e,n,r,o,s,a,c)=>{try{return aV(i),e.invoke(r,o,s,a,c)}finally{i.shouldCoalesceRunChangeDetection&&t(),cV(i)}},onHasTask:(e,n,r,o)=>{e.hasTask(r,o),n===r&&(o.change=="microTask"?(i._hasPendingMicrotasks=o.microTask,PE(i),jT(i)):o.change=="macroTask"&&(i.hasPendingMacrotasks=o.macroTask))},onHandleError:(e,n,r,o)=>(e.handleError(r,o),i.runOutsideAngular(()=>i.onError.emit(o)),!1)})}function PE(i){i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&i.lastRequestAnimationFrameId!==-1?i.hasPendingMicrotasks=!0:i.hasPendingMicrotasks=!1}function aV(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function cV(i){i._nesting--,jT(i)}var OE=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Qe,this.onMicrotaskEmpty=new Qe,this.onStable=new Qe,this.onError=new Qe}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}};function mie(i){return!Array.isArray(i)||i.length!==1?!1:i[0].data?.__ignore_ng_zone__===!0}function pie(i="zone.js",t){return i==="noop"?new OE:i==="zone.js"?new Ne(t):i}var dm=function(i){return i[i.EarlyRead=0]="EarlyRead",i[i.Write=1]="Write",i[i.MixedReadWrite=2]="MixedReadWrite",i[i.Read=3]="Read",i}(dm||{}),fie={destroy(){}};function iy(i,t){!t&&YV(iy);let e=t?.injector??ye(Jn);if(!Yee(e))return fie;Tm("NgAfterNextRender");let n=e.get($T),r=n.handler??=new RE,o=t?.phase??dm.MixedReadWrite,s=()=>{r.unregister(c),a()},a=e.get(jv).onDestroy(s),c=Fc(e,()=>new NE(o,()=>{s(),i()}));return r.register(c),{destroy:s}}var NE=class{constructor(t,e){this.phase=t,this.callbackFn=e,this.zone=ye(Ne),this.errorHandler=ye(wo,{optional:!0}),ye(vv,{optional:!0})?.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(t){this.errorHandler?.handleError(t)}}},RE=class{constructor(){this.executingCallbacks=!1,this.buckets={[dm.EarlyRead]:new Set,[dm.Write]:new Set,[dm.MixedReadWrite]:new Set,[dm.Read]:new Set},this.deferredCallbacks=new Set}register(t){(this.executingCallbacks?this.deferredCallbacks:this.buckets[t.phase]).add(t)}unregister(t){this.buckets[t.phase].delete(t),this.deferredCallbacks.delete(t)}execute(){this.executingCallbacks=!0;for(let t of Object.values(this.buckets))for(let e of t)e.invoke();this.executingCallbacks=!1;for(let t of this.deferredCallbacks)this.buckets[t.phase].add(t);this.deferredCallbacks.clear()}destroy(){for(let t of Object.values(this.buckets))t.clear();this.deferredCallbacks.clear()}},$T=(()=>{class i{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let e=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let n of e)n()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}static{this.\u0275prov=we({token:i,providedIn:"root",factory:()=>new i})}}return i})();function xv(i,t,e){let n=e?i.styles:null,r=e?i.classes:null,o=0;if(t!==null)for(let s=0;s<t.length;s++){let a=t[s];if(typeof a=="number")o=a;else if(o==1)r=tE(r,a);else if(o==2){let c=a,l=t[++s];n=tE(n,c+": "+l+";")}}e?i.styles=n:i.stylesWithoutHost=n,e?i.classes=r:i.classesWithoutHost=r}var wv=class extends Wa{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){let e=jl(t);return new ym(e,this.ngModule)}};function lV(i){let t=[];for(let e in i){if(!i.hasOwnProperty(e))continue;let n=i[e];n!==void 0&&t.push({propName:Array.isArray(n)?n[0]:n,templateName:e})}return t}function gie(i){let t=i.toLowerCase();return t==="svg"?t4:t==="math"?TJ:null}var FE=class{constructor(t,e){this.injector=t,this.parentInjector=e}get(t,e,n){n=Pv(n);let r=this.injector.get(t,q1,n);return r!==q1||e===q1?r:this.parentInjector.get(t,e,n)}},ym=class extends yv{get inputs(){let t=this.componentDef,e=t.inputTransforms,n=lV(t.inputs);if(e!==null)for(let r of n)e.hasOwnProperty(r.propName)&&(r.transform=e[r.propName]);return n}get outputs(){return lV(this.componentDef.outputs)}constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=oJ(t.selectors),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}create(t,e,n,r){let o=Ni(null);try{r=r||this.ngModule;let s=r instanceof xo?r:r?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new FE(t,s):t,c=a.get(Qf,null);if(c===null)throw new pt(407,!1);let l=a.get(cie,null),d=a.get($T,null),u=a.get(vv,null),h={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,afterRenderEventManager:d,changeDetectionScheduler:u},m=c.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",_=n?yte(m,n,this.componentDef.encapsulation,a):Z4(m,p,gie(p)),f=512;this.componentDef.signals?f|=4096:this.componentDef.onPush||(f|=16);let g=null;_!==null&&(g=kT(_,a,!0));let S=LT(0,null,null,1,0,null,null,null,null,null,null),C=Zv(null,S,null,f,null,null,h,m,a,null,g);ET(C);let E,N;try{let R=this.componentDef,B,z=null;R.findHostDirectiveDefs?(B=[],z=new Map,R.findHostDirectiveDefs(R,B,z),B.push(R)):B=[R];let T=_ie(C,_),O=bie(T,_,R,B,C,h,m);N=vT(S,Ir),_&&xie(m,R,_,n),e!==void 0&&wie(N,this.ngContentSelectors,e),E=yie(O,R,B,z,C,[Mie]),zT(S,C,null)}finally{TT()}return new LE(this.componentType,E,Cm(N,C),C,N)}finally{Ni(o)}}},LE=class extends kE{constructor(t,e,n,r,o){super(),this.location=n,this._rootLView=r,this._tNode=o,this.previousInputValues=null,this.instance=e,this.hostView=this.changeDetectorRef=new Eu(r,void 0,!1),this.componentType=t}setInput(t,e){let n=this._tNode.inputs,r;if(n!==null&&(r=n[t])){if(this.previousInputValues??=new Map,this.previousInputValues.has(t)&&Object.is(this.previousInputValues.get(t),e))return;let o=this._rootLView;VT(o[ni],o,r,t,e),this.previousInputValues.set(t,e);let s=Wl(this._tNode.index,o);HT(s)}}get injector(){return new vu(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}};function _ie(i,t){let e=i[ni],n=Ir;return i[n]=t,Em(e,n,2,"#host",null)}function bie(i,t,e,n,r,o,s){let a=r[ni];vie(n,i,t,s);let c=null;t!==null&&(c=kT(t,r[_m]));let l=o.rendererFactory.createRenderer(t,e),d=16;e.signals?d=4096:e.onPush&&(d=64);let u=Zv(r,dU(e),null,d,r[i.index],i,o,l,null,null,c);return a.firstCreatePass&&TE(a,i,n.length-1),Qv(r,u),r[i.index]=u}function vie(i,t,e,n){for(let r of i)t.mergedAttrs=jf(t.mergedAttrs,r.hostAttrs);t.mergedAttrs!==null&&(xv(t,t.mergedAttrs,!0),e!==null&&oU(n,e,t))}function yie(i,t,e,n,r,o){let s=Ur(),a=r[ni],c=Is(s,r);uU(a,r,s,e,null,n);for(let d=0;d<e.length;d++){let u=s.directiveStart+d,h=Su(r,a,u,s);$l(h,r)}hU(a,r,s),c&&$l(c,r);let l=Su(r,a,s.directiveStart+s.componentOffset,s);if(i[Yr]=r[Yr]=l,o!==null)for(let d of o)d(l,t);return NT(a,s,r),l}function xie(i,t,e,n){if(n)oE(i,e,["ng-version","17.3.12"]);else{let{attrs:r,classes:o}=sJ(t.selectors[0]);r&&oE(i,e,r),o&&o.length>0&&rU(i,e,o.join(" "))}}function wie(i,t,e){let n=i.projection=[];for(let r=0;r<t.length;r++){let o=e[r];n.push(o!=null?Array.from(o):null)}}function Mie(){let i=Ur();Hv(qt()[ni],i)}var rn=(()=>{class i{static{this.__NG_ELEMENT_ID__=Cie}}return i})();function Cie(){let i=Ur();return IU(i,qt())}var Sie=rn,TU=class extends Sie{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Cm(this._hostTNode,this._hostLView)}get injector(){return new vu(this._hostTNode,this._hostLView)}get parentInjector(){let t=IT(this._hostTNode,this._hostLView);if(_4(t)){let e=pv(t,this._hostLView),n=mv(t),r=e[ni].data[n+8];return new vu(r,e)}else return new vu(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){let e=dV(this._lContainer);return e!==null&&e[t]||null}get length(){return this._lContainer.length-Zr}createEmbeddedView(t,e,n){let r,o;typeof n=="number"?r=n:n!=null&&(r=n.index,o=n.injector);let s=Kf(this._lContainer,t.ssrId),a=t.createEmbeddedViewImpl(e||{},o,s);return this.insertImpl(a,r,Zf(this._hostTNode,s)),a}createComponent(t,e,n,r,o){let s=t&&!wJ(t),a;if(s)a=e;else{let p=e||{};a=p.index,n=p.injector,r=p.projectableNodes,o=p.environmentInjector||p.ngModuleRef}let c=s?t:new ym(jl(t)),l=n||this.parentInjector;if(!o&&c.ngModule==null){let _=(s?l:this.parentInjector).get(xo,null);_&&(o=_)}let d=jl(c.componentType??{}),u=Kf(this._lContainer,d?.id??null),h=u?.firstChild??null,m=c.create(l,r,h,o);return this.insertImpl(m.hostView,a,Zf(this._hostTNode,u)),m}insert(t,e){return this.insertImpl(t,e,!0)}insertImpl(t,e,n){let r=t._lView;if(PJ(r)){let a=this.indexOf(t);if(a!==-1)this.detach(a);else{let c=r[Vr],l=new TU(c,c[ss],c[Vr]);l.detach(l.indexOf(t))}}let o=this._adjustIndex(e),s=this._lContainer;return ey(s,r,o,n),t.attachToViewContainerRef(),AV(X1(s),o,t),t}move(t,e){return this.insert(t,e)}indexOf(t){let e=dV(this._lContainer);return e!==null?e.indexOf(t):-1}remove(t){let e=this._adjustIndex(t,-1),n=Yf(this._lContainer,e);n&&(dv(X1(this._lContainer),e),Wv(n[ni],n))}detach(t){let e=this._adjustIndex(t,-1),n=Yf(this._lContainer,e);return n&&dv(X1(this._lContainer),e)!=null?new Eu(n):null}_adjustIndex(t,e=0){return t??this.length+e}};function dV(i){return i[hv]}function X1(i){return i[hv]||(i[hv]=[])}function IU(i,t){let e,n=t[i.index];return Lc(n)?e=n:(e=mU(n,t,null,i),t[i.index]=e,Qv(t,e)),Tie(e,t,i,n),new TU(e,i,t)}function Eie(i,t){let e=i[On],n=e.createComment(""),r=Is(t,i),o=PT(e,r);return _v(e,o,n,lte(e,r),!1),n}var Tie=kie,Iie=()=>!1;function Die(i,t,e){return Iie(i,t,e)}function kie(i,t,e,n){if(i[wu])return;let r;e.type&8?r=Ha(n):r=Eie(t,e),i[wu]=r}var BE=class i{constructor(t){this.queryList=t,this.matches=null}clone(){return new i(this.queryList)}setDirty(){this.queryList.setDirty()}},VE=class i{constructor(t=[]){this.queries=t}createEmbeddedView(t){let e=t.queries;if(e!==null){let n=t.contentQueries!==null?t.contentQueries[0]:e.length,r=[];for(let o=0;o<n;o++){let s=e.getByIndex(o),a=this.queries[s.indexInDeclarationView];r.push(a.clone())}return new i(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}finishViewCreation(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)GT(t,e).matches!==null&&this.queries[e].setDirty()}},Mv=class{constructor(t,e,n=null){this.flags=e,this.read=n,typeof t=="string"?this.predicate=Bie(t):this.predicate=t}},UE=class i{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){let r=e!==null?e.length:0,o=this.getByIndex(n).embeddedTView(t,r);o&&(o.indexInDeclarationView=n,e!==null?e.push(o):e=[o])}return e!==null?new i(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}},zE=class i{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new i(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let e=this._declarationNodeIndex,n=t.parent;for(;n!==null&&n.type&8&&n.index!==e;)n=n.parent;return e===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){let n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){let o=n[r];this.matchTNodeWithReadOption(t,e,Aie(e,o)),this.matchTNodeWithReadOption(t,e,ov(e,t,o,!1,!1))}else n===ji?e.type&4&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,ov(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(n!==null){let r=this.metadata.read;if(r!==null)if(r===Re||r===rn||r===ji&&e.type&4)this.addMatch(e.index,-2);else{let o=ov(e,t,r,!1,!1);o!==null&&this.addMatch(e.index,o)}else this.addMatch(e.index,n)}}addMatch(t,e){this.matches===null?this.matches=[t,e]:this.matches.push(t,e)}};function Aie(i,t){let e=i.localNames;if(e!==null){for(let n=0;n<e.length;n+=2)if(e[n]===t)return e[n+1]}return null}function Pie(i,t){return i.type&11?Cm(i,t):i.type&4?ty(i,t):null}function Oie(i,t,e,n){return e===-1?Pie(t,i):e===-2?Nie(i,t,n):Su(i,i[ni],e,t)}function Nie(i,t,e){if(e===Re)return Cm(t,i);if(e===ji)return ty(t,i);if(e===rn)return IU(t,i)}function DU(i,t,e,n){let r=t[Pc].queries[n];if(r.matches===null){let o=i.data,s=e.matches,a=[];for(let c=0;s!==null&&c<s.length;c+=2){let l=s[c];if(l<0)a.push(null);else{let d=o[l];a.push(Oie(t,d,s[c+1],e.metadata.read))}}r.matches=a}return r.matches}function HE(i,t,e,n){let r=i.queries.getByIndex(e),o=r.matches;if(o!==null){let s=DU(i,t,r,e);for(let a=0;a<o.length;a+=2){let c=o[a];if(c>0)n.push(s[a/2]);else{let l=o[a+1],d=t[-c];for(let u=Zr;u<d.length;u++){let h=d[u];h[rg]===h[Vr]&&HE(h[ni],h,l,n)}if(d[bm]!==null){let u=d[bm];for(let h=0;h<u.length;h++){let m=u[h];HE(m[ni],m,l,n)}}}}}return n}function Rie(i,t){return i[Pc].queries[t].queryList}function kU(i,t,e){let n=new Ts((e&4)===4);return Mte(i,t,n,n.destroy),(t[Pc]??=new VE).queries.push(new BE(n))-1}function Fie(i,t,e){let n=Nn();return n.firstCreatePass&&(AU(n,new Mv(i,t,e),-1),(t&2)===2&&(n.staticViewQueries=!0)),kU(n,qt(),t)}function Lie(i,t,e,n){let r=Nn();if(r.firstCreatePass){let o=Ur();AU(r,new Mv(t,e,n),o.index),Vie(r,i),(e&2)===2&&(r.staticContentQueries=!0)}return kU(r,qt(),e)}function Bie(i){return i.split(",").map(t=>t.trim())}function AU(i,t,e){i.queries===null&&(i.queries=new UE),i.queries.track(new zE(t,e))}function Vie(i,t){let e=i.contentQueries||(i.contentQueries=[]),n=e.length?e[e.length-1]:-1;t!==n&&e.push(i.queries.length-1,t)}function GT(i,t){return i.queries.getByIndex(t)}function Uie(i,t){let e=i[ni],n=GT(e,t);return n.crossesNgTemplate?HE(e,i,t,[]):DU(e,i,n,t)}function ny(i){return typeof i=="function"&&i[yb]!==void 0}function PU(i){return ny(i)&&typeof i.set=="function"}function zie(i){let t=[],e=new Map;function n(r){let o=e.get(r);if(!o){let s=i(r);e.set(r,o=s.then(Gie))}return o}return Cv.forEach((r,o)=>{let s=[];r.templateUrl&&s.push(n(r.templateUrl).then(l=>{r.template=l}));let a=typeof r.styles=="string"?[r.styles]:r.styles||[];if(r.styles=a,r.styleUrl&&r.styleUrls?.length)throw new Error("@Component cannot define both `styleUrl` and `styleUrls`. Use `styleUrl` if the component has one stylesheet, or `styleUrls` if it has multiple");if(r.styleUrls?.length){let l=r.styles.length,d=r.styleUrls;r.styleUrls.forEach((u,h)=>{a.push(""),s.push(n(u).then(m=>{a[l+h]=m,d.splice(d.indexOf(u),1),d.length==0&&(r.styleUrls=void 0)}))})}else r.styleUrl&&s.push(n(r.styleUrl).then(l=>{a.push(l),r.styleUrl=void 0}));let c=Promise.all(s).then(()=>Wie(o));t.push(c)}),jie(),Promise.all(t).then(()=>{})}var Cv=new Map,Hie=new Set;function jie(){let i=Cv;return Cv=new Map,i}function $ie(){return Cv.size===0}function Gie(i){return typeof i=="string"?i:i.text()}function Wie(i){Hie.delete(i)}function qie(i){return Object.getPrototypeOf(i.prototype).constructor}function It(i){let t=qie(i.type),e=!0,n=[i];for(;t;){let r;if(Oc(i))r=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new pt(903,!1);r=t.\u0275dir}if(r){if(e){n.push(r);let s=i;s.inputs=Qb(i.inputs),s.inputTransforms=Qb(i.inputTransforms),s.declaredInputs=Qb(i.declaredInputs),s.outputs=Qb(i.outputs);let a=r.hostBindings;a&&Qie(i,a);let c=r.viewQuery,l=r.contentQueries;if(c&&Zie(i,c),l&&Kie(i,l),Xie(i,r),CQ(i.outputs,r.outputs),Oc(r)&&r.data.animation){let d=i.data;d.animation=(d.animation||[]).concat(r.data.animation)}}let o=r.features;if(o)for(let s=0;s<o.length;s++){let a=o[s];a&&a.ngInherit&&a(i),a===It&&(e=!1)}}t=Object.getPrototypeOf(t)}Yie(n)}function Xie(i,t){for(let e in t.inputs){if(!t.inputs.hasOwnProperty(e)||i.inputs.hasOwnProperty(e))continue;let n=t.inputs[e];if(n!==void 0&&(i.inputs[e]=n,i.declaredInputs[e]=t.declaredInputs[e],t.inputTransforms!==null)){let r=Array.isArray(n)?n[0]:n;if(!t.inputTransforms.hasOwnProperty(r))continue;i.inputTransforms??={},i.inputTransforms[r]=t.inputTransforms[r]}}}function Yie(i){let t=0,e=null;for(let n=i.length-1;n>=0;n--){let r=i[n];r.hostVars=t+=r.hostVars,r.hostAttrs=jf(r.hostAttrs,e=jf(e,r.hostAttrs))}}function Qb(i){return i===mm?{}:i===Uo?[]:i}function Zie(i,t){let e=i.viewQuery;e?i.viewQuery=(n,r)=>{t(n,r),e(n,r)}:i.viewQuery=t}function Kie(i,t){let e=i.contentQueries;e?i.contentQueries=(n,r,o)=>{t(n,r,o),e(n,r,o)}:i.contentQueries=t}function Qie(i,t){let e=i.hostBindings;e?i.hostBindings=(n,r)=>{t(n,r),e(n,r)}:i.hostBindings=t}function zt(i){let t=i.inputConfig,e={};for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];Array.isArray(r)&&r[3]&&(e[n]=r[3])}i.inputTransforms=e}var Gl=class{},Jf=class{};var Sv=class extends Gl{constructor(t,e,n){super(),this._parent=e,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new wv(this);let r=zV(t);this._bootstrapComponents=Y4(r.bootstrap),this._r3Injector=E4(t,e,[{provide:Gl,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver},...n],yo(t),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(t)}get injector(){return this._r3Injector}destroy(){let t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}},Ev=class extends Jf{constructor(t){super(),this.moduleType=t}create(t){return new Sv(this.moduleType,t,[])}};function Jie(i,t,e){return new Sv(i,t,e)}var jE=class extends Gl{constructor(t){super(),this.componentFactoryResolver=new wv(this),this.instance=null;let e=new $f([...t.providers,{provide:Gl,useValue:this},{provide:Wa,useValue:this.componentFactoryResolver}],t.parent||fT(),t.debugName,new Set(["environment"]));this.injector=e,t.runEnvironmentInitializers&&e.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(t){this.injector.onDestroy(t)}};function ry(i,t,e=null){return new jE({providers:i,parent:t,debugName:e,runEnvironmentInitializers:!0}).injector}var lg=(()=>{class i{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new Ri(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let e=this.taskId++;return this.pendingTasks.add(e),e}remove(e){this.pendingTasks.delete(e),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function OU(i){return tne(i)?Array.isArray(i)||!(i instanceof Map)&&Symbol.iterator in i:!1}function ene(i,t){if(Array.isArray(i))for(let e=0;e<i.length;e++)t(i[e]);else{let e=i[Symbol.iterator](),n;for(;!(n=e.next()).done;)t(n.value)}}function tne(i){return i!==null&&(typeof i=="function"||typeof i=="object")}function WT(i,t,e){return i[t]=e}function zo(i,t,e){let n=i[t];return Object.is(n,e)?!1:(i[t]=e,!0)}function qT(i,t,e,n){let r=zo(i,t,e);return zo(i,t+1,n)||r}function NU(i,t,e,n,r){let o=qT(i,t,e,n);return zo(i,t+2,r)||o}function ine(i){return(i.flags&32)===32}function nne(i,t,e,n,r,o,s,a,c){let l=t.consts,d=Em(t,i,4,s||null,vm(l,a));BT(t,e,d,vm(l,c)),Hv(t,d);let u=d.tView=LT(2,d,n,r,o,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l,null);return t.queries!==null&&(t.queries.template(t,d),u.queries=t.queries.embeddedTView(d)),d}function ve(i,t,e,n,r,o,s,a){let c=qt(),l=Nn(),d=i+Ir,u=l.firstCreatePass?nne(d,l,c,t,e,n,r,o,s):l.data[d];Du(u,!1);let h=rne(l,c,u,i);Uv()&&qv(l,c,h,u),$l(h,c);let m=mU(h,c,h,u);return c[d]=m,Qv(c,m),Die(m,u,c),Lv(u)&&RT(l,c,u),s!=null&&FT(c,u,a),ve}var rne=one;function one(i,t,e,n){return zv(!0),t[On].createComment("")}function Tt(i,t,e,n){let r=qt(),o=ql();if(zo(r,o,t)){let s=Nn(),a=sg();Bte(a,r,i,t,e,n)}return Tt}function RU(i,t,e,n){return zo(i,ql(),e)?t+Ac(e)+n:as}function sne(i,t,e,n,r,o){let s=c4(),a=qT(i,s,e,r);return Vv(2),a?t+Ac(e)+n+Ac(r)+o:as}function ane(i,t,e,n,r,o,s,a){let c=c4(),l=NU(i,c,e,r,s);return Vv(3),l?t+Ac(e)+n+Ac(r)+o+Ac(s)+a:as}function Jb(i,t){return i<<17|t<<2}function Tu(i){return i>>17&32767}function cne(i){return(i&2)==2}function lne(i,t){return i&131071|t<<17}function $E(i){return i|2}function xm(i){return(i&131068)>>2}function Y1(i,t){return i&-131069|t<<2}function dne(i){return(i&1)===1}function GE(i){return i|1}function une(i,t,e,n,r,o){let s=o?t.classBindings:t.styleBindings,a=Tu(s),c=xm(s);i[n]=e;let l=!1,d;if(Array.isArray(e)){let u=e;d=u[1],(d===null||ig(u,d)>0)&&(l=!0)}else d=e;if(r)if(c!==0){let h=Tu(i[a+1]);i[n+1]=Jb(h,a),h!==0&&(i[h+1]=Y1(i[h+1],n)),i[a+1]=lne(i[a+1],n)}else i[n+1]=Jb(a,0),a!==0&&(i[a+1]=Y1(i[a+1],n)),a=n;else i[n+1]=Jb(c,0),a===0?a=n:i[c+1]=Y1(i[c+1],n),c=n;l&&(i[n+1]=$E(i[n+1])),uV(i,d,n,!0),uV(i,d,n,!1),hne(t,d,i,n,o),s=Jb(a,c),o?t.classBindings=s:t.styleBindings=s}function hne(i,t,e,n,r){let o=r?i.residualClasses:i.residualStyles;o!=null&&typeof t=="string"&&ig(o,t)>=0&&(e[n+1]=GE(e[n+1]))}function uV(i,t,e,n){let r=i[e+1],o=t===null,s=n?Tu(r):xm(r),a=!1;for(;s!==0&&(a===!1||o);){let c=i[s],l=i[s+1];mne(c,t)&&(a=!0,i[s+1]=n?GE(l):$E(l)),s=n?Tu(l):xm(l)}a&&(i[e+1]=n?$E(r):GE(r))}function mne(i,t){return i===null||t==null||(Array.isArray(i)?i[1]:i)===t?!0:Array.isArray(i)&&typeof t=="string"?ig(i,t)>=0:!1}var Qs={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function pne(i){return i.substring(Qs.key,Qs.keyEnd)}function fne(i){return gne(i),FU(i,LU(i,0,Qs.textEnd))}function FU(i,t){let e=Qs.textEnd;return e===t?-1:(t=Qs.keyEnd=_ne(i,Qs.key=t,e),LU(i,t,e))}function gne(i){Qs.key=0,Qs.keyEnd=0,Qs.value=0,Qs.valueEnd=0,Qs.textEnd=i.length}function LU(i,t,e){for(;t<e&&i.charCodeAt(t)<=32;)t++;return t}function _ne(i,t,e){for(;t<e&&i.charCodeAt(t)>32;)t++;return t}function q(i,t,e){let n=qt(),r=ql();if(zo(n,r,t)){let o=Nn(),s=sg();Kv(o,s,n,i,t,n[On],e,!1)}return q}function WE(i,t,e,n,r){let o=t.inputs,s=r?"class":"style";VT(i,e,o[s],s,n)}function $n(i,t,e){return VU(i,t,e,!1),$n}function qe(i,t){return VU(i,t,null,!0),qe}function Hr(i){UU(Mne,BU,i,!0)}function BU(i,t){for(let e=fne(t);e>=0;e=FU(t,e))Ov(i,pne(t),!0)}function VU(i,t,e,n){let r=qt(),o=Nn(),s=Vv(2);if(o.firstUpdatePass&&HU(o,i,s,n),t!==as&&zo(r,s,t)){let a=o.data[$a()];jU(o,a,r,r[On],i,r[s+1]=Sne(t,e),n,s)}}function UU(i,t,e,n){let r=Nn(),o=Vv(2);r.firstUpdatePass&&HU(r,null,o,n);let s=qt();if(e!==as&&zo(s,o,e)){let a=r.data[$a()];if($U(a,n)&&!zU(r,o)){let c=n?a.classesWithoutHost:a.stylesWithoutHost;c!==null&&(e=tE(c,e||"")),WE(r,a,s,e,n)}else Cne(r,a,s,s[On],s[o+1],s[o+1]=wne(i,t,e),n,o)}}function zU(i,t){return t>=i.expandoStartIndex}function HU(i,t,e,n){let r=i.data;if(r[e+1]===null){let o=r[$a()],s=zU(i,e);$U(o,n)&&t===null&&!s&&(t=!1),t=bne(r,o,t,n),une(r,o,t,e,s,n)}}function bne(i,t,e,n){let r=CT(i),o=n?t.residualClasses:t.residualStyles;if(r===null)(n?t.classBindings:t.styleBindings)===0&&(e=Z1(null,i,t,e,n),e=eg(e,t.attrs,n),o=null);else{let s=t.directiveStylingLast;if(s===-1||i[s]!==r)if(e=Z1(r,i,t,e,n),o===null){let c=vne(i,t,n);c!==void 0&&Array.isArray(c)&&(c=Z1(null,i,t,c[1],n),c=eg(c,t.attrs,n),yne(i,t,n,c))}else o=xne(i,t,n)}return o!==void 0&&(n?t.residualClasses=o:t.residualStyles=o),e}function vne(i,t,e){let n=e?t.classBindings:t.styleBindings;if(xm(n)!==0)return i[Tu(n)]}function yne(i,t,e,n){let r=e?t.classBindings:t.styleBindings;i[Tu(r)]=n}function xne(i,t,e){let n,r=t.directiveEnd;for(let o=1+t.directiveStylingLast;o<r;o++){let s=i[o].hostAttrs;n=eg(n,s,e)}return eg(n,t.attrs,e)}function Z1(i,t,e,n,r){let o=null,s=e.directiveEnd,a=e.directiveStylingLast;for(a===-1?a=e.directiveStart:a++;a<s&&(o=t[a],n=eg(n,o.hostAttrs,r),o!==i);)a++;return i!==null&&(e.directiveStylingLast=a),n}function eg(i,t,e){let n=e?1:2,r=-1;if(t!==null)for(let o=0;o<t.length;o++){let s=t[o];typeof s=="number"?r=s:r===n&&(Array.isArray(i)||(i=i===void 0?[]:["",i]),Ov(i,s,e?!0:t[++o]))}return i===void 0?null:i}function wne(i,t,e){if(e==null||e==="")return Uo;let n=[],r=ta(e);if(Array.isArray(r))for(let o=0;o<r.length;o++)i(n,r[o],!0);else if(typeof r=="object")for(let o in r)r.hasOwnProperty(o)&&i(n,o,r[o]);else typeof r=="string"&&t(n,r);return n}function Mne(i,t,e){let n=String(t);n!==""&&!n.includes(" ")&&Ov(i,n,e)}function Cne(i,t,e,n,r,o,s,a){r===as&&(r=Uo);let c=0,l=0,d=0<r.length?r[0]:null,u=0<o.length?o[0]:null;for(;d!==null||u!==null;){let h=c<r.length?r[c+1]:void 0,m=l<o.length?o[l+1]:void 0,p=null,_;d===u?(c+=2,l+=2,h!==m&&(p=u,_=m)):u===null||d!==null&&d<u?(c+=2,p=d):(l+=2,p=u,_=m),p!==null&&jU(i,t,e,n,p,_,s,a),d=c<r.length?r[c]:null,u=l<o.length?o[l]:null}}function jU(i,t,e,n,r,o,s,a){if(!(t.type&3))return;let c=i.data,l=c[a+1],d=dne(l)?hV(c,t,e,r,xm(l),s):void 0;if(!Tv(d)){Tv(o)||cne(l)&&(o=hV(c,null,e,r,a,s));let u=i4($a(),e);fte(n,s,u,r,o)}}function hV(i,t,e,n,r,o){let s=t===null,a;for(;r>0;){let c=i[r],l=Array.isArray(c),d=l?c[1]:c,u=d===null,h=e[r+1];h===as&&(h=u?Uo:void 0);let m=u?U1(h,n):d===n?h:void 0;if(l&&!Tv(m)&&(m=U1(c,n)),Tv(m)&&(a=m,s))return a;let p=i[r+1];r=s?Tu(p):xm(p)}if(t!==null){let c=o?t.residualClasses:t.residualStyles;c!=null&&(a=U1(c,n))}return a}function Tv(i){return i!==void 0}function Sne(i,t){return i==null||i===""||(typeof t=="string"?i=i+t:typeof i=="object"&&(i=yo(ta(i)))),i}function $U(i,t){return(i.flags&(t?8:16))!==0}function GU(i,t,e){let n=qt(),r=RU(n,i,t,e);UU(Ov,BU,r,!0)}var qE=class{destroy(t){}updateValue(t,e){}swap(t,e){let n=Math.min(t,e),r=Math.max(t,e),o=this.detach(r);if(r-n>1){let s=this.detach(n);this.attach(n,o),this.attach(r,s)}else this.attach(n,o)}move(t,e){this.attach(e,this.detach(t))}};function K1(i,t,e,n,r){return i===e&&Object.is(t,n)?1:Object.is(r(i,t),r(e,n))?-1:0}function Ene(i,t,e){let n,r,o=0,s=i.length-1;if(Array.isArray(t)){let a=t.length-1;for(;o<=s&&o<=a;){let c=i.at(o),l=t[o],d=K1(o,c,o,l,e);if(d!==0){d<0&&i.updateValue(o,l),o++;continue}let u=i.at(s),h=t[a],m=K1(s,u,a,h,e);if(m!==0){m<0&&i.updateValue(s,h),s--,a--;continue}let p=e(o,c),_=e(s,u),f=e(o,l);if(Object.is(f,_)){let g=e(a,h);Object.is(g,p)?(i.swap(o,s),i.updateValue(s,h),a--,s--):i.move(s,o),i.updateValue(o,l),o++;continue}if(n??=new Iv,r??=pV(i,o,s,e),XE(i,n,o,f))i.updateValue(o,l),o++,s++;else if(r.has(f))n.set(p,i.detach(o)),s--;else{let g=i.create(o,t[o]);i.attach(o,g),o++,s++}}for(;o<=a;)mV(i,n,e,o,t[o]),o++}else if(t!=null){let a=t[Symbol.iterator](),c=a.next();for(;!c.done&&o<=s;){let l=i.at(o),d=c.value,u=K1(o,l,o,d,e);if(u!==0)u<0&&i.updateValue(o,d),o++,c=a.next();else{n??=new Iv,r??=pV(i,o,s,e);let h=e(o,d);if(XE(i,n,o,h))i.updateValue(o,d),o++,s++,c=a.next();else if(!r.has(h))i.attach(o,i.create(o,d)),o++,s++,c=a.next();else{let m=e(o,l);n.set(m,i.detach(o)),s--}}}for(;!c.done;)mV(i,n,e,i.length,c.value),c=a.next()}for(;o<=s;)i.destroy(i.detach(s--));n?.forEach(a=>{i.destroy(a)})}function XE(i,t,e,n){return t!==void 0&&t.has(n)?(i.attach(e,t.get(n)),t.delete(n),!0):!1}function mV(i,t,e,n,r){if(XE(i,t,n,e(n,r)))i.updateValue(n,r);else{let o=i.create(n,r);i.attach(n,o)}}function pV(i,t,e,n){let r=new Set;for(let o=t;o<=e;o++)r.add(n(o,i.at(o)));return r}var Iv=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(t){return this.kvMap.has(t)}delete(t){if(!this.has(t))return!1;let e=this.kvMap.get(t);return this._vMap!==void 0&&this._vMap.has(e)?(this.kvMap.set(t,this._vMap.get(e)),this._vMap.delete(e)):this.kvMap.delete(t),!0}get(t){return this.kvMap.get(t)}set(t,e){if(this.kvMap.has(t)){let n=this.kvMap.get(t);this._vMap===void 0&&(this._vMap=new Map);let r=this._vMap;for(;r.has(n);)n=r.get(n);r.set(n,e)}else this.kvMap.set(t,e)}forEach(t){for(let[e,n]of this.kvMap)if(t(n,e),this._vMap!==void 0){let r=this._vMap;for(;r.has(n);)n=r.get(n),t(n,e)}}};function Zt(i,t,e){Tm("NgControlFlow");let n=qt(),r=ql(),o=QE(n,Ir+i),s=0;if(zo(n,r,t)){let a=Ni(null);try{if(yU(o,s),t!==-1){let c=JE(n[ni],Ir+t),l=Kf(o,c.tView.ssrId),d=Jv(n,c,e,{dehydratedView:l});ey(o,d,s,Zf(c,l))}}finally{Ni(a)}}else{let a=vU(o,s);a!==void 0&&(a[Yr]=e)}}var YE=class{constructor(t,e,n){this.lContainer=t,this.$implicit=e,this.$index=n}get $count(){return this.lContainer.length-Zr}};function dg(i,t){return t}var ZE=class{constructor(t,e,n){this.hasEmptyBlock=t,this.trackByFn=e,this.liveCollection=n}};function ug(i,t,e,n,r,o,s,a,c,l,d,u,h){Tm("NgControlFlow");let m=c!==void 0,p=qt(),_=a?s.bind(p[Es][Yr]):s,f=new ZE(m,_);p[Ir+i]=f,ve(i+1,t,e,n,r,o),m&&ve(i+2,c,l,d,u,h)}var KE=class extends qE{constructor(t,e,n){super(),this.lContainer=t,this.hostLView=e,this.templateTNode=n,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-Zr}at(t){return this.getLView(t)[Yr].$implicit}attach(t,e){let n=e[gm];this.needsIndexUpdate||=t!==this.length,ey(this.lContainer,e,t,Zf(this.templateTNode,n))}detach(t){return this.needsIndexUpdate||=t!==this.length-1,Tne(this.lContainer,t)}create(t,e){let n=Kf(this.lContainer,this.templateTNode.tView.ssrId);return Jv(this.hostLView,this.templateTNode,new YE(this.lContainer,e,t),{dehydratedView:n})}destroy(t){Wv(t[ni],t)}updateValue(t,e){this.getLView(t)[Yr].$implicit=e}reset(){this.needsIndexUpdate=!1}updateIndexes(){if(this.needsIndexUpdate)for(let t=0;t<this.length;t++)this.getLView(t)[Yr].$index=t}getLView(t){return Ine(this.lContainer,t)}};function hg(i){let t=Ni(null),e=$a();try{let n=qt(),r=n[ni],o=n[e];if(o.liveCollection===void 0){let a=e+1,c=QE(n,a),l=JE(r,a);o.liveCollection=new KE(c,n,l)}else o.liveCollection.reset();let s=o.liveCollection;if(Ene(s,i,o.trackByFn),s.updateIndexes(),o.hasEmptyBlock){let a=ql(),c=s.length===0;if(zo(n,a,c)){let l=e+2,d=QE(n,l);if(c){let u=JE(r,l),h=Kf(d,u.tView.ssrId),m=Jv(n,u,void 0,{dehydratedView:h});ey(d,m,0,Zf(u,h))}else yU(d,0)}}}finally{Ni(t)}}function QE(i,t){return i[t]}function Tne(i,t){return Yf(i,t)}function Ine(i,t){return vU(i,t)}function JE(i,t){return vT(i,t)}function Dne(i,t,e,n,r,o){let s=t.consts,a=vm(s,r),c=Em(t,i,2,n,a);return BT(t,e,c,vm(s,o)),c.attrs!==null&&xv(c,c.attrs,!1),c.mergedAttrs!==null&&xv(c,c.mergedAttrs,!0),t.queries!==null&&t.queries.elementStart(t,c),c}function b(i,t,e,n){let r=qt(),o=Nn(),s=Ir+i,a=r[On],c=o.firstCreatePass?Dne(s,o,r,t,e,n):o.data[s],l=kne(o,r,c,a,t,i);r[s]=l;let d=Lv(c);return Du(c,!0),oU(a,l,c),!ine(c)&&Uv()&&qv(o,r,l,c),FJ()===0&&$l(l,r),LJ(),d&&(RT(o,r,c),NT(o,c,r)),n!==null&&FT(r,c),b}function v(){let i=Ur();wT()?MT():(i=i.parent,Du(i,!1));let t=i;VJ(t)&&UJ(),BJ();let e=Nn();return e.firstCreatePass&&(Hv(e,i),bT(i)&&e.queries.elementEnd(i)),t.classesWithoutHost!=null&&eee(t)&&WE(e,t,qt(),t.classesWithoutHost,!0),t.stylesWithoutHost!=null&&tee(t)&&WE(e,t,qt(),t.stylesWithoutHost,!1),v}function Fe(i,t,e,n){return b(i,t,e,n),v(),Fe}var kne=(i,t,e,n,r,o)=>(zv(!0),Z4(n,r,ZJ()));function Ane(i,t,e,n,r){let o=t.consts,s=vm(o,n),a=Em(t,i,8,"ng-container",s);s!==null&&xv(a,s,!0);let c=vm(o,r);return BT(t,e,a,c),t.queries!==null&&t.queries.elementStart(t,a),a}function Mo(i,t,e){let n=qt(),r=Nn(),o=i+Ir,s=r.firstCreatePass?Ane(o,r,n,t,e):r.data[o];Du(s,!0);let a=Pne(r,n,s,i);return n[o]=a,Uv()&&qv(r,n,a,s),$l(a,n),Lv(s)&&(RT(r,n,s),NT(r,s,n)),e!=null&&FT(n,s),Mo}function Co(){let i=Ur(),t=Nn();return wT()?MT():(i=i.parent,Du(i,!1)),t.firstCreatePass&&(Hv(t,i),bT(i)&&t.queries.elementEnd(i)),Co}function vr(i,t,e){return Mo(i,t,e),Co(),vr}var Pne=(i,t,e,n)=>(zv(!0),Jee(t[On],""));function ot(){return qt()}function Ds(i,t,e){let n=qt(),r=ql();if(zo(n,r,t)){let o=Nn(),s=sg();Kv(o,s,n,i,t,n[On],e,!0)}return Ds}function XT(i,t,e){let n=qt(),r=ql();if(zo(n,r,t)){let o=Nn(),s=sg(),a=CT(o.data),c=_U(a,s,n);Kv(o,s,n,i,t,c,e,!0)}return XT}var _u=void 0;function One(i){let t=i,e=Math.floor(Math.abs(i)),n=i.toString().replace(/^[^.]*\.?/,"").length;return e===1&&n===0?1:5}var Nne=["en",[["a","p"],["AM","PM"],_u],[["AM","PM"],_u,_u],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],_u,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],_u,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",_u,"{1} 'at' {0}",_u],[".",",",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0%","\xA4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",One],Q1={};function cs(i){let t=Rne(i),e=fV(t);if(e)return e;let n=t.split("-")[0];if(e=fV(n),e)return e;if(n==="en")return Nne;throw new pt(701,!1)}function fV(i){return i in Q1||(Q1[i]=Qn.ng&&Qn.ng.common&&Qn.ng.common.locales&&Qn.ng.common.locales[i]),Q1[i]}var Gn=function(i){return i[i.LocaleId=0]="LocaleId",i[i.DayPeriodsFormat=1]="DayPeriodsFormat",i[i.DayPeriodsStandalone=2]="DayPeriodsStandalone",i[i.DaysFormat=3]="DaysFormat",i[i.DaysStandalone=4]="DaysStandalone",i[i.MonthsFormat=5]="MonthsFormat",i[i.MonthsStandalone=6]="MonthsStandalone",i[i.Eras=7]="Eras",i[i.FirstDayOfWeek=8]="FirstDayOfWeek",i[i.WeekendRange=9]="WeekendRange",i[i.DateFormat=10]="DateFormat",i[i.TimeFormat=11]="TimeFormat",i[i.DateTimeFormat=12]="DateTimeFormat",i[i.NumberSymbols=13]="NumberSymbols",i[i.NumberFormats=14]="NumberFormats",i[i.CurrencyCode=15]="CurrencyCode",i[i.CurrencySymbol=16]="CurrencySymbol",i[i.CurrencyName=17]="CurrencyName",i[i.Currencies=18]="Currencies",i[i.Directionality=19]="Directionality",i[i.PluralCase=20]="PluralCase",i[i.ExtraData=21]="ExtraData",i}(Gn||{});function Rne(i){return i.toLowerCase().replace(/_/g,"-")}var Dv="en-US";var Fne=Dv;function Lne(i){typeof i=="string"&&(Fne=i.toLowerCase().replace(/_/g,"-"))}function ne(i,t,e,n){let r=qt(),o=Nn(),s=Ur();return ZT(o,r,r[On],s,i,t,n),ne}function YT(i,t){let e=Ur(),n=qt(),r=Nn(),o=CT(r.data),s=_U(o,e,n);return ZT(r,n,s,e,i,t),YT}function Bne(i,t,e,n){let r=i.cleanup;if(r!=null)for(let o=0;o<r.length-1;o+=2){let s=r[o];if(s===e&&r[o+1]===n){let a=t[Gf],c=r[o+2];return a.length>c?a[c]:null}typeof s=="string"&&(o+=2)}return null}function ZT(i,t,e,n,r,o,s){let a=Lv(n),l=i.firstCreatePass&&gU(i),d=t[Yr],u=fU(t),h=!0;if(n.type&3||s){let _=Is(n,t),f=s?s(_):_,g=u.length,S=s?E=>s(Ha(E[n.index])):n.index,C=null;if(!s&&a&&(C=Bne(i,t,r,n.index)),C!==null){let E=C.__ngLastListenerFn__||C;E.__ngNextListenerFn__=o,C.__ngLastListenerFn__=o,h=!1}else{o=_V(n,t,d,o,!1);let E=e.listen(f,r,o);u.push(o,E),l&&l.push(r,S,g,g+1)}}else o=_V(n,t,d,o,!1);let m=n.outputs,p;if(h&&m!==null&&(p=m[r])){let _=p.length;if(_)for(let f=0;f<_;f+=2){let g=p[f],S=p[f+1],N=t[g][S].subscribe(o),R=u.length;u.push(o,N),l&&l.push(r,n.index,R,-(R+1))}}}function gV(i,t,e,n){let r=Ni(null);try{return Va(6,t,e),e(n)!==!1}catch(o){return bU(i,o),!1}finally{Va(7,t,e),Ni(r)}}function _V(i,t,e,n,r){return function o(s){if(s===Function)return n;let a=i.componentOffset>-1?Wl(i.index,t):t;HT(a);let c=gV(t,e,n,s),l=o.__ngNextListenerFn__;for(;l;)c=gV(t,e,l,s)&&c,l=l.__ngNextListenerFn__;return r&&c===!1&&s.preventDefault(),c}}function G(i=1){return XJ(i)}function Vne(i,t){let e=null,n=eJ(i);for(let r=0;r<t.length;r++){let o=t[r];if(o==="*"){e=r;continue}if(n===null?LV(i,o,!0):nJ(n,o))return r}return e}function Oi(i){let t=qt()[Es][ss];if(!t.projection){let e=i?i.length:1,n=t.projection=GQ(e,null),r=n.slice(),o=t.child;for(;o!==null;){let s=i?Vne(o,i):0;s!==null&&(r[s]?r[s].projectionNext=o:n[s]=o,r[s]=o),o=o.next}}}function dt(i,t=0,e){let n=qt(),r=Nn(),o=Em(r,Ir+i,16,null,e||null);o.projection===null&&(o.projection=t),MT(),(!n[gm]||s4())&&(o.flags&32)!==32&&mte(r,n,o)}function ri(i,t,e,n){Lie(i,t,e,n)}function Lt(i,t,e){Fie(i,t,e)}function Be(i){let t=qt(),e=Nn(),n=l4();ST(n+1);let r=GT(e,n);if(i.dirty&&AJ(t)===((r.metadata.flags&2)===2)){if(r.matches===null)i.reset([]);else{let o=Uie(t,n);i.reset(o,pee),i.notifyOnChanges()}return!0}return!1}function Ve(){return Rie(qt(),l4())}function Une(i,t,e,n){e>=i.data.length&&(i.data[e]=null,i.blueprint[e]=null),t[e]=n}function So(i){let t=HJ();return Bv(t,Ir+i)}function M(i,t=""){let e=qt(),n=Nn(),r=i+Ir,o=n.firstCreatePass?Em(n,r,1,t,null):n.data[r],s=zne(n,e,o,t,i);e[r]=s,Uv()&&qv(n,e,s,o),Du(o,!1)}var zne=(i,t,e,n,r)=>(zv(!0),Kee(t[On],n));function ft(i){return gt("",i,""),ft}function gt(i,t,e){let n=qt(),r=RU(n,i,t,e);return r!==as&&UT(n,$a(),r),gt}function Dr(i,t,e,n,r){let o=qt(),s=sne(o,i,t,e,n,r);return s!==as&&UT(o,$a(),s),Dr}function mg(i,t,e,n,r,o,s){let a=qt(),c=ane(a,i,t,e,n,r,o,s);return c!==as&&UT(a,$a(),c),mg}function ui(i,t,e){PU(t)&&(t=t());let n=qt(),r=ql();if(zo(n,r,t)){let o=Nn(),s=sg();Kv(o,s,n,i,t,n[On],e,!1)}return ui}function gi(i,t){let e=PU(i);return e&&i.set(t),e}function hi(i,t){let e=qt(),n=Nn(),r=Ur();return ZT(n,e,e[On],r,i,t),hi}function Hne(i,t,e){let n=Nn();if(n.firstCreatePass){let r=Oc(i);eT(e,n.data,n.blueprint,r,!0),eT(t,n.data,n.blueprint,r,!1)}}function eT(i,t,e,n,r){if(i=vo(i),Array.isArray(i))for(let o=0;o<i.length;o++)eT(i[o],t,e,n,r);else{let o=Nn(),s=qt(),a=Ur(),c=fm(i)?i:vo(i.provide),l=qV(i),d=a.providerIndexes&1048575,u=a.directiveStart,h=a.providerIndexes>>20;if(fm(i)||!i.multi){let m=new Cu(l,r,F),p=eE(c,t,r?d:d+h,u);p===-1?(mE(gv(a,s),o,c),J1(o,i,t.length),t.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(m),s.push(m)):(e[p]=m,s[p]=m)}else{let m=eE(c,t,d+h,u),p=eE(c,t,d,d+h),_=m>=0&&e[m],f=p>=0&&e[p];if(r&&!f||!r&&!_){mE(gv(a,s),o,c);let g=Gne(r?$ne:jne,e.length,r,n,l);!r&&f&&(e[p].providerFactory=g),J1(o,i,t.length,0),t.push(c),a.directiveStart++,a.directiveEnd++,r&&(a.providerIndexes+=1048576),e.push(g),s.push(g)}else{let g=WU(e[r?p:m],l,!r&&n);J1(o,i,m>-1?m:p,g)}!r&&n&&f&&e[p].componentProviders++}}}function J1(i,t,e,n){let r=fm(t),o=pJ(t);if(r||o){let c=(o?vo(t.useClass):t).prototype.ngOnDestroy;if(c){let l=i.destroyHooks||(i.destroyHooks=[]);if(!r&&t.multi){let d=l.indexOf(e);d===-1?l.push(e,[n,c]):l[d+1].push(n,c)}else l.push(e,c)}}}function WU(i,t,e){return e&&i.componentProviders++,i.multi.push(t)-1}function eE(i,t,e,n){for(let r=e;r<n;r++)if(t[r]===i)return r;return-1}function jne(i,t,e,n){return tT(this.multi,[])}function $ne(i,t,e,n){let r=this.multi,o;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=Su(e,e[ni],this.providerFactory.index,n);o=a.slice(0,s),tT(r,o);for(let c=s;c<a.length;c++)o.push(a[c])}else o=[],tT(r,o);return o}function tT(i,t){for(let e=0;e<i.length;e++){let n=i[e];t.push(n())}return t}function Gne(i,t,e,n,r){let o=new Cu(i,e,F);return o.multi=[],o.index=t,o.componentProviders=0,WU(o,r,n&&!e),o}function Bt(i,t=[]){return e=>{e.providersResolver=(n,r)=>Hne(n,r?r(i):i,t)}}var Wne=(()=>{class i{constructor(e){this._injector=e,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(e){if(!e.standalone)return null;if(!this.cachedInjectors.has(e)){let n=$V(!1,e.type),r=n.length>0?ry([n],this._injector,`Standalone[${e.type.name}]`):null;this.cachedInjectors.set(e,r)}return this.cachedInjectors.get(e)}ngOnDestroy(){try{for(let e of this.cachedInjectors.values())e!==null&&e.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=we({token:i,providedIn:"environment",factory:()=>new i(pe(xo))})}}return i})();function Dt(i){Tm("NgStandalone"),i.getStandaloneInjector=t=>t.get(Wne).getOrCreateStandaloneInjector(i)}function qU(i,t,e,n){return YU(qt(),og(),i,t,e,n)}function XU(i,t,e,n,r){return ZU(qt(),og(),i,t,e,n,r)}function KT(i,t){let e=i[t];return e===as?void 0:e}function YU(i,t,e,n,r,o){let s=t+e;return zo(i,s,r)?WT(i,s+1,o?n.call(o,r):n(r)):KT(i,s+1)}function ZU(i,t,e,n,r,o,s){let a=t+e;return qT(i,a,r,o)?WT(i,a+2,s?n.call(s,r,o):n(r,o)):KT(i,a+2)}function qne(i,t,e,n,r,o,s,a){let c=t+e;return NU(i,c,r,o,s)?WT(i,c+3,a?n.call(a,r,o,s):n(r,o,s)):KT(i,c+3)}function ia(i,t){let e=Nn(),n,r=i+Ir;e.firstCreatePass?(n=Xne(t,e.pipeRegistry),e.data[r]=n,n.onDestroy&&(e.destroyHooks??=[]).push(r,n.onDestroy)):n=e.data[r];let o=n.factory||(n.factory=yu(n.type,!0)),s,a=Vo(F);try{let c=fv(!1),l=o();return fv(c),Une(e,qt(),r,l),l}finally{Vo(a)}}function Xne(i,t){if(t)for(let e=t.length-1;e>=0;e--){let n=t[e];if(i===n.name)return n}}function KU(i,t,e){let n=i+Ir,r=qt(),o=Bv(r,n);return QT(r,n)?YU(r,og(),t,o.transform,e,o):o.transform(e)}function Yl(i,t,e,n){let r=i+Ir,o=qt(),s=Bv(o,r);return QT(o,r)?ZU(o,og(),t,s.transform,e,n,s):s.transform(e,n)}function QU(i,t,e,n,r){let o=i+Ir,s=qt(),a=Bv(s,o);return QT(s,o)?qne(s,og(),t,a.transform,e,n,r,a):a.transform(e,n,r)}function QT(i,t){return i[ni].data[t].pure}function pg(i,t){return ty(i,t)}var ev=null;function Yne(i){ev!==null&&(i.defaultEncapsulation!==ev.defaultEncapsulation||i.preserveWhitespaces!==ev.preserveWhitespaces)||(ev=i)}var oy=(()=>{class i{log(e){console.log(e)}warn(e){console.warn(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();var JT=new _e(""),fg=new _e(""),sy=(()=>{class i{constructor(e,n,r){this._ngZone=e,this.registry=n,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,eI||(Zne(r),r.addToWindow(n)),this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&this._pendingCount===0&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;this._callbacks.length!==0;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb()}});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(n=>n.updateCb&&n.updateCb(e)?(clearTimeout(n.timeoutId),!1):!0)}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,n,r){let o=-1;n&&n>0&&(o=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==o),e()},n)),this._callbacks.push({doneCb:e,timeoutId:o,updateCb:r})}whenStable(e,n,r){if(r&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,n,r),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(e){this.registry.registerApplication(e,this)}unregisterApplication(e){this.registry.unregisterApplication(e)}findProviders(e,n,r){return[]}static{this.\u0275fac=function(n){return new(n||i)(pe(Ne),pe(ay),pe(fg))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})(),ay=(()=>{class i{constructor(){this._applications=new Map}registerApplication(e,n){this._applications.set(e,n)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,n=!0){return eI?.findTestabilityInTree(this,e,n)??null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})();function Zne(i){eI=i}var eI;function Au(i){return!!i&&typeof i.then=="function"}function JU(i){return!!i&&typeof i.subscribe=="function"}var cy=new _e(""),ez=(()=>{class i{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,n)=>{this.resolve=e,this.reject=n}),this.appInits=ye(cy,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let e=[];for(let r of this.appInits){let o=r();if(Au(o))e.push(o);else if(JU(o)){let s=new Promise((a,c)=>{o.subscribe({complete:a,error:c})});e.push(s)}}let n=()=>{this.done=!0,this.resolve()};Promise.all(e).then(()=>{n()}).catch(r=>{this.reject(r)}),e.length===0&&n(),this.initialized=!0}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),tI=new _e("");function Kne(){oB(()=>{throw new pt(600,!1)})}function Qne(i){return i.isBoundToModule}function Jne(i,t,e){try{let n=e();return Au(n)?n.catch(r=>{throw t.runOutsideAngular(()=>i.handleError(r)),r}):n}catch(n){throw t.runOutsideAngular(()=>i.handleError(n)),n}}function tz(i,t){return Array.isArray(t)?t.reduce(tz,i):ge(ge({},i),t)}var Zl=(()=>{class i{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=ye(T4),this.afterRenderEffectManager=ye($T),this.externalTestViews=new Set,this.beforeRender=new Le,this.afterTick=new Le,this.componentTypes=[],this.components=[],this.isStable=ye(lg).hasPendingTasks.pipe(Et(e=>!e)),this._injector=ye(xo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(e,n){let r=e instanceof yv;if(!this._injector.get(ez).done){let h=!r&&UV(e),m=!1;throw new pt(405,m)}let s;r?s=e:s=this._injector.get(Wa).resolveComponentFactory(e),this.componentTypes.push(s.componentType);let a=Qne(s)?void 0:this._injector.get(Gl),c=n||s.selector,l=s.create(Jn.NULL,[],c,a),d=l.location.nativeElement,u=l.injector.get(JT,null);return u?.registerApplication(d),l.onDestroy(()=>{this.detachView(l.hostView),av(this.components,l),u?.unregisterApplication(d)}),this._loadComponent(l),l}tick(){this._tick(!0)}_tick(e){if(this._runningTick)throw new pt(101,!1);let n=Ni(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(e)}catch(r){this.internalErrorHandler(r)}finally{this.afterTick.next(),this._runningTick=!1,Ni(n)}}detectChangesInAttachedViews(e){let n=0,r=this.afterRenderEffectManager;for(;;){if(n===wU)throw new pt(103,!1);if(e){let o=n===0;this.beforeRender.next(o);for(let{_lView:s,notifyErrorHandler:a}of this._views)ere(s,o,a)}if(n++,r.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>iT(o))&&(r.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:o})=>iT(o))))break}}attachView(e){let n=e;this._views.push(n),n.attachToAppRef(this)}detachView(e){let n=e;av(this._views,n),n.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e);let n=this._injector.get(tI,[]);[...this._bootstrapListeners,...n].forEach(r=>r(e))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(e=>e()),this._views.slice().forEach(e=>e.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(e){return this._destroyListeners.push(e),()=>av(this._destroyListeners,e)}destroy(){if(this._destroyed)throw new pt(406,!1);let e=this._injector;e.destroy&&!e.destroyed&&e.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function av(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function ere(i,t,e){!t&&!iT(i)||tre(i,e,t)}function iT(i){return xT(i)}function tre(i,t,e){let n;e?(n=0,i[Wt]|=1024):i[Wt]&64?n=0:n=1,MU(i,t,n)}var nT=class{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}},ly=(()=>{class i{compileModuleSync(e){return new Ev(e)}compileModuleAsync(e){return Promise.resolve(this.compileModuleSync(e))}compileModuleAndAllComponentsSync(e){let n=this.compileModuleSync(e),r=zV(e),o=Y4(r.declarations).reduce((s,a)=>{let c=jl(a);return c&&s.push(new ym(c)),s},[]);return new nT(n,o)}compileModuleAndAllComponentsAsync(e){return Promise.resolve(this.compileModuleAndAllComponentsSync(e))}clearCache(){}clearCacheFor(e){}getModuleId(e){}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ire=new _e("");function nre(i,t,e){let n=new Ev(e);return Promise.resolve(n)}function bV(i){for(let t=i.length-1;t>=0;t--)if(i[t]!==void 0)return i[t]}var rre=(()=>{class i{constructor(){this.zone=ye(Ne),this.applicationRef=ye(Zl)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function ore(i){return[{provide:Ne,useFactory:i},{provide:pm,multi:!0,useFactory:()=>{let t=ye(rre,{optional:!0});return()=>t.initialize()}},{provide:pm,multi:!0,useFactory:()=>{let t=ye(cre);return()=>{t.initialize()}}},{provide:T4,useFactory:sre}]}function sre(){let i=ye(Ne),t=ye(wo);return e=>i.runOutsideAngular(()=>t.handleError(e))}function are(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:i?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:i?.runCoalescing??!1}}var cre=(()=>{class i{constructor(){this.subscription=new Yt,this.initialized=!1,this.zone=ye(Ne),this.pendingTasks=ye(lg)}initialize(){if(this.initialized)return;this.initialized=!0;let e=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(e=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Ne.assertNotInAngularZone(),queueMicrotask(()=>{e!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(e),e=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Ne.assertInAngularZone(),e??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function lre(){return typeof $localize<"u"&&$localize.locale||Dv}var Im=new _e("",{providedIn:"root",factory:()=>ye(Im,Ti.Optional|Ti.SkipSelf)||lre()});var iz=new _e(""),nz=(()=>{class i{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,n){let r=pie(n?.ngZone,are({eventCoalescing:n?.ngZoneEventCoalescing,runCoalescing:n?.ngZoneRunCoalescing}));return r.run(()=>{let o=Jie(e.moduleType,this.injector,ore(()=>r)),s=o.injector.get(wo,null);return r.runOutsideAngular(()=>{let a=r.onError.subscribe({next:c=>{s.handleError(c)}});o.onDestroy(()=>{av(this._modules,o),a.unsubscribe()})}),Jne(s,r,()=>{let a=o.injector.get(ez);return a.runInitializers(),a.donePromise.then(()=>{let c=o.injector.get(Im,Dv);return Lne(c||Dv),this._moduleDoBootstrap(o),o})})})}bootstrapModule(e,n=[]){let r=tz({},n);return nre(this.injector,r,e).then(o=>this.bootstrapModuleFactory(o,r))}_moduleDoBootstrap(e){let n=e.injector.get(Zl);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(r=>n.bootstrap(r));else if(e.instance.ngDoBootstrap)e.instance.ngDoBootstrap(n);else throw new pt(-403,!1);this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new pt(404,!1);this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n());let e=this._injector.get(iz,null);e&&(e.forEach(n=>n()),e.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}static{this.\u0275fac=function(n){return new(n||i)(pe(Jn))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"platform"})}}return i})(),zf=null,rz=new _e("");function dre(i){if(zf&&!zf.get(rz,!1))throw new pt(400,!1);Kne(),zf=i;let t=i.get(nz);return mre(i),t}function iI(i,t,e=[]){let n=`Platform: ${t}`,r=new _e(n);return(o=[])=>{let s=oz();if(!s||s.injector.get(rz,!1)){let a=[...e,...o,{provide:r,useValue:!0}];i?i(a):dre(ure(a,n))}return hre(r)}}function ure(i=[],t){return Jn.create({name:t,providers:[{provide:Nv,useValue:"platform"},{provide:iz,useValue:new Set([()=>zf=null])},...i]})}function hre(i){let t=oz();if(!t)throw new pt(401,!1);return t}function oz(){return zf?.get(nz)??null}function mre(i){i.get(DT,null)?.forEach(e=>e())}var ci=(()=>{class i{static{this.__NG_ELEMENT_ID__=pre}}return i})();function pre(i){return fre(Ur(),qt(),(i&16)===16)}function fre(i,t,e){if(Fv(i)&&!e){let n=Wl(i.index,t);return new Eu(n,n)}else if(i.type&47){let n=t[Es];return new Eu(n,t)}return null}var rT=class{constructor(){}supports(t){return OU(t)}create(t){return new oT(t)}},gre=(i,t)=>t,oT=class{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||gre}forEachItem(t){let e;for(e=this._itHead;e!==null;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,o=null;for(;e||n;){let s=!n||e&&e.currentIndex<vV(n,r,o)?e:n,a=vV(s,r,o),c=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(e=e._next,s.previousIndex==null)r++;else{o||(o=[]);let l=a-r,d=c-r;if(l!=d){for(let h=0;h<l;h++){let m=h<o.length?o[h]:o[h]=0,p=m+h;d<=p&&p<l&&(o[h]=m+1)}let u=s.previousIndex;o[u]=d-l}}a!==c&&t(s,a,c)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;e!==null;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;e!==null;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;e!==null;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;e!==null;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;e!==null;e=e._nextIdentityChange)t(e)}diff(t){if(t==null&&(t=[]),!OU(t))throw new pt(900,!1);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._itHead,n=!1,r,o,s;if(Array.isArray(t)){this.length=t.length;for(let a=0;a<this.length;a++)o=t[a],s=this._trackByFn(a,o),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,o,s,a),n=!0):(n&&(e=this._verifyReinsertion(e,o,s,a)),Object.is(e.item,o)||this._addIdentityChange(e,o)),e=e._next}else r=0,ene(t,a=>{s=this._trackByFn(r,a),e===null||!Object.is(e.trackById,s)?(e=this._mismatch(e,a,s,r),n=!0):(n&&(e=this._verifyReinsertion(e,a,s,r)),Object.is(e.item,a)||this._addIdentityChange(e,a)),e=e._next,r++}),this.length=r;return this._truncate(e),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,o,r)):(t=this._linkedRecords===null?null:this._linkedRecords.get(n,r),t!==null?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,o,r)):t=this._addAfter(new sT(e,n),o,r)),t}_verifyReinsertion(t,e,n,r){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return o!==null?t=this._reinsertAfter(o,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;t!==null;){let e=t._next;this._addToRemovals(this._unlink(t)),t=e}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);let r=t._prevRemoved,o=t._nextRemoved;return r===null?this._removalsHead=o:r._nextRemoved=o,o===null?this._removalsTail=r:o._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){let r=e===null?this._itHead:e._next;return t._next=r,t._prev=e,r===null?this._itTail=t:r._prev=t,e===null?this._itHead=t:e._next=t,this._linkedRecords===null&&(this._linkedRecords=new kv),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);let e=t._prev,n=t._next;return e===null?this._itHead=n:e._next=n,n===null?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new kv),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}},sT=class{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},aT=class{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;n!==null;n=n._nextDup)if((e===null||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){let e=t._prevDup,n=t._nextDup;return e===null?this._head=n:e._nextDup=n,n===null?this._tail=e:n._prevDup=e,this._head===null}},kv=class{constructor(){this.map=new Map}put(t){let e=t.trackById,n=this.map.get(e);n||(n=new aT,this.map.set(e,n)),n.add(t)}get(t,e){let n=t,r=this.map.get(n);return r?r.get(t,e):null}remove(t){let e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function vV(i,t,e){let n=i.previousIndex;if(n===null)return n;let r=0;return e&&n<e.length&&(r=e[n]),n+t+r}function yV(){return new qa([new rT])}var qa=(()=>{class i{static{this.\u0275prov=we({token:i,providedIn:"root",factory:yV})}constructor(e){this.factories=e}static create(e,n){if(n!=null){let r=n.factories.slice();e=e.concat(r)}return new i(e)}static extend(e){return{provide:i,useFactory:n=>i.create(e,n||yV()),deps:[[i,new wm,new Iu]]}}find(e){let n=this.factories.find(r=>r.supports(e));if(n!=null)return n;throw new pt(901,!1)}}return i})();var sz=iI(null,"core",[]),az=(()=>{class i{constructor(e){}static{this.\u0275fac=function(n){return new(n||i)(pe(Zl))}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})();function Je(i){return typeof i=="boolean"?i:i!=null&&i!=="false"}function on(i,t=NaN){return!isNaN(parseFloat(i))&&!isNaN(Number(i))?Number(i):t}var _re=new _e("",{providedIn:"root",factory:()=>ye(bre)}),bre=(()=>{class i{static{this.\u0275prov=we({token:i,providedIn:"root",factory:()=>new cT})}}return i})(),cT=class{constructor(){this.queuedEffectCount=0,this.queues=new Map,this.pendingTasks=ye(lg),this.taskId=null}scheduleEffect(t){if(this.enqueue(t),this.taskId===null){let e=this.taskId=this.pendingTasks.add();queueMicrotask(()=>{this.flush(),this.pendingTasks.remove(e),this.taskId=null})}}enqueue(t){let e=t.creationZone;this.queues.has(e)||this.queues.set(e,new Set);let n=this.queues.get(e);n.has(t)||(this.queuedEffectCount++,n.add(t))}flush(){for(;this.queuedEffectCount>0;)for(let[t,e]of this.queues)t===null?this.flushQueue(e):t.run(()=>this.flushQueue(e))}flushQueue(t){for(let e of t)t.delete(e),this.queuedEffectCount--,e.run()}},lT=class{constructor(t,e,n,r,o,s){this.scheduler=t,this.effectFn=e,this.creationZone=n,this.injector=o,this.watcher=sB(a=>this.runEffect(a),()=>this.schedule(),s),this.unregisterOnDestroy=r?.onDestroy(()=>this.destroy())}runEffect(t){try{this.effectFn(t)}catch(e){this.injector.get(wo,null,{optional:!0})?.handleError(e)}}run(){this.watcher.run()}schedule(){this.scheduler.scheduleEffect(this)}destroy(){this.watcher.destroy(),this.unregisterOnDestroy?.()}};function nI(i,t){Tm("NgSignals"),!t?.injector&&YV(nI);let e=t?.injector??ye(Jn),n=t?.manualCleanup!==!0?e.get(jv):null,r=new lT(e.get(_re),i,typeof Zone>"u"?null:Zone.current,n,e,t?.allowSignalWrites??!1),o=e.get(ci,null,{optional:!0});return!o||!(o._lView[Wt]&8)?r.watcher.notify():(o._lView[iv]??=[]).push(r.watcher.notify),r}function cz(i){let t=jl(i);if(!t)return null;let e=new ym(t);return{get selector(){return e.selector},get type(){return e.componentType},get inputs(){return e.inputs},get outputs(){return e.outputs},get ngContentSelectors(){return e.ngContentSelectors},get isStandalone(){return t.standalone},get isSignal(){return t.signals}}}var gz=null;function Xa(){return gz}function _z(i){gz??=i}var by=class{};var kt=new _e(""),pI=(()=>{class i{historyGo(e){throw new Error("")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:()=>ye(vre),providedIn:"platform"})}}return i})(),bz=new _e(""),vre=(()=>{class i extends pI{constructor(){super(),this._doc=ye(kt),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Xa().getBaseHref(this._doc)}onPopState(e){let n=Xa().getGlobalEventTarget(this._doc,"window");return n.addEventListener("popstate",e,!1),()=>n.removeEventListener("popstate",e)}onHashChange(e){let n=Xa().getGlobalEventTarget(this._doc,"window");return n.addEventListener("hashchange",e,!1),()=>n.removeEventListener("hashchange",e)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(e){this._location.pathname=e}pushState(e,n,r){this._history.pushState(e,n,r)}replaceState(e,n,r){this._history.replaceState(e,n,r)}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:()=>new i,providedIn:"platform"})}}return i})();function fI(i,t){if(i.length==0)return t;if(t.length==0)return i;let e=0;return i.endsWith("/")&&e++,t.startsWith("/")&&e++,e==2?i+t.substring(1):e==1?i+t:i+"/"+t}function lz(i){let t=i.match(/#|\?|$/),e=t&&t.index||i.length,n=e-(i[e-1]==="/"?1:0);return i.slice(0,n)+i.slice(e)}function zc(i){return i&&i[0]!=="?"?"?"+i:i}var Pu=(()=>{class i{historyGo(e){throw new Error("")}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:()=>ye(gI),providedIn:"root"})}}return i})(),vz=new _e(""),gI=(()=>{class i extends Pu{constructor(e,n){super(),this._platformLocation=e,this._removeListenerFns=[],this._baseHref=n??this._platformLocation.getBaseHrefFromDOM()??ye(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return fI(this._baseHref,e)}path(e=!1){let n=this._platformLocation.pathname+zc(this._platformLocation.search),r=this._platformLocation.hash;return r&&e?`${n}${r}`:n}pushState(e,n,r,o){let s=this.prepareExternalUrl(r+zc(o));this._platformLocation.pushState(e,n,s)}replaceState(e,n,r,o){let s=this.prepareExternalUrl(r+zc(o));this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(n){return new(n||i)(pe(pI),pe(vz,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),yz=(()=>{class i extends Pu{constructor(e,n){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],n!=null&&(this._baseHref=n)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let n=this._platformLocation.hash??"#";return n.length>0?n.substring(1):n}prepareExternalUrl(e){let n=fI(this._baseHref,e);return n.length>0?"#"+n:n}pushState(e,n,r,o){let s=this.prepareExternalUrl(r+zc(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(e,n,s)}replaceState(e,n,r,o){let s=this.prepareExternalUrl(r+zc(o));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(e,n,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(e=0){this._platformLocation.historyGo?.(e)}static{this.\u0275fac=function(n){return new(n||i)(pe(pI),pe(vz,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})(),Kl=(()=>{class i{constructor(e){this._subject=new Qe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=e;let n=this._locationStrategy.getBaseHref();this._basePath=wre(lz(dz(n))),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(e=!1){return this.normalize(this._locationStrategy.path(e))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(e,n=""){return this.path()==this.normalize(e+zc(n))}normalize(e){return i.stripTrailingSlash(xre(this._basePath,dz(e)))}prepareExternalUrl(e){return e&&e[0]!=="/"&&(e="/"+e),this._locationStrategy.prepareExternalUrl(e)}go(e,n="",r=null){this._locationStrategy.pushState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+zc(n)),r)}replaceState(e,n="",r=null){this._locationStrategy.replaceState(r,"",e,n),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+zc(n)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(e=0){this._locationStrategy.historyGo?.(e)}onUrlChange(e){return this._urlChangeListeners.push(e),this._urlChangeSubscription??=this.subscribe(n=>{this._notifyUrlChangeListeners(n.url,n.state)}),()=>{let n=this._urlChangeListeners.indexOf(e);this._urlChangeListeners.splice(n,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(e="",n){this._urlChangeListeners.forEach(r=>r(e,n))}subscribe(e,n,r){return this._subject.subscribe({next:e,error:n,complete:r})}static{this.normalizeQueryParams=zc}static{this.joinWithSlash=fI}static{this.stripTrailingSlash=lz}static{this.\u0275fac=function(n){return new(n||i)(pe(Pu))}}static{this.\u0275prov=we({token:i,factory:()=>yre(),providedIn:"root"})}}return i})();function yre(){return new Kl(pe(Pu))}function xre(i,t){if(!i||!t.startsWith(i))return t;let e=t.substring(i.length);return e===""||["/",";","?","#"].includes(e[0])?e:t}function dz(i){return i.replace(/\/index.html$/,"")}function wre(i){if(new RegExp("^(https?:)?//").test(i)){let[,e]=i.split(/\/\/[^\/]+/);return e}return i}var xz=function(i){return i[i.Decimal=0]="Decimal",i[i.Percent=1]="Percent",i[i.Currency=2]="Currency",i[i.Scientific=3]="Scientific",i}(xz||{});var Eo=function(i){return i[i.Format=0]="Format",i[i.Standalone=1]="Standalone",i}(Eo||{}),pn=function(i){return i[i.Narrow=0]="Narrow",i[i.Abbreviated=1]="Abbreviated",i[i.Wide=2]="Wide",i[i.Short=3]="Short",i}(pn||{}),ls=function(i){return i[i.Short=0]="Short",i[i.Medium=1]="Medium",i[i.Long=2]="Long",i[i.Full=3]="Full",i}(ls||{}),ds={Decimal:0,Group:1,List:2,PercentSign:3,PlusSign:4,MinusSign:5,Exponential:6,SuperscriptingExponent:7,PerMille:8,Infinity:9,NaN:10,TimeSeparator:11,CurrencyDecimal:12,CurrencyGroup:13};function Mre(i){return cs(i)[Gn.LocaleId]}function Cre(i,t,e){let n=cs(i),r=[n[Gn.DayPeriodsFormat],n[Gn.DayPeriodsStandalone]],o=ks(r,t);return ks(o,e)}function Sre(i,t,e){let n=cs(i),r=[n[Gn.DaysFormat],n[Gn.DaysStandalone]],o=ks(r,t);return ks(o,e)}function Ere(i,t,e){let n=cs(i),r=[n[Gn.MonthsFormat],n[Gn.MonthsStandalone]],o=ks(r,t);return ks(o,e)}function Tre(i,t){let n=cs(i)[Gn.Eras];return ks(n,t)}function dy(i,t){let e=cs(i);return ks(e[Gn.DateFormat],t)}function uy(i,t){let e=cs(i);return ks(e[Gn.TimeFormat],t)}function hy(i,t){let n=cs(i)[Gn.DateTimeFormat];return ks(n,t)}function Hc(i,t){let e=cs(i),n=e[Gn.NumberSymbols][t];if(typeof n>"u"){if(t===ds.CurrencyDecimal)return e[Gn.NumberSymbols][ds.Decimal];if(t===ds.CurrencyGroup)return e[Gn.NumberSymbols][ds.Group]}return n}function Ire(i,t){return cs(i)[Gn.NumberFormats][t]}function wz(i){if(!i[Gn.ExtraData])throw new Error(`Missing extra locale data for the locale "${i[Gn.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Dre(i){let t=cs(i);return wz(t),(t[Gn.ExtraData][2]||[]).map(n=>typeof n=="string"?rI(n):[rI(n[0]),rI(n[1])])}function kre(i,t,e){let n=cs(i);wz(n);let r=[n[Gn.ExtraData][0],n[Gn.ExtraData][1]],o=ks(r,t)||[];return ks(o,e)||[]}function ks(i,t){for(let e=t;e>-1;e--)if(typeof i[e]<"u")return i[e];throw new Error("Locale data API: locale data undefined")}function rI(i){let[t,e]=i.split(":");return{hours:+t,minutes:+e}}var Are=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,my={},Pre=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/,jc=function(i){return i[i.Short=0]="Short",i[i.ShortGMT=1]="ShortGMT",i[i.Long=2]="Long",i[i.Extended=3]="Extended",i}(jc||{}),Wi=function(i){return i[i.FullYear=0]="FullYear",i[i.Month=1]="Month",i[i.Date=2]="Date",i[i.Hours=3]="Hours",i[i.Minutes=4]="Minutes",i[i.Seconds=5]="Seconds",i[i.FractionalSeconds=6]="FractionalSeconds",i[i.Day=7]="Day",i}(Wi||{}),Gi=function(i){return i[i.DayPeriods=0]="DayPeriods",i[i.Days=1]="Days",i[i.Months=2]="Months",i[i.Eras=3]="Eras",i}(Gi||{});function Ore(i,t,e,n){let r=Hre(i);t=Uc(e,t)||t;let s=[],a;for(;t;)if(a=Pre.exec(t),a){s=s.concat(a.slice(1));let d=s.pop();if(!d)break;t=d}else{s.push(t);break}let c=r.getTimezoneOffset();n&&(c=Cz(n,c),r=zre(r,n,!0));let l="";return s.forEach(d=>{let u=Vre(d);l+=u?u(r,e,c):d==="''"?"'":d.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}function vy(i,t,e){let n=new Date(0);return n.setFullYear(i,t,e),n.setHours(0,0,0),n}function Uc(i,t){let e=Mre(i);if(my[e]??={},my[e][t])return my[e][t];let n="";switch(t){case"shortDate":n=dy(i,ls.Short);break;case"mediumDate":n=dy(i,ls.Medium);break;case"longDate":n=dy(i,ls.Long);break;case"fullDate":n=dy(i,ls.Full);break;case"shortTime":n=uy(i,ls.Short);break;case"mediumTime":n=uy(i,ls.Medium);break;case"longTime":n=uy(i,ls.Long);break;case"fullTime":n=uy(i,ls.Full);break;case"short":let r=Uc(i,"shortTime"),o=Uc(i,"shortDate");n=py(hy(i,ls.Short),[r,o]);break;case"medium":let s=Uc(i,"mediumTime"),a=Uc(i,"mediumDate");n=py(hy(i,ls.Medium),[s,a]);break;case"long":let c=Uc(i,"longTime"),l=Uc(i,"longDate");n=py(hy(i,ls.Long),[c,l]);break;case"full":let d=Uc(i,"fullTime"),u=Uc(i,"fullDate");n=py(hy(i,ls.Full),[d,u]);break}return n&&(my[e][t]=n),n}function py(i,t){return t&&(i=i.replace(/\{([^}]+)}/g,function(e,n){return t!=null&&n in t?t[n]:e})),i}function na(i,t,e="-",n,r){let o="";(i<0||r&&i<=0)&&(r?i=-i+1:(i=-i,o=e));let s=String(i);for(;s.length<t;)s="0"+s;return n&&(s=s.slice(s.length-t)),o+s}function Nre(i,t){return na(i,3).substring(0,t)}function sr(i,t,e=0,n=!1,r=!1){return function(o,s){let a=Rre(i,o);if((e>0||a>-e)&&(a+=e),i===Wi.Hours)a===0&&e===-12&&(a=12);else if(i===Wi.FractionalSeconds)return Nre(a,t);let c=Hc(s,ds.MinusSign);return na(a,t,c,n,r)}}function Rre(i,t){switch(i){case Wi.FullYear:return t.getFullYear();case Wi.Month:return t.getMonth();case Wi.Date:return t.getDate();case Wi.Hours:return t.getHours();case Wi.Minutes:return t.getMinutes();case Wi.Seconds:return t.getSeconds();case Wi.FractionalSeconds:return t.getMilliseconds();case Wi.Day:return t.getDay();default:throw new Error(`Unknown DateType value "${i}".`)}}function Sn(i,t,e=Eo.Format,n=!1){return function(r,o){return Fre(r,o,i,t,e,n)}}function Fre(i,t,e,n,r,o){switch(e){case Gi.Months:return Ere(t,r,n)[i.getMonth()];case Gi.Days:return Sre(t,r,n)[i.getDay()];case Gi.DayPeriods:let s=i.getHours(),a=i.getMinutes();if(o){let l=Dre(t),d=kre(t,r,n),u=l.findIndex(h=>{if(Array.isArray(h)){let[m,p]=h,_=s>=m.hours&&a>=m.minutes,f=s<p.hours||s===p.hours&&a<p.minutes;if(m.hours<p.hours){if(_&&f)return!0}else if(_||f)return!0}else if(h.hours===s&&h.minutes===a)return!0;return!1});if(u!==-1)return d[u]}return Cre(t,r,n)[s<12?0:1];case Gi.Eras:return Tre(t,n)[i.getFullYear()<=0?0:1];default:let c=e;throw new Error(`unexpected translation type ${c}`)}}function fy(i){return function(t,e,n){let r=-1*n,o=Hc(e,ds.MinusSign),s=r>0?Math.floor(r/60):Math.ceil(r/60);switch(i){case jc.Short:return(r>=0?"+":"")+na(s,2,o)+na(Math.abs(r%60),2,o);case jc.ShortGMT:return"GMT"+(r>=0?"+":"")+na(s,1,o);case jc.Long:return"GMT"+(r>=0?"+":"")+na(s,2,o)+":"+na(Math.abs(r%60),2,o);case jc.Extended:return n===0?"Z":(r>=0?"+":"")+na(s,2,o)+":"+na(Math.abs(r%60),2,o);default:throw new Error(`Unknown zone width "${i}"`)}}}var Lre=0,_y=4;function Bre(i){let t=vy(i,Lre,1).getDay();return vy(i,0,1+(t<=_y?_y:_y+7)-t)}function Mz(i){let t=i.getDay(),e=t===0?-3:_y-t;return vy(i.getFullYear(),i.getMonth(),i.getDate()+e)}function oI(i,t=!1){return function(e,n){let r;if(t){let o=new Date(e.getFullYear(),e.getMonth(),1).getDay()-1,s=e.getDate();r=1+Math.floor((s+o)/7)}else{let o=Mz(e),s=Bre(o.getFullYear()),a=o.getTime()-s.getTime();r=1+Math.round(a/6048e5)}return na(r,i,Hc(n,ds.MinusSign))}}function gy(i,t=!1){return function(e,n){let o=Mz(e).getFullYear();return na(o,i,Hc(n,ds.MinusSign),t)}}var sI={};function Vre(i){if(sI[i])return sI[i];let t;switch(i){case"G":case"GG":case"GGG":t=Sn(Gi.Eras,pn.Abbreviated);break;case"GGGG":t=Sn(Gi.Eras,pn.Wide);break;case"GGGGG":t=Sn(Gi.Eras,pn.Narrow);break;case"y":t=sr(Wi.FullYear,1,0,!1,!0);break;case"yy":t=sr(Wi.FullYear,2,0,!0,!0);break;case"yyy":t=sr(Wi.FullYear,3,0,!1,!0);break;case"yyyy":t=sr(Wi.FullYear,4,0,!1,!0);break;case"Y":t=gy(1);break;case"YY":t=gy(2,!0);break;case"YYY":t=gy(3);break;case"YYYY":t=gy(4);break;case"M":case"L":t=sr(Wi.Month,1,1);break;case"MM":case"LL":t=sr(Wi.Month,2,1);break;case"MMM":t=Sn(Gi.Months,pn.Abbreviated);break;case"MMMM":t=Sn(Gi.Months,pn.Wide);break;case"MMMMM":t=Sn(Gi.Months,pn.Narrow);break;case"LLL":t=Sn(Gi.Months,pn.Abbreviated,Eo.Standalone);break;case"LLLL":t=Sn(Gi.Months,pn.Wide,Eo.Standalone);break;case"LLLLL":t=Sn(Gi.Months,pn.Narrow,Eo.Standalone);break;case"w":t=oI(1);break;case"ww":t=oI(2);break;case"W":t=oI(1,!0);break;case"d":t=sr(Wi.Date,1);break;case"dd":t=sr(Wi.Date,2);break;case"c":case"cc":t=sr(Wi.Day,1);break;case"ccc":t=Sn(Gi.Days,pn.Abbreviated,Eo.Standalone);break;case"cccc":t=Sn(Gi.Days,pn.Wide,Eo.Standalone);break;case"ccccc":t=Sn(Gi.Days,pn.Narrow,Eo.Standalone);break;case"cccccc":t=Sn(Gi.Days,pn.Short,Eo.Standalone);break;case"E":case"EE":case"EEE":t=Sn(Gi.Days,pn.Abbreviated);break;case"EEEE":t=Sn(Gi.Days,pn.Wide);break;case"EEEEE":t=Sn(Gi.Days,pn.Narrow);break;case"EEEEEE":t=Sn(Gi.Days,pn.Short);break;case"a":case"aa":case"aaa":t=Sn(Gi.DayPeriods,pn.Abbreviated);break;case"aaaa":t=Sn(Gi.DayPeriods,pn.Wide);break;case"aaaaa":t=Sn(Gi.DayPeriods,pn.Narrow);break;case"b":case"bb":case"bbb":t=Sn(Gi.DayPeriods,pn.Abbreviated,Eo.Standalone,!0);break;case"bbbb":t=Sn(Gi.DayPeriods,pn.Wide,Eo.Standalone,!0);break;case"bbbbb":t=Sn(Gi.DayPeriods,pn.Narrow,Eo.Standalone,!0);break;case"B":case"BB":case"BBB":t=Sn(Gi.DayPeriods,pn.Abbreviated,Eo.Format,!0);break;case"BBBB":t=Sn(Gi.DayPeriods,pn.Wide,Eo.Format,!0);break;case"BBBBB":t=Sn(Gi.DayPeriods,pn.Narrow,Eo.Format,!0);break;case"h":t=sr(Wi.Hours,1,-12);break;case"hh":t=sr(Wi.Hours,2,-12);break;case"H":t=sr(Wi.Hours,1);break;case"HH":t=sr(Wi.Hours,2);break;case"m":t=sr(Wi.Minutes,1);break;case"mm":t=sr(Wi.Minutes,2);break;case"s":t=sr(Wi.Seconds,1);break;case"ss":t=sr(Wi.Seconds,2);break;case"S":t=sr(Wi.FractionalSeconds,1);break;case"SS":t=sr(Wi.FractionalSeconds,2);break;case"SSS":t=sr(Wi.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":t=fy(jc.Short);break;case"ZZZZZ":t=fy(jc.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":t=fy(jc.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":t=fy(jc.Long);break;default:return null}return sI[i]=t,t}function Cz(i,t){i=i.replace(/:/g,"");let e=Date.parse("Jan 01, 1970 00:00:00 "+i)/6e4;return isNaN(e)?t:e}function Ure(i,t){return i=new Date(i.getTime()),i.setMinutes(i.getMinutes()+t),i}function zre(i,t,e){let n=e?-1:1,r=i.getTimezoneOffset(),o=Cz(t,r);return Ure(i,n*(o-r))}function Hre(i){if(uz(i))return i;if(typeof i=="number"&&!isNaN(i))return new Date(i);if(typeof i=="string"){if(i=i.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(i)){let[r,o=1,s=1]=i.split("-").map(a=>+a);return vy(r,o-1,s)}let e=parseFloat(i);if(!isNaN(i-e))return new Date(e);let n;if(n=i.match(Are))return jre(n)}let t=new Date(i);if(!uz(t))throw new Error(`Unable to convert "${i}" into a date`);return t}function jre(i){let t=new Date(0),e=0,n=0,r=i[8]?t.setUTCFullYear:t.setFullYear,o=i[8]?t.setUTCHours:t.setHours;i[9]&&(e=Number(i[9]+i[10]),n=Number(i[9]+i[11])),r.call(t,Number(i[1]),Number(i[2])-1,Number(i[3]));let s=Number(i[4]||0)-e,a=Number(i[5]||0)-n,c=Number(i[6]||0),l=Math.floor(parseFloat("0."+(i[7]||0))*1e3);return o.call(t,s,a,c,l),t}function uz(i){return i instanceof Date&&!isNaN(i.valueOf())}var $re=/^(\d+)?\.((\d+)(-(\d+))?)?$/,hz=22,yy=".",gg="0",Gre=";",Wre=",",aI="#";function qre(i,t,e,n,r,o,s=!1){let a="",c=!1;if(!isFinite(i))a=Hc(e,ds.Infinity);else{let l=Kre(i);s&&(l=Zre(l));let d=t.minInt,u=t.minFrac,h=t.maxFrac;if(o){let S=o.match($re);if(S===null)throw new Error(`${o} is not a valid digit info`);let C=S[1],E=S[3],N=S[5];C!=null&&(d=cI(C)),E!=null&&(u=cI(E)),N!=null?h=cI(N):E!=null&&u>h&&(h=u)}Qre(l,u,h);let m=l.digits,p=l.integerLen,_=l.exponent,f=[];for(c=m.every(S=>!S);p<d;p++)m.unshift(0);for(;p<0;p++)m.unshift(0);p>0?f=m.splice(p,m.length):(f=m,m=[0]);let g=[];for(m.length>=t.lgSize&&g.unshift(m.splice(-t.lgSize,m.length).join(""));m.length>t.gSize;)g.unshift(m.splice(-t.gSize,m.length).join(""));m.length&&g.unshift(m.join("")),a=g.join(Hc(e,n)),f.length&&(a+=Hc(e,r)+f.join("")),_&&(a+=Hc(e,ds.Exponential)+"+"+_)}return i<0&&!c?a=t.negPre+a+t.negSuf:a=t.posPre+a+t.posSuf,a}function Xre(i,t,e){let n=Ire(t,xz.Decimal),r=Yre(n,Hc(t,ds.MinusSign));return qre(i,r,t,ds.Group,ds.Decimal,e)}function Yre(i,t="-"){let e={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},n=i.split(Gre),r=n[0],o=n[1],s=r.indexOf(yy)!==-1?r.split(yy):[r.substring(0,r.lastIndexOf(gg)+1),r.substring(r.lastIndexOf(gg)+1)],a=s[0],c=s[1]||"";e.posPre=a.substring(0,a.indexOf(aI));for(let d=0;d<c.length;d++){let u=c.charAt(d);u===gg?e.minFrac=e.maxFrac=d+1:u===aI?e.maxFrac=d+1:e.posSuf+=u}let l=a.split(Wre);if(e.gSize=l[1]?l[1].length:0,e.lgSize=l[2]||l[1]?(l[2]||l[1]).length:0,o){let d=r.length-e.posPre.length-e.posSuf.length,u=o.indexOf(aI);e.negPre=o.substring(0,u).replace(/'/g,""),e.negSuf=o.slice(u+d).replace(/'/g,"")}else e.negPre=t+e.posPre,e.negSuf=e.posSuf;return e}function Zre(i){if(i.digits[0]===0)return i;let t=i.digits.length-i.integerLen;return i.exponent?i.exponent+=2:(t===0?i.digits.push(0,0):t===1&&i.digits.push(0),i.integerLen+=2),i}function Kre(i){let t=Math.abs(i)+"",e=0,n,r,o,s,a;for((r=t.indexOf(yy))>-1&&(t=t.replace(yy,"")),(o=t.search(/e/i))>0?(r<0&&(r=o),r+=+t.slice(o+1),t=t.substring(0,o)):r<0&&(r=t.length),o=0;t.charAt(o)===gg;o++);if(o===(a=t.length))n=[0],r=1;else{for(a--;t.charAt(a)===gg;)a--;for(r-=o,n=[],s=0;o<=a;o++,s++)n[s]=Number(t.charAt(o))}return r>hz&&(n=n.splice(0,hz-1),e=r-1,r=1),{digits:n,exponent:e,integerLen:r}}function Qre(i,t,e){if(t>e)throw new Error(`The minimum number of digits after fraction (${t}) is higher than the maximum (${e}).`);let n=i.digits,r=n.length-i.integerLen,o=Math.min(Math.max(t,r),e),s=o+i.integerLen,a=n[s];if(s>0){n.splice(Math.max(i.integerLen,s));for(let u=s;u<n.length;u++)n[u]=0}else{r=Math.max(0,r),i.integerLen=1,n.length=Math.max(1,s=o+1),n[0]=0;for(let u=1;u<s;u++)n[u]=0}if(a>=5)if(s-1<0){for(let u=0;u>s;u--)n.unshift(0),i.integerLen++;n.unshift(1),i.integerLen++}else n[s-1]++;for(;r<Math.max(0,o);r++)n.push(0);let c=o!==0,l=t+i.integerLen,d=n.reduceRight(function(u,h,m,p){return h=h+u,p[m]=h<10?h:h-10,c&&(p[m]===0&&m>=l?p.pop():c=!1),h>=10?1:0},0);d&&(n.unshift(d),i.integerLen++)}function cI(i){let t=parseInt(i);if(isNaN(t))throw new Error("Invalid integer literal when parsing "+i);return t}function Sz(i,t){t=encodeURIComponent(t);for(let e of i.split(";")){let n=e.indexOf("="),[r,o]=n==-1?[e,""]:[e.slice(0,n),e.slice(n+1)];if(r.trim()===t)return decodeURIComponent(o)}return null}var lI=/\s+/,mz=[],Dm=(()=>{class i{constructor(e,n){this._ngEl=e,this._renderer=n,this.initialClasses=mz,this.stateMap=new Map}set klass(e){this.initialClasses=e!=null?e.trim().split(lI):mz}set ngClass(e){this.rawClass=typeof e=="string"?e.trim().split(lI):e}ngDoCheck(){for(let n of this.initialClasses)this._updateState(n,!0);let e=this.rawClass;if(Array.isArray(e)||e instanceof Set)for(let n of e)this._updateState(n,!0);else if(e!=null)for(let n of Object.keys(e))this._updateState(n,!!e[n]);this._applyStateDiff()}_updateState(e,n){let r=this.stateMap.get(e);r!==void 0?(r.enabled!==n&&(r.changed=!0,r.enabled=n),r.touched=!0):this.stateMap.set(e,{enabled:n,changed:!0,touched:!0})}_applyStateDiff(){for(let e of this.stateMap){let n=e[0],r=e[1];r.changed?(this._toggleClass(n,r.enabled),r.changed=!1):r.touched||(r.enabled&&this._toggleClass(n,!1),this.stateMap.delete(n)),r.touched=!1}}_toggleClass(e,n){e=e.trim(),e.length>0&&e.split(lI).forEach(r=>{n?this._renderer.addClass(this._ngEl.nativeElement,r):this._renderer.removeClass(this._ngEl.nativeElement,r)})}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Vc))}}static{this.\u0275dir=Me({type:i,selectors:[["","ngClass",""]],inputs:{klass:[ie.None,"class","klass"],ngClass:"ngClass"},standalone:!0})}}return i})();var dI=class{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},Ya=(()=>{class i{set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}constructor(e,n,r){this._viewContainer=e,this._template=n,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let e=this._ngForOf;if(!this._differ&&e)if(0)try{}catch{}else this._differ=this._differs.find(e).create(this.ngForTrackBy)}if(this._differ){let e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){let n=this._viewContainer;e.forEachOperation((r,o,s)=>{if(r.previousIndex==null)n.createEmbeddedView(this._template,new dI(r.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)n.remove(o===null?void 0:o);else if(o!==null){let a=n.get(o);n.move(a,s),pz(a,r)}});for(let r=0,o=n.length;r<o;r++){let a=n.get(r).context;a.index=r,a.count=o,a.ngForOf=this._ngForOf}e.forEachIdentityChange(r=>{let o=n.get(r.currentIndex);pz(o,r)})}static ngTemplateContextGuard(e,n){return!0}static{this.\u0275fac=function(n){return new(n||i)(F(rn),F(ji),F(qa))}}static{this.\u0275dir=Me({type:i,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return i})();function pz(i,t){i.context.$implicit=t.item}var As=(()=>{class i{constructor(e,n){this._viewContainer=e,this._context=new uI,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=n}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){fz("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){fz("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,n){return!0}static{this.\u0275fac=function(n){return new(n||i)(F(rn),F(ji))}}static{this.\u0275dir=Me({type:i,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return i})(),uI=class{constructor(){this.$implicit=null,this.ngIf=null}};function fz(i,t){if(!!!(!t||t.createEmbeddedView))throw new Error(`${i} must be a TemplateRef, but received '${yo(t)}'.`)}var _g=(()=>{class i{constructor(e){this._viewContainerRef=e,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(e){if(this._shouldRecreateView(e)){let n=this._viewContainerRef;if(this._viewRef&&n.remove(n.indexOf(this._viewRef)),!this.ngTemplateOutlet){this._viewRef=null;return}let r=this._createContextForwardProxy();this._viewRef=n.createEmbeddedView(this.ngTemplateOutlet,r,{injector:this.ngTemplateOutletInjector??void 0})}}_shouldRecreateView(e){return!!e.ngTemplateOutlet||!!e.ngTemplateOutletInjector}_createContextForwardProxy(){return new Proxy({},{set:(e,n,r)=>this.ngTemplateOutletContext?Reflect.set(this.ngTemplateOutletContext,n,r):!1,get:(e,n,r)=>{if(this.ngTemplateOutletContext)return Reflect.get(this.ngTemplateOutletContext,n,r)}})}static{this.\u0275fac=function(n){return new(n||i)(F(rn))}}static{this.\u0275dir=Me({type:i,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[zi]})}}return i})();function My(i,t){return new pt(2100,!1)}var Ez=(()=>{class i{transform(e){if(e==null)return null;if(typeof e!="string")throw My(i,e);return e.toUpperCase()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275pipe=ng({name:"uppercase",type:i,pure:!0,standalone:!0})}}return i})(),Jre="mediumDate",eoe=new _e(""),toe=new _e(""),Cy=(()=>{class i{constructor(e,n,r){this.locale=e,this.defaultTimezone=n,this.defaultOptions=r}transform(e,n,r,o){if(e==null||e===""||e!==e)return null;try{let s=n??this.defaultOptions?.dateFormat??Jre,a=r??this.defaultOptions?.timezone??this.defaultTimezone??void 0;return Ore(e,s,o||this.locale,a)}catch(s){throw My(i,s.message)}}static{this.\u0275fac=function(n){return new(n||i)(F(Im,16),F(eoe,24),F(toe,24))}}static{this.\u0275pipe=ng({name:"date",type:i,pure:!0,standalone:!0})}}return i})();var Tz=(()=>{class i{constructor(e){this._locale=e}transform(e,n,r){if(!ioe(e))return null;r||=this._locale;try{let o=noe(e);return Xre(o,r,n)}catch(o){throw My(i,o.message)}}static{this.\u0275fac=function(n){return new(n||i)(F(Im,16))}}static{this.\u0275pipe=ng({name:"number",type:i,pure:!0,standalone:!0})}}return i})();function ioe(i){return!(i==null||i===""||i!==i)}function noe(i){if(typeof i=="string"&&!isNaN(Number(i)-parseFloat(i)))return Number(i);if(typeof i!="number")throw new Error(`${i} is not a number`);return i}var Iz=(()=>{class i{transform(e,n,r){if(e==null)return null;if(!this.supports(e))throw My(i,e);return e.slice(n,r)}supports(e){return typeof e=="string"||Array.isArray(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275pipe=ng({name:"slice",type:i,pure:!1,standalone:!0})}}return i})();var kr=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})(),_I="browser",roe="server";function bI(i){return i===_I}function vI(i){return i===roe}var Dz=(()=>{class i{static{this.\u0275prov=we({token:i,providedIn:"root",factory:()=>bI(ye(Ga))?new hI(ye(kt),window):new mI})}}return i})(),hI=class{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){Array.isArray(t)?this.offset=()=>t:this.offset=t}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(t){this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){let e=ooe(this.document,t);e&&(this.scrollToElement(e),e.focus())}setHistoryScrollRestoration(t){this.window.history.scrollRestoration=t}scrollToElement(t){let e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,o=this.offset();this.window.scrollTo(n-o[0],r-o[1])}};function ooe(i,t){let e=i.getElementById(t)||i.getElementsByName(t)[0];if(e)return e;if(typeof i.createTreeWalker=="function"&&i.body&&typeof i.body.attachShadow=="function"){let n=i.createTreeWalker(i.body,NodeFilter.SHOW_ELEMENT),r=n.currentNode;for(;r;){let o=r.shadowRoot;if(o){let s=o.getElementById(t)||o.querySelector(`[name="${t}"]`);if(s)return s}r=n.nextNode()}}return null}var mI=class{setOffset(t){}getScrollPosition(){return[0,0]}scrollToPosition(t){}scrollToAnchor(t){}setHistoryScrollRestoration(t){}},xy=class{};var Vz=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(F(Vc),F(Re))}}static{this.\u0275dir=Me({type:i})}}return i})(),Oy=(()=>{class i extends Vz{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,features:[It]})}}return i})(),Jl=new _e("");var soe={provide:Jl,useExisting:br(()=>Ps),multi:!0};function aoe(){let i=Xa()?Xa().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var coe=new _e(""),Ps=(()=>{class i extends Vz{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!aoe())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(F(Vc),F(Re),F(coe,8))}}static{this.\u0275dir=Me({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&ne("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[Bt([soe]),It]})}}return i})();function Ql(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function Uz(i){return i!=null&&typeof i.length=="number"}var ed=new _e(""),Ny=new _e(""),loe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,ra=class{static min(t){return zz(t)}static max(t){return Hz(t)}static required(t){return doe(t)}static requiredTrue(t){return uoe(t)}static email(t){return hoe(t)}static minLength(t){return moe(t)}static maxLength(t){return poe(t)}static pattern(t){return foe(t)}static nullValidator(t){return Ey(t)}static compose(t){return Xz(t)}static composeAsync(t){return Yz(t)}};function zz(i){return t=>{if(Ql(t.value)||Ql(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function Hz(i){return t=>{if(Ql(t.value)||Ql(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function doe(i){return Ql(i.value)?{required:!0}:null}function uoe(i){return i.value===!0?null:{required:!0}}function hoe(i){return Ql(i.value)||loe.test(i.value)?null:{email:!0}}function moe(i){return t=>Ql(t.value)||!Uz(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function poe(i){return t=>Uz(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function foe(i){if(!i)return Ey;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(Ql(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function Ey(i){return null}function jz(i){return i!=null}function $z(i){return Au(i)?cn(i):i}function Gz(i){let t={};return i.forEach(e=>{t=e!=null?ge(ge({},t),e):t}),Object.keys(t).length===0?null:t}function Wz(i,t){return t.map(e=>e(i))}function goe(i){return!i.validate}function qz(i){return i.map(t=>goe(t)?t:e=>t.validate(e))}function Xz(i){if(!i)return null;let t=i.filter(jz);return t.length==0?null:function(e){return Gz(Wz(e,t))}}function MI(i){return i!=null?Xz(qz(i)):null}function Yz(i){if(!i)return null;let t=i.filter(jz);return t.length==0?null:function(e){let n=Wz(e,t).map($z);return Lf(n).pipe(Et(Gz))}}function CI(i){return i!=null?Yz(qz(i)):null}function kz(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function Zz(i){return i._rawValidators}function Kz(i){return i._rawAsyncValidators}function yI(i){return i?Array.isArray(i)?i:[i]:[]}function Ty(i,t){return Array.isArray(i)?i.includes(t):i===t}function Az(i,t){let e=yI(t);return yI(i).forEach(r=>{Ty(e,r)||e.push(r)}),e}function Pz(i,t){return yI(t).filter(e=>!Ty(i,e))}var Iy=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=MI(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=CI(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},$c=class extends Iy{get formDirective(){return null}get path(){return null}},oa=class extends Iy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Dy=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},_oe={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},eFe=Nt(ge({},_oe),{"[class.ng-submitted]":"isSubmitted"}),Za=(()=>{class i extends Dy{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(F(oa,2))}}static{this.\u0275dir=Me({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&qe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[It]})}}return i})(),Qz=(()=>{class i extends Dy{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(F($c,10))}}static{this.\u0275dir=Me({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&qe("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[It]})}}return i})();var bg="VALID",Sy="INVALID",km="PENDING",vg="DISABLED";function SI(i){return(Ry(i)?i.validators:i)||null}function boe(i){return Array.isArray(i)?MI(i):i||null}function EI(i,t){return(Ry(t)?t.asyncValidators:i)||null}function voe(i){return Array.isArray(i)?CI(i):i||null}function Ry(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function Jz(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new pt(1e3,"");if(!n[e])throw new pt(1001,"")}function e5(i,t,e){i._forEachChild((n,r)=>{if(e[r]===void 0)throw new pt(1002,"")})}var Am=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===bg}get invalid(){return this.status===Sy}get pending(){return this.status==km}get disabled(){return this.status===vg}get enabled(){return this.status!==vg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Az(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Az(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(Pz(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(Pz(t,this._rawAsyncValidators))}hasValidator(t){return Ty(this._rawValidators,t)}hasAsyncValidator(t){return Ty(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=km,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=vg,this.errors=null,this._forEachChild(n=>{n.disable(Nt(ge({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Nt(ge({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=bg,this._forEachChild(n=>{n.enable(Nt(ge({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Nt(ge({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===bg||this.status===km)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vg:bg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=km,this._hasOwnPendingAsyncValidator=!0;let e=$z(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new Qe,this.statusChanges=new Qe}_calculateStatus(){return this._allControlsDisabled()?vg:this.errors?Sy:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(km)?km:this._anyControlsHaveStatus(Sy)?Sy:bg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Ry(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=boe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=voe(this._rawAsyncValidators)}},Pm=class extends Am{constructor(t,e,n){super(SI(e),EI(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){e5(this,!0,t),Object.keys(t).forEach(n=>{Jz(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,o)=>{n=e(n,r,o)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var xI=class extends Pm{};var wg=new _e("CallSetDisabledState",{providedIn:"root",factory:()=>Fy}),Fy="always";function t5(i,t){return[...t.path,i]}function ky(i,t,e=Fy){TI(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),xoe(i,t),Moe(i,t),woe(i,t),yoe(i,t)}function Oz(i,t,e=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),Py(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function Ay(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function yoe(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function TI(i,t){let e=Zz(i);t.validator!==null?i.setValidators(kz(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=Kz(i);t.asyncValidator!==null?i.setAsyncValidators(kz(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();Ay(t._rawValidators,r),Ay(t._rawAsyncValidators,r)}function Py(i,t){let e=!1;if(i!==null){if(t.validator!==null){let r=Zz(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.validator);o.length!==r.length&&(e=!0,i.setValidators(o))}}if(t.asyncValidator!==null){let r=Kz(i);if(Array.isArray(r)&&r.length>0){let o=r.filter(s=>s!==t.asyncValidator);o.length!==r.length&&(e=!0,i.setAsyncValidators(o))}}}let n=()=>{};return Ay(t._rawValidators,n),Ay(t._rawAsyncValidators,n),e}function xoe(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&i5(i,t)})}function woe(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&i5(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function i5(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Moe(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function n5(i,t){i==null,TI(i,t)}function Coe(i,t){return Py(i,t)}function r5(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function Soe(i){return Object.getPrototypeOf(i.constructor)===Oy}function o5(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function s5(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(o=>{o.constructor===Ps?e=o:Soe(o)?n=o:r=o}),r||n||e||null}function Eoe(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}var Toe={provide:$c,useExisting:br(()=>Mg)},yg=Promise.resolve(),Mg=(()=>{class i extends $c{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Qe,this.form=new Pm({},MI(e),CI(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){yg.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ky(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){yg.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){yg.then(()=>{let n=this._findContainer(e.path),r=new Pm({});n5(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){yg.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){yg.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,o5(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(n){return new(n||i)(F(ed,10),F(Ny,10),F(wg,8))}}static{this.\u0275dir=Me({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&ne("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:[ie.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bt([Toe]),It]})}}return i})();function Nz(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function Rz(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var xg=class extends Am{constructor(t=null,e,n){super(SI(e),EI(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ry(e)&&(e.nonNullable||e.initialValueIsDefault)&&(Rz(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Nz(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Nz(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Rz(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Ioe=i=>i instanceof xg;var Doe={provide:oa,useExisting:br(()=>Gc)},Fz=Promise.resolve(),Gc=(()=>{class i extends oa{constructor(e,n,r,o,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new xg,this._registered=!1,this.name="",this.update=new Qe,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=s5(this,o)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),r5(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){ky(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){Fz.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,r=n!==0&&Je(n);Fz.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?t5(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(F($c,9),F(ed,10),F(Ny,10),F(Jl,10),F(ci,8),F(wg,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ie.None,"disabled","isDisabled"],model:[ie.None,"ngModel","model"],options:[ie.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bt([Doe]),It,zi]})}}return i})(),a5=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})(),koe={provide:Jl,useExisting:br(()=>sa),multi:!0},sa=(()=>{class i extends Oy{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&ne("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[Bt([koe]),It]})}}return i})();var c5=new _e("");var Aoe={provide:$c,useExisting:br(()=>Nu)},Nu=(()=>{class i extends $c{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new Qe,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(Py(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return ky(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){Oz(e.control||null,e,!1),Eoe(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,o5(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,r=this.form.get(e.path);n!==r&&(Oz(n||null,e),Ioe(r)&&(ky(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);n5(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&Coe(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){TI(this.form,this),this._oldForm&&Py(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||i)(F(ed,10),F(Ny,10),F(wg,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&ne("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{form:[ie.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Bt([Aoe]),It,zi]})}}return i})();var Poe={provide:oa,useExisting:br(()=>II)},II=(()=>{class i extends oa{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,r,o,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.name=null,this.update=new Qe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=s5(this,o)}ngOnChanges(e){this._added||this._setUpControl(),r5(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return t5(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(n){return new(n||i)(F($c,13),F(ed,10),F(Ny,10),F(Jl,10),F(c5,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","formControlName",""]],inputs:{name:[ie.None,"formControlName","name"],isDisabled:[ie.None,"disabled","isDisabled"],model:[ie.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[Bt([Poe]),It,zi]})}}return i})(),Ooe={provide:Jl,useExisting:br(()=>Ly),multi:!0};function l5(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function Noe(i){return i.split(":")[0]}var Ly=(()=>{class i extends Oy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n=this._getOptionId(e),r=l5(n,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){let n=Noe(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&ne("change",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bt([Ooe]),It]})}}return i})(),d5=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(l5(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Vc),F(Ly,9))}}static{this.\u0275dir=Me({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),Roe={provide:Jl,useExisting:br(()=>u5),multi:!0};function Lz(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function Foe(i){return i.split(":")[0]}var u5=(()=>{class i extends Oy{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n;if(Array.isArray(e)){let r=e.map(o=>this._getOptionId(o));n=(o,s)=>{o._setSelected(r.indexOf(s.toString())>-1)}}else n=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{let r=[],o=n.selectedOptions;if(o!==void 0){let s=o;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);r.push(l)}}else{let s=n.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);r.push(l)}}}this.value=r,e(r)}}_registerOption(e){let n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){let n=Foe(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&ne("change",function(s){return r.onChange(s.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bt([Roe]),It]})}}return i})(),h5=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(Lz(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(Lz(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Vc),F(u5,9))}}static{this.\u0275dir=Me({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();function m5(i){return typeof i=="number"?i:parseFloat(i)}var p5=(()=>{class i{constructor(){this._validator=Ey}ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):Ey,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,features:[zi]})}}return i})(),Loe={provide:ed,useExisting:br(()=>Cg),multi:!0},Cg=(()=>{class i extends p5{constructor(){super(...arguments),this.inputName="max",this.normalizeInput=e=>m5(e),this.createValidator=e=>Hz(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["input","type","number","max","","formControlName",""],["input","type","number","max","","formControl",""],["input","type","number","max","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Tt("max",r._enabled?r.max:null)},inputs:{max:"max"},features:[Bt([Loe]),It]})}}return i})(),Boe={provide:ed,useExisting:br(()=>Wc),multi:!0},Wc=(()=>{class i extends p5{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>m5(e),this.createValidator=e=>zz(e)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,r){n&2&&Tt("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[Bt([Boe]),It]})}}return i})();var f5=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})(),wI=class extends Am{constructor(t,e,n){super(SI(e),EI(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){e5(this,!1,t),t.forEach((n,r)=>{Jz(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>n._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Bz(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var g5=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new i;return e.useNonNullable=!0,e}group(e,n=null){let r=this._reduceControls(e),o={};return Bz(n)?o=n:n!==null&&(o.validators=n.validator,o.asyncValidators=n.asyncValidator),new Pm(r,o)}record(e,n=null){let r=this._reduceControls(e);return new xI(r,n)}control(e,n,r){let o={};return this.useNonNullable?(Bz(n)?o=n:(o.validators=n,o.asyncValidators=r),new xg(e,Nt(ge({},o),{nonNullable:!0}))):new xg(e,n,r)}array(e,n,r){let o=e.map(s=>this._createControl(s));return new wI(o,n,r)}_reduceControls(e){let n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){if(e instanceof xg)return e;if(e instanceof Am)return e;if(Array.isArray(e)){let n=e[0],r=e.length>1?e[1]:null,o=e.length>2?e[2]:null;return this.control(n,r,o)}else return this.control(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var By=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:wg,useValue:e.callSetDisabledState??Fy}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[f5]})}}return i})(),Vy=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:c5,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:wg,useValue:e.callSetDisabledState??Fy}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[f5]})}}return i})();var kI=class{};var Om=class i{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let n=e.indexOf(":");if(n>0){let r=e.slice(0,n),o=r.toLowerCase(),s=e.slice(n+1).trim();this.maybeSetNormalizedName(r,o),this.headers.has(o)?this.headers.get(o).push(s):this.headers.set(o,[s])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,n)=>{this.setHeaderEntries(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof i?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new i;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof i?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":let o=t.value;if(!o)this.headers.delete(e),this.normalizedNames.delete(e);else{let s=this.headers.get(e);if(!s)return;s=s.filter(a=>o.indexOf(a)===-1),s.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,s)}break}}setHeaderEntries(t,e){let n=(Array.isArray(e)?e:[e]).map(o=>o.toString()),r=t.toLowerCase();this.headers.set(r,n),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var AI=class{encodeKey(t){return _5(t)}encodeValue(t){return _5(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Voe(i,t){let e=new Map;return i.length>0&&i.replace(/^\?/,"").split("&").forEach(r=>{let o=r.indexOf("="),[s,a]=o==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,o)),t.decodeValue(r.slice(o+1))],c=e.get(s)||[];c.push(a),e.set(s,c)}),e}var Uoe=/%(\d[a-f0-9])/gi,zoe={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function _5(i){return encodeURIComponent(i).replace(Uoe,(t,e)=>zoe[e]??t)}function Uy(i){return`${i}`}var td=class i{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new AI,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Voe(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let n=t.fromObject[e],r=Array.isArray(n)?n.map(Uy):[Uy(n)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(n=>{let r=t[n];Array.isArray(r)?r.forEach(o=>{e.push({param:n,value:o,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new i({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Uy(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],r=n.indexOf(Uy(t.value));r!==-1&&n.splice(r,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var PI=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function Hoe(i){switch(i){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function b5(i){return typeof ArrayBuffer<"u"&&i instanceof ArrayBuffer}function v5(i){return typeof Blob<"u"&&i instanceof Blob}function y5(i){return typeof FormData<"u"&&i instanceof FormData}function joe(i){return typeof URLSearchParams<"u"&&i instanceof URLSearchParams}var Sg=class i{constructor(t,e,n,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let o;if(Hoe(this.method)||r?(this.body=n!==void 0?n:null,o=r):o=n,o&&(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),this.transferCache=o.transferCache),this.headers??=new Om,this.context??=new PI,!this.params)this.params=new td,this.urlWithParams=e;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||b5(this.body)||v5(this.body)||y5(this.body)||joe(this.body)?this.body:this.body instanceof td?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||y5(this.body)?null:v5(this.body)?this.body.type||null:b5(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof td?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,o=t.transferCache??this.transferCache,s=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,d=t.params||this.params,u=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((h,m)=>h.set(m,t.setHeaders[m]),l)),t.setParams&&(d=Object.keys(t.setParams).reduce((h,m)=>h.set(m,t.setParams[m]),d)),new i(e,n,s,{params:d,headers:l,context:u,reportProgress:c,responseType:r,withCredentials:a,transferCache:o})}},x5=function(i){return i[i.Sent=0]="Sent",i[i.UploadProgress=1]="UploadProgress",i[i.ResponseHeader=2]="ResponseHeader",i[i.DownloadProgress=3]="DownloadProgress",i[i.Response=4]="Response",i[i.User=5]="User",i}(x5||{}),OI=class{constructor(t,e=w5.Ok,n="OK"){this.headers=t.headers||new Om,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var NI=class i extends OI{constructor(t={}){super(t),this.type=x5.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new i({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var w5=function(i){return i[i.Continue=100]="Continue",i[i.SwitchingProtocols=101]="SwitchingProtocols",i[i.Processing=102]="Processing",i[i.EarlyHints=103]="EarlyHints",i[i.Ok=200]="Ok",i[i.Created=201]="Created",i[i.Accepted=202]="Accepted",i[i.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",i[i.NoContent=204]="NoContent",i[i.ResetContent=205]="ResetContent",i[i.PartialContent=206]="PartialContent",i[i.MultiStatus=207]="MultiStatus",i[i.AlreadyReported=208]="AlreadyReported",i[i.ImUsed=226]="ImUsed",i[i.MultipleChoices=300]="MultipleChoices",i[i.MovedPermanently=301]="MovedPermanently",i[i.Found=302]="Found",i[i.SeeOther=303]="SeeOther",i[i.NotModified=304]="NotModified",i[i.UseProxy=305]="UseProxy",i[i.Unused=306]="Unused",i[i.TemporaryRedirect=307]="TemporaryRedirect",i[i.PermanentRedirect=308]="PermanentRedirect",i[i.BadRequest=400]="BadRequest",i[i.Unauthorized=401]="Unauthorized",i[i.PaymentRequired=402]="PaymentRequired",i[i.Forbidden=403]="Forbidden",i[i.NotFound=404]="NotFound",i[i.MethodNotAllowed=405]="MethodNotAllowed",i[i.NotAcceptable=406]="NotAcceptable",i[i.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",i[i.RequestTimeout=408]="RequestTimeout",i[i.Conflict=409]="Conflict",i[i.Gone=410]="Gone",i[i.LengthRequired=411]="LengthRequired",i[i.PreconditionFailed=412]="PreconditionFailed",i[i.PayloadTooLarge=413]="PayloadTooLarge",i[i.UriTooLong=414]="UriTooLong",i[i.UnsupportedMediaType=415]="UnsupportedMediaType",i[i.RangeNotSatisfiable=416]="RangeNotSatisfiable",i[i.ExpectationFailed=417]="ExpectationFailed",i[i.ImATeapot=418]="ImATeapot",i[i.MisdirectedRequest=421]="MisdirectedRequest",i[i.UnprocessableEntity=422]="UnprocessableEntity",i[i.Locked=423]="Locked",i[i.FailedDependency=424]="FailedDependency",i[i.TooEarly=425]="TooEarly",i[i.UpgradeRequired=426]="UpgradeRequired",i[i.PreconditionRequired=428]="PreconditionRequired",i[i.TooManyRequests=429]="TooManyRequests",i[i.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",i[i.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",i[i.InternalServerError=500]="InternalServerError",i[i.NotImplemented=501]="NotImplemented",i[i.BadGateway=502]="BadGateway",i[i.ServiceUnavailable=503]="ServiceUnavailable",i[i.GatewayTimeout=504]="GatewayTimeout",i[i.HttpVersionNotSupported=505]="HttpVersionNotSupported",i[i.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",i[i.InsufficientStorage=507]="InsufficientStorage",i[i.LoopDetected=508]="LoopDetected",i[i.NotExtended=510]="NotExtended",i[i.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",i}(w5||{});function DI(i,t){return{body:t,headers:i.headers,context:i.context,observe:i.observe,params:i.params,reportProgress:i.reportProgress,responseType:i.responseType,withCredentials:i.withCredentials,transferCache:i.transferCache}}var M5=(()=>{class i{constructor(e){this.handler=e}request(e,n,r={}){let o;if(e instanceof Sg)o=e;else{let c;r.headers instanceof Om?c=r.headers:c=new Om(r.headers);let l;r.params&&(r.params instanceof td?l=r.params:l=new td({fromObject:r.params})),o=new Sg(e,n,r.body!==void 0?r.body:null,{headers:c,context:r.context,params:l,reportProgress:r.reportProgress,responseType:r.responseType||"json",withCredentials:r.withCredentials,transferCache:r.transferCache})}let s=ut(o).pipe(kc(c=>this.handler.handle(c)));if(e instanceof Sg||r.observe==="events")return s;let a=s.pipe(Pi(c=>c instanceof NI));switch(r.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return a.pipe(Et(c=>{if(c.body!==null&&!(c.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return c.body}));case"blob":return a.pipe(Et(c=>{if(c.body!==null&&!(c.body instanceof Blob))throw new Error("Response is not a Blob.");return c.body}));case"text":return a.pipe(Et(c=>{if(c.body!==null&&typeof c.body!="string")throw new Error("Response is not a string.");return c.body}));case"json":default:return a.pipe(Et(c=>c.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${r.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:new td().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,r={}){return this.request("PATCH",e,DI(r,n))}post(e,n,r={}){return this.request("POST",e,DI(r,n))}put(e,n,r={}){return this.request("PUT",e,DI(r,n))}static{this.\u0275fac=function(n){return new(n||i)(pe(kI))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})();var LI=class extends by{constructor(){super(...arguments),this.supportsDOMEvents=!0}},BI=class i extends LI{static makeCurrent(){_z(new i)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=Woe();return e==null?null:qoe(e)}resetBaseElement(){Eg=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Sz(document.cookie,t)}},Eg=null;function Woe(){return Eg=Eg||document.querySelector("base"),Eg?Eg.getAttribute("href"):null}function qoe(i){return new URL(i,document.baseURI).pathname}var VI=class{addToWindow(t){Qn.getAngularTestability=(n,r=!0)=>{let o=t.findTestabilityInTree(n,r);if(o==null)throw new pt(5103,!1);return o},Qn.getAllAngularTestabilities=()=>t.getAllTestabilities(),Qn.getAllAngularRootElements=()=>t.getAllRootElements();let e=n=>{let r=Qn.getAllAngularTestabilities(),o=r.length,s=function(){o--,o==0&&n()};r.forEach(a=>{a.whenStable(s)})};Qn.frameworkStabilizers||(Qn.frameworkStabilizers=[]),Qn.frameworkStabilizers.push(e)}findTestabilityInTree(t,e,n){if(e==null)return null;let r=t.getTestability(e);return r??(n?Xa().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null)}},Xoe=(()=>{class i{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})(),UI=new _e(""),T5=(()=>{class i{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(r=>{r.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,r){return this._findPluginFor(n).addEventListener(e,n,r)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(o=>o.supports(e)),!n)throw new pt(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||i)(pe(UI),pe(Ne))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})(),zy=class{constructor(t){this._doc=t}},RI="ng-app-id",I5=(()=>{class i{constructor(e,n,r,o={}){this.doc=e,this.appId=n,this.nonce=r,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=vI(o),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(r=>r.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${RI}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(r=>{r.textContent!=null&&n.set(r.textContent,r)}),n}return null}changeUsageCount(e,n){let r=this.styleRef;if(r.has(e)){let o=r.get(e);return o.usage+=n,o.usage}return r.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let r=this.styleNodesInDOM,o=r?.get(n);if(o?.parentNode===e)return r.delete(n),o.removeAttribute(RI),o;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=n,this.platformIsServer&&s.setAttribute(RI,this.appId),e.appendChild(s),s}}addStyleToHost(e,n){let r=this.getStyleElement(e,n),o=this.styleRef,s=o.get(n)?.elements;s?s.push(r):o.set(n,{elements:[r],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||i)(pe(kt),pe(Sm),pe(ag,8),pe(Ga))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})(),FI={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},HI=/%COMP%/g,D5="%COMP%",Yoe=`_nghost-${D5}`,Zoe=`_ngcontent-${D5}`,Koe=!0,Qoe=new _e("",{providedIn:"root",factory:()=>Koe});function Joe(i){return Zoe.replace(HI,i)}function ese(i){return Yoe.replace(HI,i)}function k5(i,t){return t.map(e=>e.replace(HI,i))}var C5=(()=>{class i{constructor(e,n,r,o,s,a,c,l=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=r,this.removeStylesOnCompDestroy=o,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=vI(a),this.defaultRenderer=new Tg(e,s,c,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===za.ShadowDom&&(n=Nt(ge({},n),{encapsulation:za.Emulated}));let r=this.getOrCreateRenderer(e,n);return r instanceof Hy?r.applyToHost(e):r instanceof Ig&&r.applyStyles(),r}getOrCreateRenderer(e,n){let r=this.rendererByCompId,o=r.get(n.id);if(!o){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,u=this.platformIsServer;switch(n.encapsulation){case za.Emulated:o=new Hy(c,l,n,this.appId,d,s,a,u);break;case za.ShadowDom:return new zI(c,l,e,n,s,a,this.nonce,u);default:o=new Ig(c,l,n,d,s,a,u);break}r.set(n.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||i)(pe(T5),pe(I5),pe(Sm),pe(Qoe),pe(kt),pe(Ga),pe(Ne),pe(ag))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})(),Tg=class{constructor(t,e,n,r){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(FI[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(S5(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(S5(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new pt(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;let o=FI[r];o?t.setAttributeNS(o,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let r=FI[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,r){r&(Rc.DashCase|Rc.Important)?t.style.setProperty(e,n,r&Rc.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Rc.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if(typeof t=="string"&&(t=Xa().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function S5(i){return i.tagName==="TEMPLATE"&&i.content!==void 0}var zI=class extends Tg{constructor(t,e,n,r,o,s,a,c){super(t,o,s,c),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=k5(r.id,r.styles);for(let d of l){let u=document.createElement("style");a&&u.setAttribute("nonce",a),u.textContent=d,this.shadowRoot.appendChild(u)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Ig=class extends Tg{constructor(t,e,n,r,o,s,a,c){super(t,o,s,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?k5(c,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Hy=class extends Ig{constructor(t,e,n,r,o,s,a,c){let l=r+"-"+n.id;super(t,e,n,o,s,a,c,l),this.contentAttr=Joe(l),this.hostAttr=ese(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},tse=(()=>{class i extends zy{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,r){return e.addEventListener(n,r,!1),()=>this.removeEventListener(e,n,r)}removeEventListener(e,n,r){return e.removeEventListener(n,r)}static{this.\u0275fac=function(n){return new(n||i)(pe(kt))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})(),E5=["alt","control","meta","shift"],ise={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},nse={alt:i=>i.altKey,control:i=>i.ctrlKey,meta:i=>i.metaKey,shift:i=>i.shiftKey},rse=(()=>{class i extends zy{constructor(e){super(e)}supports(e){return i.parseEventName(e)!=null}addEventListener(e,n,r){let o=i.parseEventName(n),s=i.eventCallback(o.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Xa().onAndCancel(e,o.domEventName,s))}static parseEventName(e){let n=e.toLowerCase().split("."),r=n.shift();if(n.length===0||!(r==="keydown"||r==="keyup"))return null;let o=i._normalizeKey(n.pop()),s="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),s="code."),E5.forEach(l=>{let d=n.indexOf(l);d>-1&&(n.splice(d,1),s+=l+".")}),s+=o,n.length!=0||o.length===0)return null;let c={};return c.domEventName=r,c.fullKey=s,c}static matchEventFullKeyCode(e,n){let r=ise[e.key]||e.key,o="";return n.indexOf("code.")>-1&&(r=e.code,o="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),E5.forEach(s=>{if(s!==r){let a=nse[s];a(e)&&(o+=s+".")}}),o+=r,o===n)}static eventCallback(e,n,r){return o=>{i.matchEventFullKeyCode(o,e)&&r.runGuarded(()=>n(o))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||i)(pe(kt))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})();function ose(){BI.makeCurrent()}function sse(){return new wo}function ase(){return O4(document),document}var cse=[{provide:Ga,useValue:_I},{provide:DT,useValue:ose,multi:!0},{provide:kt,useFactory:ase,deps:[]}],bFe=iI(sz,"browser",cse),lse=new _e(""),dse=[{provide:fg,useClass:VI,deps:[]},{provide:JT,useClass:sy,deps:[Ne,ay,fg]},{provide:sy,useClass:sy,deps:[Ne,ay,fg]}],use=[{provide:Nv,useValue:"root"},{provide:wo,useFactory:sse,deps:[]},{provide:UI,useClass:tse,multi:!0,deps:[kt,Ne,Ga]},{provide:UI,useClass:rse,multi:!0,deps:[kt]},C5,I5,T5,{provide:Qf,useExisting:C5},{provide:xy,useClass:Xoe,deps:[]},[]],vFe=(()=>{class i{constructor(e){}static withServerTransition(e){return{ngModule:i,providers:[{provide:Sm,useValue:e.appId}]}}static{this.\u0275fac=function(n){return new(n||i)(pe(lse,12))}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({providers:[...use,...dse],imports:[kr,az]})}}return i})();var A5=(()=>{class i{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||i)(pe(kt))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Dg=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:function(n){let r=null;return n?r=new(n||i):r=pe(hse),r},providedIn:"root"})}}return i})(),hse=(()=>{class i extends Dg{constructor(e){super(),this._doc=e}sanitize(e,n){if(n==null)return null;switch(e){case Qr.NONE:return n;case Qr.HTML:return Xl(n,"HTML")?ta(n):G4(this._doc,String(n)).toString();case Qr.STYLE:return Xl(n,"Style")?ta(n):n;case Qr.SCRIPT:if(Xl(n,"Script"))return ta(n);throw new pt(5200,!1);case Qr.URL:return Xl(n,"URL")?ta(n):Gv(String(n));case Qr.RESOURCE_URL:if(Xl(n,"ResourceURL"))return ta(n);throw new pt(5201,!1);default:throw new pt(5202,!1)}}bypassSecurityTrustHtml(e){return R4(e)}bypassSecurityTrustStyle(e){return F4(e)}bypassSecurityTrustScript(e){return L4(e)}bypassSecurityTrustUrl(e){return B4(e)}bypassSecurityTrustResourceUrl(e){return V4(e)}static{this.\u0275fac=function(n){return new(n||i)(pe(kt))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var _i="primary",$g=Symbol("RouteTitle"),XI=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Bm(i){return new XI(i)}function mse(i,t,e){let n=e.path.split("/");if(n.length>i.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<i.length))return null;let r={};for(let o=0;o<n.length;o++){let s=n[o],a=i[o];if(s.startsWith(":"))r[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:i.slice(0,n.length),posParams:r}}function pse(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(!Ka(i[e],t[e]))return!1;return!0}function Ka(i,t){let e=i?YI(i):void 0,n=t?YI(t):void 0;if(!e||!n||e.length!=n.length)return!1;let r;for(let o=0;o<e.length;o++)if(r=e[o],!U5(i[r],t[r]))return!1;return!0}function YI(i){return[...Object.keys(i),...Object.getOwnPropertySymbols(i)]}function U5(i,t){if(Array.isArray(i)&&Array.isArray(t)){if(i.length!==t.length)return!1;let e=[...i].sort(),n=[...t].sort();return e.every((r,o)=>n[o]===r)}else return i===t}function z5(i){return i.length>0?i[i.length-1]:null}function od(i){return mu(i)?i:Au(i)?cn(Promise.resolve(i)):ut(i)}var fse={exact:j5,subset:$5},H5={exact:gse,subset:_se,ignored:()=>!0};function P5(i,t,e){return fse[e.paths](i.root,t.root,e.matrixParams)&&H5[e.queryParams](i.queryParams,t.queryParams)&&!(e.fragment==="exact"&&i.fragment!==t.fragment)}function gse(i,t){return Ka(i,t)}function j5(i,t,e){if(!Lu(i.segments,t.segments)||!Gy(i.segments,t.segments,e)||i.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!i.children[n]||!j5(i.children[n],t.children[n],e))return!1;return!0}function _se(i,t){return Object.keys(t).length<=Object.keys(i).length&&Object.keys(t).every(e=>U5(i[e],t[e]))}function $5(i,t,e){return G5(i,t,t.segments,e)}function G5(i,t,e,n){if(i.segments.length>e.length){let r=i.segments.slice(0,e.length);return!(!Lu(r,e)||t.hasChildren()||!Gy(r,e,n))}else if(i.segments.length===e.length){if(!Lu(i.segments,e)||!Gy(i.segments,e,n))return!1;for(let r in t.children)if(!i.children[r]||!$5(i.children[r],t.children[r],n))return!1;return!0}else{let r=e.slice(0,i.segments.length),o=e.slice(i.segments.length);return!Lu(i.segments,r)||!Gy(i.segments,r,n)||!i.children[_i]?!1:G5(i.children[_i],t,o,n)}}function Gy(i,t,e){return t.every((n,r)=>H5[e](i[r].parameters,n.parameters))}var id=class{constructor(t=new Zi([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=Bm(this.queryParams),this._queryParamMap}toString(){return yse.serialize(this)}},Zi=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wy(this)}},Fu=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Bm(this.parameters),this._parameterMap}toString(){return q5(this)}};function bse(i,t){return Lu(i,t)&&i.every((e,n)=>Ka(e.parameters,t[n].parameters))}function Lu(i,t){return i.length!==t.length?!1:i.every((e,n)=>e.path===t[n].path)}function vse(i,t){let e=[];return Object.entries(i.children).forEach(([n,r])=>{n===_i&&(e=e.concat(t(r,n)))}),Object.entries(i.children).forEach(([n,r])=>{n!==_i&&(e=e.concat(t(r,n)))}),e}var Gg=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:()=>new Fg,providedIn:"root"})}}return i})(),Fg=class{parse(t){let e=new KI(t);return new id(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${kg(t.root,!0)}`,n=Mse(t.queryParams),r=typeof t.fragment=="string"?`#${xse(t.fragment)}`:"";return`${e}${n}${r}`}},yse=new Fg;function Wy(i){return i.segments.map(t=>q5(t)).join("/")}function kg(i,t){if(!i.hasChildren())return Wy(i);if(t){let e=i.children[_i]?kg(i.children[_i],!1):"",n=[];return Object.entries(i.children).forEach(([r,o])=>{r!==_i&&n.push(`${r}:${kg(o,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=vse(i,(n,r)=>r===_i?[kg(i.children[_i],!1)]:[`${r}:${kg(n,!1)}`]);return Object.keys(i.children).length===1&&i.children[_i]!=null?`${Wy(i)}/${e[0]}`:`${Wy(i)}/(${e.join("//")})`}}function W5(i){return encodeURIComponent(i).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function jy(i){return W5(i).replace(/%3B/gi,";")}function xse(i){return encodeURI(i)}function ZI(i){return W5(i).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function qy(i){return decodeURIComponent(i)}function O5(i){return qy(i.replace(/\+/g,"%20"))}function q5(i){return`${ZI(i.path)}${wse(i.parameters)}`}function wse(i){return Object.entries(i).map(([t,e])=>`;${ZI(t)}=${ZI(e)}`).join("")}function Mse(i){let t=Object.entries(i).map(([e,n])=>Array.isArray(n)?n.map(r=>`${jy(e)}=${jy(r)}`).join("&"):`${jy(e)}=${jy(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Cse=/^[^\/()?;#]+/;function $I(i){let t=i.match(Cse);return t?t[0]:""}var Sse=/^[^\/()?;=#]+/;function Ese(i){let t=i.match(Sse);return t?t[0]:""}var Tse=/^[^=?&#]+/;function Ise(i){let t=i.match(Tse);return t?t[0]:""}var Dse=/^[^&#]+/;function kse(i){let t=i.match(Dse);return t?t[0]:""}var KI=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Zi([],{}):new Zi([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[_i]=new Zi(t,e)),n}parseSegment(){let t=$I(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new pt(4009,!1);return this.capture(t),new Fu(qy(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Ese(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let r=$I(this.remaining);r&&(n=r,this.capture(n))}t[qy(e)]=qy(n)}parseQueryParam(t){let e=Ise(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let s=kse(this.remaining);s&&(n=s,this.capture(n))}let r=O5(e),o=O5(n);if(t.hasOwnProperty(r)){let s=t[r];Array.isArray(s)||(s=[s],t[r]=s),s.push(o)}else t[r]=o}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=$I(this.remaining),r=this.remaining[n.length];if(r!=="/"&&r!==")"&&r!==";")throw new pt(4010,!1);let o;n.indexOf(":")>-1?(o=n.slice(0,n.indexOf(":")),this.capture(o),this.capture(":")):t&&(o=_i);let s=this.parseChildren();e[o]=Object.keys(s).length===1?s[_i]:new Zi([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new pt(4011,!1)}};function X5(i){return i.segments.length>0?new Zi([],{[_i]:i}):i}function Y5(i){let t={};for(let[n,r]of Object.entries(i.children)){let o=Y5(r);if(n===_i&&o.segments.length===0&&o.hasChildren())for(let[s,a]of Object.entries(o.children))t[s]=a;else(o.segments.length>0||o.hasChildren())&&(t[n]=o)}let e=new Zi(i.segments,t);return Ase(e)}function Ase(i){if(i.numberOfChildren===1&&i.children[_i]){let t=i.children[_i];return new Zi(i.segments.concat(t.segments),t.children)}return i}function Vm(i){return i instanceof id}function Pse(i,t,e=null,n=null){let r=Z5(i);return K5(r,t,e,n)}function Z5(i){let t;function e(o){let s={};for(let c of o.children){let l=e(c);s[c.outlet]=l}let a=new Zi(o.url,s);return o===i&&(t=a),a}let n=e(i.root),r=X5(n);return t??r}function K5(i,t,e,n){let r=i;for(;r.parent;)r=r.parent;if(t.length===0)return GI(r,r,r,e,n);let o=Ose(t);if(o.toRoot())return GI(r,r,new Zi([],{}),e,n);let s=Nse(o,r,i),a=s.processChildren?Og(s.segmentGroup,s.index,o.commands):J5(s.segmentGroup,s.index,o.commands);return GI(r,s.segmentGroup,a,e,n)}function Xy(i){return typeof i=="object"&&i!=null&&!i.outlets&&!i.segmentPath}function Lg(i){return typeof i=="object"&&i!=null&&i.outlets}function GI(i,t,e,n,r){let o={};n&&Object.entries(n).forEach(([c,l])=>{o[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let s;i===t?s=e:s=Q5(i,t,e);let a=X5(Y5(s));return new id(a,o,r)}function Q5(i,t,e){let n={};return Object.entries(i.children).forEach(([r,o])=>{o===t?n[r]=e:n[r]=Q5(o,t,e)}),new Zi(i.segments,n)}var Yy=class{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Xy(n[0]))throw new pt(4003,!1);let r=n.find(Lg);if(r&&r!==z5(n))throw new pt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Ose(i){if(typeof i[0]=="string"&&i.length===1&&i[0]==="/")return new Yy(!0,0,i);let t=0,e=!1,n=i.reduce((r,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let a={};return Object.entries(o.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(o.segmentPath)return[...r,o.segmentPath]}return typeof o!="string"?[...r,o]:s===0?(o.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,o]},[]);return new Yy(e,t,n)}var Fm=class{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function Nse(i,t,e){if(i.isAbsolute)return new Fm(t,!0,0);if(!e)return new Fm(t,!1,NaN);if(e.parent===null)return new Fm(e,!0,0);let n=Xy(i.commands[0])?0:1,r=e.segments.length-1+n;return Rse(e,r,i.numberOfDoubleDots)}function Rse(i,t,e){let n=i,r=t,o=e;for(;o>r;){if(o-=r,n=n.parent,!n)throw new pt(4005,!1);r=n.segments.length}return new Fm(n,!1,r-o)}function Fse(i){return Lg(i[0])?i[0].outlets:{[_i]:i}}function J5(i,t,e){if(i??=new Zi([],{}),i.segments.length===0&&i.hasChildren())return Og(i,t,e);let n=Lse(i,t,e),r=e.slice(n.commandIndex);if(n.match&&n.pathIndex<i.segments.length){let o=new Zi(i.segments.slice(0,n.pathIndex),{});return o.children[_i]=new Zi(i.segments.slice(n.pathIndex),i.children),Og(o,0,r)}else return n.match&&r.length===0?new Zi(i.segments,{}):n.match&&!i.hasChildren()?QI(i,t,e):n.match?Og(i,0,r):QI(i,t,e)}function Og(i,t,e){if(e.length===0)return new Zi(i.segments,{});{let n=Fse(e),r={};if(Object.keys(n).some(o=>o!==_i)&&i.children[_i]&&i.numberOfChildren===1&&i.children[_i].segments.length===0){let o=Og(i.children[_i],t,e);return new Zi(i.segments,o.children)}return Object.entries(n).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(r[o]=J5(i.children[o],t,s))}),Object.entries(i.children).forEach(([o,s])=>{n[o]===void 0&&(r[o]=s)}),new Zi(i.segments,r)}}function Lse(i,t,e){let n=0,r=t,o={match:!1,pathIndex:0,commandIndex:0};for(;r<i.segments.length;){if(n>=e.length)return o;let s=i.segments[r],a=e[n];if(Lg(a))break;let c=`${a}`,l=n<e.length-1?e[n+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!R5(c,l,s))return o;n+=2}else{if(!R5(c,{},s))return o;n++}r++}return{match:!0,pathIndex:r,commandIndex:n}}function QI(i,t,e){let n=i.segments.slice(0,t),r=0;for(;r<e.length;){let o=e[r];if(Lg(o)){let c=Bse(o.outlets);return new Zi(n,c)}if(r===0&&Xy(e[0])){let c=i.segments[t];n.push(new Fu(c.path,N5(e[0]))),r++;continue}let s=Lg(o)?o.outlets[_i]:`${o}`,a=r<e.length-1?e[r+1]:null;s&&a&&Xy(a)?(n.push(new Fu(s,N5(a))),r+=2):(n.push(new Fu(s,{})),r++)}return new Zi(n,{})}function Bse(i){let t={};return Object.entries(i).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=QI(new Zi([],{}),0,n))}),t}function N5(i){let t={};return Object.entries(i).forEach(([e,n])=>t[e]=`${n}`),t}function R5(i,t,e){return i==e.path&&Ka(t,e.parameters)}var Ng="imperative",Ar=function(i){return i[i.NavigationStart=0]="NavigationStart",i[i.NavigationEnd=1]="NavigationEnd",i[i.NavigationCancel=2]="NavigationCancel",i[i.NavigationError=3]="NavigationError",i[i.RoutesRecognized=4]="RoutesRecognized",i[i.ResolveStart=5]="ResolveStart",i[i.ResolveEnd=6]="ResolveEnd",i[i.GuardsCheckStart=7]="GuardsCheckStart",i[i.GuardsCheckEnd=8]="GuardsCheckEnd",i[i.RouteConfigLoadStart=9]="RouteConfigLoadStart",i[i.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",i[i.ChildActivationStart=11]="ChildActivationStart",i[i.ChildActivationEnd=12]="ChildActivationEnd",i[i.ActivationStart=13]="ActivationStart",i[i.ActivationEnd=14]="ActivationEnd",i[i.Scroll=15]="Scroll",i[i.NavigationSkipped=16]="NavigationSkipped",i}(Ar||{}),Os=class{constructor(t,e){this.id=t,this.url=e}},Um=class extends Os{constructor(t,e,n="imperative",r=null){super(t,e),this.type=Ar.NavigationStart,this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},qc=class extends Os{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=Ar.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},hs=function(i){return i[i.Redirect=0]="Redirect",i[i.SupersededByNewNavigation=1]="SupersededByNewNavigation",i[i.NoDataFromResolver=2]="NoDataFromResolver",i[i.GuardRejected=3]="GuardRejected",i}(hs||{}),Zy=function(i){return i[i.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",i[i.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",i}(Zy||{}),nd=class extends Os{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Ar.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},rd=class extends Os{constructor(t,e,n,r){super(t,e),this.reason=n,this.code=r,this.type=Ar.NavigationSkipped}},Bg=class extends Os{constructor(t,e,n,r){super(t,e),this.error=n,this.target=r,this.type=Ar.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ky=class extends Os{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ar.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},JI=class extends Os{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ar.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eD=class extends Os{constructor(t,e,n,r,o){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=o,this.type=Ar.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},tD=class extends Os{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ar.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iD=class extends Os{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r,this.type=Ar.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},nD=class{constructor(t){this.route=t,this.type=Ar.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},rD=class{constructor(t){this.route=t,this.type=Ar.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},oD=class{constructor(t){this.snapshot=t,this.type=Ar.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},sD=class{constructor(t){this.snapshot=t,this.type=Ar.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},aD=class{constructor(t){this.snapshot=t,this.type=Ar.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cD=class{constructor(t){this.snapshot=t,this.type=Ar.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qy=class{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=Ar.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},Vg=class{},Ug=class{constructor(t){this.url=t}};var lD=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Wg,this.attachRef=null}},Wg=(()=>{class i{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){let r=this.getOrCreateContext(e);r.outlet=n,this.contexts.set(e,r)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new lD,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Jy=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=dD(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=dD(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=uD(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return uD(t,this._root).map(e=>e.value)}};function dD(i,t){if(i===t.value)return t;for(let e of t.children){let n=dD(i,e);if(n)return n}return null}function uD(i,t){if(i===t.value)return[t];for(let e of t.children){let n=uD(i,e);if(n.length)return n.unshift(t),n}return[]}var us=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Rm(i){let t={};return i&&i.children.forEach(e=>t[e.value.outlet]=e),t}var ex=class extends Jy{constructor(t,e){super(t),this.snapshot=e,xD(this,t)}toString(){return this.snapshot.toString()}};function eH(i){let t=Vse(i),e=new Ri([new Fu("",{})]),n=new Ri({}),r=new Ri({}),o=new Ri({}),s=new Ri(""),a=new zm(e,n,o,s,r,_i,i,t.root);return a.snapshot=t.root,new ex(new us(a,[]),t)}function Vse(i){let t={},e={},n={},r="",o=new zg([],t,n,r,e,_i,i,null,{});return new tx("",new us(o,[]))}var zm=class{constructor(t,e,n,r,o,s,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=r,this.dataSubject=o,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Et(l=>l[$g]))??ut(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Et(t=>Bm(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Et(t=>Bm(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function yD(i,t,e="emptyOnly"){let n,{routeConfig:r}=i;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:ge(ge({},t.params),i.params),data:ge(ge({},t.data),i.data),resolve:ge(ge(ge(ge({},i.data),t.data),r?.data),i._resolvedData)}:n={params:ge({},i.params),data:ge({},i.data),resolve:ge(ge({},i.data),i._resolvedData??{})},r&&iH(r)&&(n.resolve[$g]=r.title),n}var zg=class{get title(){return this.data?.[$g]}constructor(t,e,n,r,o,s,a,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=o,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Bm(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Bm(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},tx=class extends Jy{constructor(t,e){super(e),this.url=t,xD(this,e)}toString(){return tH(this._root)}};function xD(i,t){t.value._routerState=i,t.children.forEach(e=>xD(i,e))}function tH(i){let t=i.children.length>0?` { ${i.children.map(tH).join(", ")} } `:"";return`${i.value}${t}`}function WI(i){if(i.snapshot){let t=i.snapshot,e=i._futureSnapshot;i.snapshot=e,Ka(t.queryParams,e.queryParams)||i.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&i.fragmentSubject.next(e.fragment),Ka(t.params,e.params)||i.paramsSubject.next(e.params),pse(t.url,e.url)||i.urlSubject.next(e.url),Ka(t.data,e.data)||i.dataSubject.next(e.data)}else i.snapshot=i._futureSnapshot,i.dataSubject.next(i._futureSnapshot.data)}function hD(i,t){let e=Ka(i.params,t.params)&&bse(i.url,t.url),n=!i.parent!=!t.parent;return e&&!n&&(!i.parent||hD(i.parent,t.parent))}function iH(i){return typeof i.title=="string"||i.title===null}var Use=(()=>{class i{constructor(){this.activated=null,this._activatedRoute=null,this.name=_i,this.activateEvents=new Qe,this.deactivateEvents=new Qe,this.attachEvents=new Qe,this.detachEvents=new Qe,this.parentContexts=ye(Wg),this.location=ye(rn),this.changeDetector=ye(ci),this.environmentInjector=ye(xo),this.inputBinder=ye(sx,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:r}=e.name;if(n)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new pt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new pt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new pt(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new pt(4013,!1);this._activatedRoute=e;let r=this.location,s=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new mD(e,a,r.injector);this.activated=r.createComponent(s,{index:r.length,injector:c,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[zi]})}}return i})(),mD=class i{__ngOutletInjector(t){return new i(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===zm?this.route:t===Wg?this.childContexts:this.parent.get(t,e)}},sx=new _e(""),F5=(()=>{class i{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:n}=e,r=pu([n.queryParams,n.params,n.data]).pipe(Kn(([o,s,a],c)=>(a=ge(ge(ge({},o),s),a),c===0?ut(a):Promise.resolve(a)))).subscribe(o=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(e);return}let s=cz(n.component);if(!s){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of s.inputs)e.activatedComponentRef.setInput(a,o[a])});this.outletDataSubscriptions.set(e,r)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})();function zse(i,t,e){let n=Hg(i,t._root,e?e._root:void 0);return new ex(n,t)}function Hg(i,t,e){if(e&&i.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let r=Hse(i,t,e);return new us(n,r)}else{if(i.shouldAttach(t.value)){let o=i.retrieve(t.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>Hg(i,a)),s}}let n=jse(t.value),r=t.children.map(o=>Hg(i,o));return new us(n,r)}}function Hse(i,t,e){return t.children.map(n=>{for(let r of e.children)if(i.shouldReuseRoute(n.value,r.value.snapshot))return Hg(i,n,r);return Hg(i,n)})}function jse(i){return new zm(new Ri(i.url),new Ri(i.params),new Ri(i.queryParams),new Ri(i.fragment),new Ri(i.data),i.outlet,i.component,i)}var nH="ngNavigationCancelingError";function rH(i,t){let{redirectTo:e,navigationBehaviorOptions:n}=Vm(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=oH(!1,hs.Redirect);return r.url=e,r.navigationBehaviorOptions=n,r}function oH(i,t){let e=new Error(`NavigationCancelingError: ${i||""}`);return e[nH]=!0,e.cancellationCode=t,e}function $se(i){return sH(i)&&Vm(i.url)}function sH(i){return!!i&&i[nH]}var Gse=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=rt({type:i,selectors:[["ng-component"]],standalone:!0,features:[Dt],decls:1,vars:0,template:function(n,r){n&1&&Fe(0,"router-outlet")},dependencies:[Use],encapsulation:2})}}return i})();function Wse(i,t){return i.providers&&!i._injector&&(i._injector=ry(i.providers,t,`Route: ${i.path}`)),i._injector??t}function wD(i){let t=i.children&&i.children.map(wD),e=t?Nt(ge({},i),{children:t}):ge({},i);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==_i&&(e.component=Gse),e}function Qa(i){return i.outlet||_i}function qse(i,t){let e=i.filter(n=>Qa(n)===t);return e.push(...i.filter(n=>Qa(n)!==t)),e}function qg(i){if(!i)return null;if(i.routeConfig?._injector)return i.routeConfig._injector;for(let t=i.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var Xse=(i,t,e,n)=>Et(r=>(new pD(t,r.targetRouterState,r.currentRouterState,e,n).activate(i),r)),pD=class{constructor(t,e,n,r,o){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r,this.inputBindingEnabled=o}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),WI(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let r=Rm(e);t.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,r[s],n),delete r[s]}),Object.values(r).forEach(o=>{this.deactivateRouteAndItsChildren(o,n)})}deactivateRoutes(t,e,n){let r=t.value,o=e?e.value:null;if(r===o)if(r.component){let s=n.getContext(r.outlet);s&&this.deactivateChildRoutes(t,e,s.children)}else this.deactivateChildRoutes(t,e,n);else o&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,o=Rm(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);if(n&&n.outlet){let s=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,o=Rm(t);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,r);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let r=Rm(e);t.children.forEach(o=>{this.activateRoutes(o,r[o.value.outlet],n),this.forwardEvent(new cD(o.value.snapshot))}),t.children.length&&this.forwardEvent(new sD(t.value.snapshot))}activateRoutes(t,e,n){let r=t.value,o=e?e.value:null;if(WI(r),r===o)if(r.component){let s=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,s.children)}else this.activateChildRoutes(t,e,n);else if(r.component){let s=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),WI(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=qg(r.snapshot);s.attachRef=null,s.route=r,s.injector=a,s.outlet&&s.outlet.activateWith(r,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,n)}},ix=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Lm=class{constructor(t,e){this.component=t,this.route=e}};function Yse(i,t,e){let n=i._root,r=t?t._root:null;return Ag(n,r,e,[n.value])}function Zse(i){let t=i.routeConfig?i.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:i,guards:t}}function jm(i,t){let e=Symbol(),n=t.get(i,e);return n===e?typeof i=="function"&&!CV(i)?i:t.get(i):n}function Ag(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=Rm(t);return i.children.forEach(s=>{Kse(s,o[s.value.outlet],e,n.concat([s.value]),r),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,a])=>Rg(a,e.getContext(s),r)),r}function Kse(i,t,e,n,r={canDeactivateChecks:[],canActivateChecks:[]}){let o=i.value,s=t?t.value:null,a=e?e.getContext(i.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let c=Qse(s,o,o.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new ix(n)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Ag(i,t,a?a.children:null,n,r):Ag(i,t,e,n,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Lm(a.outlet.component,s))}else s&&Rg(t,a,r),r.canActivateChecks.push(new ix(n)),o.component?Ag(i,null,a?a.children:null,n,r):Ag(i,null,e,n,r);return r}function Qse(i,t,e){if(typeof e=="function")return e(i,t);switch(e){case"pathParamsChange":return!Lu(i.url,t.url);case"pathParamsOrQueryParamsChange":return!Lu(i.url,t.url)||!Ka(i.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hD(i,t)||!Ka(i.queryParams,t.queryParams);case"paramsChange":default:return!hD(i,t)}}function Rg(i,t,e){let n=Rm(i),r=i.value;Object.entries(n).forEach(([o,s])=>{r.component?t?Rg(s,t.children.getContext(o),e):Rg(s,null,e):Rg(s,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Lm(t.outlet.component,r)):e.canDeactivateChecks.push(new Lm(null,r)):e.canDeactivateChecks.push(new Lm(null,r))}function Xg(i){return typeof i=="function"}function Jse(i){return typeof i=="boolean"}function eae(i){return i&&Xg(i.canLoad)}function tae(i){return i&&Xg(i.canActivate)}function iae(i){return i&&Xg(i.canActivateChild)}function nae(i){return i&&Xg(i.canDeactivate)}function rae(i){return i&&Xg(i.canMatch)}function aH(i){return i instanceof Dc||i?.name==="EmptyError"}var $y=Symbol("INITIAL_VALUE");function Hm(){return Kn(i=>pu(i.map(t=>t.pipe(nn(1),or($y)))).pipe(Et(t=>{for(let e of t)if(e!==!0){if(e===$y)return $y;if(e===!1||e instanceof id)return e}return!0}),Pi(t=>t!==$y),nn(1)))}function oae(i,t){return jn(e=>{let{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:s}}=e;return s.length===0&&o.length===0?ut(Nt(ge({},e),{guardsResult:!0})):sae(s,n,r,i).pipe(jn(a=>a&&Jse(a)?aae(n,o,i,t):ut(a)),Et(a=>Nt(ge({},e),{guardsResult:a})))})}function sae(i,t,e,n){return cn(i).pipe(jn(r=>hae(r.component,r.route,e,t,n)),Ba(r=>r!==!0,!0))}function aae(i,t,e,n){return cn(t).pipe(kc(r=>Ll(lae(r.route.parent,n),cae(r.route,n),uae(i,r.path,e),dae(i,r.route,e))),Ba(r=>r!==!0,!0))}function cae(i,t){return i!==null&&t&&t(new aD(i)),ut(!0)}function lae(i,t){return i!==null&&t&&t(new oD(i)),ut(!0)}function dae(i,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return ut(!0);let r=n.map(o=>om(()=>{let s=qg(t)??e,a=jm(o,s),c=tae(a)?a.canActivate(t,i):Fc(s,()=>a(t,i));return od(c).pipe(Ba())}));return ut(r).pipe(Hm())}function uae(i,t,e){let n=t[t.length-1],o=t.slice(0,t.length-1).reverse().map(s=>Zse(s)).filter(s=>s!==null).map(s=>om(()=>{let a=s.guards.map(c=>{let l=qg(s.node)??e,d=jm(c,l),u=iae(d)?d.canActivateChild(n,i):Fc(l,()=>d(n,i));return od(u).pipe(Ba())});return ut(a).pipe(Hm())}));return ut(o).pipe(Hm())}function hae(i,t,e,n,r){let o=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!o||o.length===0)return ut(!0);let s=o.map(a=>{let c=qg(t)??r,l=jm(a,c),d=nae(l)?l.canDeactivate(i,t,e,n):Fc(c,()=>l(i,t,e,n));return od(d).pipe(Ba())});return ut(s).pipe(Hm())}function mae(i,t,e,n){let r=t.canLoad;if(r===void 0||r.length===0)return ut(!0);let o=r.map(s=>{let a=jm(s,i),c=eae(a)?a.canLoad(t,e):Fc(i,()=>a(t,e));return od(c)});return ut(o).pipe(Hm(),cH(n))}function cH(i){return k1(Pn(t=>{if(Vm(t))throw rH(i,t)}),Et(t=>t===!0))}function pae(i,t,e,n){let r=t.canMatch;if(!r||r.length===0)return ut(!0);let o=r.map(s=>{let a=jm(s,i),c=rae(a)?a.canMatch(t,e):Fc(i,()=>a(t,e));return od(c)});return ut(o).pipe(Hm(),cH(n))}var jg=class{constructor(t){this.segmentGroup=t||null}},nx=class extends Error{constructor(t){super(),this.urlTree=t}};function Nm(i){return Rl(new jg(i))}function fae(i){return Rl(new pt(4e3,!1))}function gae(i){return Rl(oH(!1,hs.GuardRejected))}var fD=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),r.numberOfChildren===0)return ut(n);if(r.numberOfChildren>1||!r.children[_i])return fae(t.redirectTo);r=r.children[_i]}}applyRedirectCommands(t,e,n){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e.startsWith("/"))throw new nx(r);return r}applyRedirectCreateUrlTree(t,e,n,r){let o=this.createSegmentGroup(t,e.root,n,r);return new id(o,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([r,o])=>{if(typeof o=="string"&&o.startsWith(":")){let a=o.substring(1);n[r]=e[a]}else n[r]=o}),n}createSegmentGroup(t,e,n,r){let o=this.createSegments(t,e.segments,n,r),s={};return Object.entries(e.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(t,c,n,r)}),new Zi(o,s)}createSegments(t,e,n,r){return e.map(o=>o.path.startsWith(":")?this.findPosParam(t,o,r):this.findOrReturn(o,n))}findPosParam(t,e,n){let r=n[e.path.substring(1)];if(!r)throw new pt(4001,!1);return r}findOrReturn(t,e){let n=0;for(let r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}},gD={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function _ae(i,t,e,n,r){let o=MD(i,t,e);return o.matched?(n=Wse(t,n),pae(n,t,e,r).pipe(Et(s=>s===!0?o:ge({},gD)))):ut(o)}function MD(i,t,e){if(t.path==="**")return bae(e);if(t.path==="")return t.pathMatch==="full"&&(i.hasChildren()||e.length>0)?ge({},gD):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||mse)(e,i,t);if(!r)return ge({},gD);let o={};Object.entries(r.posParams??{}).forEach(([a,c])=>{o[a]=c.path});let s=r.consumed.length>0?ge(ge({},o),r.consumed[r.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:s,positionalParamSegments:r.posParams??{}}}function bae(i){return{matched:!0,parameters:i.length>0?z5(i).parameters:{},consumedSegments:i,remainingSegments:[],positionalParamSegments:{}}}function L5(i,t,e,n){return e.length>0&&xae(i,e,n)?{segmentGroup:new Zi(t,yae(n,new Zi(e,i.children))),slicedSegments:[]}:e.length===0&&wae(i,e,n)?{segmentGroup:new Zi(i.segments,vae(i,e,n,i.children)),slicedSegments:e}:{segmentGroup:new Zi(i.segments,i.children),slicedSegments:e}}function vae(i,t,e,n){let r={};for(let o of e)if(ax(i,t,o)&&!n[Qa(o)]){let s=new Zi([],{});r[Qa(o)]=s}return ge(ge({},n),r)}function yae(i,t){let e={};e[_i]=t;for(let n of i)if(n.path===""&&Qa(n)!==_i){let r=new Zi([],{});e[Qa(n)]=r}return e}function xae(i,t,e){return e.some(n=>ax(i,t,n)&&Qa(n)!==_i)}function wae(i,t,e){return e.some(n=>ax(i,t,n))}function ax(i,t,e){return(i.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Mae(i,t,e,n){return Qa(i)!==n&&(n===_i||!ax(t,e,i))?!1:MD(t,i,e).matched}function Cae(i,t,e){return t.length===0&&!i.children[e]}var _D=class{};function Sae(i,t,e,n,r,o,s="emptyOnly"){return new bD(i,t,e,n,r,s,o).recognize()}var Eae=31,bD=class{constructor(t,e,n,r,o,s,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=r,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new fD(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new pt(4002,`'${t.segmentGroup}'`)}recognize(){let t=L5(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(Et(e=>{let n=new zg([],Object.freeze({}),Object.freeze(ge({},this.urlTree.queryParams)),this.urlTree.fragment,{},_i,this.rootComponentType,null,{}),r=new us(n,e),o=new tx("",r),s=Pse(n,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(o._root,null),{state:o,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,_i).pipe(La(n=>{if(n instanceof nx)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof jg?this.noMatchError(n):n}))}inheritParamsAndData(t,e){let n=t.value,r=yD(n,e,this.paramsInheritanceStrategy);n.params=Object.freeze(r.params),n.data=Object.freeze(r.data),t.children.forEach(o=>this.inheritParamsAndData(o,n))}processSegmentGroup(t,e,n,r){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,r,!0).pipe(Et(o=>o instanceof us?[o]:[]))}processChildren(t,e,n){let r=[];for(let o of Object.keys(n.children))o==="primary"?r.unshift(o):r.push(o);return cn(r).pipe(kc(o=>{let s=n.children[o],a=qse(e,o);return this.processSegmentGroup(t,a,s,o)}),L1((o,s)=>(o.push(...s),o)),Bl(null),F1(),jn(o=>{if(o===null)return Nm(n);let s=lH(o);return Tae(s),ut(s)}))}processSegment(t,e,n,r,o,s){return cn(e).pipe(kc(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,n,r,o,s).pipe(La(c=>{if(c instanceof jg)return ut(null);throw c}))),Ba(a=>!!a),La(a=>{if(aH(a))return Cae(n,r,o)?ut(new _D):Nm(n);throw a}))}processSegmentAgainstRoute(t,e,n,r,o,s,a){return Mae(n,r,o,s)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,n,o,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,n,o,s):Nm(r):Nm(r)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,o,s){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=MD(e,r,o);if(!a)return Nm(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Eae&&(this.allowRedirects=!1));let u=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,u).pipe(jn(h=>this.processSegment(t,n,e,h.concat(d),s,!1)))}matchSegmentAgainstRoute(t,e,n,r,o){let s=_ae(e,n,r,t,this.urlSerializer);return n.path==="**"&&(e.children={}),s.pipe(Kn(a=>a.matched?(t=n._injector??t,this.getChildConfig(t,n,r).pipe(Kn(({routes:c})=>{let l=n._loadedInjector??t,{consumedSegments:d,remainingSegments:u,parameters:h}=a,m=new zg(d,h,Object.freeze(ge({},this.urlTree.queryParams)),this.urlTree.fragment,Dae(n),Qa(n),n.component??n._loadedComponent??null,n,kae(n)),{segmentGroup:p,slicedSegments:_}=L5(e,d,u,c);if(_.length===0&&p.hasChildren())return this.processChildren(l,c,p).pipe(Et(g=>g===null?null:new us(m,g)));if(c.length===0&&_.length===0)return ut(new us(m,[]));let f=Qa(n)===o;return this.processSegment(l,c,p,_,f?_i:o,!0).pipe(Et(g=>new us(m,g instanceof us?[g]:[])))}))):Nm(e)))}getChildConfig(t,e,n){return e.children?ut({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?ut({routes:e._loadedRoutes,injector:e._loadedInjector}):mae(t,e,n,this.urlSerializer).pipe(jn(r=>r?this.configLoader.loadChildren(t,e).pipe(Pn(o=>{e._loadedRoutes=o.routes,e._loadedInjector=o.injector})):gae(e))):ut({routes:[],injector:t})}};function Tae(i){i.sort((t,e)=>t.value.outlet===_i?-1:e.value.outlet===_i?1:t.value.outlet.localeCompare(e.value.outlet))}function Iae(i){let t=i.value.routeConfig;return t&&t.path===""}function lH(i){let t=[],e=new Set;for(let n of i){if(!Iae(n)){t.push(n);continue}let r=t.find(o=>n.value.routeConfig===o.value.routeConfig);r!==void 0?(r.children.push(...n.children),e.add(r)):t.push(n)}for(let n of e){let r=lH(n.children);t.push(new us(n.value,r))}return t.filter(n=>!e.has(n))}function Dae(i){return i.data||{}}function kae(i){return i.resolve||{}}function Aae(i,t,e,n,r,o){return jn(s=>Sae(i,t,e,n,s.extractedUrl,r,o).pipe(Et(({state:a,tree:c})=>Nt(ge({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Pae(i,t){return jn(e=>{let{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return ut(e);let o=new Set(r.map(c=>c.route)),s=new Set;for(let c of o)if(!s.has(c))for(let l of dH(c))s.add(l);let a=0;return cn(s).pipe(kc(c=>o.has(c)?Oae(c,n,i,t):(c.data=yD(c,c.parent,i).resolve,ut(void 0))),Pn(()=>a++),sm(1),jn(c=>a===s.size?ut(e):Zn))})}function dH(i){let t=i.children.map(e=>dH(e)).flat();return[i,...t]}function Oae(i,t,e,n){let r=i.routeConfig,o=i._resolve;return r?.title!==void 0&&!iH(r)&&(o[$g]=r.title),Nae(o,i,t,n).pipe(Et(s=>(i._resolvedData=s,i.data=yD(i,i.parent,e).resolve,null)))}function Nae(i,t,e,n){let r=YI(i);if(r.length===0)return ut({});let o={};return cn(r).pipe(jn(s=>Rae(i[s],t,e,n).pipe(Ba(),Pn(a=>{o[s]=a}))),sm(1),R1(o),La(s=>aH(s)?Zn:Rl(s)))}function Rae(i,t,e,n){let r=qg(t)??n,o=jm(i,r),s=o.resolve?o.resolve(t,e):Fc(r,()=>o(t,e));return od(s)}function qI(i){return Kn(t=>{let e=i(t);return e?cn(e).pipe(Et(()=>t)):ut(t)})}var uH=(()=>{class i{buildTitle(e){let n,r=e.root;for(;r!==void 0;)n=this.getResolvedTitleForRoute(r)??n,r=r.children.find(o=>o.outlet===_i);return n}getResolvedTitleForRoute(e){return e.data[$g]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:()=>ye(Fae),providedIn:"root"})}}return i})(),Fae=(()=>{class i extends uH{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||i)(pe(A5))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Yg=new _e("",{providedIn:"root",factory:()=>({})}),rx=new _e(""),CD=(()=>{class i{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=ye(ly)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return ut(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=od(e.loadComponent()).pipe(Et(hH),Pn(o=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=o}),Ul(()=>{this.componentLoaders.delete(e)})),r=new Nl(n,()=>new Le).pipe(tm());return this.componentLoaders.set(e,r),r}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return ut({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let o=Lae(n,this.compiler,e,this.onLoadEndListener).pipe(Ul(()=>{this.childrenLoaders.delete(n)})),s=new Nl(o,()=>new Le).pipe(tm());return this.childrenLoaders.set(n,s),s}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Lae(i,t,e,n){return od(i.loadChildren()).pipe(Et(hH),jn(r=>r instanceof Jf||Array.isArray(r)?ut(r):cn(t.compileModuleAsync(r))),Et(r=>{n&&n(i);let o,s,a=!1;return Array.isArray(r)?(s=r,a=!0):(o=r.create(e).injector,s=o.get(rx,[],{optional:!0,self:!0}).flat()),{routes:s.map(wD),injector:o}}))}function Bae(i){return i&&typeof i=="object"&&"default"in i}function hH(i){return Bae(i)?i.default:i}var SD=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:()=>ye(Vae),providedIn:"root"})}}return i})(),Vae=(()=>{class i{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),mH=new _e(""),pH=new _e("");function Uae(i,t,e){let n=i.get(pH),r=i.get(kt);return i.get(Ne).runOutsideAngular(()=>{if(!r.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(l=>setTimeout(l));let o,s=new Promise(l=>{o=l}),a=r.startViewTransition(()=>(o(),zae(i))),{onViewTransitionCreated:c}=n;return c&&Fc(i,()=>c({transition:a,from:t,to:e})),s})}function zae(i){return new Promise(t=>{iy(t,{injector:i})})}var ED=(()=>{class i{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Le,this.transitionAbortSubject=new Le,this.configLoader=ye(CD),this.environmentInjector=ye(xo),this.urlSerializer=ye(Gg),this.rootContexts=ye(Wg),this.location=ye(Kl),this.inputBindingEnabled=ye(sx,{optional:!0})!==null,this.titleStrategy=ye(uH),this.options=ye(Yg,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=ye(SD),this.createViewTransition=ye(mH,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ut(void 0),this.rootComponentType=null;let e=r=>this.events.next(new nD(r)),n=r=>this.events.next(new rD(r));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(Nt(ge(ge({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,r){return this.transitions=new Ri({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ng,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Pi(o=>o.id!==0),Et(o=>Nt(ge({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Kn(o=>{let s=!1,a=!1;return ut(o).pipe(Kn(c=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",hs.SupersededByNewNavigation),Zn;this.currentTransition=o,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?Nt(ge({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=c.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!l&&d!=="reload"){let u="";return this.events.next(new rd(c.id,this.urlSerializer.serialize(c.rawUrl),u,Zy.IgnoredSameUrlNavigation)),c.resolve(null),Zn}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ut(c).pipe(Kn(u=>{let h=this.transitions?.getValue();return this.events.next(new Um(u.id,this.urlSerializer.serialize(u.extractedUrl),u.source,u.restoredState)),h!==this.transitions?.getValue()?Zn:Promise.resolve(u)}),Aae(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),Pn(u=>{o.targetSnapshot=u.targetSnapshot,o.urlAfterRedirects=u.urlAfterRedirects,this.currentNavigation=Nt(ge({},this.currentNavigation),{finalUrl:u.urlAfterRedirects});let h=new Ky(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:u,extractedUrl:h,source:m,restoredState:p,extras:_}=c,f=new Um(u,this.urlSerializer.serialize(h),m,p);this.events.next(f);let g=eH(this.rootComponentType).snapshot;return this.currentTransition=o=Nt(ge({},c),{targetSnapshot:g,urlAfterRedirects:h,extras:Nt(ge({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=h,ut(o)}else{let u="";return this.events.next(new rd(c.id,this.urlSerializer.serialize(c.extractedUrl),u,Zy.IgnoredByUrlHandlingStrategy)),c.resolve(null),Zn}}),Pn(c=>{let l=new JI(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),Et(c=>(this.currentTransition=o=Nt(ge({},c),{guards:Yse(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),o)),oae(this.environmentInjector,c=>this.events.next(c)),Pn(c=>{if(o.guardsResult=c.guardsResult,Vm(c.guardsResult))throw rH(this.urlSerializer,c.guardsResult);let l=new eD(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),Pi(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",hs.GuardRejected),!1)),qI(c=>{if(c.guards.canActivateChecks.length)return ut(c).pipe(Pn(l=>{let d=new tD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),Kn(l=>{let d=!1;return ut(l).pipe(Pae(this.paramsInheritanceStrategy,this.environmentInjector),Pn({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(l,"",hs.NoDataFromResolver)}}))}),Pn(l=>{let d=new iD(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}))}),qI(c=>{let l=d=>{let u=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&u.push(this.configLoader.loadComponent(d.routeConfig).pipe(Pn(h=>{d.component=h}),Et(()=>{})));for(let h of d.children)u.push(...l(h));return u};return pu(l(c.targetSnapshot.root)).pipe(Bl(null),nn(1))}),qI(()=>this.afterPreactivation()),Kn(()=>{let{currentSnapshot:c,targetSnapshot:l}=o,d=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return d?cn(d).pipe(Et(()=>o)):ut(o)}),Et(c=>{let l=zse(e.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=o=Nt(ge({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,o}),Pn(()=>{this.events.next(new Vg)}),Xse(this.rootContexts,e.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),nn(1),Pn({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new qc(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),Rt(this.transitionAbortSubject.pipe(Pn(c=>{throw c}))),Ul(()=>{!s&&!a&&this.cancelNavigationTransition(o,"",hs.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),La(c=>{if(a=!0,sH(c))this.events.next(new nd(o.id,this.urlSerializer.serialize(o.extractedUrl),c.message,c.cancellationCode)),$se(c)?this.events.next(new Ug(c.url)):o.resolve(!1);else{this.events.next(new Bg(o.id,this.urlSerializer.serialize(o.extractedUrl),c,o.targetSnapshot??void 0));try{o.resolve(e.errorHandler(c))}catch(l){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(l)}}return Zn}))}))}cancelNavigationTransition(e,n,r){let o=new nd(e.id,this.urlSerializer.serialize(e.extractedUrl),n,r);this.events.next(o),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Hae(i){return i!==Ng}var jae=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:()=>ye($ae),providedIn:"root"})}}return i})(),vD=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},$ae=(()=>{class i extends vD{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),fH=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:()=>ye(Gae),providedIn:"root"})}}return i})(),Gae=(()=>{class i extends fH{constructor(){super(...arguments),this.location=ye(Kl),this.urlSerializer=ye(Gg),this.options=ye(Yg,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=ye(SD),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new id,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=eH(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof Um)this.stateMemento=this.createStateMemento();else if(e instanceof rd)this.rawUrlTree=n.initialUrl;else if(e instanceof Ky){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(r,n)}}else e instanceof Vg?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):e instanceof nd&&(e.code===hs.GuardRejected||e.code===hs.NoDataFromResolver)?this.restoreHistory(n):e instanceof Bg?this.restoreHistory(n,!0):e instanceof qc&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let r=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(r)||n.extras.replaceUrl){let o=this.browserPageId,s=ge(ge({},n.extras.state),this.generateNgRouterState(n.id,o));this.location.replaceState(r,"",s)}else{let o=ge(ge({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(r,"",o)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,o=this.currentPageId-r;o!==0?this.location.historyGo(o):this.currentUrlTree===e.finalUrl&&o===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Pg=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.FAILED=1]="FAILED",i[i.REDIRECTING=2]="REDIRECTING",i}(Pg||{});function gH(i,t){i.events.pipe(Pi(e=>e instanceof qc||e instanceof nd||e instanceof Bg||e instanceof rd),Et(e=>e instanceof qc||e instanceof rd?Pg.COMPLETE:(e instanceof nd?e.code===hs.Redirect||e.code===hs.SupersededByNewNavigation:!1)?Pg.REDIRECTING:Pg.FAILED),Pi(e=>e!==Pg.REDIRECTING),nn(1)).subscribe(()=>{t()})}function Wae(i){throw i}var qae={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Xae={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xc=(()=>{class i{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=ye(oy),this.stateManager=ye(fH),this.options=ye(Yg,{optional:!0})||{},this.pendingTasks=ye(lg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=ye(ED),this.urlSerializer=ye(Gg),this.location=ye(Kl),this.urlHandlingStrategy=ye(SD),this._events=new Le,this.errorHandler=this.options.errorHandler||Wae,this.navigated=!1,this.routeReuseStrategy=ye(jae),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=ye(rx,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!ye(sx,{optional:!0}),this.eventsSubscription=new Yt,this.isNgZoneEnabled=ye(Ne)instanceof Ne&&Ne.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let r=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(r!==null&&o!==null){if(this.stateManager.handleRouterEvent(n,o),n instanceof nd&&n.code!==hs.Redirect&&n.code!==hs.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof qc)this.navigated=!0;else if(n instanceof Ug){let s=this.urlHandlingStrategy.merge(n.url,r.currentRawUrl),a={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||Hae(r.source)};this.scheduleNavigation(s,Ng,null,a,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}Zae(n)&&this._events.next(n)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ng,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,r){let o={replaceUrl:!0},s=r?.navigationId?r:null;if(r){let c=ge({},r);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(o.state=c)}let a=this.parseUrl(e);this.scheduleNavigation(a,n,s,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(wD),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:r,queryParams:o,fragment:s,queryParamsHandling:a,preserveFragment:c}=n,l=c?this.currentUrlTree.fragment:s,d=null;switch(a){case"merge":d=ge(ge({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let u;try{let h=r?r.snapshot:this.routerState.snapshot.root;u=Z5(h)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),u=this.currentUrlTree.root}return K5(u,e,d,l??null)}navigateByUrl(e,n={skipLocationChange:!1}){let r=Vm(e)?e:this.parseUrl(e),o=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(o,Ng,null,n)}navigate(e,n={skipLocationChange:!1}){return Yae(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let r;if(n===!0?r=ge({},qae):n===!1?r=ge({},Xae):r=n,Vm(e))return P5(this.currentUrlTree,e,r);let o=this.parseUrl(e);return P5(this.currentUrlTree,o,r)}removeEmptyProps(e){return Object.entries(e).reduce((n,[r,o])=>(o!=null&&(n[r]=o),n),{})}scheduleNavigation(e,n,r,o,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((u,h)=>{a=u,c=h});let d=this.pendingTasks.add();return gH(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:o,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(u=>Promise.reject(u))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Yae(i){for(let t=0;t<i.length;t++)if(i[t]==null)throw new pt(4008,!1)}function Zae(i){return!(i instanceof Vg)&&!(i instanceof Ug)}var ox=class{};var Kae=(()=>{class i{constructor(e,n,r,o,s){this.router=e,this.injector=r,this.preloadingStrategy=o,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(Pi(e=>e instanceof qc),kc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){let r=[];for(let o of n){o.providers&&!o._injector&&(o._injector=ry(o.providers,e,`Route: ${o.path}`));let s=o._injector??e,a=o._loadedInjector??s;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&r.push(this.preloadConfig(s,o)),(o.children||o._loadedRoutes)&&r.push(this.processRoutes(a,o.children??o._loadedRoutes))}return cn(r).pipe(Fl())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let r;n.loadChildren&&n.canLoad===void 0?r=this.loader.loadChildren(e,n):r=ut(null);let o=r.pipe(jn(s=>s===null?ut(void 0):(n._loadedRoutes=s.routes,n._loadedInjector=s.injector,this.processRoutes(s.injector??e,s.routes))));if(n.loadComponent&&!n._loadedComponent){let s=this.loader.loadComponent(n);return cn([o,s]).pipe(Fl())}else return o})}static{this.\u0275fac=function(n){return new(n||i)(pe(Xc),pe(ly),pe(xo),pe(ox),pe(CD))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),_H=new _e(""),Qae=(()=>{class i{constructor(e,n,r,o,s={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=r,this.zone=o,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=ye(xo),s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Um?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof qc?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof rd&&e.code===Zy.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof Qy&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>oe(this,null,function*(){yield new Promise(r=>{setTimeout(()=>{r()}),iy(()=>{r()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new Qy(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(n){Yv()}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})();function Jae(i){return i.routerState.root}function Zg(i,t){return{\u0275kind:i,\u0275providers:t}}function ece(){let i=ye(Jn);return t=>{let e=i.get(Zl);if(t!==e.components[0])return;let n=i.get(Xc),r=i.get(bH);i.get(TD)===1&&n.initialNavigation(),i.get(vH,null,Ti.Optional)?.setUpPreloading(),i.get(_H,null,Ti.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var bH=new _e("",{factory:()=>new Le}),TD=new _e("",{providedIn:"root",factory:()=>1});function tce(){return Zg(2,[{provide:TD,useValue:0},{provide:cy,multi:!0,deps:[Jn],useFactory:t=>{let e=t.get(bz,Promise.resolve());return()=>e.then(()=>new Promise(n=>{let r=t.get(Xc),o=t.get(bH);gH(r,()=>{n(!0)}),t.get(ED).afterPreactivation=()=>(n(!0),o.closed?ut(void 0):o),r.initialNavigation()}))}}])}function ice(){return Zg(3,[{provide:cy,multi:!0,useFactory:()=>{let t=ye(Xc);return()=>{t.setUpLocationChangeListener()}}},{provide:TD,useValue:2}])}var vH=new _e("");function nce(i){return Zg(0,[{provide:vH,useExisting:Kae},{provide:ox,useExisting:i}])}function rce(){return Zg(8,[F5,{provide:sx,useExisting:F5}])}function oce(i){let t=[{provide:mH,useValue:Uae},{provide:pH,useValue:ge({skipNextTransition:!!i?.skipInitialTransition},i)}];return Zg(9,t)}var B5=new _e("ROUTER_FORROOT_GUARD"),sce=[Kl,{provide:Gg,useClass:Fg},Xc,Wg,{provide:zm,useFactory:Jae,deps:[Xc]},CD,[]],ID=(()=>{class i{constructor(e){}static forRoot(e,n){return{ngModule:i,providers:[sce,[],{provide:rx,multi:!0,useValue:e},{provide:B5,useFactory:dce,deps:[[Xc,new Iu,new wm]]},{provide:Yg,useValue:n||{}},n?.useHash?cce():lce(),ace(),n?.preloadingStrategy?nce(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?uce(n):[],n?.bindToComponentInputs?rce().\u0275providers:[],n?.enableViewTransitions?oce().\u0275providers:[],hce()]}}static forChild(e){return{ngModule:i,providers:[{provide:rx,multi:!0,useValue:e}]}}static{this.\u0275fac=function(n){return new(n||i)(pe(B5,8))}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})();function ace(){return{provide:_H,useFactory:()=>{let i=ye(Dz),t=ye(Ne),e=ye(Yg),n=ye(ED),r=ye(Gg);return e.scrollOffset&&i.setOffset(e.scrollOffset),new Qae(r,n,i,t,e)}}}function cce(){return{provide:Pu,useClass:yz}}function lce(){return{provide:Pu,useClass:gI}}function dce(i){return"guarded"}function uce(i){return[i.initialNavigation==="disabled"?ice().\u0275providers:[],i.initialNavigation==="enabledBlocking"?tce().\u0275providers:[]]}var V5=new _e("");function hce(){return[{provide:V5,useFactory:ece},{provide:tI,multi:!0,useExisting:V5}]}var kD;try{kD=typeof Intl<"u"&&Intl.v8BreakIterator}catch{kD=!1}var li=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?bI(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||kD)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(pe(Ga))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var $m,yH=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function AD(){if($m)return $m;if(typeof document!="object"||!document)return $m=new Set(yH),$m;let i=document.createElement("input");return $m=new Set(yH.filter(t=>(i.setAttribute("type",t),i.type===t))),$m}var Kg;function pce(){if(Kg==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Kg=!0}))}finally{Kg=Kg||!1}return Kg}function Ns(i){return pce()?i:!!i.capture}var aa=function(i){return i[i.NORMAL=0]="NORMAL",i[i.NEGATED=1]="NEGATED",i[i.INVERTED=2]="INVERTED",i}(aa||{}),cx,Bu;function lx(){if(Bu==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return Bu=!1,Bu;if("scrollBehavior"in document.documentElement.style)Bu=!0;else{let i=Element.prototype.scrollTo;i?Bu=!/\{\s*\[native code\]\s*\}/.test(i.toString()):Bu=!1}}return Bu}function Gm(){if(typeof document!="object"||!document)return aa.NORMAL;if(cx==null){let i=document.createElement("div"),t=i.style;i.dir="rtl",t.width="1px",t.overflow="auto",t.visibility="hidden",t.pointerEvents="none",t.position="absolute";let e=document.createElement("div"),n=e.style;n.width="2px",n.height="1px",i.appendChild(e),document.body.appendChild(i),cx=aa.NORMAL,i.scrollLeft===0&&(i.scrollLeft=1,cx=i.scrollLeft===0?aa.NEGATED:aa.INVERTED),i.remove()}return cx}var DD;function fce(){if(DD==null){let i=typeof document<"u"?document.head:null;DD=!!(i&&(i.createShadowRoot||i.attachShadow))}return DD}function xH(i){if(fce()){let t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Rs(i){return i.composedPath?i.composedPath()[0]:i.target}function Qg(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function To(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function Jr(i){return i!=null&&`${i}`!="false"}function Ja(i,t=0){return gce(i)?Number(i):t}function gce(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function Wm(i){return Array.isArray(i)?i:[i]}function er(i){return i==null?"":typeof i=="string"?i:`${i}px`}function jo(i){return i instanceof Re?i.nativeElement:i}function _ce(i){if(i.type==="characterData"&&i.target instanceof Comment)return!0;if(i.type==="childList"){for(let t=0;t<i.addedNodes.length;t++)if(!(i.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<i.removedNodes.length;t++)if(!(i.removedNodes[t]instanceof Comment))return!1;return!0}return!1}var wH=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),bce=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){let n=jo(e);return new Gt(r=>{let s=this._observeElement(n).pipe(Et(a=>a.filter(c=>!_ce(c))),Pi(a=>!!a.length)).subscribe(r);return()=>{s.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{let n=new Le,r=this._mutationObserverFactory.create(o=>n.next(o));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){let{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}static{this.\u0275fac=function(n){return new(n||i)(pe(wH))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),dx=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=Ja(e),this._subscribe()}constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new Qe,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(fu(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(F(bce),F(Re),F(Ne))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[ie.HasDecoratorInputTransform,"cdkObserveContentDisabled","disabled",Je],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[zt]})}}return i})(),qm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({providers:[wH]})}}return i})();var MH=new Set,Vu,vce=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):xce}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&yce(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(n){return new(n||i)(pe(li),pe(ag,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function yce(i,t){if(!MH.has(i))try{Vu||(Vu=document.createElement("style"),t&&Vu.setAttribute("nonce",t),Vu.setAttribute("type","text/css"),document.head.appendChild(Vu)),Vu.sheet&&(Vu.sheet.insertRule(`@media ${i} {body{ }}`,0),MH.add(i))}catch(e){console.error(e)}}function xce(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var ux=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new Le}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return CH(Wm(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=CH(Wm(e)).map(s=>this._registerQuery(s).observable),o=pu(r);return o=Ll(o.pipe(nn(1)),o.pipe(gu(1),fu(0))),o.pipe(Et(s=>{let a={matches:!1,breakpoints:{}};return s.forEach(({matches:c,query:l})=>{a.matches=a.matches||c,a.breakpoints[l]=c}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let n=this._mediaMatcher.matchMedia(e),o={observable:new Gt(s=>{let a=c=>this._zone.run(()=>s.next(c));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(or(n),Et(({matches:s})=>({query:e,matches:s})),Rt(this._destroySubject)),mql:n};return this._queries.set(e,o),o}static{this.\u0275fac=function(n){return new(n||i)(pe(vce),pe(Ne))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function CH(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var SH={XSmall:"(max-width: 599.98px)",Small:"(min-width: 600px) and (max-width: 959.98px)",Medium:"(min-width: 960px) and (max-width: 1279.98px)",Large:"(min-width: 1280px) and (max-width: 1919.98px)",XLarge:"(min-width: 1920px)",Handset:"(max-width: 599.98px) and (orientation: portrait), (max-width: 959.98px) and (orientation: landscape)",Tablet:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait), (min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",Web:"(min-width: 840px) and (orientation: portrait), (min-width: 1280px) and (orientation: landscape)",HandsetPortrait:"(max-width: 599.98px) and (orientation: portrait)",TabletPortrait:"(min-width: 600px) and (max-width: 839.98px) and (orientation: portrait)",WebPortrait:"(min-width: 840px) and (orientation: portrait)",HandsetLandscape:"(max-width: 959.98px) and (orientation: landscape)",TabletLandscape:"(min-width: 960px) and (max-width: 1279.98px) and (orientation: landscape)",WebLandscape:"(min-width: 1280px) and (orientation: landscape)"};var DH=" ";function BD(i,t,e){let n=fx(i,t);e=e.trim(),!n.some(r=>r.trim()===e)&&(n.push(e),i.setAttribute(t,n.join(DH)))}function yx(i,t,e){let n=fx(i,t);e=e.trim();let r=n.filter(o=>o!==e);r.length?i.setAttribute(t,r.join(DH)):i.removeAttribute(t)}function fx(i,t){return i.getAttribute(t)?.match(/\S+/g)??[]}var kH="cdk-describedby-message",hx="cdk-describedby-host",ND=0,AH=(()=>{class i{constructor(e,n){this._platform=n,this._messageRegistry=new Map,this._messagesContainer=null,this._id=`${ND++}`,this._document=e,this._id=ye(Sm)+"-"+ND++}describe(e,n,r){if(!this._canBeDescribed(e,n))return;let o=PD(n,r);typeof n!="string"?(EH(n,this._id),this._messageRegistry.set(o,{messageElement:n,referenceCount:0})):this._messageRegistry.has(o)||this._createMessageElement(n,r),this._isElementDescribedByMessage(e,o)||this._addMessageReference(e,o)}removeDescription(e,n,r){if(!n||!this._isElementNode(e))return;let o=PD(n,r);if(this._isElementDescribedByMessage(e,o)&&this._removeMessageReference(e,o),typeof n=="string"){let s=this._messageRegistry.get(o);s&&s.referenceCount===0&&this._deleteMessageElement(o)}this._messagesContainer?.childNodes.length===0&&(this._messagesContainer.remove(),this._messagesContainer=null)}ngOnDestroy(){let e=this._document.querySelectorAll(`[${hx}="${this._id}"]`);for(let n=0;n<e.length;n++)this._removeCdkDescribedByReferenceIds(e[n]),e[n].removeAttribute(hx);this._messagesContainer?.remove(),this._messagesContainer=null,this._messageRegistry.clear()}_createMessageElement(e,n){let r=this._document.createElement("div");EH(r,this._id),r.textContent=e,n&&r.setAttribute("role",n),this._createMessagesContainer(),this._messagesContainer.appendChild(r),this._messageRegistry.set(PD(e,n),{messageElement:r,referenceCount:0})}_deleteMessageElement(e){this._messageRegistry.get(e)?.messageElement?.remove(),this._messageRegistry.delete(e)}_createMessagesContainer(){if(this._messagesContainer)return;let e="cdk-describedby-message-container",n=this._document.querySelectorAll(`.${e}[platform="server"]`);for(let o=0;o<n.length;o++)n[o].remove();let r=this._document.createElement("div");r.style.visibility="hidden",r.classList.add(e),r.classList.add("cdk-visually-hidden"),this._platform&&!this._platform.isBrowser&&r.setAttribute("platform","server"),this._document.body.appendChild(r),this._messagesContainer=r}_removeCdkDescribedByReferenceIds(e){let n=fx(e,"aria-describedby").filter(r=>r.indexOf(kH)!=0);e.setAttribute("aria-describedby",n.join(" "))}_addMessageReference(e,n){let r=this._messageRegistry.get(n);BD(e,"aria-describedby",r.messageElement.id),e.setAttribute(hx,this._id),r.referenceCount++}_removeMessageReference(e,n){let r=this._messageRegistry.get(n);r.referenceCount--,yx(e,"aria-describedby",r.messageElement.id),e.removeAttribute(hx)}_isElementDescribedByMessage(e,n){let r=fx(e,"aria-describedby"),o=this._messageRegistry.get(n),s=o&&o.messageElement.id;return!!s&&r.indexOf(s)!=-1}_canBeDescribed(e,n){if(!this._isElementNode(e))return!1;if(n&&typeof n=="object")return!0;let r=n==null?"":`${n}`.trim(),o=e.getAttribute("aria-label");return r?!o||o.trim()!==r:!1}_isElementNode(e){return e.nodeType===this._document.ELEMENT_NODE}static{this.\u0275fac=function(n){return new(n||i)(pe(kt),pe(li))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function PD(i,t){return typeof i=="string"?`${t||""}/${i}`:i}function EH(i,t){i.id||(i.id=`${kH}-${t}-${ND++}`)}var gx=class{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new Le,this._typeaheadSubscription=Yt.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new Le,this.change=new Le,t instanceof Ts?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):ny(t)&&(this._effectRef=nI(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Pn(e=>this._pressedLetters.push(e)),fu(t),Pi(()=>this._pressedLetters.length>0),Et(()=>this._pressedLetters.join(""))).subscribe(e=>{let n=this._getItemsArray();for(let r=1;r<n.length+1;r++){let o=(this._activeItemIndex+r)%n.length,s=n[o];if(!this._skipPredicateFn(s)&&s.getLabel().toUpperCase().trim().indexOf(e)===0){this.setActiveItem(o);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(o=>!t[o]||this._allowedModifierKeys.indexOf(o)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(o>0?o:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let o=this._activeItemIndex+this._pageUpAndDown.delta,s=this._getItemsArray().length;this._setActiveItemByIndex(o<s?o:s-1,-1);break}else return;default:(r||To(t,"shiftKey"))&&(t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e)));return}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),n=typeof t=="number"?t:e.indexOf(t),r=e[n];this._activeItem=r??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let n=1;n<=e.length;n++){let r=(this._activeItemIndex+t*n+e.length)%e.length,o=e[r];if(!this._skipPredicateFn(o)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(t+=e,!n[t])return;this.setActiveItem(t)}}_getItemsArray(){return ny(this._items)?this._items():this._items instanceof Ts?this._items.toArray():this._items}_itemsChanged(t){if(this._activeItem){let e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}}},_x=class extends gx{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}},sd=class extends gx{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};function VD(i){return i.buttons===0||i.detail===0}function UD(i){let t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var Fce=new _e("cdk-input-modality-detector-options"),Lce={ignoreKeys:[18,17,224,91,16]},PH=650,Xm=Ns({passive:!0,capture:!0}),Bce=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,o){this._platform=e,this._mostRecentTarget=null,this._modality=new Ri(null),this._lastTouchMs=0,this._onKeydown=s=>{this._options?.ignoreKeys?.some(a=>a===s.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Rs(s))},this._onMousedown=s=>{Date.now()-this._lastTouchMs<PH||(this._modality.next(VD(s)?"keyboard":"mouse"),this._mostRecentTarget=Rs(s))},this._onTouchstart=s=>{if(UD(s)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Rs(s)},this._options=ge(ge({},Lce),o),this.modalityDetected=this._modality.pipe(gu(1)),this.modalityChanged=this.modalityDetected.pipe(Vl()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,Xm),r.addEventListener("mousedown",this._onMousedown,Xm),r.addEventListener("touchstart",this._onTouchstart,Xm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Xm),document.removeEventListener("mousedown",this._onMousedown,Xm),document.removeEventListener("touchstart",this._onTouchstart,Xm))}static{this.\u0275fac=function(n){return new(n||i)(pe(li),pe(Ne),pe(kt),pe(Fce,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Vce=new _e("liveAnnouncerElement",{providedIn:"root",factory:Uce});function Uce(){return null}var zce=new _e("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),Hce=0,xx=(()=>{class i{constructor(e,n,r,o){this._ngZone=n,this._defaultOptions=o,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){let r=this._defaultOptions,o,s;return n.length===1&&typeof n[0]=="number"?s=n[0]:[o,s]=n,this.clear(),clearTimeout(this._previousTimeout),o||(o=r&&r.politeness?r.politeness:"polite"),s==null&&r&&(s=r.duration),this._liveElement.setAttribute("aria-live",o),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof s=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),s)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let o=0;o<n.length;o++)n[o].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${Hce++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){let n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let o=n[r],s=o.getAttribute("aria-owns");s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}static{this.\u0275fac=function(n){return new(n||i)(pe(Vce,8),pe(Ne),pe(kt),pe(zce,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var px=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(px||{}),jce=new _e("cdk-focus-monitor-default-options"),mx=Ns({passive:!0,capture:!0}),Yc=(()=>{class i{constructor(e,n,r,o,s){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new Le,this._rootNodeFocusAndBlurListener=a=>{let c=Rs(a);for(let l=c;l;l=l.parentElement)a.type==="focus"?this._onFocus(a,l):this._onBlur(a,l)},this._document=o,this._detectionMode=s?.detectionMode||px.IMMEDIATE}monitor(e,n=!1){let r=jo(e);if(!this._platform.isBrowser||r.nodeType!==1)return ut();let o=xH(r)||this._getDocument(),s=this._elementInfo.get(r);if(s)return n&&(s.checkChildren=!0),s.subject;let a={checkChildren:n,subject:new Le,rootNode:o};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let n=jo(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){let o=jo(e),s=this._getDocument().activeElement;o===s?this._getClosestElementsInfo(o).forEach(([a,c])=>this._originChanged(a,n,c)):(this._setOrigin(n),typeof o.focus=="function"&&o.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===px.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused",n==="touch"),e.classList.toggle("cdk-keyboard-focused",n==="keyboard"),e.classList.toggle("cdk-mouse-focused",n==="mouse"),e.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&n,this._detectionMode===px.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?PH:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,n){let r=this._elementInfo.get(n),o=Rs(e);!r||!r.checkChildren&&n!==o||this._originChanged(n,this._getFocusOrigin(o),r)}_onBlur(e,n){let r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,mx),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,mx)}),this._rootNodeFocusListenerCount.set(n,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Rt(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(e){let n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,mx),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,mx),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){let n=[];return this._elementInfo.forEach((r,o)=>{(o===e||r.checkChildren&&o.contains(e))&&n.push([o,r])}),n}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!n||n===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let o=e.labels;if(o){for(let s=0;s<o.length;s++)if(o[s].contains(n))return!0}return!1}static{this.\u0275fac=function(n){return new(n||i)(pe(Ne),pe(li),pe(Bce),pe(kt,8),pe(jce,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),OH=(()=>{class i{constructor(e,n){this._elementRef=e,this._focusMonitor=n,this._focusOrigin=null,this.cdkFocusChange=new Qe}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>{this._focusOrigin=n,this.cdkFocusChange.emit(n)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Yc))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0})}}return i})(),Uu=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(Uu||{}),TH="cdk-high-contrast-black-on-white",IH="cdk-high-contrast-white-on-black",OD="cdk-high-contrast-active",zD=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=ye(ux).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return Uu.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,o=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return Uu.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return Uu.BLACK_ON_WHITE}return Uu.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(OD,TH,IH),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===Uu.BLACK_ON_WHITE?e.add(OD,TH):n===Uu.WHITE_ON_BLACK&&e.add(OD,IH)}}static{this.\u0275fac=function(n){return new(n||i)(pe(li),pe(kt))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),NH=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(n){return new(n||i)(pe(zD))}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[qm]})}}return i})();var $ce=new _e("cdk-dir-doc",{providedIn:"root",factory:Gce});function Gce(){return ye(kt)}var Wce=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function qce(i){let t=i?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?Wce.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var yr=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new Qe,e){let n=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=qce(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(pe($ce,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var ad=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})();var Xce=["text"],Yce=[[["mat-icon"]],"*"],Zce=["mat-icon","*"];function Kce(i,t){if(i&1&&Fe(0,"mat-pseudo-checkbox",1),i&2){let e=G();q("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function Qce(i,t){if(i&1&&Fe(0,"mat-pseudo-checkbox",3),i&2){let e=G();q("disabled",e.disabled)}}function Jce(i,t){if(i&1&&(b(0,"span",4),M(1),v()),i&2){let e=G();P(),gt("(",e.group.label,")")}}var ele=["mat-internal-form-field",""],tle=["*"];function ile(){return!0}var nle=new _e("mat-sanity-checks",{providedIn:"root",factory:ile}),Vt=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return Qg()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(n){return new(n||i)(pe(zD),pe(nle,8),pe(kt))}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[ad,ad]})}}return i})();var zu=class{constructor(t,e,n,r,o){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=o,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,o=n?.isErrorState(r,e)??!1;o!==t&&(this.errorState=o,this._stateChanges.next())}};var Zm=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Fs=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(Fs||{}),$D=class{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=Fs.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},RH=Ns({passive:!0,capture:!0}),GD=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=Rs(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(o=>o.handleEvent(t))})}}addHandler(t,e,n,r){let o=this._events.get(e);if(o){let s=o.get(n);s?s.add(r):o.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,RH)})}removeHandler(t,e,n){let r=this._events.get(t);if(!r)return;let o=r.get(e);o&&(o.delete(n),o.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,RH)))}},FH={enterDuration:225,exitDuration:150},rle=800,LH=Ns({passive:!0,capture:!0}),BH=["mousedown","touchstart"],VH=["mouseup","mouseleave","touchend","touchcancel"],Jg=class i{static{this._eventManager=new GD}constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=jo(n))}fadeInRipple(t,e,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),o=ge(ge({},FH),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let s=n.radius||ole(t,e,r),a=t-r.left,c=e-r.top,l=o.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-s}px`,d.style.top=`${c-s}px`,d.style.height=`${s*2}px`,d.style.width=`${s*2}px`,n.color!=null&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,m=u.transitionDuration,p=h==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,_=new $D(this,d,n,p);d.style.transform="scale3d(1, 1, 1)",_.state=Fs.FADING_IN,n.persistent||(this._mostRecentTransientRipple=_);let f=null;return!p&&(l||o.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let g=()=>this._finishRippleTransition(_),S=()=>this._destroyRipple(_);d.addEventListener("transitionend",g),d.addEventListener("transitioncancel",S),f={onTransitionEnd:g,onTransitionCancel:S}}),this._activeRipples.set(_,f),(p||!l)&&this._finishRippleTransition(_),_}fadeOutRipple(t){if(t.state===Fs.FADING_OUT||t.state===Fs.HIDDEN)return;let e=t.element,n=ge(ge({},FH),t.config.animation);e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=Fs.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=jo(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,BH.forEach(n=>{i._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{VH.forEach(e=>{this._triggerElement.addEventListener(e,this,LH)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===Fs.FADING_IN?this._startFadeOutTransition(t):t.state===Fs.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=Fs.VISIBLE,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=Fs.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=VD(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+rle;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!UD(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===Fs.VISIBLE||t.config.terminateOnPointerUp&&t.state===Fs.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(BH.forEach(e=>i._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(VH.forEach(e=>t.removeEventListener(e,this,LH)),this._pointerUpEventsRegistered=!1))}};function ole(i,t,e){let n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}var ld=new _e("mat-ripple-global-options"),dd=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,o,s){this._elementRef=e,this._animationMode=s,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Jg(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ge(ge(ge({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,n,ge(ge({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,ge(ge({},this.rippleConfig),e))}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Ne),F(li),F(ld,8),F($i,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){n&2&&qe("mat-ripple-unbounded",r.unbounded)},inputs:{color:[ie.None,"matRippleColor","color"],unbounded:[ie.None,"matRippleUnbounded","unbounded"],centered:[ie.None,"matRippleCentered","centered"],radius:[ie.None,"matRippleRadius","radius"],animation:[ie.None,"matRippleAnimation","animation"],disabled:[ie.None,"matRippleDisabled","disabled"],trigger:[ie.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return i})(),Hu=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,Vt]})}}return i})(),sle=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}static{this.\u0275fac=function(n){return new(n||i)(F($i,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(n,r){n&2&&qe("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Dt],decls:0,vars:0,template:function(n,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}}return i})(),qD=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt]})}}return i})(),XD=new _e("MAT_OPTION_PARENT_COMPONENT");var YD=new _e("MatOptgroup");var ale=0,WD=class{constructor(t,e=!1){this.source=t,this.isUserInput=e}},Mx=(()=>{class i{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(e,n,r,o){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=o,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${ale++}`,this.onSelectionChange=new Qe,this._stateChanges=new Le}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,n){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!To(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new WD(this,e))}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(ci),F(XD,8),F(YD,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-option"]],viewQuery:function(n,r){if(n&1&&Lt(Xce,7),n&2){let o;Be(o=Ve())&&(r._text=o.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(n,r){n&1&&ne("click",function(){return r._selectViaInteraction()})("keydown",function(s){return r._handleKeydown(s)}),n&2&&(Ds("id",r.id),Tt("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),qe("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[zt,Dt],ngContentSelectors:Zce,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,r){n&1&&(Oi(Yce),ve(0,Kce,1,2,"mat-pseudo-checkbox",1),dt(1),b(2,"span",2,0),dt(4,1),v(),ve(5,Qce,1,1,"mat-pseudo-checkbox",3)(6,Jce,2,1,"span",4),Fe(7,"div",5)),n&2&&(Zt(0,r.multiple?0:-1),P(5),Zt(5,!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),P(),Zt(6,r.group&&r.group._inert?6:-1),P(),q("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[sle,dd],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return i})();function jH(i,t,e){if(e.length){let n=t.toArray(),r=e.toArray(),o=0;for(let s=0;s<i+1;s++)n[s].group&&n[s].group===r[o]&&o++;return o}return 0}function $H(i,t,e,n){return i<e?i:i+t>e+n?Math.max(0,i-n+t):e}var ZD=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Hu,Vt,qD]})}}return i})(),UH={capture:!0},zH=["focus","click","mouseenter","touchstart"],HD="mat-ripple-loader-uninitialized",jD="mat-ripple-loader-class-name",HH="mat-ripple-loader-centered",wx="mat-ripple-loader-disabled",Cx=(()=>{class i{constructor(){this._document=ye(kt,{optional:!0}),this._animationMode=ye($i,{optional:!0}),this._globalRippleOptions=ye(ld,{optional:!0}),this._platform=ye(li),this._ngZone=ye(Ne),this._hosts=new Map,this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;let r=e.target.closest(`[${HD}]`);r&&this._createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(let e of zH)this._document?.addEventListener(e,this._onInteraction,UH)})}ngOnDestroy(){let e=this._hosts.keys();for(let n of e)this.destroyRipple(n);for(let n of zH)this._document?.removeEventListener(n,this._onInteraction,UH)}configureRipple(e,n){e.setAttribute(HD,""),(n.className||!e.hasAttribute(jD))&&e.setAttribute(jD,n.className||""),n.centered&&e.setAttribute(HH,""),n.disabled&&e.setAttribute(wx,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,n){let r=this._hosts.get(e);if(r){r.disabled=n;return}n?e.setAttribute(wx,""):e.removeAttribute(wx)}_createRipple(e){if(!this._document)return;let n=this._hosts.get(e);if(n)return n;e.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(jD)),e.append(r);let o=new dd(new Re(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=e,o.centered=e.hasAttribute(HH),o.disabled=e.hasAttribute(wx),this.attachRipple(e,o),o}attachRipple(e,n){e.removeAttribute(HD),this._hosts.set(e,n)}destroyRipple(e){let n=this._hosts.get(e);n&&(n.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),GH=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=rt({type:i,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(n,r){n&2&&qe("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Dt],attrs:ele,ngContentSelectors:tle,decls:1,vars:0,template:function(n,r){n&1&&(Oi(),dt(0))},styles:[".mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-form-field{font-family:var(--mdc-form-field-label-text-font);line-height:var(--mdc-form-field-label-text-line-height);font-size:var(--mdc-form-field-label-text-size);font-weight:var(--mdc-form-field-label-text-weight);letter-spacing:var(--mdc-form-field-label-text-tracking);color:var(--mdc-form-field-label-text-color)}.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}"],encapsulation:2,changeDetection:0})}}return i})();var cle=["*"];var lle=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],dle=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],ule=new _e("MAT_CARD_CONFIG"),Km=(()=>{class i{constructor(e){this.appearance=e?.appearance||"raised"}static{this.\u0275fac=function(n){return new(n||i)(F(ule,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(n,r){n&2&&qe("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Dt],ngContentSelectors:cle,decls:1,vars:0,template:function(n,r){n&1&&(Oi(),dt(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return i})(),Qm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0})}}return i})();var Jm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return i})(),Sx=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"],standalone:!0})}}return i})();var ep=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[Dt],ngContentSelectors:dle,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(n,r){n&1&&(Oi(lle),dt(0),b(1,"div",0),dt(2,1),v(),dt(3,2))},encapsulation:2,changeDetection:0})}}return i})();var Ex=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,kr,Vt]})}}return i})();var hle=["*"],Tx;function mle(){if(Tx===void 0&&(Tx=null,typeof window<"u")){let i=window;i.trustedTypes!==void 0&&(Tx=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return Tx}function e_(i){return mle()?.createHTML(i)||i}function qH(i){return Error(`Unable to find icon with the name "${i}"`)}function ple(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function XH(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function YH(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var Kc=class{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}},fle=(()=>{class i{constructor(e,n,r,o){this._httpClient=e,this._sanitizer=n,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,o){return this._addSvgIconConfig(e,n,new Kc(r,null,o))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,o){let s=this._sanitizer.sanitize(Qr.HTML,r);if(!s)throw YH(r);let a=e_(s);return this._addSvgIconConfig(e,n,new Kc("",a,o))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new Kc(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){let o=this._sanitizer.sanitize(Qr.HTML,n);if(!o)throw YH(n);let s=e_(o);return this._addSvgIconSetConfig(e,new Kc("",s,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let n=this._sanitizer.sanitize(Qr.RESOURCE_URL,e);if(!n)throw XH(e);let r=this._cachedIconsByUrl.get(n);return r?ut(Ix(r)):this._loadSvgIconFromConfig(new Kc(e,null)).pipe(Pn(o=>this._cachedIconsByUrl.set(n,o)),Et(o=>Ix(o)))}getNamedSvgIcon(e,n=""){let r=ZH(n,e),o=this._svgIconConfigs.get(r);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(n,e),o)return this._svgIconConfigs.set(r,o),this._getSvgFromConfig(o);let s=this._iconSetConfigs.get(n);return s?this._getSvgFromIconSetConfigs(e,s):Rl(qH(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?ut(Ix(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Et(n=>Ix(n)))}_getSvgFromIconSetConfigs(e,n){let r=this._extractIconWithNameFromAnySet(e,n);if(r)return ut(r);let o=n.filter(s=>!s.svgText).map(s=>this._loadSvgIconSetFromConfig(s).pipe(La(a=>{let l=`Loading icon set URL: ${this._sanitizer.sanitize(Qr.RESOURCE_URL,s.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(l)),ut(null)})));return Lf(o).pipe(Et(()=>{let s=this._extractIconWithNameFromAnySet(e,n);if(!s)throw qH(e);return s}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){let o=n[r];if(o.svgText&&o.svgText.toString().indexOf(e)>-1){let s=this._svgElementFromConfig(o),a=this._extractSvgIconFromSet(s,e,o.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Pn(n=>e.svgText=n),Et(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?ut(null):this._fetchIcon(e).pipe(Pn(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){let o=e.querySelector(`[id="${n}"]`);if(!o)return null;let s=o.cloneNode(!0);if(s.removeAttribute("id"),s.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(s,r);if(s.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(s),r);let a=this._svgElementFromString(e_("<svg></svg>"));return a.appendChild(s),this._setSvgAttributes(a,r)}_svgElementFromString(e){let n=this._document.createElement("DIV");n.innerHTML=e;let r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let n=this._svgElementFromString(e_("<svg></svg>")),r=e.attributes;for(let o=0;o<r.length;o++){let{name:s,value:a}=r[o];s!=="id"&&n.setAttribute(s,a)}for(let o=0;o<e.childNodes.length;o++)e.childNodes[o].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[o].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){let{url:n,options:r}=e,o=r?.withCredentials??!1;if(!this._httpClient)throw ple();if(n==null)throw Error(`Cannot fetch icon from URL "${n}".`);let s=this._sanitizer.sanitize(Qr.RESOURCE_URL,n);if(!s)throw XH(n);let a=this._inProgressUrlFetches.get(s);if(a)return a;let c=this._httpClient.get(s,{responseType:"text",withCredentials:o}).pipe(Et(l=>e_(l)),Ul(()=>this._inProgressUrlFetches.delete(s)),Vf());return this._inProgressUrlFetches.set(s,c),c}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(ZH(e,n),r),this}_addSvgIconSetConfig(e,n){let r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){let n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){let o=this._resolvers[r](n,e);if(o)return gle(o)?new Kc(o.url,null,o.options):new Kc(o,null)}}static{this.\u0275fac=function(n){return new(n||i)(pe(M5,8),pe(Dg),pe(kt,8),pe(wo))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Ix(i){return i.cloneNode(!0)}function ZH(i,t){return i+":"+t}function gle(i){return!!(i.url&&i.options)}var _le=new _e("MAT_ICON_DEFAULT_OPTIONS"),ble=new _e("mat-icon-location",{providedIn:"root",factory:vle});function vle(){let i=ye(kt),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var KH=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],yle=KH.map(i=>`[${i}]`).join(", "),xle=/^url\(['"]?#(.*?)['"]?\)$/,ud=(()=>{class i{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,o,s,a){this._elementRef=e,this._iconRegistry=n,this._location=o,this._errorHandler=s,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Yt.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){let r=e.childNodes[n];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let n=this._elementsWithExternalReferences;n&&n.forEach((r,o)=>{r.forEach(s=>{o.setAttribute(s.name,`url('${e}#${s.value}')`)})})}_cacheChildrenWithExternalReferences(e){let n=e.querySelectorAll(yle),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<n.length;o++)KH.forEach(s=>{let a=n[o],c=a.getAttribute(s),l=c?c.match(xle):null;if(l){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:s,value:l[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(nn(1)).subscribe(o=>this._setSvgElement(o),o=>{let s=`Error retrieving icon ${n}:${r}! ${o.message}`;this._errorHandler.handleError(new Error(s))})}}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(fle),zr("aria-hidden"),F(ble),F(wo),F(_le,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(n,r){n&2&&(Tt("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Hr(r.color?"mat-"+r.color:""),qe("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[ie.HasDecoratorInputTransform,"inline","inline",Je],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[zt,Dt],ngContentSelectors:hle,decls:1,vars:0,template:function(n,r){n&1&&(Oi(),dt(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return i})(),Dx=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,Vt]})}}return i})();var t_=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},hd=class extends t_{constructor(t,e,n,r,o){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=o}},Ls=class extends t_{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},QD=class extends t_{constructor(t){super(),this.element=t instanceof Re?t.nativeElement:t}},tp=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof hd)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Ls)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof QD)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var Ax=class extends tp{constructor(t,e,n,r,o){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=s=>{this._document;let a=s.element;a.parentNode;let c=this._document.createComment("dom-portal");a.parentNode.insertBefore(c,a),this.outletElement.appendChild(a),this._attachedPortal=s,super.setDisposeFn(()=>{c.parentNode&&c.parentNode.replaceChild(a,c)})},this._document=o}attachComponentPortal(t){let n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||Jn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);r!==-1&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var QH=(()=>{class i extends Ls{constructor(e,n){super(e,n)}static{this.\u0275fac=function(n){return new(n||i)(F(ji),F(rn))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkPortal",""]],exportAs:["cdkPortal"],standalone:!0,features:[It]})}}return i})();var Qc=(()=>{class i extends tp{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new Qe,this.attachDomPortal=o=>{this._document;let s=o.element;s.parentNode;let a=this._document.createComment("dom-portal");o.setAttachedHost(this),s.parentNode.insertBefore(a,s),this._getRootNode().appendChild(s),this._attachedPortal=o,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(s,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let n=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,o=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),s=n.createComponent(o,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(s.hostView.rootNodes[0]),super.setDisposeFn(()=>s.destroy()),this._attachedPortal=e,this._attachedRef=s,this.attached.emit(s),s}attachTemplatePortal(e){e.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static{this.\u0275fac=function(n){return new(n||i)(F(Wa),F(rn),F(kt))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[ie.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[It]})}}return i})();var ip=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})();function Ox(i){return i&&typeof i.connect=="function"&&!(i instanceof Nl)}var np=function(i){return i[i.REPLACED=0]="REPLACED",i[i.INSERTED=1]="INSERTED",i[i.MOVED=2]="MOVED",i[i.REMOVED=3]="REMOVED",i}(np||{}),i_=new _e("_ViewRepeater"),rp=class{applyChanges(t,e,n,r,o){t.forEachOperation((s,a,c)=>{let l,d;if(s.previousIndex==null){let u=n(s,a,c);l=e.createEmbeddedView(u.templateRef,u.context,u.index),d=np.INSERTED}else c==null?(e.remove(a),d=np.REMOVED):(l=e.get(a),e.move(l,c),d=np.MOVED);o&&o({context:l?.context,operation:d,record:s})})}detach(){}};var Px=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,n=!0,r){this._multiple=t,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new Le,e&&e.length&&(t?e.forEach(o=>this._markSelected(o)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(n=>this._markSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(n=>this._unmarkSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,n=new Set(t);t.forEach(o=>this._markSelected(o)),e.filter(o=>!n.has(this._getConcreteValue(o,n))).forEach(o=>this._unmarkSelected(o));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let n of e)if(this.compareWith(t,n))return n;return t}else return t}};var Nx=(()=>{class i{constructor(){this._listeners=[]}notify(e,n){for(let r of this._listeners)r(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var wle=20,sp=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new Le,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=wle){return this._platform.isBrowser?new Gt(n=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(Gb(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):ut()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){let r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(Pi(o=>!o||r.indexOf(o)>-1))}getAncestorScrollContainers(e){let n=[];return this.scrollContainers.forEach((r,o)=>{this._scrollableContainsElement(o,e)&&n.push(o)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=jo(n),o=e.getElementRef().nativeElement;do if(r==o)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return Zs(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(pe(Ne),pe(li),pe(kt,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),JD=(()=>{class i{constructor(e,n,r,o){this.elementRef=e,this.scrollDispatcher=n,this.ngZone=r,this.dir=o,this._destroyed=new Le,this._elementScrolled=new Gt(s=>this.ngZone.runOutsideAngular(()=>Zs(this.elementRef.nativeElement,"scroll").pipe(Rt(this._destroyed)).subscribe(s)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(e){let n=this.elementRef.nativeElement,r=this.dir&&this.dir.value=="rtl";e.left==null&&(e.left=r?e.end:e.start),e.right==null&&(e.right=r?e.start:e.end),e.bottom!=null&&(e.top=n.scrollHeight-n.clientHeight-e.bottom),r&&Gm()!=aa.NORMAL?(e.left!=null&&(e.right=n.scrollWidth-n.clientWidth-e.left),Gm()==aa.INVERTED?e.left=e.right:Gm()==aa.NEGATED&&(e.left=e.right?-e.right:e.right)):e.right!=null&&(e.left=n.scrollWidth-n.clientWidth-e.right),this._applyScrollToOptions(e)}_applyScrollToOptions(e){let n=this.elementRef.nativeElement;lx()?n.scrollTo(e):(e.top!=null&&(n.scrollTop=e.top),e.left!=null&&(n.scrollLeft=e.left))}measureScrollOffset(e){let n="left",r="right",o=this.elementRef.nativeElement;if(e=="top")return o.scrollTop;if(e=="bottom")return o.scrollHeight-o.clientHeight-o.scrollTop;let s=this.dir&&this.dir.value=="rtl";return e=="start"?e=s?r:n:e=="end"&&(e=s?n:r),s&&Gm()==aa.INVERTED?e==n?o.scrollWidth-o.clientWidth-o.scrollLeft:o.scrollLeft:s&&Gm()==aa.NEGATED?e==n?o.scrollLeft+o.scrollWidth-o.clientWidth:-o.scrollLeft:e==n?o.scrollLeft:o.scrollWidth-o.clientWidth-o.scrollLeft}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(sp),F(Ne),F(yr,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]],standalone:!0})}}return i})(),Mle=20,la=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new Le,this._changeListener=o=>{this._change.next(o)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){let o=this._getWindow();o.addEventListener("resize",this._changeListener),o.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),r=e.documentElement,o=r.getBoundingClientRect(),s=-o.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,a=-o.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:s,left:a}}change(e=Mle){return e>0?this._change.pipe(Gb(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(pe(li),pe(Ne),pe(kt,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var op=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})(),n_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[ad,op,ad,op]})}}return i})();var Jc=function(i){return i[i.State=0]="State",i[i.Transition=1]="Transition",i[i.Sequence=2]="Sequence",i[i.Group=3]="Group",i[i.Animate=4]="Animate",i[i.Keyframes=5]="Keyframes",i[i.Style=6]="Style",i[i.Trigger=7]="Trigger",i[i.Reference=8]="Reference",i[i.AnimateChild=9]="AnimateChild",i[i.AnimateRef=10]="AnimateRef",i[i.Query=11]="Query",i[i.Stagger=12]="Stagger",i}(Jc||{}),X3e="*";function Bs(i,t){return{type:Jc.Trigger,name:i,definitions:t,options:{}}}function Io(i,t=null){return{type:Jc.Animate,styles:t,timings:i}}function Y3e(i,t=null){return{type:Jc.Sequence,steps:i,options:t}}function Wn(i){return{type:Jc.Style,styles:i,offset:null}}function eo(i,t,e){return{type:Jc.State,name:i,styles:t,options:e}}function to(i,t,e=null){return{type:Jc.Transition,expr:i,animation:t,options:e}}function i8(i=null){return{type:Jc.AnimateChild,options:i}}function n8(i,t,e=null){return{type:Jc.Query,selector:i,animation:t,options:e}}var e8=class{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._originalOnStartFns.push(t),this._onStartFns.push(t)}onDone(t){this._originalOnDoneFns.push(t),this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},t8=class{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,r=0,o=this.players.length;o==0?queueMicrotask(()=>this._onFinish()):this.players.forEach(s=>{s.onDone(()=>{++e==o&&this._onFinish()}),s.onDestroy(()=>{++n==o&&this._onDestroy()}),s.onStart(()=>{++r==o&&this._onStart()})}),this.totalTime=this.players.reduce((s,a)=>Math.max(s,a.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){let e=t*this.totalTime;this.players.forEach(n=>{let r=n.totalTime?Math.min(1,e/n.totalTime):1;n.setPosition(r)})}getPosition(){let t=this.players.reduce((e,n)=>e===null||n.totalTime>e.totalTime?n:e,null);return t!=null?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){let e=t=="start"?this._onStartFns:this._onDoneFns;e.forEach(n=>n()),e.length=0}},Z3e="!";var nk=["*"];function Cle(i,t){i&1&&dt(0)}var Sle=["tabListContainer"],Ele=["tabList"],Tle=["tabListInner"],Ile=["nextPaginator"],Dle=["previousPaginator"],kle=i=>({animationDuration:i}),Ale=(i,t)=>({value:i,params:t});function Ple(i,t){}var Ole=["tabBodyWrapper"],Nle=["tabHeader"];function Rle(i,t){}function Fle(i,t){if(i&1&&ve(0,Rle,0,0,"ng-template",12),i&2){let e=G().$implicit;q("cdkPortalOutlet",e.templateLabel)}}function Lle(i,t){if(i&1&&M(0),i&2){let e=G().$implicit;ft(e.textLabel)}}function Ble(i,t){if(i&1){let e=ot();b(0,"div",7,2),ne("click",function(){let r=Q(e),o=r.$implicit,s=r.$index,a=G(),c=So(1);return J(a._handleClick(o,c,s))})("cdkFocusChange",function(r){let o=Q(e).$index,s=G();return J(s._tabFocusChanged(r,o))}),Fe(2,"span",8)(3,"div",9),b(4,"span",10)(5,"span",11),ve(6,Fle,1,1,null,12)(7,Lle,1,1),v()()()}if(i&2){let e=t.$implicit,n=t.$index,r=So(1),o=G();Hr(e.labelClass),qe("mdc-tab--active",o.selectedIndex===n),q("id",o._getTabLabelId(n))("disabled",e.disabled)("fitInkBarToContent",o.fitInkBarToContent),Tt("tabIndex",o._getTabIndex(n))("aria-posinset",n+1)("aria-setsize",o._tabs.length)("aria-controls",o._getTabContentId(n))("aria-selected",o.selectedIndex===n)("aria-label",e.ariaLabel||null)("aria-labelledby",!e.ariaLabel&&e.ariaLabelledby?e.ariaLabelledby:null),P(3),q("matRippleTrigger",r)("matRippleDisabled",e.disabled||o.disableRipple),P(3),Zt(6,e.templateLabel?6:7)}}function Vle(i,t){i&1&&dt(0)}function Ule(i,t){if(i&1){let e=ot();b(0,"mat-tab-body",13),ne("_onCentered",function(){Q(e);let r=G();return J(r._removeTabBodyWrapperHeight())})("_onCentering",function(r){Q(e);let o=G();return J(o._setTabBodyWrapperHeight(r))}),v()}if(i&2){let e=t.$implicit,n=t.$index,r=G();Hr(e.bodyClass),qe("mat-mdc-tab-body-active",r.selectedIndex===n),q("id",r._getTabContentId(n))("content",e.content)("position",e.position)("origin",e.origin)("animationDuration",r.animationDuration)("preserveContent",r.preserveContent),Tt("tabindex",r.contentTabIndex!=null&&r.selectedIndex===n?r.contentTabIndex:null)("aria-labelledby",r._getTabLabelId(n))("aria-hidden",r.selectedIndex!==n)}}var zle=new _e("MatTabContent"),Hle=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(F(ji))}}static{this.\u0275dir=Me({type:i,selectors:[["","matTabContent",""]],standalone:!0,features:[Bt([{provide:zle,useExisting:i}])]})}}return i})(),jle=new _e("MatTabLabel"),s8=new _e("MAT_TAB"),rk=(()=>{class i extends QH{constructor(e,n,r){super(e,n),this._closestTab=r}static{this.\u0275fac=function(n){return new(n||i)(F(ji),F(rn),F(s8,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","mat-tab-label",""],["","matTabLabel",""]],standalone:!0,features:[Bt([{provide:jle,useExisting:i}]),It]})}}return i})(),a8=new _e("MAT_TAB_GROUP"),ok=(()=>{class i{get templateLabel(){return this._templateLabel}set templateLabel(e){this._setTemplateLabelInput(e)}get content(){return this._contentPortal}constructor(e,n){this._viewContainerRef=e,this._closestTabGroup=n,this.disabled=!1,this._explicitContent=void 0,this.textLabel="",this._contentPortal=null,this._stateChanges=new Le,this.position=null,this.origin=null,this.isActive=!1}ngOnChanges(e){(e.hasOwnProperty("textLabel")||e.hasOwnProperty("disabled"))&&this._stateChanges.next()}ngOnDestroy(){this._stateChanges.complete()}ngOnInit(){this._contentPortal=new Ls(this._explicitContent||this._implicitContent,this._viewContainerRef)}_setTemplateLabelInput(e){e&&e._closestTab===this&&(this._templateLabel=e)}static{this.\u0275fac=function(n){return new(n||i)(F(rn),F(a8,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-tab"]],contentQueries:function(n,r,o){if(n&1&&(ri(o,rk,5),ri(o,Hle,7,ji)),n&2){let s;Be(s=Ve())&&(r.templateLabel=s.first),Be(s=Ve())&&(r._explicitContent=s.first)}},viewQuery:function(n,r){if(n&1&&Lt(ji,7),n&2){let o;Be(o=Ve())&&(r._implicitContent=o.first)}},hostAttrs:["hidden",""],inputs:{disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je],textLabel:[ie.None,"label","textLabel"],ariaLabel:[ie.None,"aria-label","ariaLabel"],ariaLabelledby:[ie.None,"aria-labelledby","ariaLabelledby"],labelClass:"labelClass",bodyClass:"bodyClass"},exportAs:["matTab"],standalone:!0,features:[Bt([{provide:s8,useExisting:i}]),zt,zi,Dt],ngContentSelectors:nk,decls:1,vars:0,template:function(n,r){n&1&&(Oi(),ve(0,Cle,1,0,"ng-template"))},encapsulation:2})}}return i})(),ek="mdc-tab-indicator--active",r8="mdc-tab-indicator--no-transition",tk=class{constructor(t){this._items=t}hide(){this._items.forEach(t=>t.deactivateInkBar())}alignToElement(t){let e=this._items.find(r=>r.elementRef.nativeElement===t),n=this._currentItem;if(e!==n&&(n?.deactivateInkBar(),e)){let r=n?.elementRef.nativeElement.getBoundingClientRect?.();e.activateInkBar(r),this._currentItem=e}}},$le=(()=>{class i{constructor(){this._elementRef=ye(Re),this._fitToContent=!1}get fitInkBarToContent(){return this._fitToContent}set fitInkBarToContent(e){this._fitToContent!==e&&(this._fitToContent=e,this._inkBarElement&&this._appendInkBarElement())}activateInkBar(e){let n=this._elementRef.nativeElement;if(!e||!n.getBoundingClientRect||!this._inkBarContentElement){n.classList.add(ek);return}let r=n.getBoundingClientRect(),o=e.width/r.width,s=e.left-r.left;n.classList.add(r8),this._inkBarContentElement.style.setProperty("transform",`translateX(${s}px) scaleX(${o})`),n.getBoundingClientRect(),n.classList.remove(r8),n.classList.add(ek),this._inkBarContentElement.style.setProperty("transform","")}deactivateInkBar(){this._elementRef.nativeElement.classList.remove(ek)}ngOnInit(){this._createInkBarElement()}ngOnDestroy(){this._inkBarElement?.remove(),this._inkBarElement=this._inkBarContentElement=null}_createInkBarElement(){let e=this._elementRef.nativeElement.ownerDocument||document,n=this._inkBarElement=e.createElement("span"),r=this._inkBarContentElement=e.createElement("span");n.className="mdc-tab-indicator",r.className="mdc-tab-indicator__content mdc-tab-indicator__content--underline",n.appendChild(this._inkBarContentElement),this._appendInkBarElement()}_appendInkBarElement(){this._inkBarElement;let e=this._fitToContent?this._elementRef.nativeElement.querySelector(".mdc-tab__content"):this._elementRef.nativeElement;e.appendChild(this._inkBarElement)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,inputs:{fitInkBarToContent:[ie.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",Je]},features:[zt]})}}return i})();var c8=(()=>{class i extends $le{constructor(e){super(),this.elementRef=e,this.disabled=!1}focus(){this.elementRef.nativeElement.focus()}getOffsetLeft(){return this.elementRef.nativeElement.offsetLeft}getOffsetWidth(){return this.elementRef.nativeElement.offsetWidth}static{this.\u0275fac=function(n){return new(n||i)(F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["","matTabLabelWrapper",""]],hostVars:3,hostBindings:function(n,r){n&2&&(Tt("aria-disabled",!!r.disabled),qe("mat-mdc-tab-disabled",r.disabled))},inputs:{disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je]},standalone:!0,features:[zt,It]})}}return i})(),o8=Ns({passive:!0}),Gle=650,Wle=100,qle=(()=>{class i{get selectedIndex(){return this._selectedIndex}set selectedIndex(e){let n=isNaN(e)?0:e;this._selectedIndex!=n&&(this._selectedIndexChanged=!0,this._selectedIndex=n,this._keyManager&&this._keyManager.updateActiveItem(n))}constructor(e,n,r,o,s,a,c){this._elementRef=e,this._changeDetectorRef=n,this._viewportRuler=r,this._dir=o,this._ngZone=s,this._platform=a,this._animationMode=c,this._scrollDistance=0,this._selectedIndexChanged=!1,this._destroyed=new Le,this._showPaginationControls=!1,this._disableScrollAfter=!0,this._disableScrollBefore=!0,this._stopScrolling=new Le,this.disablePagination=!1,this._selectedIndex=0,this.selectFocusedIndex=new Qe,this.indexFocused=new Qe,s.runOutsideAngular(()=>{Zs(e.nativeElement,"mouseleave").pipe(Rt(this._destroyed)).subscribe(()=>{this._stopInterval()})})}ngAfterViewInit(){Zs(this._previousPaginator.nativeElement,"touchstart",o8).pipe(Rt(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("before")}),Zs(this._nextPaginator.nativeElement,"touchstart",o8).pipe(Rt(this._destroyed)).subscribe(()=>{this._handlePaginatorPress("after")})}ngAfterContentInit(){let e=this._dir?this._dir.change:ut("ltr"),n=this._viewportRuler.change(150),r=()=>{this.updatePagination(),this._alignInkBarToSelectedTab()};this._keyManager=new sd(this._items).withHorizontalOrientation(this._getLayoutDirection()).withHomeAndEnd().withWrap().skipPredicate(()=>!1),this._keyManager.updateActiveItem(this._selectedIndex),this._ngZone.onStable.pipe(nn(1)).subscribe(r),rr(e,n,this._items.changes,this._itemsResized()).pipe(Rt(this._destroyed)).subscribe(()=>{this._ngZone.run(()=>{Promise.resolve().then(()=>{this._scrollDistance=Math.max(0,Math.min(this._getMaxScrollDistance(),this._scrollDistance)),r()})}),this._keyManager.withHorizontalOrientation(this._getLayoutDirection())}),this._keyManager.change.subscribe(o=>{this.indexFocused.emit(o),this._setTabFocus(o)})}_itemsResized(){return typeof ResizeObserver!="function"?Zn:this._items.changes.pipe(or(this._items),Kn(e=>new Gt(n=>this._ngZone.runOutsideAngular(()=>{let r=new ResizeObserver(o=>n.next(o));return e.forEach(o=>r.observe(o.elementRef.nativeElement)),()=>{r.disconnect()}}))),gu(1),Pi(e=>e.some(n=>n.contentRect.width>0&&n.contentRect.height>0)))}ngAfterContentChecked(){this._tabLabelCount!=this._items.length&&(this.updatePagination(),this._tabLabelCount=this._items.length,this._changeDetectorRef.markForCheck()),this._selectedIndexChanged&&(this._scrollToLabel(this._selectedIndex),this._checkScrollingControls(),this._alignInkBarToSelectedTab(),this._selectedIndexChanged=!1,this._changeDetectorRef.markForCheck()),this._scrollDistanceChanged&&(this._updateTabScrollPosition(),this._scrollDistanceChanged=!1,this._changeDetectorRef.markForCheck())}ngOnDestroy(){this._keyManager?.destroy(),this._destroyed.next(),this._destroyed.complete(),this._stopScrolling.complete()}_handleKeydown(e){if(!To(e))switch(e.keyCode){case 13:case 32:if(this.focusIndex!==this.selectedIndex){let n=this._items.get(this.focusIndex);n&&!n.disabled&&(this.selectFocusedIndex.emit(this.focusIndex),this._itemSelected(e))}break;default:this._keyManager.onKeydown(e)}}_onContentChanges(){let e=this._elementRef.nativeElement.textContent;e!==this._currentTextContent&&(this._currentTextContent=e||"",this._ngZone.run(()=>{this.updatePagination(),this._alignInkBarToSelectedTab(),this._changeDetectorRef.markForCheck()}))}updatePagination(){this._checkPaginationEnabled(),this._checkScrollingControls(),this._updateTabScrollPosition()}get focusIndex(){return this._keyManager?this._keyManager.activeItemIndex:0}set focusIndex(e){!this._isValidIndex(e)||this.focusIndex===e||!this._keyManager||this._keyManager.setActiveItem(e)}_isValidIndex(e){return this._items?!!this._items.toArray()[e]:!0}_setTabFocus(e){if(this._showPaginationControls&&this._scrollToLabel(e),this._items&&this._items.length){this._items.toArray()[e].focus();let n=this._tabListContainer.nativeElement;this._getLayoutDirection()=="ltr"?n.scrollLeft=0:n.scrollLeft=n.scrollWidth-n.offsetWidth}}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_updateTabScrollPosition(){if(this.disablePagination)return;let e=this.scrollDistance,n=this._getLayoutDirection()==="ltr"?-e:e;this._tabList.nativeElement.style.transform=`translateX(${Math.round(n)}px)`,(this._platform.TRIDENT||this._platform.EDGE)&&(this._tabListContainer.nativeElement.scrollLeft=0)}get scrollDistance(){return this._scrollDistance}set scrollDistance(e){this._scrollTo(e)}_scrollHeader(e){let n=this._tabListContainer.nativeElement.offsetWidth,r=(e=="before"?-1:1)*n/3;return this._scrollTo(this._scrollDistance+r)}_handlePaginatorClick(e){this._stopInterval(),this._scrollHeader(e)}_scrollToLabel(e){if(this.disablePagination)return;let n=this._items?this._items.toArray()[e]:null;if(!n)return;let r=this._tabListContainer.nativeElement.offsetWidth,{offsetLeft:o,offsetWidth:s}=n.elementRef.nativeElement,a,c;this._getLayoutDirection()=="ltr"?(a=o,c=a+s):(c=this._tabListInner.nativeElement.offsetWidth-o,a=c-s);let l=this.scrollDistance,d=this.scrollDistance+r;a<l?this.scrollDistance-=l-a:c>d&&(this.scrollDistance+=Math.min(c-d,a-l))}_checkPaginationEnabled(){if(this.disablePagination)this._showPaginationControls=!1;else{let e=this._tabListInner.nativeElement.scrollWidth>this._elementRef.nativeElement.offsetWidth;e||(this.scrollDistance=0),e!==this._showPaginationControls&&this._changeDetectorRef.markForCheck(),this._showPaginationControls=e}}_checkScrollingControls(){this.disablePagination?this._disableScrollAfter=this._disableScrollBefore=!0:(this._disableScrollBefore=this.scrollDistance==0,this._disableScrollAfter=this.scrollDistance==this._getMaxScrollDistance(),this._changeDetectorRef.markForCheck())}_getMaxScrollDistance(){let e=this._tabListInner.nativeElement.scrollWidth,n=this._tabListContainer.nativeElement.offsetWidth;return e-n||0}_alignInkBarToSelectedTab(){let e=this._items&&this._items.length?this._items.toArray()[this.selectedIndex]:null,n=e?e.elementRef.nativeElement:null;n?this._inkBar.alignToElement(n):this._inkBar.hide()}_stopInterval(){this._stopScrolling.next()}_handlePaginatorPress(e,n){n&&n.button!=null&&n.button!==0||(this._stopInterval(),Bf(Gle,Wle).pipe(Rt(rr(this._stopScrolling,this._destroyed))).subscribe(()=>{let{maxScrollDistance:r,distance:o}=this._scrollHeader(e);(o===0||o>=r)&&this._stopInterval()}))}_scrollTo(e){if(this.disablePagination)return{maxScrollDistance:0,distance:0};let n=this._getMaxScrollDistance();return this._scrollDistance=Math.max(0,Math.min(n,e)),this._scrollDistanceChanged=!0,this._checkScrollingControls(),{maxScrollDistance:n,distance:this._scrollDistance}}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(ci),F(la),F(yr,8),F(Ne),F(li),F($i,8))}}static{this.\u0275dir=Me({type:i,inputs:{disablePagination:[ie.HasDecoratorInputTransform,"disablePagination","disablePagination",Je],selectedIndex:[ie.HasDecoratorInputTransform,"selectedIndex","selectedIndex",on]},outputs:{selectFocusedIndex:"selectFocusedIndex",indexFocused:"indexFocused"},features:[zt]})}}return i})(),Xle=(()=>{class i extends qle{constructor(e,n,r,o,s,a,c){super(e,n,r,o,s,a,c),this.disableRipple=!1}ngAfterContentInit(){this._inkBar=new tk(this._items),super.ngAfterContentInit()}_itemSelected(e){e.preventDefault()}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(ci),F(la),F(yr,8),F(Ne),F(li),F($i,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-tab-header"]],contentQueries:function(n,r,o){if(n&1&&ri(o,c8,4),n&2){let s;Be(s=Ve())&&(r._items=s)}},viewQuery:function(n,r){if(n&1&&(Lt(Sle,7),Lt(Ele,7),Lt(Tle,7),Lt(Ile,5),Lt(Dle,5)),n&2){let o;Be(o=Ve())&&(r._tabListContainer=o.first),Be(o=Ve())&&(r._tabList=o.first),Be(o=Ve())&&(r._tabListInner=o.first),Be(o=Ve())&&(r._nextPaginator=o.first),Be(o=Ve())&&(r._previousPaginator=o.first)}},hostAttrs:[1,"mat-mdc-tab-header"],hostVars:4,hostBindings:function(n,r){n&2&&qe("mat-mdc-tab-header-pagination-controls-enabled",r._showPaginationControls)("mat-mdc-tab-header-rtl",r._getLayoutDirection()=="rtl")},inputs:{disableRipple:[ie.HasDecoratorInputTransform,"disableRipple","disableRipple",Je]},standalone:!0,features:[zt,It,Dt],ngContentSelectors:nk,decls:13,vars:10,consts:[["previousPaginator",""],["tabListContainer",""],["tabList",""],["tabListInner",""],["nextPaginator",""],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-before",3,"click","mousedown","touchend","matRippleDisabled","disabled"],[1,"mat-mdc-tab-header-pagination-chevron"],[1,"mat-mdc-tab-label-container",3,"keydown"],["role","tablist",1,"mat-mdc-tab-list",3,"cdkObserveContent"],[1,"mat-mdc-tab-labels"],["aria-hidden","true","type","button","mat-ripple","","tabindex","-1",1,"mat-mdc-tab-header-pagination","mat-mdc-tab-header-pagination-after",3,"mousedown","click","touchend","matRippleDisabled","disabled"]],template:function(n,r){if(n&1){let o=ot();Oi(),b(0,"button",5,0),ne("click",function(){return Q(o),J(r._handlePaginatorClick("before"))})("mousedown",function(a){return Q(o),J(r._handlePaginatorPress("before",a))})("touchend",function(){return Q(o),J(r._stopInterval())}),Fe(2,"div",6),v(),b(3,"div",7,1),ne("keydown",function(a){return Q(o),J(r._handleKeydown(a))}),b(5,"div",8,2),ne("cdkObserveContent",function(){return Q(o),J(r._onContentChanges())}),b(7,"div",9,3),dt(9),v()()(),b(10,"button",10,4),ne("mousedown",function(a){return Q(o),J(r._handlePaginatorPress("after",a))})("click",function(){return Q(o),J(r._handlePaginatorClick("after"))})("touchend",function(){return Q(o),J(r._stopInterval())}),Fe(12,"div",6),v()}n&2&&(qe("mat-mdc-tab-header-pagination-disabled",r._disableScrollBefore),q("matRippleDisabled",r._disableScrollBefore||r.disableRipple)("disabled",r._disableScrollBefore||null),P(3),qe("_mat-animation-noopable",r._animationMode==="NoopAnimations"),P(7),qe("mat-mdc-tab-header-pagination-disabled",r._disableScrollAfter),q("matRippleDisabled",r._disableScrollAfter||r.disableRipple)("disabled",r._disableScrollAfter||null))},dependencies:[dd,dx],styles:[".mat-mdc-tab-header{display:flex;overflow:hidden;position:relative;flex-shrink:0}.mdc-tab-indicator .mdc-tab-indicator__content{transition-duration:var(--mat-tab-animation-duration, 250ms)}.mat-mdc-tab-header-pagination{-webkit-user-select:none;user-select:none;position:relative;display:none;justify-content:center;align-items:center;min-width:32px;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0);touch-action:none;box-sizing:content-box;background:none;border:none;outline:0;padding:0}.mat-mdc-tab-header-pagination::-moz-focus-inner{border:0}.mat-mdc-tab-header-pagination .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-header-pagination-controls-enabled .mat-mdc-tab-header-pagination{display:flex}.mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after{padding-left:4px}.mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(-135deg)}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before,.mat-mdc-tab-header-pagination-after{padding-right:4px}.mat-mdc-tab-header-rtl .mat-mdc-tab-header-pagination-before .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-header-pagination-after .mat-mdc-tab-header-pagination-chevron{transform:rotate(45deg)}.mat-mdc-tab-header-pagination-chevron{border-style:solid;border-width:2px 2px 0 0;height:8px;width:8px;border-color:var(--mat-tab-header-pagination-icon-color)}.mat-mdc-tab-header-pagination-disabled{box-shadow:none;cursor:default;pointer-events:none}.mat-mdc-tab-header-pagination-disabled .mat-mdc-tab-header-pagination-chevron{opacity:.4}.mat-mdc-tab-list{flex-grow:1;position:relative;transition:transform 500ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-mdc-tab-list{transition:none}._mat-animation-noopable span.mdc-tab-indicator__content,._mat-animation-noopable span.mdc-tab__text-label{transition:none}.mat-mdc-tab-label-container{display:flex;flex-grow:1;overflow:hidden;z-index:1;border-bottom-style:solid;border-bottom-width:var(--mat-tab-header-divider-height);border-bottom-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-group-inverted-header .mat-mdc-tab-label-container{border-bottom:none;border-top-style:solid;border-top-width:var(--mat-tab-header-divider-height);border-top-color:var(--mat-tab-header-divider-color)}.mat-mdc-tab-labels{display:flex;flex:1 0 auto}[mat-align-tabs=center]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:center}[mat-align-tabs=end]>.mat-mdc-tab-header .mat-mdc-tab-labels{justify-content:flex-end}.mat-mdc-tab::before{margin:5px}.cdk-high-contrast-active .mat-mdc-tab[aria-disabled=true]{color:GrayText}"],encapsulation:2})}}return i})(),Yle=new _e("MAT_TABS_CONFIG"),Zle={translateTab:Bs("translateTab",[eo("center, void, left-origin-center, right-origin-center",Wn({transform:"none"})),eo("left",Wn({transform:"translate3d(-100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),eo("right",Wn({transform:"translate3d(100%, 0, 0)",minHeight:"1px",visibility:"hidden"})),to("* => left, * => right, left => center, right => center",Io("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")),to("void => left-origin-center",[Wn({transform:"translate3d(-100%, 0, 0)",visibility:"hidden"}),Io("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")]),to("void => right-origin-center",[Wn({transform:"translate3d(100%, 0, 0)",visibility:"hidden"}),Io("{{animationDuration}} cubic-bezier(0.35, 0, 0.25, 1)")])])},Kle=(()=>{class i extends Qc{constructor(e,n,r,o){super(e,n,o),this._host=r,this._centeringSub=Yt.EMPTY,this._leavingSub=Yt.EMPTY}ngOnInit(){super.ngOnInit(),this._centeringSub=this._host._beforeCentering.pipe(or(this._host._isCenterPosition(this._host._position))).subscribe(e=>{e&&!this.hasAttached()&&this.attach(this._host._content)}),this._leavingSub=this._host._afterLeavingCenter.subscribe(()=>{this._host.preserveContent||this.detach()})}ngOnDestroy(){super.ngOnDestroy(),this._centeringSub.unsubscribe(),this._leavingSub.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(F(Wa),F(rn),F(br(()=>l8)),F(kt))}}static{this.\u0275dir=Me({type:i,selectors:[["","matTabBodyHost",""]],standalone:!0,features:[It]})}}return i})(),l8=(()=>{class i{set position(e){this._positionIndex=e,this._computePositionAnimationState()}constructor(e,n,r){this._elementRef=e,this._dir=n,this._dirChangeSubscription=Yt.EMPTY,this._translateTabComplete=new Le,this._onCentering=new Qe,this._beforeCentering=new Qe,this._afterLeavingCenter=new Qe,this._onCentered=new Qe(!0),this.animationDuration="500ms",this.preserveContent=!1,n&&(this._dirChangeSubscription=n.change.subscribe(o=>{this._computePositionAnimationState(o),r.markForCheck()})),this._translateTabComplete.pipe(Vl((o,s)=>o.fromState===s.fromState&&o.toState===s.toState)).subscribe(o=>{this._isCenterPosition(o.toState)&&this._isCenterPosition(this._position)&&this._onCentered.emit(),this._isCenterPosition(o.fromState)&&!this._isCenterPosition(this._position)&&this._afterLeavingCenter.emit()})}ngOnInit(){this._position=="center"&&this.origin!=null&&(this._position=this._computePositionFromOrigin(this.origin))}ngOnDestroy(){this._dirChangeSubscription.unsubscribe(),this._translateTabComplete.complete()}_onTranslateTabStarted(e){let n=this._isCenterPosition(e.toState);this._beforeCentering.emit(n),n&&this._onCentering.emit(this._elementRef.nativeElement.clientHeight)}_getLayoutDirection(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_isCenterPosition(e){return e=="center"||e=="left-origin-center"||e=="right-origin-center"}_computePositionAnimationState(e=this._getLayoutDirection()){this._positionIndex<0?this._position=e=="ltr"?"left":"right":this._positionIndex>0?this._position=e=="ltr"?"right":"left":this._position="center"}_computePositionFromOrigin(e){let n=this._getLayoutDirection();return n=="ltr"&&e<=0||n=="rtl"&&e>0?"left-origin-center":"right-origin-center"}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(yr,8),F(ci))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-tab-body"]],viewQuery:function(n,r){if(n&1&&Lt(Qc,5),n&2){let o;Be(o=Ve())&&(r._portalHost=o.first)}},hostAttrs:[1,"mat-mdc-tab-body"],inputs:{_content:[ie.None,"content","_content"],origin:"origin",animationDuration:"animationDuration",preserveContent:"preserveContent",position:"position"},outputs:{_onCentering:"_onCentering",_beforeCentering:"_beforeCentering",_afterLeavingCenter:"_afterLeavingCenter",_onCentered:"_onCentered"},standalone:!0,features:[Dt],decls:3,vars:6,consts:[["content",""],["cdkScrollable","",1,"mat-mdc-tab-body-content"],["matTabBodyHost",""]],template:function(n,r){if(n&1){let o=ot();b(0,"div",1,0),ne("@translateTab.start",function(a){return Q(o),J(r._onTranslateTabStarted(a))})("@translateTab.done",function(a){return Q(o),J(r._translateTabComplete.next(a))}),ve(2,Ple,0,0,"ng-template",2),v()}n&2&&q("@translateTab",XU(3,Ale,r._position,qU(1,kle,r.animationDuration)))},dependencies:[Kle,JD],styles:['.mat-mdc-tab-body{top:0;left:0;right:0;bottom:0;position:absolute;display:block;overflow:hidden;outline:0;flex-basis:100%}.mat-mdc-tab-body.mat-mdc-tab-body-active{position:relative;overflow-x:hidden;overflow-y:auto;z-index:1;flex-grow:1}.mat-mdc-tab-group.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body.mat-mdc-tab-body-active{overflow-y:hidden}.mat-mdc-tab-body-content{height:100%;overflow:auto}.mat-mdc-tab-group-dynamic-height .mat-mdc-tab-body-content{overflow:hidden}.mat-mdc-tab-body-content[style*="visibility: hidden"]{display:none}'],encapsulation:2,data:{animation:[Zle.translateTab]}})}}return i})(),Qle=0,Jle=!0,d8=(()=>{class i{get fitInkBarToContent(){return this._fitInkBarToContent}set fitInkBarToContent(e){this._fitInkBarToContent=e,this._changeDetectorRef.markForCheck()}get selectedIndex(){return this._selectedIndex}set selectedIndex(e){this._indexToSelect=isNaN(e)?null:e}get animationDuration(){return this._animationDuration}set animationDuration(e){let n=e+"";this._animationDuration=/^\d+$/.test(n)?e+"ms":n}get contentTabIndex(){return this._contentTabIndex}set contentTabIndex(e){this._contentTabIndex=isNaN(e)?null:e}get backgroundColor(){return this._backgroundColor}set backgroundColor(e){if(!Jle)throw new Error("mat-tab-group background color must be set through the Sass theming API");let n=this._elementRef.nativeElement.classList;n.remove("mat-tabs-with-background",`mat-background-${this.backgroundColor}`),e&&n.add("mat-tabs-with-background",`mat-background-${e}`),this._backgroundColor=e}constructor(e,n,r,o){this._elementRef=e,this._changeDetectorRef=n,this._animationMode=o,this._tabs=new Ts,this._indexToSelect=0,this._lastFocusedTabIndex=null,this._tabBodyWrapperHeight=0,this._tabsSubscription=Yt.EMPTY,this._tabLabelSubscription=Yt.EMPTY,this._fitInkBarToContent=!1,this.stretchTabs=!0,this.dynamicHeight=!1,this._selectedIndex=null,this.headerPosition="above",this.disablePagination=!1,this.disableRipple=!1,this.preserveContent=!1,this.selectedIndexChange=new Qe,this.focusChange=new Qe,this.animationDone=new Qe,this.selectedTabChange=new Qe(!0),this._isServer=!ye(li).isBrowser,this._groupId=Qle++,this.animationDuration=r&&r.animationDuration?r.animationDuration:"500ms",this.disablePagination=r&&r.disablePagination!=null?r.disablePagination:!1,this.dynamicHeight=r&&r.dynamicHeight!=null?r.dynamicHeight:!1,r?.contentTabIndex!=null&&(this.contentTabIndex=r.contentTabIndex),this.preserveContent=!!r?.preserveContent,this.fitInkBarToContent=r&&r.fitInkBarToContent!=null?r.fitInkBarToContent:!1,this.stretchTabs=r&&r.stretchTabs!=null?r.stretchTabs:!0}ngAfterContentChecked(){let e=this._indexToSelect=this._clampTabIndex(this._indexToSelect);if(this._selectedIndex!=e){let n=this._selectedIndex==null;if(!n){this.selectedTabChange.emit(this._createChangeEvent(e));let r=this._tabBodyWrapper.nativeElement;r.style.minHeight=r.clientHeight+"px"}Promise.resolve().then(()=>{this._tabs.forEach((r,o)=>r.isActive=o===e),n||(this.selectedIndexChange.emit(e),this._tabBodyWrapper.nativeElement.style.minHeight="")})}this._tabs.forEach((n,r)=>{n.position=r-e,this._selectedIndex!=null&&n.position==0&&!n.origin&&(n.origin=e-this._selectedIndex)}),this._selectedIndex!==e&&(this._selectedIndex=e,this._lastFocusedTabIndex=null,this._changeDetectorRef.markForCheck())}ngAfterContentInit(){this._subscribeToAllTabChanges(),this._subscribeToTabLabels(),this._tabsSubscription=this._tabs.changes.subscribe(()=>{let e=this._clampTabIndex(this._indexToSelect);if(e===this._selectedIndex){let n=this._tabs.toArray(),r;for(let o=0;o<n.length;o++)if(n[o].isActive){this._indexToSelect=this._selectedIndex=o,this._lastFocusedTabIndex=null,r=n[o];break}!r&&n[e]&&Promise.resolve().then(()=>{n[e].isActive=!0,this.selectedTabChange.emit(this._createChangeEvent(e))})}this._changeDetectorRef.markForCheck()})}_subscribeToAllTabChanges(){this._allTabs.changes.pipe(or(this._allTabs)).subscribe(e=>{this._tabs.reset(e.filter(n=>n._closestTabGroup===this||!n._closestTabGroup)),this._tabs.notifyOnChanges()})}ngOnDestroy(){this._tabs.destroy(),this._tabsSubscription.unsubscribe(),this._tabLabelSubscription.unsubscribe()}realignInkBar(){this._tabHeader&&this._tabHeader._alignInkBarToSelectedTab()}updatePagination(){this._tabHeader&&this._tabHeader.updatePagination()}focusTab(e){let n=this._tabHeader;n&&(n.focusIndex=e)}_focusChanged(e){this._lastFocusedTabIndex=e,this.focusChange.emit(this._createChangeEvent(e))}_createChangeEvent(e){let n=new ik;return n.index=e,this._tabs&&this._tabs.length&&(n.tab=this._tabs.toArray()[e]),n}_subscribeToTabLabels(){this._tabLabelSubscription&&this._tabLabelSubscription.unsubscribe(),this._tabLabelSubscription=rr(...this._tabs.map(e=>e._stateChanges)).subscribe(()=>this._changeDetectorRef.markForCheck())}_clampTabIndex(e){return Math.min(this._tabs.length-1,Math.max(e||0,0))}_getTabLabelId(e){return`mat-tab-label-${this._groupId}-${e}`}_getTabContentId(e){return`mat-tab-content-${this._groupId}-${e}`}_setTabBodyWrapperHeight(e){if(!this.dynamicHeight||!this._tabBodyWrapperHeight)return;let n=this._tabBodyWrapper.nativeElement;n.style.height=this._tabBodyWrapperHeight+"px",this._tabBodyWrapper.nativeElement.offsetHeight&&(n.style.height=e+"px")}_removeTabBodyWrapperHeight(){let e=this._tabBodyWrapper.nativeElement;this._tabBodyWrapperHeight=e.clientHeight,e.style.height="",this.animationDone.emit()}_handleClick(e,n,r){n.focusIndex=r,e.disabled||(this.selectedIndex=r)}_getTabIndex(e){let n=this._lastFocusedTabIndex??this.selectedIndex;return e===n?0:-1}_tabFocusChanged(e,n){e&&e!=="mouse"&&e!=="touch"&&(this._tabHeader.focusIndex=n)}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(ci),F(Yle,8),F($i,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-tab-group"]],contentQueries:function(n,r,o){if(n&1&&ri(o,ok,5),n&2){let s;Be(s=Ve())&&(r._allTabs=s)}},viewQuery:function(n,r){if(n&1&&(Lt(Ole,5),Lt(Nle,5)),n&2){let o;Be(o=Ve())&&(r._tabBodyWrapper=o.first),Be(o=Ve())&&(r._tabHeader=o.first)}},hostAttrs:[1,"mat-mdc-tab-group"],hostVars:10,hostBindings:function(n,r){n&2&&(Hr("mat-"+(r.color||"primary")),$n("--mat-tab-animation-duration",r.animationDuration),qe("mat-mdc-tab-group-dynamic-height",r.dynamicHeight)("mat-mdc-tab-group-inverted-header",r.headerPosition==="below")("mat-mdc-tab-group-stretch-tabs",r.stretchTabs))},inputs:{color:"color",fitInkBarToContent:[ie.HasDecoratorInputTransform,"fitInkBarToContent","fitInkBarToContent",Je],stretchTabs:[ie.HasDecoratorInputTransform,"mat-stretch-tabs","stretchTabs",Je],dynamicHeight:[ie.HasDecoratorInputTransform,"dynamicHeight","dynamicHeight",Je],selectedIndex:[ie.HasDecoratorInputTransform,"selectedIndex","selectedIndex",on],headerPosition:"headerPosition",animationDuration:"animationDuration",contentTabIndex:[ie.HasDecoratorInputTransform,"contentTabIndex","contentTabIndex",on],disablePagination:[ie.HasDecoratorInputTransform,"disablePagination","disablePagination",Je],disableRipple:[ie.HasDecoratorInputTransform,"disableRipple","disableRipple",Je],preserveContent:[ie.HasDecoratorInputTransform,"preserveContent","preserveContent",Je],backgroundColor:"backgroundColor"},outputs:{selectedIndexChange:"selectedIndexChange",focusChange:"focusChange",animationDone:"animationDone",selectedTabChange:"selectedTabChange"},exportAs:["matTabGroup"],standalone:!0,features:[Bt([{provide:a8,useExisting:i}]),zt,Dt],ngContentSelectors:nk,decls:9,vars:6,consts:[["tabHeader",""],["tabBodyWrapper",""],["tabNode",""],[3,"indexFocused","selectFocusedIndex","selectedIndex","disableRipple","disablePagination"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"id","mdc-tab--active","class","disabled","fitInkBarToContent"],[1,"mat-mdc-tab-body-wrapper"],["role","tabpanel",3,"id","mat-mdc-tab-body-active","class","content","position","origin","animationDuration","preserveContent"],["role","tab","matTabLabelWrapper","","cdkMonitorElementFocus","",1,"mdc-tab","mat-mdc-tab","mat-mdc-focus-indicator",3,"click","cdkFocusChange","id","disabled","fitInkBarToContent"],[1,"mdc-tab__ripple"],["mat-ripple","",1,"mat-mdc-tab-ripple",3,"matRippleTrigger","matRippleDisabled"],[1,"mdc-tab__content"],[1,"mdc-tab__text-label"],[3,"cdkPortalOutlet"],["role","tabpanel",3,"_onCentered","_onCentering","id","content","position","origin","animationDuration","preserveContent"]],template:function(n,r){if(n&1){let o=ot();Oi(),b(0,"mat-tab-header",3,0),ne("indexFocused",function(a){return Q(o),J(r._focusChanged(a))})("selectFocusedIndex",function(a){return Q(o),J(r.selectedIndex=a)}),ug(2,Ble,8,17,"div",4,dg),v(),ve(4,Vle,1,0),b(5,"div",5,1),ug(7,Ule,1,13,"mat-tab-body",6,dg),v()}n&2&&(q("selectedIndex",r.selectedIndex||0)("disableRipple",r.disableRipple)("disablePagination",r.disablePagination),P(2),hg(r._tabs),P(2),Zt(4,r._isServer?4:-1),P(),qe("_mat-animation-noopable",r._animationMode==="NoopAnimations"),P(2),hg(r._tabs))},dependencies:[Xle,c8,OH,dd,Qc,l8],styles:['.mdc-tab{min-width:90px;padding-right:24px;padding-left:24px;display:flex;flex:1 0 auto;justify-content:center;box-sizing:border-box;margin:0;padding-top:0;padding-bottom:0;border:none;outline:none;text-align:center;white-space:nowrap;cursor:pointer;-webkit-appearance:none;z-index:1}.mdc-tab::-moz-focus-inner{padding:0;border:0}.mdc-tab[hidden]{display:none}.mdc-tab--min-width{flex:0 1 auto}.mdc-tab__content{display:flex;align-items:center;justify-content:center;height:inherit;pointer-events:none}.mdc-tab__text-label{transition:150ms color linear;display:inline-block;line-height:1;z-index:2}.mdc-tab__icon{transition:150ms color linear;z-index:2}.mdc-tab--stacked .mdc-tab__content{flex-direction:column;align-items:center;justify-content:center}.mdc-tab--stacked .mdc-tab__text-label{padding-top:6px;padding-bottom:4px}.mdc-tab--active .mdc-tab__text-label,.mdc-tab--active .mdc-tab__icon{transition-delay:100ms}.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label{padding-left:8px;padding-right:0}[dir=rtl] .mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label,.mdc-tab:not(.mdc-tab--stacked) .mdc-tab__icon+.mdc-tab__text-label[dir=rtl]{padding-left:0;padding-right:8px}.mdc-tab-indicator{display:flex;position:absolute;top:0;left:0;justify-content:center;width:100%;height:100%;pointer-events:none;z-index:1}.mdc-tab-indicator__content{transform-origin:left;opacity:0}.mdc-tab-indicator__content--underline{align-self:flex-end;box-sizing:border-box;width:100%;border-top-style:solid}.mdc-tab-indicator__content--icon{align-self:center;margin:0 auto}.mdc-tab-indicator--active .mdc-tab-indicator__content{opacity:1}.mdc-tab-indicator .mdc-tab-indicator__content{transition:250ms transform cubic-bezier(0.4, 0, 0.2, 1)}.mdc-tab-indicator--no-transition .mdc-tab-indicator__content{transition:none}.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition:150ms opacity linear}.mdc-tab-indicator--active.mdc-tab-indicator--fade .mdc-tab-indicator__content{transition-delay:100ms}.mat-mdc-tab-ripple{position:absolute;top:0;left:0;bottom:0;right:0;pointer-events:none}.mat-mdc-tab{-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-decoration:none;background:none;font-family:var(--mat-tab-header-label-text-font);font-size:var(--mat-tab-header-label-text-size);letter-spacing:var(--mat-tab-header-label-text-tracking);line-height:var(--mat-tab-header-label-text-line-height);font-weight:var(--mat-tab-header-label-text-weight)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-color:var(--mdc-tab-indicator-active-indicator-color)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-top-width:var(--mdc-tab-indicator-active-indicator-height)}.mat-mdc-tab .mdc-tab-indicator__content--underline{border-radius:var(--mdc-tab-indicator-active-indicator-shape)}.mat-mdc-tab:not(.mdc-tab--stacked){height:var(--mdc-secondary-navigation-tab-container-height)}.mat-mdc-tab:not(:disabled).mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled.mdc-tab--active .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):hover:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):focus:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:not(:disabled):active:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab:disabled:not(.mdc-tab--active) .mdc-tab__icon{fill:currentColor}.mat-mdc-tab.mdc-tab{flex-grow:0}.mat-mdc-tab:hover .mdc-tab__text-label{color:var(--mat-tab-header-inactive-hover-label-text-color)}.mat-mdc-tab:focus .mdc-tab__text-label{color:var(--mat-tab-header-inactive-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__text-label{color:var(--mat-tab-header-active-label-text-color)}.mat-mdc-tab.mdc-tab--active .mdc-tab__ripple::before,.mat-mdc-tab.mdc-tab--active .mat-ripple-element{background-color:var(--mat-tab-header-active-ripple-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab__text-label{color:var(--mat-tab-header-active-hover-label-text-color)}.mat-mdc-tab.mdc-tab--active:hover .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-hover-indicator-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab__text-label{color:var(--mat-tab-header-active-focus-label-text-color)}.mat-mdc-tab.mdc-tab--active:focus .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-active-focus-indicator-color)}.mat-mdc-tab.mat-mdc-tab-disabled{opacity:.4;pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__content{pointer-events:none}.mat-mdc-tab.mat-mdc-tab-disabled .mdc-tab__ripple::before,.mat-mdc-tab.mat-mdc-tab-disabled .mat-ripple-element{background-color:var(--mat-tab-header-disabled-ripple-color)}.mat-mdc-tab .mdc-tab__ripple::before{content:"";display:block;position:absolute;top:0;left:0;right:0;bottom:0;opacity:0;pointer-events:none;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-inactive-label-text-color);display:inline-flex;align-items:center}.mat-mdc-tab .mdc-tab__content{position:relative;pointer-events:auto}.mat-mdc-tab:hover .mdc-tab__ripple::before{opacity:.04}.mat-mdc-tab.cdk-program-focused .mdc-tab__ripple::before,.mat-mdc-tab.cdk-keyboard-focused .mdc-tab__ripple::before{opacity:.12}.mat-mdc-tab .mat-ripple-element{opacity:.12;background-color:var(--mat-tab-header-inactive-ripple-color)}.mat-mdc-tab-group.mat-mdc-tab-group-stretch-tabs>.mat-mdc-tab-header .mat-mdc-tab{flex-grow:1}.mat-mdc-tab-group{display:flex;flex-direction:column;max-width:100%}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination{background-color:var(--mat-tab-header-with-background-background-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mat-mdc-tab .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background.mat-primary>.mat-mdc-tab-header .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab__text-label{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background:not(.mat-primary)>.mat-mdc-tab-header .mat-mdc-tab:not(.mdc-tab--active) .mdc-tab-indicator__content--underline{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-focus-indicator::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-focus-indicator::before{border-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mdc-tab__ripple::before,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-ripple-element,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mdc-tab__ripple::before{background-color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header .mat-mdc-tab-header-pagination-chevron,.mat-mdc-tab-group.mat-tabs-with-background>.mat-mdc-tab-header-pagination .mat-mdc-tab-header-pagination-chevron{color:var(--mat-tab-header-with-background-foreground-color)}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header{flex-direction:column-reverse}.mat-mdc-tab-group.mat-mdc-tab-group-inverted-header .mdc-tab-indicator__content--underline{align-self:flex-start}.mat-mdc-tab-body-wrapper{position:relative;overflow:hidden;display:flex;transition:height 500ms cubic-bezier(0.35, 0, 0.25, 1)}.mat-mdc-tab-body-wrapper._mat-animation-noopable{transition:none !important;animation:none !important}'],encapsulation:2})}}return i})(),ik=class{};var u8=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,Vt]})}}return i})();var eX=g1(Jq());var CM=(()=>{class i{constructor(){this.model=null,this.modelLoading=!1,this.modelFailed=!1,this.detectionResults=new Ri(null),this.isLoading=new Ri(!1),this.medicineKeywords=[{class:"bottle",medicines:["Aspirin","Ibuprofen","Paracetamol","Vitamin C","Omeprazole","Ranitidine"]},{class:"cup",medicines:["Tablet container","Pill cup","Medicine cup"]},{class:"box",medicines:["Amoxicillin","Loratadine","Metformin","Lisinopril","Atorvastatin"]},{class:"pill",medicines:["Diclofenac","Cetirizine","Folic Acid","Phenytoin"]},{class:"tablet",medicines:["Sertraline","Fluoxetine","Levothyroxine","Amlodipine"]}],this.initializeModel()}initializeModel(){return oe(this,null,function*(){if(this.model||this.modelLoading||this.modelFailed){console.log("Model already loading, loaded, or failed");return}this.modelLoading=!0;let e=2;for(;e>0;)try{console.log(`Loading COCO-SSD model (attempt ${3-e}/3)...`),this.model=yield eX.load(),console.log("\u2713 COCO-SSD model loaded successfully"),this.modelLoading=!1;return}catch(n){e--,console.error(`Model loading failed (${e} retries left):`,n),e>0&&(yield new Promise(r=>setTimeout(r,2e3)))}console.warn("\u26A0 COCO-SSD model failed to load, using fallback detection"),this.modelFailed=!0,this.modelLoading=!1})}detectMedicines(e){return oe(this,null,function*(){this.isLoading.next(!0);try{!this.model&&!this.modelLoading&&!this.modelFailed&&(console.log("Model not loaded, initializing..."),yield this.initializeModel());let n,r="";typeof e=="string"?(r=e,n=yield this.loadImage(e)):(r=e.src||"",n=e);let o=[];console.log("\u26A0\uFE0F Using smart image detection..."),o=yield this.fallbackDetection(n),console.log("Detected objects:",o);let s={imageUrl:r||n.src,objects:o,timestamp:new Date,imageWidth:n.width,imageHeight:n.height};return this.detectionResults.next(s),s}catch(n){console.error("Error detecting medicines:",n),n instanceof Error&&(console.error("Error message:",n.message),console.error("Stack:",n.stack));let r={imageUrl:e instanceof HTMLImageElement?e.src:e,objects:[],timestamp:new Date,imageWidth:e instanceof HTMLImageElement?e.width:640,imageHeight:e instanceof HTMLImageElement?e.height:480};return console.log("Returning empty result due to error"),r}finally{this.isLoading.next(!1)}})}detectFromCanvas(e){return oe(this,null,function*(){this.isLoading.next(!0);try{this.model||(yield this.initializeModel());let r=(yield this.model.detect(e)).map(s=>({class:s.class,score:Math.round(s.score*100)/100,bbox:s.bbox,x:s.bbox[0],y:s.bbox[1]})),o={imageUrl:e.toDataURL(),objects:r,timestamp:new Date,imageWidth:e.width,imageHeight:e.height};return this.detectionResults.next(o),o}catch(n){return console.error("Error detecting from canvas:",n),null}finally{this.isLoading.next(!1)}})}matchMedicineToObject(e,n,r){let o=e.toLowerCase();for(let a of this.medicineKeywords)if(o.includes(a.class)||a.class.includes(o))return{medicine:a.medicines[n%a.medicines.length],confidence:.85};if(o.includes("bottle")||o.includes("container")){let a=["Aspirin","Ibuprofen","Paracetamol","Vitamin C","Omeprazole"];return{medicine:a[n%a.length],confidence:.75}}if(o.includes("box")||o.includes("package")){let a=["Amoxicillin","Loratadine","Metformin","Lisinopril","Atorvastatin"];return{medicine:a[n%a.length],confidence:.75}}let s=["Aspirin","Vitamin C","Ibuprofen","Paracetamol","Amoxicillin","Loratadine","Omeprazole","Metformin","Lisinopril","Atorvastatin","Sertraline","Fluoxetine","Amlodipine","Cetirizine","Diclofenac"];return{medicine:s[n%s.length],confidence:.65}}loadImage(e){return new Promise((n,r)=>{let o=new Image;o.crossOrigin="anonymous",o.onload=()=>n(o),o.onerror=r,o.src=e})}fallbackDetection(e){return oe(this,null,function*(){console.log("Using fallback detection (image analysis)...");try{let n=document.createElement("canvas");n.width=e.width||640,n.height=e.height||480;let r=n.getContext("2d");if(!r)return console.log("Could not get canvas context, returning default medicines"),this.getDefaultMedicines();try{r.drawImage(e,0,0)}catch(u){return console.warn("Could not draw image to canvas:",u),this.getDefaultMedicines()}let s=r.getImageData(0,0,n.width,n.height).data,a={white:0,brown:0,blue:0,green:0,red:0,other:0};for(let u=0;u<s.length;u+=4){let h=s[u],m=s[u+1],p=s[u+2];h>180&&m>180&&p>180?a.white++:h>140&&m>100&&p<120?a.brown++:p>140&&h<140&&m<140?a.blue++:m>150&&h<150&&p<150?a.green++:h>150&&m<100&&p<100?a.red++:a.other++}let c=s.length/4,l=[],d={white:a.white/c*100,brown:a.brown/c*100,blue:a.blue/c*100,green:a.green/c*100,red:a.red/c*100};if(console.log("Color analysis:",{colorCount:a,totalPixels:c,percentages:d}),d.white>.5){let u=this.matchMedicineToObject("bottle",0,4);l.push({class:"bottle",score:.72,bbox:[100,100,200,300],x:100,y:100,matchedMedicine:u.medicine,confidence:u.confidence})}if(d.brown>.3){let u=l.length,h=this.matchMedicineToObject("box",u,4);l.push({class:"box",score:.68,bbox:[350,150,200,250],x:350,y:150,matchedMedicine:h.medicine,confidence:h.confidence})}if(d.blue>.3){let u=l.length,h=this.matchMedicineToObject("pill",u,4);l.push({class:"pill container",score:.65,bbox:[200,350,150,150],x:200,y:350,matchedMedicine:h.medicine,confidence:h.confidence})}if(d.green>.3){let u=l.length,h=this.matchMedicineToObject("bottle",u,4);l.push({class:"bottle (green)",score:.7,bbox:[250,200,180,280],x:250,y:200,matchedMedicine:h.medicine,confidence:h.confidence})}if(d.red>.1){let u=l.length,h=this.matchMedicineToObject("box",u,4);l.push({class:"medicine box",score:.63,bbox:[320,280,160,200],x:320,y:280,matchedMedicine:h.medicine,confidence:h.confidence})}return l.length===0?(console.log("No pharmacy colors detected in image - return empty list"),[]):(console.log("Fallback detection found",l.length,"objects:",l),l)}catch(n){return console.error("Fallback detection error:",n),[]}})}getDefaultMedicines(){return console.log("Returning default medicines"),[{class:"bottle",score:.6,bbox:[100,100,200,300],x:100,y:100,matchedMedicine:"Aspirin",confidence:.7},{class:"box",score:.58,bbox:[350,150,200,250],x:350,y:150,matchedMedicine:"Amoxicillin",confidence:.7},{class:"pill",score:.55,bbox:[200,350,150,150],x:200,y:350,matchedMedicine:"Ibuprofen",confidence:.7}]}getDetectionResults(){return this.detectionResults.asObservable()}getLoadingState(){return this.isLoading.asObservable()}filterDetectionsByClass(e,n){return e.objects.filter(r=>r.class.toLowerCase().includes(n.toLowerCase()))}getMedicineConfidence(e,n=.5){return e.objects.filter(r=>r.score>=n)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var iX=(()=>{class i{constructor(){}detectMedicines(e){return oe(this,null,function*(){try{return console.log("Advanced detection disabled - using fallback only"),{objects:[],medicines:[]}}catch(n){return console.error("Error in advanced detection:",n),{objects:[],medicines:[]}}})}isModelReady(){return oe(this,null,function*(){return!0})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var nX=(()=>{class i{constructor(){this.scannedBarcode=new Ri(null),this.isScanning=new Ri(!1),this.medicineDatabase={"5012254500012":{name:"Aspirin",strength:"500mg",manufacturer:"Generic"},"5014496014175":{name:"Ibuprofen",strength:"200mg",manufacturer:"Generic"},"5000017000049":{name:"Paracetamol",strength:"500mg",manufacturer:"Generic"},"5012254300013":{name:"Vitamin C",strength:"1000mg",manufacturer:"Generic"},"5000456000127":{name:"Amoxicillin",strength:"500mg",manufacturer:"Generic"},"5010415000081":{name:"Cetirizine",strength:"10mg",manufacturer:"Generic"},"5014496011156":{name:"Loratadine",strength:"10mg",manufacturer:"Generic"},"5015687000129":{name:"Omeprazole",strength:"20mg",manufacturer:"Generic"},"5010415000463":{name:"Metformin",strength:"500mg",manufacturer:"Generic"},"5010887010316":{name:"Lisinopril",strength:"10mg",manufacturer:"Generic"}},this.currentStream=null}startScanning(e){return oe(this,null,function*(){return new Promise((n,r)=>{try{console.log("Starting camera for barcode scanning..."),this.isScanning.next(!0),navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}}).then(o=>{console.log("Camera stream obtained"),this.currentStream=o,e.srcObject=o;let s=e.play();s!==void 0?s.then(()=>{console.log("Video playback started successfully"),n()}).catch(a=>{console.error("Video playback error:",a),r(new Error("Failed to play video stream"))}):(console.log("Video playback initiated"),n())}).catch(o=>{console.error("Camera access denied:",o),this.isScanning.next(!1),r(new Error(`Camera access denied: ${o.message}`))})}catch(o){console.error("Error starting camera:",o),this.isScanning.next(!1),r(o)}})})}stopScanning(){try{this.currentStream&&(this.currentStream.getTracks().forEach(e=>e.stop()),this.currentStream=null),this.isScanning.next(!1),console.log("Camera stopped")}catch(e){console.error("Error stopping camera:",e)}}setScannedBarcode(e){console.log("Barcode set:",e),this.scannedBarcode.next(e),this.isScanning.next(!1)}getScannedBarcode(){return this.scannedBarcode.asObservable()}getIsScanning(){return this.isScanning.asObservable()}lookupMedicine(e){return oe(this,null,function*(){if(console.log("Looking up medicine for barcode:",e),this.medicineDatabase[e])return Nt(ge({},this.medicineDatabase[e]),{barcode:e});let n=yield this.lookupOpenFda(e);return n||{name:`Medicine (Barcode: ${e})`,strength:"Unknown",manufacturer:"Unknown",barcode:e}})}resetBarcode(){this.scannedBarcode.next(null)}lookupOpenFda(e){return oe(this,null,function*(){try{let n=this.buildNdcSearchTerms(e);for(let r of n){let o=[`package_ndc:"${r}"`,`product_ndc:"${r}"`];for(let s of o){let a=`https://api.fda.gov/drug/ndc.json?search=${encodeURIComponent(s)}&limit=1`,c=yield fetch(a);if(!c.ok)continue;let d=(yield c.json())?.results?.[0];if(d){let u=d.active_ingredients?.[0];return{name:d.brand_name||d.generic_name||`Medicine (Barcode: ${e})`,strength:u?.strength||"Unknown",manufacturer:d.labeler_name||"Unknown",genericName:d.generic_name||"",ndc:d.product_ndc||d.package_ndc||"",barcode:e}}}}}catch(n){console.warn("OpenFDA lookup failed:",n)}return null})}buildNdcSearchTerms(e){let n=(e||"").replace(/\D/g,"");if(!n)return[];let r=[n];return n.length===11&&r.push(`${n.slice(0,5)}-${n.slice(5,9)}-${n.slice(9)}`),n.length===10&&(r.push(`${n.slice(0,4)}-${n.slice(4,8)}-${n.slice(8)}`),r.push(`${n.slice(0,5)}-${n.slice(5,8)}-${n.slice(8)}`),r.push(`${n.slice(0,5)}-${n.slice(5,9)}-${n.slice(9)}`)),Array.from(new Set(r))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var rX=(()=>{class i{constructor(){this.isAvailable=!1,this.checkTesseractAvailability()}checkTesseractAvailability(){try{typeof Tesseract<"u"?(this.isAvailable=!0,console.log("\u2705 Tesseract.js is available")):(console.warn("\u26A0\uFE0F Tesseract.js not found - OCR disabled"),this.isAvailable=!1)}catch(e){console.warn("\u26A0\uFE0F Tesseract.js error:",e),this.isAvailable=!1}}extractTextFromImage(e){return oe(this,null,function*(){return new Promise((n,r)=>oe(this,null,function*(){try{if(!this.isAvailable||typeof Tesseract>"u"){r(new Error("Tesseract.js not available"));return}console.log("\u{1F504} Starting OCR text extraction...");let o=yield Tesseract.createWorker("eng");yield o.setParameters({tessedit_char_whitelist:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-+/. ",preserve_interword_spaces:"1"});let{data:{text:s}}=yield o.recognize(e);console.log("\u2705 OCR extraction complete"),console.log("\u{1F4DD} Extracted text:",s.substring(0,100)+"..."),yield o.terminate(),n(s)}catch(o){console.error("\u274C OCR extraction error:",o),r(o)}}))})}extractMedicineDetails(e){return oe(this,null,function*(){try{console.log("\u{1F50D} Attempting to extract medicine details from image...");let n=yield this.extractTextFromImage(e),r=this.parseExtractedText(n);return console.log("\u{1F4CB} Parsed medicine details:",r),{success:!0,rawText:n,medicineDetails:r}}catch(n){return console.error("\u274C Error extracting medicine details:",n),{success:!1,error:n instanceof Error?n.message:"OCR failed",rawText:"",medicineDetails:{}}}})}parseExtractedText(e){let n=e.split(`
`).filter(d=>d.trim().length>0),r={name:"",strength:"",manufacturer:"",genericName:""},s=n.map(d=>d.replace(/\s+/g," ").trim()).filter(d=>d.length>3&&!/^[\d\s]+$/.test(d)).map(d=>{let u=(d.match(/[A-Za-z]/g)||[]).length,h=(d.match(/[0-9]/g)||[]).length,m=u*2+h-Math.abs(d.length-20);return{line:d,score:m}});s.sort((d,u)=>u.score-d.score),s.length>0&&(r.name=s[0].line.substring(0,50));let a=/(\d+(?:\.\d+)?)\s*(mg|g|ml|%|mcg|iu|units?)/gi,c=e.match(a);c&&c.length>0&&(r.strength=c[0]);let l=["Ltd","Inc","Corp","Pharma","Pharmaceutical","Laboratories","Labs","Pvt"];for(let d of l){let u=new RegExp(`([A-Za-z\\s&]+${d}[A-Za-z\\s&]*)`,"i"),h=e.match(u);if(h){r.manufacturer=h[1].trim().substring(0,40);break}}return r}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var oX=(()=>{class i{constructor(){this.defaultBaseUrl="https://api.openai.com/v1",this.defaultModel="gpt-4o-mini"}extractMedicineDetails(e){return oe(this,null,function*(){let n=(e||"").trim();if(!n)return null;let r=this.getConfigValue("LLM_API_KEY");if(!r)return console.warn("LLM API key not set; skipping LLM extraction"),null;let o=this.getConfigValue("LLM_API_BASE_URL")||this.defaultBaseUrl,s=this.getConfigValue("LLM_MODEL")||this.defaultModel,a=["Extract medicine details from the OCR text.","Return ONLY valid JSON with keys: name, strength, manufacturer, genericName.","Use empty string for unknown values."].join(" "),c={model:s,messages:[{role:"system",content:a},{role:"user",content:n}],temperature:.1,response_format:{type:"json_object"}};try{let l=yield fetch(`${o}/chat/completions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify(c)});if(!l.ok)return console.warn("LLM extraction failed:",l.status,l.statusText),null;let u=(yield l.json())?.choices?.[0]?.message?.content;if(!u)return null;let h=JSON.parse(u);return{name:this.cleanValue(h?.name),strength:this.cleanValue(h?.strength),manufacturer:this.cleanValue(h?.manufacturer),genericName:this.cleanValue(h?.genericName)}}catch(l){return console.warn("LLM extraction error:",l),null}})}getConfigValue(e){try{return window.localStorage.getItem(e)}catch{return null}}cleanValue(e){return typeof e!="string"?"":e.trim()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var SM=(()=>{class i{constructor(){this.medicines=new Ri([]),this.storageKey="buildaq.pharmacy.medicineCatalog",this.seedCatalog=[{id:"1",name:"Aspirin",barcode:"8901234567890",genericName:"Acetylsalicylic Acid",manufacturer:"Generic Pharma",strength:"500mg",category:"Pain Relief"},{id:"2",name:"Paracetamol",barcode:"8901234567891",genericName:"Acetaminophen",manufacturer:"Generic Pharma",strength:"500mg",category:"Pain Relief"},{id:"3",name:"Amoxicillin",barcode:"8901234567892",genericName:"Amoxicillin",manufacturer:"Antibiotic Labs",strength:"250mg",category:"Antibiotics"},{id:"4",name:"Ibuprofen",barcode:"8901234567893",genericName:"Ibuprofen",manufacturer:"Generic Pharma",strength:"400mg",category:"Pain Relief"},{id:"5",name:"Metformin",barcode:"8901234567894",genericName:"Metformin",manufacturer:"Diabetes Care",strength:"500mg",category:"Diabetes"},{id:"6",name:"Lisinopril",barcode:"8901234567895",genericName:"Lisinopril",manufacturer:"Cardio Labs",strength:"10mg",category:"Cardiovascular"},{id:"7",name:"Atorvastatin",barcode:"8901234567896",genericName:"Atorvastatin",manufacturer:"Cardio Labs",strength:"20mg",category:"Cholesterol"},{id:"8",name:"Omeprazole",barcode:"8901234567897",genericName:"Omeprazole",manufacturer:"GI Health",strength:"20mg",category:"Gastric"}],this.medicineCatalog=[],this.loadFromStorage()}getMedicines(){return[...this.medicineCatalog]}getMedicinesObservable(){return this.medicines.asObservable()}getMedicinesByCategory(e){return this.medicineCatalog.filter(n=>n.category===e)}searchMedicines(e){let n=e.toLowerCase();return this.medicineCatalog.filter(r=>r.name.toLowerCase().includes(n)||r.genericName?.toLowerCase().includes(n)||r.barcode.includes(e))}getMedicineByBarcode(e){return this.medicineCatalog.find(n=>n.barcode===e)}getMedicineById(e){return this.medicineCatalog.find(n=>n.id===e)}addMedicine(e){this.medicineCatalog.push(e),this.medicines.next([...this.medicineCatalog]),this.saveToStorage()}updateMedicine(e,n){let r=this.medicineCatalog.findIndex(o=>o.id===e);r!==-1&&(this.medicineCatalog[r]=ge(ge({},this.medicineCatalog[r]),n),this.medicines.next([...this.medicineCatalog]),this.saveToStorage())}deleteMedicine(e){this.medicineCatalog=this.medicineCatalog.filter(n=>n.id!==e),this.medicines.next([...this.medicineCatalog]),this.saveToStorage()}getCategories(){let e=new Set(this.medicineCatalog.map(n=>n.category).filter(n=>!!n));return Array.from(e).sort()}importMedicines(e){let n=0,r=0,o=0;return e.forEach(s=>{if(!s?.name){o++;return}let a=(s.barcode||"").trim(),c=s.name.trim().toLowerCase(),l=this.medicineCatalog.find(u=>a&&u.barcode?u.barcode.trim()===a:u.name.trim().toLowerCase()===c);if(l){this.mergeMedicine(l,s),r++;return}let d={id:s.id||(this.medicineCatalog.length+1).toString(),name:s.name,barcode:a,genericName:s.genericName||"",manufacturer:s.manufacturer||"",strength:s.strength||"",quantity:s.quantity??0,expiryDate:s.expiryDate,category:s.category||""};this.medicineCatalog.push(d),n++}),this.medicines.next([...this.medicineCatalog]),this.saveToStorage(),{added:n,updated:r,skipped:o,total:e.length}}mergeMedicine(e,n){e.name=n.name||e.name,e.barcode=(n.barcode||e.barcode||"").trim(),e.genericName=n.genericName||e.genericName,e.manufacturer=n.manufacturer||e.manufacturer,e.strength=n.strength||e.strength,e.quantity=n.quantity??e.quantity,e.expiryDate=n.expiryDate||e.expiryDate,e.category=n.category||e.category}loadFromStorage(){try{let e=window.localStorage.getItem(this.storageKey);if(e){let n=JSON.parse(e);Array.isArray(n)&&(this.medicineCatalog=n)}}catch{}this.medicineCatalog.length||(this.medicineCatalog=[...this.seedCatalog]),this.medicines.next([...this.medicineCatalog]),this.saveToStorage()}saveToStorage(){try{window.localStorage.setItem(this.storageKey,JSON.stringify(this.medicineCatalog))}catch{}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var kbe=["mat-button",""],Abe=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Pbe=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Obe=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var Nbe=["mat-icon-button",""],Rbe=["*"];var Fbe=new _e("MAT_BUTTON_CONFIG");var Lbe=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],aX=(()=>{class i{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,n,r,o){this._elementRef=e,this._platform=n,this._ngZone=r,this._animationMode=o,this._focusMonitor=ye(Yc),this._rippleLoader=ye(Cx),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let s=ye(Fbe,{optional:!0}),a=e.nativeElement,c=a.classList;this.disabledInteractive=s?.disabledInteractive??!1,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(let{attribute:l,mdcClasses:d}of Lbe)a.hasAttribute(l)&&c.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(n){Yv()}}static{this.\u0275dir=Me({type:i,inputs:{color:"color",disableRipple:[ie.HasDecoratorInputTransform,"disableRipple","disableRipple",Je],disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je],ariaDisabled:[ie.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",Je],disabledInteractive:[ie.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",Je]},features:[zt]})}}return i})();var pc=(()=>{class i extends aX{constructor(e,n,r,o){super(e,n,r,o)}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(li),F(Ne),F($i,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(n,r){n&2&&(Tt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Hr(r.color?"mat-"+r.color:""),qe("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[It,Dt],attrs:kbe,ngContentSelectors:Pbe,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){n&1&&(Oi(Abe),Fe(0,"span",0),dt(1),b(2,"span",1),dt(3,1),v(),dt(4,2),Fe(5,"span",2)(6,"span",3)),n&2&&qe("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return i})();var Ld=(()=>{class i extends aX{constructor(e,n,r,o){super(e,n,r,o),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(li),F(Ne),F($i,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(n,r){n&2&&(Tt("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Hr(r.color?"mat-"+r.color:""),qe("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[It,Dt],attrs:Nbe,ngContentSelectors:Rbe,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){n&1&&(Oi(),Fe(0,"span",0),dt(1),Fe(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Obe],encapsulation:2,changeDetection:0})}}return i})();var Bd=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,Hu,Vt]})}}return i})();var AF=class{constructor(t){this._box=t,this._destroyed=new Le,this._resizeSubject=new Le,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new Gt(e=>{let n=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),n.unsubscribe(),this._elementObservables.delete(t)}}).pipe(Pi(e=>e.some(n=>n.target===t)),qb({bufferSize:1,refCount:!0}),Rt(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},cX=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=ye(Ne),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,n){let r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new AF(r)),this._observers.get(r).observe(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Bbe=["notch"],Vbe=["matFormFieldNotchedOutline",""],Ube=["*"],zbe=["textField"],Hbe=["iconPrefixContainer"],jbe=["textPrefixContainer"],$be=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Gbe=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Wbe(i,t){i&1&&Fe(0,"span",17)}function qbe(i,t){if(i&1&&(b(0,"label",16),dt(1,1),ve(2,Wbe,1,0,"span",17),v()),i&2){let e=G(2);q("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),Tt("for",e._control.disableAutomaticLabeling?null:e._control.id),P(2),Zt(2,!e.hideRequiredMarker&&e._control.required?2:-1)}}function Xbe(i,t){if(i&1&&ve(0,qbe,3,5,"label",16),i&2){let e=G();Zt(0,e._hasFloatingLabel()?0:-1)}}function Ybe(i,t){i&1&&Fe(0,"div",5)}function Zbe(i,t){}function Kbe(i,t){if(i&1&&ve(0,Zbe,0,0,"ng-template",11),i&2){G(2);let e=So(1);q("ngTemplateOutlet",e)}}function Qbe(i,t){if(i&1&&(b(0,"div",7),ve(1,Kbe,1,1,null,11),v()),i&2){let e=G();q("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),P(),Zt(1,e._forceDisplayInfixLabel()?-1:1)}}function Jbe(i,t){i&1&&(b(0,"div",8,2),dt(2,2),v())}function eve(i,t){i&1&&(b(0,"div",9,3),dt(2,3),v())}function tve(i,t){}function ive(i,t){if(i&1&&ve(0,tve,0,0,"ng-template",11),i&2){G();let e=So(1);q("ngTemplateOutlet",e)}}function nve(i,t){i&1&&(b(0,"div",12),dt(1,4),v())}function rve(i,t){i&1&&(b(0,"div",13),dt(1,5),v())}function ove(i,t){i&1&&Fe(0,"div",14)}function sve(i,t){if(i&1&&(b(0,"div",18),dt(1,6),v()),i&2){let e=G();q("@transitionMessages",e._subscriptAnimationState)}}function ave(i,t){if(i&1&&(b(0,"mat-hint",20),M(1),v()),i&2){let e=G(2);q("id",e._hintLabelId),P(),ft(e.hintLabel)}}function cve(i,t){if(i&1&&(b(0,"div",19),ve(1,ave,2,2,"mat-hint",20),dt(2,7),Fe(3,"div",21),dt(4,8),v()),i&2){let e=G();q("@transitionMessages",e._subscriptAnimationState),P(),Zt(1,e.hintLabel?1:-1)}}var Vd=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["mat-label"]],standalone:!0})}}return i})(),lve=0,gX=new _e("MatError"),_X=(()=>{class i{constructor(e,n){this.id=`mat-mdc-error-${lve++}`,e||n.nativeElement.setAttribute("aria-live","polite")}static{this.\u0275fac=function(n){return new(n||i)(zr("aria-live"),F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["mat-error"],["","matError",""]],hostAttrs:["aria-atomic","true",1,"mat-mdc-form-field-error","mat-mdc-form-field-bottom-align"],hostVars:1,hostBindings:function(n,r){n&2&&Ds("id",r.id)},inputs:{id:"id"},standalone:!0,features:[Bt([{provide:gX,useExisting:i}])]})}}return i})(),dve=0,IM=(()=>{class i{constructor(){this.align="start",this.id=`mat-mdc-hint-${dve++}`}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,r){n&2&&(Ds("id",r.id),Tt("align",null),qe("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return i})(),uve=new _e("MatPrefix");var hve=new _e("MatSuffix");var bX=new _e("FloatingLabelParent"),lX=(()=>{class i{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=ye(cX),this._ngZone=ye(Ne),this._parent=ye(bX),this._resizeSubscription=new Yt}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return mve(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(n){return new(n||i)(F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,r){n&2&&qe("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return i})();function mve(i){let t=i;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let n=e.scrollWidth;return e.remove(),n}var dX="mdc-line-ripple--active",TM="mdc-line-ripple--deactivating",uX=(()=>{class i{constructor(e,n){this._elementRef=e,this._handleTransitionEnd=r=>{let o=this._elementRef.nativeElement.classList,s=o.contains(TM);r.propertyName==="opacity"&&s&&o.remove(dX,TM)},n.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(TM),e.add(dX)}deactivate(){this._elementRef.nativeElement.classList.add(TM)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Ne))}}static{this.\u0275dir=Me({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return i})(),hX=(()=>{class i{constructor(e,n){this._elementRef=e,this._ngZone=n,this.open=!1}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Ne))}}static{this.\u0275cmp=rt({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,r){if(n&1&&Lt(Bbe,5),n&2){let o;Be(o=Ve())&&(r._notch=o.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,r){n&2&&qe("mdc-notched-outline--notched",r.open)},inputs:{open:[ie.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Dt],attrs:Vbe,ngContentSelectors:Ube,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(n,r){n&1&&(Oi(),Fe(0,"div",1),b(1,"div",2,0),dt(3),v(),Fe(4,"div",3))},encapsulation:2,changeDetection:0})}}return i})(),pve={transitionMessages:Bs("transitionMessages",[eo("enter",Wn({opacity:1,transform:"translateY(0%)"})),to("void => enter",[Wn({opacity:0,transform:"translateY(-5px)"}),Io("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},S0=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i})}}return i})();var E0=new _e("MatFormField"),fve=new _e("MAT_FORM_FIELD_DEFAULT_OPTIONS"),mX=0,pX="fill",gve="auto",fX="fixed",_ve="translateY(-50%)",Ud=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Jr(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||gve}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){let n=this._appearance,r=e||this._defaults?.appearance||pX;this._appearance=r,this._appearance==="outline"&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||fX}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||fX}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,n,r,o,s,a,c,l){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=o,this._platform=s,this._defaults=a,this._animationMode=c,this._hideRequiredMarker=!1,this.color="primary",this._appearance=pX,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${mX++}`,this._hintLabelId=`mat-mdc-hint-${mX++}`,this._subscriptAnimationState="",this._destroyed=new Le,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){let e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Rt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),rr(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Rt(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Rt(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){let n=this._control?this._control.ngControl:null;return n&&n[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let n=this._hintChildren?this._hintChildren.find(o=>o.align==="start"):null,r=this._hintChildren?this._hintChildren.find(o=>o.align==="end"):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdateOnStable=!0;return}let n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,o=n?.getBoundingClientRect().width??0,s=r?.getBoundingClientRect().width??0,a=this._dir.value==="rtl"?"-1":"1",c=`${o+s}px`,d=`calc(${a} * (${c} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${_ve} translateX(${d})
    )`}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(ci),F(Ne),F(yr),F(li),F(fve,8),F($i,8),F(kt))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-form-field"]],contentQueries:function(n,r,o){if(n&1&&(ri(o,Vd,5),ri(o,Vd,7),ri(o,S0,5),ri(o,uve,5),ri(o,hve,5),ri(o,gX,5),ri(o,IM,5)),n&2){let s;Be(s=Ve())&&(r._labelChildNonStatic=s.first),Be(s=Ve())&&(r._labelChildStatic=s.first),Be(s=Ve())&&(r._formFieldControl=s.first),Be(s=Ve())&&(r._prefixChildren=s),Be(s=Ve())&&(r._suffixChildren=s),Be(s=Ve())&&(r._errorChildren=s),Be(s=Ve())&&(r._hintChildren=s)}},viewQuery:function(n,r){if(n&1&&(Lt(zbe,5),Lt(Hbe,5),Lt(jbe,5),Lt(lX,5),Lt(hX,5),Lt(uX,5)),n&2){let o;Be(o=Ve())&&(r._textField=o.first),Be(o=Ve())&&(r._iconPrefixContainer=o.first),Be(o=Ve())&&(r._textPrefixContainer=o.first),Be(o=Ve())&&(r._floatingLabel=o.first),Be(o=Ve())&&(r._notchedOutline=o.first),Be(o=Ve())&&(r._lineRipple=o.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(n,r){n&2&&qe("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[Bt([{provide:E0,useExisting:i},{provide:bX,useExisting:i}]),Dt],ngContentSelectors:Gbe,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(n,r){if(n&1){let o=ot();Oi($be),ve(0,Xbe,1,1,"ng-template",null,0,pg),b(2,"div",4,1),ne("click",function(a){return Q(o),J(r._control.onContainerClick(a))}),ve(4,Ybe,1,0,"div",5),b(5,"div",6),ve(6,Qbe,2,2,"div",7)(7,Jbe,3,0,"div",8)(8,eve,3,0,"div",9),b(9,"div",10),ve(10,ive,1,1,null,11),dt(11),v(),ve(12,nve,2,0,"div",12)(13,rve,2,0,"div",13),v(),ve(14,ove,1,0,"div",14),v(),b(15,"div",15),ve(16,sve,2,1)(17,cve,5,2),v()}if(n&2){let o;P(2),qe("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),P(2),Zt(4,!r._hasOutline()&&!r._control.disabled?4:-1),P(2),Zt(6,r._hasOutline()?6:-1),P(),Zt(7,r._hasIconPrefix?7:-1),P(),Zt(8,r._hasTextPrefix?8:-1),P(2),Zt(10,!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),P(2),Zt(12,r._hasTextSuffix?12:-1),P(),Zt(13,r._hasIconSuffix?13:-1),P(),Zt(14,r._hasOutline()?-1:14),P(),qe("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),P(),Zt(16,(o=r._getDisplayedMessages())==="error"?16:o==="hint"?17:-1)}},dependencies:[lX,hX,_g,uX,IM],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[pve.transitionMessages]},changeDetection:0})}}return i})(),Sh=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,kr,qm,Vt]})}}return i})();var vX=Ns({passive:!0}),yX=(()=>{class i{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Zn;let n=jo(e),r=this._monitoredElements.get(n);if(r)return r.subject;let o=new Le,s="cdk-text-field-autofilled",a=c=>{c.animationName==="cdk-text-field-autofill-start"&&!n.classList.contains(s)?(n.classList.add(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!0}))):c.animationName==="cdk-text-field-autofill-end"&&n.classList.contains(s)&&(n.classList.remove(s),this._ngZone.run(()=>o.next({target:c.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,vX),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:o,unlisten:()=>{n.removeEventListener("animationstart",a,vX)}}),o}stopMonitoring(e){let n=jo(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}static{this.\u0275fac=function(n){return new(n||i)(pe(li),pe(Ne))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var xX=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})();var vve=new _e("MAT_INPUT_VALUE_ACCESSOR"),yve=["button","checkbox","file","hidden","image","radio","range","reset","submit"],xve=0,Wp=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=Jr(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(ra.required)??!1}set required(e){this._required=Jr(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&AD().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Jr(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,n,r,o,s,a,c,l,d,u){this._elementRef=e,this._platform=n,this.ngControl=r,this._autofillMonitor=l,this._formField=u,this._uid=`mat-input-${xve++}`,this.focused=!1,this.stateChanges=new Le,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(p=>AD().has(p)),this._iOSKeyupListener=p=>{let _=p.target;!_.value&&_.selectionStart===0&&_.selectionEnd===0&&(_.setSelectionRange(1,1),_.setSelectionRange(0,0))};let h=this._elementRef.nativeElement,m=h.nodeName.toLowerCase();this._inputValueAccessor=c||h,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&d.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new zu(a,r,s,o,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=m==="select",this._isTextarea=m==="textarea",this._isInFormField=!!u,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){yve.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(li),F(oa,10),F(Mg,8),F(Nu,8),F(Zm),F(vve,10),F(yX),F(Ne),F(E0,8))}}static{this.\u0275dir=Me({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(n,r){n&1&&ne("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),n&2&&(Ds("id",r.id)("disabled",r.disabled)("required",r.required),Tt("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),qe("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[ie.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[Bt([{provide:S0,useExisting:i}]),zi]})}}return i})(),wX=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,Sh,Sh,xX,Vt]})}}return i})();var wve=["determinateSpinner"];function Mve(i,t){if(i&1&&(Kr(),b(0,"svg",11),Fe(1,"circle",12),v()),i&2){let e=G();Tt("viewBox",e._viewBox()),P(),$n("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Tt("r",e._circleRadius())}}var Cve=new _e("mat-progress-spinner-default-options",{providedIn:"root",factory:Sve});function Sve(){return{diameter:MX}}var MX=100,Eve=10,CX=(()=>{class i{get color(){return this._color||this._defaultColor}set color(e){this._color=e}constructor(e,n,r){this._elementRef=e,this._defaultColor="primary",this._value=0,this._diameter=MX,this._noopAnimations=n==="NoopAnimations"&&!!r&&!r._forceAnimations,this.mode=e.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_circleRadius(){return(this.diameter-Eve)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F($i,8),F(Cve))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,r){if(n&1&&Lt(wve,5),n&2){let o;Be(o=Ve())&&(r._determinateCircle=o.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,r){n&2&&(Tt("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),Hr("mat-"+r.color),$n("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),qe("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[ie.HasDecoratorInputTransform,"value","value",on],diameter:[ie.HasDecoratorInputTransform,"diameter","diameter",on],strokeWidth:[ie.HasDecoratorInputTransform,"strokeWidth","strokeWidth",on]},exportAs:["matProgressSpinner"],standalone:!0,features:[zt,Dt],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,r){if(n&1&&(ve(0,Mve,2,8,"ng-template",null,0,pg),b(2,"div",2,1),Kr(),b(4,"svg",3),Fe(5,"circle",4),v()(),ku(),b(6,"div",5)(7,"div",6)(8,"div",7),vr(9,8),v(),b(10,"div",9),vr(11,8),v(),b(12,"div",10),vr(13,8),v()()()),n&2){let o=So(1);P(4),Tt("viewBox",r._viewBox()),P(),$n("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),Tt("r",r._circleRadius()),P(4),q("ngTemplateOutlet",o),P(2),q("ngTemplateOutlet",o),P(2),q("ngTemplateOutlet",o)}},dependencies:[_g],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0})}}return i})();var SX=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[kr,Vt]})}}return i})();var Ive=["input"],Dve=["label"],kve=["*"],Ave=new _e("mat-checkbox-default-options",{providedIn:"root",factory:TX});function TX(){return{color:"accent",clickAction:"check-indeterminate"}}var lo=function(i){return i[i.Init=0]="Init",i[i.Checked=1]="Checked",i[i.Unchecked=2]="Unchecked",i[i.Indeterminate=3]="Indeterminate",i}(lo||{}),Pve={provide:Jl,useExisting:br(()=>DM),multi:!0},NF=class{},Ove=0,EX=TX(),DM=(()=>{class i{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let n=new NF;return n.source=this,n.checked=e,n}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,n,r,o,s,a){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=r,this._animationMode=s,this._options=a,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new Qe,this.indeterminateChange=new Qe,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=lo.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||EX,this.color=this._options.color||EX.color,this.tabIndex=parseInt(o)||0,this.id=this._uniqueId=`mat-mdc-checkbox-${++Ove}`}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){let n=e!=this._indeterminate;this._indeterminate=e,n&&(this._indeterminate?this._transitionCheckState(lo.Indeterminate):this._transitionCheckState(this.checked?lo.Checked:lo.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let n=this._currentCheckState,r=this._getAnimationTargetElement();if(!(n===e||!r)&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);let o=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(o)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?lo.Checked:lo.Unchecked),this._emitChangeEvent()):!this.disabled&&e==="noop"&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,n){if(this._animationMode==="NoopAnimations")return"";switch(e){case lo.Init:if(n===lo.Checked)return this._animationClasses.uncheckedToChecked;if(n==lo.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case lo.Unchecked:return n===lo.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case lo.Checked:return n===lo.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case lo.Indeterminate:return n===lo.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let n=this._inputElement;n&&(n.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(ci),F(Ne),zr("tabindex"),F($i,8),F(Ave,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-checkbox"]],viewQuery:function(n,r){if(n&1&&(Lt(Ive,5),Lt(Dve,5),Lt(dd,5)),n&2){let o;Be(o=Ve())&&(r._inputElement=o.first),Be(o=Ve())&&(r._labelElement=o.first),Be(o=Ve())&&(r.ripple=o.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:14,hostBindings:function(n,r){n&2&&(Ds("id",r.id),Tt("tabindex",null)("aria-label",null)("aria-labelledby",null),Hr(r.color?"mat-"+r.color:"mat-accent"),qe("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mdc-checkbox--disabled",r.disabled)("mat-mdc-checkbox-disabled",r.disabled)("mat-mdc-checkbox-checked",r.checked))},inputs:{ariaLabel:[ie.None,"aria-label","ariaLabel"],ariaLabelledby:[ie.None,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[ie.None,"aria-describedby","ariaDescribedby"],id:"id",required:[ie.HasDecoratorInputTransform,"required","required",Je],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[ie.HasDecoratorInputTransform,"disableRipple","disableRipple",Je],tabIndex:[ie.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?void 0:on(e)],color:"color",checked:[ie.HasDecoratorInputTransform,"checked","checked",Je],disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je],indeterminate:[ie.HasDecoratorInputTransform,"indeterminate","indeterminate",Je]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[Bt([Pve,{provide:ed,useExisting:i,multi:!0}]),zt,zi,Dt],ngContentSelectors:kve,decls:15,vars:19,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(n,r){if(n&1){let o=ot();Oi(),b(0,"div",3),ne("click",function(a){return Q(o),J(r._preventBubblingFromLabel(a))}),b(1,"div",4,0)(3,"div",5),ne("click",function(){return Q(o),J(r._onTouchTargetClick())}),v(),b(4,"input",6,1),ne("blur",function(){return Q(o),J(r._onBlur())})("click",function(){return Q(o),J(r._onInputClick())})("change",function(a){return Q(o),J(r._onInteractionEvent(a))}),v(),Fe(6,"div",7),b(7,"div",8),Kr(),b(8,"svg",9),Fe(9,"path",10),v(),ku(),Fe(10,"div",11),v(),Fe(11,"div",12),v(),b(12,"label",13,2),dt(14),v()()}if(n&2){let o=So(2);q("labelPosition",r.labelPosition),P(4),qe("mdc-checkbox--selected",r.checked),q("checked",r.checked)("indeterminate",r.indeterminate)("disabled",r.disabled)("id",r.inputId)("required",r.required)("tabIndex",r.disabled?-1:r.tabIndex),Tt("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby)("aria-checked",r.indeterminate?"mixed":null)("name",r.name)("value",r.value),P(7),q("matRippleTrigger",o)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),P(),q("for",r.inputId)}},dependencies:[dd,GH],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return i})();var IX=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[DM,Vt,Vt]})}}return i})();var DX=lx(),RF=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=er(-this._previousScrollPosition.left),t.style.top=er(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,n=t.style,r=e.style,o=n.scrollBehavior||"",s=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),DX&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),DX&&(n.scrollBehavior=o,r.scrollBehavior=s)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};var FF=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Pi(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},kM=class{enable(){}disable(){}attach(){}};function LF(i,t){return t.some(e=>{let n=i.bottom<e.top,r=i.top>e.bottom,o=i.right<e.left,s=i.left>e.right;return n||r||o||s})}function kX(i,t){return t.some(e=>{let n=i.top<e.top,r=i.bottom>e.bottom,o=i.left<e.left,s=i.right>e.right;return n||r||o||s})}var BF=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();LF(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},Rve=(()=>{class i{constructor(e,n,r,o){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new kM,this.close=s=>new FF(this._scrollDispatcher,this._ngZone,this._viewportRuler,s),this.block=()=>new RF(this._viewportRuler,this._document),this.reposition=s=>new BF(this._scrollDispatcher,this._viewportRuler,this._ngZone,s),this._document=o}static{this.\u0275fac=function(n){return new(n||i)(pe(sp),pe(la),pe(Ne),pe(kt))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),qp=class{constructor(t){if(this.scrollStrategy=new kM,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let n of e)t[n]!==void 0&&(this[n]=t[n])}}};var VF=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var RX=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(pe(kt))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Fve=(()=>{class i extends RX{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{let o=this._attachedOverlays;for(let s=o.length-1;s>-1;s--)if(o[s]._keydownEvents.observers.length>0){let a=o[s]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(pe(kt),pe(Ne,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Lve=(()=>{class i extends RX{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=o=>{this._pointerDownEventTarget=Rs(o)},this._clickListener=o=>{let s=Rs(o),a=o.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:s;this._pointerDownEventTarget=null;let c=this._attachedOverlays.slice();for(let l=c.length-1;l>-1;l--){let d=c[l];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(s)||d.overlayElement.contains(a))break;let u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(o)):u.next(o)}}}add(e){if(super.add(e),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(pe(kt),pe(li),pe(Ne,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),FX=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||Qg()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let o=0;o<r.length;o++)r[o].remove()}let n=this._document.createElement("div");n.classList.add(e),Qg()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(pe(kt),pe(li))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),UF=class{constructor(t,e,n,r,o,s,a,c,l,d=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=o,this._keyboardDispatcher=s,this._document=a,this._location=c,this._outsideClickDispatcher=l,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new Le,this._attachments=new Le,this._detachments=new Le,this._locationChanges=Yt.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new Le,this._outsidePointerEvents=new Le,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(nn(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=ge(ge({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Nt(ge({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=er(this._config.width),t.height=er(this._config.height),t.minWidth=er(this._config.minWidth),t.minHeight=er(this._config.minHeight),t.maxWidth=er(this._config.maxWidth),t.maxHeight=er(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){let r=Wm(e||[]).filter(o=>!!o);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(Rt(rr(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},AX="cdk-overlay-connected-position-bounding-box",Bve=/([A-Za-z%]+)$/,zF=class{get positions(){return this._preferredPositions}constructor(t,e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new Le,this._resizeSubscription=Yt.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(AX),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,o=[],s;for(let a of this._preferredPositions){let c=this._getOriginPoint(t,r,a),l=this._getOverlayPoint(c,e,a),d=this._getOverlayFit(l,e,n,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,c);return}if(this._canFitWithFlexibleDimensions(d,l,n)){o.push({position:a,origin:c,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(c,a)});continue}(!s||s.overlayFit.visibleArea<d.visibleArea)&&(s={overlayFit:d,overlayPoint:l,originPoint:c,position:a,overlayRect:e})}if(o.length){let a=null,c=-1;for(let l of o){let d=l.boundingBoxRect.width*l.boundingBoxRect.height*(l.position.weight||1);d>c&&(c=d,a=l)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(s.position,s.originPoint);return}this._applyPosition(s.position,s.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&Eh(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(AX),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r;if(n.originX=="center")r=t.left+t.width/2;else{let s=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=n.originX=="start"?s:a}e.left<0&&(r-=e.left);let o;return n.originY=="center"?o=t.top+t.height/2:o=n.originY=="top"?t.top:t.bottom,e.top<0&&(o-=e.top),{x:r,y:o}}_getOverlayPoint(t,e,n){let r;n.overlayX=="center"?r=-e.width/2:n.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let o;return n.overlayY=="center"?o=-e.height/2:o=n.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+o}}_getOverlayFit(t,e,n,r){let o=OX(e),{x:s,y:a}=t,c=this._getOffset(r,"x"),l=this._getOffset(r,"y");c&&(s+=c),l&&(a+=l);let d=0-s,u=s+o.width-n.width,h=0-a,m=a+o.height-n.height,p=this._subtractOverflows(o.width,d,u),_=this._subtractOverflows(o.height,h,m),f=p*_;return{visibleArea:f,isCompletelyWithinViewport:o.width*o.height===f,fitsInViewportVertically:_===o.height,fitsInViewportHorizontally:p==o.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){let r=n.bottom-e.y,o=n.right-e.x,s=PX(this._overlayRef.getConfig().minHeight),a=PX(this._overlayRef.getConfig().minWidth),c=t.fitsInViewportVertically||s!=null&&s<=r,l=t.fitsInViewportHorizontally||a!=null&&a<=o;return c&&l}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=OX(e),o=this._viewportRect,s=Math.max(t.x+r.width-o.width,0),a=Math.max(t.y+r.height-o.height,0),c=Math.max(o.top-n.top-t.y,0),l=Math.max(o.left-n.left-t.x,0),d=0,u=0;return r.width<=o.width?d=l||-s:d=t.x<this._viewportMargin?o.left-n.left-t.x:0,r.height<=o.height?u=c||-a:u=t.y<this._viewportMargin?o.top-n.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!Vve(this._lastScrollVisibility,n)){let r=new VF(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let o=0;o<e.length;o++)e[o].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){let n=this._viewportRect,r=this._isRtl(),o,s,a;if(e.overlayY==="top")s=t.y,o=n.height-s+this._viewportMargin;else if(e.overlayY==="bottom")a=n.height-t.y+this._viewportMargin*2,o=n.height-a+this._viewportMargin;else{let m=Math.min(n.bottom-t.y+n.top,t.y),p=this._lastBoundingBoxSize.height;o=m*2,s=t.y-m,o>p&&!this._isInitialRender&&!this._growAfterOpen&&(s=t.y-p/2)}let c=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,l=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,d,u,h;if(l)h=n.width-t.x+this._viewportMargin*2,d=t.x-this._viewportMargin;else if(c)u=t.x,d=n.right-t.x;else{let m=Math.min(n.right-t.x+n.left,t.x),p=this._lastBoundingBoxSize.width;d=m*2,u=t.x-m,d>p&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-p/2)}return{top:s,left:u,bottom:a,right:h,width:d,height:o}}_setBoundingBoxStyles(t,e){let n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let o=this._overlayRef.getConfig().maxHeight,s=this._overlayRef.getConfig().maxWidth;r.height=er(n.height),r.top=er(n.top),r.bottom=er(n.bottom),r.width=er(n.width),r.left=er(n.left),r.right=er(n.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",o&&(r.maxHeight=er(o)),s&&(r.maxWidth=er(s))}this._lastBoundingBoxSize=n,Eh(this._boundingBox.style,r)}_resetBoundingBoxStyles(){Eh(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){Eh(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let n={},r=this._hasExactPosition(),o=this._hasFlexibleDimensions,s=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();Eh(n,this._getExactOverlayY(e,t,d)),Eh(n,this._getExactOverlayX(e,t,d))}else n.position="static";let a="",c=this._getOffset(e,"x"),l=this._getOffset(e,"y");c&&(a+=`translateX(${c}px) `),l&&(a+=`translateY(${l}px)`),n.transform=a.trim(),s.maxHeight&&(r?n.maxHeight=er(s.maxHeight):o&&(n.maxHeight="")),s.maxWidth&&(r?n.maxWidth=er(s.maxWidth):o&&(n.maxWidth="")),Eh(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},o=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n)),t.overlayY==="bottom"){let s=this._document.documentElement.clientHeight;r.bottom=`${s-(o.y+this._overlayRect.height)}px`}else r.top=er(o.y);return r}_getExactOverlayX(t,e,n){let r={left:"",right:""},o=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(o=this._pushOverlayOnScreen(o,this._overlayRect,n));let s;if(this._isRtl()?s=t.overlayX==="end"?"left":"right":s=t.overlayX==="end"?"right":"left",s==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(o.x+this._overlayRect.width)}px`}else r.left=er(o.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:kX(t,n),isOriginOutsideView:LF(t,n),isOverlayClipped:kX(e,n),isOverlayOutsideView:LF(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Wm(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof Re)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}};function Eh(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function PX(i){if(typeof i!="number"&&i!=null){let[t,e]=i.split(Bve);return!e||e==="px"?parseFloat(t):null}return i||null}function OX(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function Vve(i,t){return i===t?!0:i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}var NX="cdk-global-overlay-wrapper",HF=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(NX),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:o,maxWidth:s,maxHeight:a}=n,c=(r==="100%"||r==="100vw")&&(!s||s==="100%"||s==="100vw"),l=(o==="100%"||o==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",m="",p="",_="";c?_="flex-start":d==="center"?(_="center",h?p=u:m=u):h?d==="left"||d==="end"?(_="flex-end",m=u):(d==="right"||d==="start")&&(_="flex-start",p=u):d==="left"||d==="start"?(_="flex-start",m=u):(d==="right"||d==="end")&&(_="flex-end",p=u),t.position=this._cssPosition,t.marginLeft=c?"0":m,t.marginTop=l?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=c?"0":p,e.justifyContent=_,e.alignItems=l?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(NX),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},Uve=(()=>{class i{constructor(e,n,r,o){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=o}global(){return new HF}flexibleConnectedTo(e){return new zF(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(pe(la),pe(kt),pe(li),pe(FX))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),zve=0,es=(()=>{class i{constructor(e,n,r,o,s,a,c,l,d,u,h,m){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=o,this._keyboardDispatcher=s,this._injector=a,this._ngZone=c,this._document=l,this._directionality=d,this._location=u,this._outsideClickDispatcher=h,this._animationsModuleType=m}create(e){let n=this._createHostElement(),r=this._createPaneElement(n),o=this._createPortalOutlet(r),s=new qp(e);return s.direction=s.direction||this._directionality.value,new UF(o,n,r,s,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(e){let n=this._document.createElement("div");return n.id=`cdk-overlay-${zve++}`,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(Zl)),new Ax(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(pe(Rve),pe(FX),pe(Wa),pe(Uve),pe(Fve),pe(Jn),pe(Ne),pe(kt),pe(yr),pe(Kl),pe(Lve),pe($i,8))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Hve=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],LX=new _e("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=ye(es);return()=>i.scrollStrategies.reposition()}}),T0=(()=>{class i{constructor(e){this.elementRef=e}static{this.\u0275fac=function(n){return new(n||i)(F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return i})(),$F=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}constructor(e,n,r,o,s){this._overlay=e,this._dir=s,this._backdropSubscription=Yt.EMPTY,this._attachSubscription=Yt.EMPTY,this._detachSubscription=Yt.EMPTY,this._positionSubscription=Yt.EMPTY,this._disposeOnNavigation=!1,this._ngZone=ye(Ne),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new Qe,this.positionChange=new Qe,this.attach=new Qe,this.detach=new Qe,this.overlayKeydown=new Qe,this.overlayOutsideClick=new Qe,this._templatePortal=new Ls(n,r),this._scrollStrategyFactory=o,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=Hve);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!To(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let r=this._getOriginElement(),o=Rs(n);(!r||r!==o&&!r.contains(o))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new qp({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){let n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof T0?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof T0?this.origin.elementRef.nativeElement:this.origin instanceof Re?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(V1(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(F(es),F(ji),F(rn),F(LX),F(yr,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[ie.None,"cdkConnectedOverlayOrigin","origin"],positions:[ie.None,"cdkConnectedOverlayPositions","positions"],positionStrategy:[ie.None,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[ie.None,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[ie.None,"cdkConnectedOverlayOffsetY","offsetY"],width:[ie.None,"cdkConnectedOverlayWidth","width"],height:[ie.None,"cdkConnectedOverlayHeight","height"],minWidth:[ie.None,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[ie.None,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[ie.None,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[ie.None,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[ie.None,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[ie.None,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[ie.None,"cdkConnectedOverlayOpen","open"],disableClose:[ie.None,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[ie.None,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[ie.HasDecoratorInputTransform,"cdkConnectedOverlayHasBackdrop","hasBackdrop",Je],lockPosition:[ie.HasDecoratorInputTransform,"cdkConnectedOverlayLockPosition","lockPosition",Je],flexibleDimensions:[ie.HasDecoratorInputTransform,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",Je],growAfterOpen:[ie.HasDecoratorInputTransform,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",Je],push:[ie.HasDecoratorInputTransform,"cdkConnectedOverlayPush","push",Je],disposeOnNavigation:[ie.HasDecoratorInputTransform,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",Je]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[zt,zi]})}}return i})();function jve(i){return()=>i.scrollStrategies.reposition()}var $ve={provide:LX,deps:[es],useFactory:jve},Xp=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({providers:[es,$ve],imports:[ad,ip,n_,n_]})}}return i})();var Gve=["trigger"],Wve=["panel"],qve=[[["mat-select-trigger"]],"*"],Xve=["mat-select-trigger","*"];function Yve(i,t){if(i&1&&(b(0,"span",4),M(1),v()),i&2){let e=G();P(),ft(e.placeholder)}}function Zve(i,t){i&1&&dt(0)}function Kve(i,t){if(i&1&&(b(0,"span",11),M(1),v()),i&2){let e=G(2);P(),ft(e.triggerValue)}}function Qve(i,t){if(i&1&&(b(0,"span",10),ve(1,Zve,1,0)(2,Kve,2,1),v()),i&2){let e=G();P(),Zt(1,e.customTrigger?1:2)}}function Jve(i,t){if(i&1){let e=ot();b(0,"div",12,1),ne("@transformPanel.done",function(r){Q(e);let o=G();return J(o._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){Q(e);let o=G();return J(o._handleKeydown(r))}),dt(2,1),v()}if(i&2){let e=G();GU("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),q("ngClass",e.panelClass)("@transformPanel","showing"),Tt("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var eye={transformPanelWrap:Bs("transformPanelWrap",[to("* => void",n8("@transformPanel",[i8()],{optional:!0}))]),transformPanel:Bs("transformPanel",[eo("void",Wn({opacity:0,transform:"scale(1, 0.8)"})),to("void => showing",Io("120ms cubic-bezier(0, 0, 0.2, 1)",Wn({opacity:1,transform:"scale(1, 1)"}))),to("* => void",Io("100ms linear",Wn({opacity:0})))])};var VX=0,UX=new _e("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let i=ye(es);return()=>i.scrollStrategies.reposition()}});function tye(i){return()=>i.scrollStrategies.reposition()}var iye=new _e("MAT_SELECT_CONFIG"),nye={provide:UX,deps:[es],useFactory:tye},rye=new _e("MatSelectTrigger"),GF=class{constructor(t,e){this.source=t,this.value=e}},zX=(()=>{class i{_scrollOptionIntoView(e){let n=this.options.toArray()[e];if(n){let r=this.panel.nativeElement,o=jH(e,this.options,this.optionGroups),s=n._getHostElement();e===0&&o===1?r.scrollTop=0:r.scrollTop=$H(s.offsetTop,s.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new GF(this,e)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(ra.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,n,r,o,s,a,c,l,d,u,h,m,p,_){this._viewportRuler=e,this._changeDetectorRef=n,this._elementRef=s,this._dir=a,this._parentFormField=d,this.ngControl=u,this._liveAnnouncer=p,this._defaultOptions=_,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(f,g)=>f===g,this._uid=`mat-select-${VX++}`,this._triggerAriaLabelledBy=null,this._destroy=new Le,this.stateChanges=new Le,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${VX++}`,this._panelDoneAnimatingStream=new Le,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new Le,this.optionSelectionChanges=om(()=>{let f=this.options;return f?f.changes.pipe(or(f),Kn(()=>rr(...f.map(g=>g.onSelectionChange)))):this._initialized.pipe(Kn(()=>this.optionSelectionChanges))}),this.openedChange=new Qe,this._openedStream=this.openedChange.pipe(Pi(f=>f),Et(()=>{})),this._closedStream=this.openedChange.pipe(Pi(f=>!f),Et(()=>{})),this.selectionChange=new Qe,this.valueChange=new Qe,this._trackedModal=null,this._skipPredicate=f=>this.panelOpen?!1:f.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),_?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=_.typeaheadDebounceInterval),this._errorStateTracker=new zu(o,u,l,c,this.stateChanges),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Px(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Vl(),Rt(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Rt(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Rt(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(or(null),Rt(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(this._previousControl!==void 0&&n.disabled!==null&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let n=`${this.id}-panel`;this._trackedModal&&yx(this._trackedModal,"aria-owns",n),BD(e,"aria-owns",n),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;yx(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let n=e.keyCode,r=n===40||n===38||n===37||n===39,o=n===13||n===32,s=this._keyManager;if(!s.isTyping()&&o&&!To(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;s.onKeydown(e);let c=this.selected;c&&a!==c&&this._liveAnnouncer.announce(c.viewValue,1e4)}}_handleOpenKeydown(e){let n=this._keyManager,r=e.keyCode,o=r===40||r===38,s=n.isTyping();if(o&&e.altKey)e.preventDefault(),this.close();else if(!s&&(r===13||r===32)&&n.activeItem&&!To(e))e.preventDefault(),n.activeItem._selectViaInteraction();else if(!s&&this._multiple&&r===65&&e.ctrlKey){e.preventDefault();let a=this.options.some(c=>!c.disabled&&!c.selected);this.options.forEach(c=>{c.disabled||(a?c.select():c.deselect())})}else{let a=n.activeItemIndex;n.onKeydown(e),this._multiple&&o&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(nn(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{let n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return r.value!=null&&this._compareWith(r.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof T0?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new _x(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=rr(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Rt(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),rr(...this.options.map(n=>n._stateChanges)).pipe(Rt(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){let r=this._selectionModel.isSelected(e);e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n;this.multiple?n=this.selected.map(r=>r.value):n=this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){e=n;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),n=e?e+" ":"";return this.ariaLabelledby?n+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static{this.\u0275fac=function(n){return new(n||i)(F(la),F(ci),F(Ne),F(Zm),F(Re),F(yr,8),F(Mg,8),F(Nu,8),F(E0,8),F(oa,10),zr("tabindex"),F(UX),F(xx),F(iye,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-select"]],contentQueries:function(n,r,o){if(n&1&&(ri(o,rye,5),ri(o,Mx,5),ri(o,YD,5)),n&2){let s;Be(s=Ve())&&(r.customTrigger=s.first),Be(s=Ve())&&(r.options=s),Be(s=Ve())&&(r.optionGroups=s)}},viewQuery:function(n,r){if(n&1&&(Lt(Gve,5),Lt(Wve,5),Lt($F,5)),n&2){let o;Be(o=Ve())&&(r.trigger=o.first),Be(o=Ve())&&(r.panel=o.first),Be(o=Ve())&&(r._overlayDir=o.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(n,r){n&1&&ne("keydown",function(s){return r._handleKeydown(s)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),n&2&&(Tt("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),qe("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[ie.None,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je],disableRipple:[ie.HasDecoratorInputTransform,"disableRipple","disableRipple",Je],tabIndex:[ie.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?0:on(e)],hideSingleSelectionIndicator:[ie.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",Je],placeholder:"placeholder",required:[ie.HasDecoratorInputTransform,"required","required",Je],multiple:[ie.HasDecoratorInputTransform,"multiple","multiple",Je],disableOptionCentering:[ie.HasDecoratorInputTransform,"disableOptionCentering","disableOptionCentering",Je],compareWith:"compareWith",value:"value",ariaLabel:[ie.None,"aria-label","ariaLabel"],ariaLabelledby:[ie.None,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[ie.HasDecoratorInputTransform,"typeaheadDebounceInterval","typeaheadDebounceInterval",on],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[Bt([{provide:S0,useExisting:i},{provide:XD,useExisting:i}]),zt,zi,Dt],ngContentSelectors:Xve,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(n,r){if(n&1){let o=ot();Oi(qve),b(0,"div",2,0),ne("click",function(){return Q(o),J(r.open())}),b(3,"div",3),ve(4,Yve,2,1,"span",4)(5,Qve,3,1),v(),b(6,"div",5)(7,"div",6),Kr(),b(8,"svg",7),Fe(9,"path",8),v()()()(),ve(10,Jve,3,9,"ng-template",9),ne("backdropClick",function(){return Q(o),J(r.close())})("attach",function(){return Q(o),J(r._onAttached())})("detach",function(){return Q(o),J(r.close())})}if(n&2){let o=So(1);P(3),Tt("id",r._valueId),P(),Zt(4,r.empty?4:5),P(6),q("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||o)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)}},dependencies:[T0,$F,Dm],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[eye.transformPanel]},changeDetection:0})}}return i})();var AM=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({providers:[nye],imports:[kr,Xp,ZD,Vt,op,Sh,ZD,Vt]})}}return i})();var oye=["tooltip"],$X=20;var GX=new _e("mat-tooltip-scroll-strategy",{providedIn:"root",factory:()=>{let i=ye(es);return()=>i.scrollStrategies.reposition({scrollThrottle:$X})}});function sye(i){return()=>i.scrollStrategies.reposition({scrollThrottle:$X})}var aye={provide:GX,deps:[es],useFactory:sye};function cye(){return{showDelay:0,hideDelay:0,touchendHideDelay:1500}}var lye=new _e("mat-tooltip-default-options",{providedIn:"root",factory:cye});var HX="tooltip-panel",jX=Ns({passive:!0}),dye=8,uye=8,hye=24,mye=200,Yp=(()=>{class i{get position(){return this._position}set position(e){e!==this._position&&(this._position=e,this._overlayRef&&(this._updatePosition(this._overlayRef),this._tooltipInstance?.show(0),this._overlayRef.updatePosition()))}get positionAtOrigin(){return this._positionAtOrigin}set positionAtOrigin(e){this._positionAtOrigin=Jr(e),this._detach(),this._overlayRef=null}get disabled(){return this._disabled}set disabled(e){this._disabled=Jr(e),this._disabled?this.hide(0):this._setupPointerEnterEventsIfNeeded()}get showDelay(){return this._showDelay}set showDelay(e){this._showDelay=Ja(e)}get hideDelay(){return this._hideDelay}set hideDelay(e){this._hideDelay=Ja(e),this._tooltipInstance&&(this._tooltipInstance._mouseLeaveHideDelay=this._hideDelay)}get message(){return this._message}set message(e){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this._message,"tooltip"),this._message=e!=null?String(e).trim():"",!this._message&&this._isTooltipVisible()?this.hide(0):(this._setupPointerEnterEventsIfNeeded(),this._updateTooltipMessage(),this._ngZone.runOutsideAngular(()=>{Promise.resolve().then(()=>{this._ariaDescriber.describe(this._elementRef.nativeElement,this.message,"tooltip")})}))}get tooltipClass(){return this._tooltipClass}set tooltipClass(e){this._tooltipClass=e,this._tooltipInstance&&this._setTooltipClass(this._tooltipClass)}constructor(e,n,r,o,s,a,c,l,d,u,h,m){this._overlay=e,this._elementRef=n,this._scrollDispatcher=r,this._viewContainerRef=o,this._ngZone=s,this._platform=a,this._ariaDescriber=c,this._focusMonitor=l,this._dir=u,this._defaultOptions=h,this._position="below",this._positionAtOrigin=!1,this._disabled=!1,this._viewInitialized=!1,this._pointerExitEventsInitialized=!1,this._tooltipComponent=pye,this._viewportMargin=8,this._cssClassPrefix="mat-mdc",this.touchGestures="auto",this._message="",this._passiveListeners=[],this._destroyed=new Le,this._scrollStrategy=d,this._document=m,h&&(this._showDelay=h.showDelay,this._hideDelay=h.hideDelay,h.position&&(this.position=h.position),h.positionAtOrigin&&(this.positionAtOrigin=h.positionAtOrigin),h.touchGestures&&(this.touchGestures=h.touchGestures)),u.change.pipe(Rt(this._destroyed)).subscribe(()=>{this._overlayRef&&this._updatePosition(this._overlayRef)}),this._viewportMargin=dye}ngAfterViewInit(){this._viewInitialized=!0,this._setupPointerEnterEventsIfNeeded(),this._focusMonitor.monitor(this._elementRef).pipe(Rt(this._destroyed)).subscribe(e=>{e?e==="keyboard"&&this._ngZone.run(()=>this.show()):this._ngZone.run(()=>this.hide(0))})}ngOnDestroy(){let e=this._elementRef.nativeElement;clearTimeout(this._touchstartTimeout),this._overlayRef&&(this._overlayRef.dispose(),this._tooltipInstance=null),this._passiveListeners.forEach(([n,r])=>{e.removeEventListener(n,r,jX)}),this._passiveListeners.length=0,this._destroyed.next(),this._destroyed.complete(),this._ariaDescriber.removeDescription(e,this.message,"tooltip"),this._focusMonitor.stopMonitoring(e)}show(e=this.showDelay,n){if(this.disabled||!this.message||this._isTooltipVisible()){this._tooltipInstance?._cancelPendingAnimations();return}let r=this._createOverlay(n);this._detach(),this._portal=this._portal||new hd(this._tooltipComponent,this._viewContainerRef);let o=this._tooltipInstance=r.attach(this._portal).instance;o._triggerElement=this._elementRef.nativeElement,o._mouseLeaveHideDelay=this._hideDelay,o.afterHidden().pipe(Rt(this._destroyed)).subscribe(()=>this._detach()),this._setTooltipClass(this._tooltipClass),this._updateTooltipMessage(),o.show(e)}hide(e=this.hideDelay){let n=this._tooltipInstance;n&&(n.isVisible()?n.hide(e):(n._cancelPendingAnimations(),this._detach()))}toggle(e){this._isTooltipVisible()?this.hide():this.show(void 0,e)}_isTooltipVisible(){return!!this._tooltipInstance&&this._tooltipInstance.isVisible()}_createOverlay(e){if(this._overlayRef){let o=this._overlayRef.getConfig().positionStrategy;if((!this.positionAtOrigin||!e)&&o._origin instanceof Re)return this._overlayRef;this._detach()}let n=this._scrollDispatcher.getAncestorScrollContainers(this._elementRef),r=this._overlay.position().flexibleConnectedTo(this.positionAtOrigin?e||this._elementRef:this._elementRef).withTransformOriginOn(`.${this._cssClassPrefix}-tooltip`).withFlexibleDimensions(!1).withViewportMargin(this._viewportMargin).withScrollableContainers(n);return r.positionChanges.pipe(Rt(this._destroyed)).subscribe(o=>{this._updateCurrentPositionClass(o.connectionPair),this._tooltipInstance&&o.scrollableViewProperties.isOverlayClipped&&this._tooltipInstance.isVisible()&&this._ngZone.run(()=>this.hide(0))}),this._overlayRef=this._overlay.create({direction:this._dir,positionStrategy:r,panelClass:`${this._cssClassPrefix}-${HX}`,scrollStrategy:this._scrollStrategy()}),this._updatePosition(this._overlayRef),this._overlayRef.detachments().pipe(Rt(this._destroyed)).subscribe(()=>this._detach()),this._overlayRef.outsidePointerEvents().pipe(Rt(this._destroyed)).subscribe(()=>this._tooltipInstance?._handleBodyInteraction()),this._overlayRef.keydownEvents().pipe(Rt(this._destroyed)).subscribe(o=>{this._isTooltipVisible()&&o.keyCode===27&&!To(o)&&(o.preventDefault(),o.stopPropagation(),this._ngZone.run(()=>this.hide(0)))}),this._defaultOptions?.disableTooltipInteractivity&&this._overlayRef.addPanelClass(`${this._cssClassPrefix}-tooltip-panel-non-interactive`),this._overlayRef}_detach(){this._overlayRef&&this._overlayRef.hasAttached()&&this._overlayRef.detach(),this._tooltipInstance=null}_updatePosition(e){let n=e.getConfig().positionStrategy,r=this._getOrigin(),o=this._getOverlayPosition();n.withPositions([this._addOffset(ge(ge({},r.main),o.main)),this._addOffset(ge(ge({},r.fallback),o.fallback))])}_addOffset(e){let n=uye,r=!this._dir||this._dir.value=="ltr";return e.originY==="top"?e.offsetY=-n:e.originY==="bottom"?e.offsetY=n:e.originX==="start"?e.offsetX=r?-n:n:e.originX==="end"&&(e.offsetX=r?n:-n),e}_getOrigin(){let e=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"||n=="below"?r={originX:"center",originY:n=="above"?"top":"bottom"}:n=="before"||n=="left"&&e||n=="right"&&!e?r={originX:"start",originY:"center"}:(n=="after"||n=="right"&&e||n=="left"&&!e)&&(r={originX:"end",originY:"center"});let{x:o,y:s}=this._invertPosition(r.originX,r.originY);return{main:r,fallback:{originX:o,originY:s}}}_getOverlayPosition(){let e=!this._dir||this._dir.value=="ltr",n=this.position,r;n=="above"?r={overlayX:"center",overlayY:"bottom"}:n=="below"?r={overlayX:"center",overlayY:"top"}:n=="before"||n=="left"&&e||n=="right"&&!e?r={overlayX:"end",overlayY:"center"}:(n=="after"||n=="right"&&e||n=="left"&&!e)&&(r={overlayX:"start",overlayY:"center"});let{x:o,y:s}=this._invertPosition(r.overlayX,r.overlayY);return{main:r,fallback:{overlayX:o,overlayY:s}}}_updateTooltipMessage(){this._tooltipInstance&&(this._tooltipInstance.message=this.message,this._tooltipInstance._markForCheck(),this._ngZone.onMicrotaskEmpty.pipe(nn(1),Rt(this._destroyed)).subscribe(()=>{this._tooltipInstance&&this._overlayRef.updatePosition()}))}_setTooltipClass(e){this._tooltipInstance&&(this._tooltipInstance.tooltipClass=e,this._tooltipInstance._markForCheck())}_invertPosition(e,n){return this.position==="above"||this.position==="below"?n==="top"?n="bottom":n==="bottom"&&(n="top"):e==="end"?e="start":e==="start"&&(e="end"),{x:e,y:n}}_updateCurrentPositionClass(e){let{overlayY:n,originX:r,originY:o}=e,s;if(n==="center"?this._dir&&this._dir.value==="rtl"?s=r==="end"?"left":"right":s=r==="start"?"left":"right":s=n==="bottom"&&o==="top"?"above":"below",s!==this._currentPosition){let a=this._overlayRef;if(a){let c=`${this._cssClassPrefix}-${HX}-`;a.removePanelClass(c+this._currentPosition),a.addPanelClass(c+s)}this._currentPosition=s}}_setupPointerEnterEventsIfNeeded(){this._disabled||!this.message||!this._viewInitialized||this._passiveListeners.length||(this._platformSupportsMouseEvents()?this._passiveListeners.push(["mouseenter",e=>{this._setupPointerExitEventsIfNeeded();let n;e.x!==void 0&&e.y!==void 0&&(n=e),this.show(void 0,n)}]):this.touchGestures!=="off"&&(this._disableNativeGesturesIfNecessary(),this._passiveListeners.push(["touchstart",e=>{let n=e.targetTouches?.[0],r=n?{x:n.clientX,y:n.clientY}:void 0;this._setupPointerExitEventsIfNeeded(),clearTimeout(this._touchstartTimeout);let o=500;this._touchstartTimeout=setTimeout(()=>this.show(void 0,r),this._defaultOptions.touchLongPressShowDelay??o)}])),this._addListeners(this._passiveListeners))}_setupPointerExitEventsIfNeeded(){if(this._pointerExitEventsInitialized)return;this._pointerExitEventsInitialized=!0;let e=[];if(this._platformSupportsMouseEvents())e.push(["mouseleave",n=>{let r=n.relatedTarget;(!r||!this._overlayRef?.overlayElement.contains(r))&&this.hide()}],["wheel",n=>this._wheelListener(n)]);else if(this.touchGestures!=="off"){this._disableNativeGesturesIfNecessary();let n=()=>{clearTimeout(this._touchstartTimeout),this.hide(this._defaultOptions.touchendHideDelay)};e.push(["touchend",n],["touchcancel",n])}this._addListeners(e),this._passiveListeners.push(...e)}_addListeners(e){e.forEach(([n,r])=>{this._elementRef.nativeElement.addEventListener(n,r,jX)})}_platformSupportsMouseEvents(){return!this._platform.IOS&&!this._platform.ANDROID}_wheelListener(e){if(this._isTooltipVisible()){let n=this._document.elementFromPoint(e.clientX,e.clientY),r=this._elementRef.nativeElement;n!==r&&!r.contains(n)&&this.hide()}}_disableNativeGesturesIfNecessary(){let e=this.touchGestures;if(e!=="off"){let n=this._elementRef.nativeElement,r=n.style;(e==="on"||n.nodeName!=="INPUT"&&n.nodeName!=="TEXTAREA")&&(r.userSelect=r.msUserSelect=r.webkitUserSelect=r.MozUserSelect="none"),(e==="on"||!n.draggable)&&(r.webkitUserDrag="none"),r.touchAction="none",r.webkitTapHighlightColor="transparent"}}static{this.\u0275fac=function(n){return new(n||i)(F(es),F(Re),F(sp),F(rn),F(Ne),F(li),F(AH),F(Yc),F(GX),F(yr),F(lye,8),F(kt))}}static{this.\u0275dir=Me({type:i,selectors:[["","matTooltip",""]],hostAttrs:[1,"mat-mdc-tooltip-trigger"],hostVars:2,hostBindings:function(n,r){n&2&&qe("mat-mdc-tooltip-disabled",r.disabled)},inputs:{position:[ie.None,"matTooltipPosition","position"],positionAtOrigin:[ie.None,"matTooltipPositionAtOrigin","positionAtOrigin"],disabled:[ie.None,"matTooltipDisabled","disabled"],showDelay:[ie.None,"matTooltipShowDelay","showDelay"],hideDelay:[ie.None,"matTooltipHideDelay","hideDelay"],touchGestures:[ie.None,"matTooltipTouchGestures","touchGestures"],message:[ie.None,"matTooltip","message"],tooltipClass:[ie.None,"matTooltipClass","tooltipClass"]},exportAs:["matTooltip"],standalone:!0})}}return i})(),pye=(()=>{class i{constructor(e,n,r){this._changeDetectorRef=e,this._elementRef=n,this._isMultiline=!1,this._closeOnInteraction=!1,this._isVisible=!1,this._onHide=new Le,this._showAnimation="mat-mdc-tooltip-show",this._hideAnimation="mat-mdc-tooltip-hide",this._animationsDisabled=r==="NoopAnimations"}show(e){this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=setTimeout(()=>{this._toggleVisibility(!0),this._showTimeoutId=void 0},e)}hide(e){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId=setTimeout(()=>{this._toggleVisibility(!1),this._hideTimeoutId=void 0},e)}afterHidden(){return this._onHide}isVisible(){return this._isVisible}ngOnDestroy(){this._cancelPendingAnimations(),this._onHide.complete(),this._triggerElement=null}_handleBodyInteraction(){this._closeOnInteraction&&this.hide(0)}_markForCheck(){this._changeDetectorRef.markForCheck()}_handleMouseLeave({relatedTarget:e}){(!e||!this._triggerElement.contains(e))&&(this.isVisible()?this.hide(this._mouseLeaveHideDelay):this._finalizeAnimation(!1))}_onShow(){this._isMultiline=this._isTooltipMultiline(),this._markForCheck()}_isTooltipMultiline(){let e=this._elementRef.nativeElement.getBoundingClientRect();return e.height>hye&&e.width>=mye}_handleAnimationEnd({animationName:e}){(e===this._showAnimation||e===this._hideAnimation)&&this._finalizeAnimation(e===this._showAnimation)}_cancelPendingAnimations(){this._showTimeoutId!=null&&clearTimeout(this._showTimeoutId),this._hideTimeoutId!=null&&clearTimeout(this._hideTimeoutId),this._showTimeoutId=this._hideTimeoutId=void 0}_finalizeAnimation(e){e?this._closeOnInteraction=!0:this.isVisible()||this._onHide.next()}_toggleVisibility(e){let n=this._tooltip.nativeElement,r=this._showAnimation,o=this._hideAnimation;if(n.classList.remove(e?o:r),n.classList.add(e?r:o),this._isVisible!==e&&(this._isVisible=e,this._changeDetectorRef.markForCheck()),e&&!this._animationsDisabled&&typeof getComputedStyle=="function"){let s=getComputedStyle(n);(s.getPropertyValue("animation-duration")==="0s"||s.getPropertyValue("animation-name")==="none")&&(this._animationsDisabled=!0)}e&&this._onShow(),this._animationsDisabled&&(n.classList.add("_mat-animation-noopable"),this._finalizeAnimation(e))}static{this.\u0275fac=function(n){return new(n||i)(F(ci),F(Re),F($i,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-tooltip-component"]],viewQuery:function(n,r){if(n&1&&Lt(oye,7),n&2){let o;Be(o=Ve())&&(r._tooltip=o.first)}},hostAttrs:["aria-hidden","true"],hostVars:2,hostBindings:function(n,r){n&1&&ne("mouseleave",function(s){return r._handleMouseLeave(s)}),n&2&&$n("zoom",r.isVisible()?1:null)},standalone:!0,features:[Dt],decls:4,vars:4,consts:[["tooltip",""],[1,"mdc-tooltip","mdc-tooltip--shown","mat-mdc-tooltip",3,"animationend","ngClass"],[1,"mdc-tooltip__surface","mdc-tooltip__surface-animation"]],template:function(n,r){if(n&1){let o=ot();b(0,"div",1,0),ne("animationend",function(a){return Q(o),J(r._handleAnimationEnd(a))}),b(2,"div",2),M(3),v()()}n&2&&(qe("mdc-tooltip--multiline",r._isMultiline),q("ngClass",r.tooltipClass),P(3),ft(r.message))},dependencies:[Dm],styles:['.mdc-tooltip__surface{word-break:break-all;word-break:var(--mdc-tooltip-word-break, normal);overflow-wrap:anywhere}.mdc-tooltip--showing-transition .mdc-tooltip__surface-animation{transition:opacity 150ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-tooltip--hide-transition .mdc-tooltip__surface-animation{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-tooltip{position:fixed;display:none;z-index:9}.mdc-tooltip-wrapper--rich{position:relative}.mdc-tooltip--shown,.mdc-tooltip--showing,.mdc-tooltip--hide{display:inline-flex}.mdc-tooltip--shown.mdc-tooltip--rich,.mdc-tooltip--showing.mdc-tooltip--rich,.mdc-tooltip--hide.mdc-tooltip--rich{display:inline-block;left:-320px;position:absolute}.mdc-tooltip__surface{line-height:16px;padding:4px 8px;min-width:40px;max-width:200px;min-height:24px;max-height:40vh;box-sizing:border-box;overflow:hidden;text-align:center}.mdc-tooltip__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-tooltip__surface::before{border-color:CanvasText}}.mdc-tooltip--rich .mdc-tooltip__surface{align-items:flex-start;display:flex;flex-direction:column;min-height:24px;min-width:40px;max-width:320px;position:relative}.mdc-tooltip--multiline .mdc-tooltip__surface{text-align:left}[dir=rtl] .mdc-tooltip--multiline .mdc-tooltip__surface,.mdc-tooltip--multiline .mdc-tooltip__surface[dir=rtl]{text-align:right}.mdc-tooltip__surface .mdc-tooltip__title{margin:0 8px}.mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(200px - 2*8px);margin:8px;text-align:left}[dir=rtl] .mdc-tooltip__surface .mdc-tooltip__content,.mdc-tooltip__surface .mdc-tooltip__content[dir=rtl]{text-align:right}.mdc-tooltip--rich .mdc-tooltip__surface .mdc-tooltip__content{max-width:calc(320px - 2*8px);align-self:stretch}.mdc-tooltip__surface .mdc-tooltip__content-link{text-decoration:none}.mdc-tooltip--rich-actions,.mdc-tooltip__content,.mdc-tooltip__title{z-index:1}.mdc-tooltip__surface-animation{opacity:0;transform:scale(0.8);will-change:transform,opacity}.mdc-tooltip--shown .mdc-tooltip__surface-animation{transform:scale(1);opacity:1}.mdc-tooltip--hide .mdc-tooltip__surface-animation{transform:scale(1)}.mdc-tooltip__caret-surface-top,.mdc-tooltip__caret-surface-bottom{position:absolute;height:24px;width:24px;transform:rotate(35deg) skewY(20deg) scaleX(0.9396926208)}.mdc-tooltip__caret-surface-top .mdc-elevation-overlay,.mdc-tooltip__caret-surface-bottom .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-tooltip__caret-surface-bottom{box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);outline:1px solid rgba(0,0,0,0);z-index:-1}@media screen and (forced-colors: active){.mdc-tooltip__caret-surface-bottom{outline-color:CanvasText}}.mat-mdc-tooltip .mdc-tooltip__surface{background-color:var(--mdc-plain-tooltip-container-color)}.mat-mdc-tooltip .mdc-tooltip__surface{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__caret-surface-top,.mat-mdc-tooltip .mdc-tooltip__caret-surface-bottom{border-radius:var(--mdc-plain-tooltip-container-shape)}.mat-mdc-tooltip .mdc-tooltip__surface{color:var(--mdc-plain-tooltip-supporting-text-color)}.mat-mdc-tooltip .mdc-tooltip__surface{font-family:var(--mdc-plain-tooltip-supporting-text-font);line-height:var(--mdc-plain-tooltip-supporting-text-line-height);font-size:var(--mdc-plain-tooltip-supporting-text-size);font-weight:var(--mdc-plain-tooltip-supporting-text-weight);letter-spacing:var(--mdc-plain-tooltip-supporting-text-tracking)}.mat-mdc-tooltip{position:relative;transform:scale(0)}.mat-mdc-tooltip::before{content:"";top:0;right:0;bottom:0;left:0;z-index:-1;position:absolute}.mat-mdc-tooltip-panel-below .mat-mdc-tooltip::before{top:-8px}.mat-mdc-tooltip-panel-above .mat-mdc-tooltip::before{bottom:-8px}.mat-mdc-tooltip-panel-right .mat-mdc-tooltip::before{left:-8px}.mat-mdc-tooltip-panel-left .mat-mdc-tooltip::before{right:-8px}.mat-mdc-tooltip._mat-animation-noopable{animation:none;transform:scale(1)}.mat-mdc-tooltip-panel.mat-mdc-tooltip-panel-non-interactive{pointer-events:none}@keyframes mat-mdc-tooltip-show{0%{opacity:0;transform:scale(0.8)}100%{opacity:1;transform:scale(1)}}@keyframes mat-mdc-tooltip-hide{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(0.8)}}.mat-mdc-tooltip-show{animation:mat-mdc-tooltip-show 150ms cubic-bezier(0, 0, 0.2, 1) forwards}.mat-mdc-tooltip-hide{animation:mat-mdc-tooltip-hide 75ms cubic-bezier(0.4, 0, 1, 1) forwards}'],encapsulation:2,changeDetection:0})}}return i})();var PM=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({providers:[aye],imports:[NH,kr,Xp,Vt,Vt,op]})}}return i})();function fye(i,t){if(i&1&&(b(0,"mat-option",16),M(1),v()),i&2){let e=t.$implicit;q("value",e),P(),gt(" ",e," ")}}function gye(i,t){if(i&1){let e=ot();b(0,"mat-form-field",13)(1,"mat-select",15),ne("selectionChange",function(r){Q(e);let o=G(2);return J(o._changePageSize(r.value))}),ug(2,fye,2,2,"mat-option",16,dg),v()()}if(i&2){let e=G(2);q("appearance",e._formFieldAppearance)("color",e.color),P(),q("value",e.pageSize)("disabled",e.disabled)("aria-labelledby",e._pageSizeLabelId)("panelClass",e.selectConfig.panelClass||"")("disableOptionCentering",e.selectConfig.disableOptionCentering),P(),hg(e._displayedPageSizeOptions)}}function _ye(i,t){if(i&1&&(b(0,"div",14),M(1),v()),i&2){let e=G(2);P(),ft(e.pageSize)}}function bye(i,t){if(i&1&&(b(0,"div",2)(1,"div",12),M(2),v(),ve(3,gye,4,7,"mat-form-field",13)(4,_ye,2,1,"div",14),v()),i&2){let e=G();P(),Tt("id",e._pageSizeLabelId),P(),gt(" ",e._intl.itemsPerPageLabel," "),P(),Zt(3,e._displayedPageSizeOptions.length>1?3:-1),P(),Zt(4,e._displayedPageSizeOptions.length<=1?4:-1)}}function vye(i,t){if(i&1){let e=ot();b(0,"button",17),ne("click",function(){Q(e);let r=G();return J(r.firstPage())}),Kr(),b(1,"svg",7),Fe(2,"path",18),v()()}if(i&2){let e=G();q("matTooltip",e._intl.firstPageLabel)("matTooltipDisabled",e._previousButtonsDisabled())("matTooltipPosition","above")("disabled",e._previousButtonsDisabled()),Tt("aria-label",e._intl.firstPageLabel)}}function yye(i,t){if(i&1){let e=ot();b(0,"button",19),ne("click",function(){Q(e);let r=G();return J(r.lastPage())}),Kr(),b(1,"svg",7),Fe(2,"path",20),v()()}if(i&2){let e=G();q("matTooltip",e._intl.lastPageLabel)("matTooltipDisabled",e._nextButtonsDisabled())("matTooltipPosition","above")("disabled",e._nextButtonsDisabled()),Tt("aria-label",e._intl.lastPageLabel)}}var OM=(()=>{class i{constructor(){this.changes=new Le,this.itemsPerPageLabel="Items per page:",this.nextPageLabel="Next page",this.previousPageLabel="Previous page",this.firstPageLabel="First page",this.lastPageLabel="Last page",this.getRangeLabel=(e,n,r)=>{if(r==0||n==0)return`0 of ${r}`;r=Math.max(r,0);let o=e*n,s=o<r?Math.min(o+n,r):o+n;return`${o+1} \u2013 ${s} of ${r}`}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function xye(i){return i||new OM}var wye={provide:OM,deps:[[new Iu,new wm,OM]],useFactory:xye},Mye=50;var Cye=new _e("MAT_PAGINATOR_DEFAULT_OPTIONS"),Sye=0,WF=(()=>{class i{get pageIndex(){return this._pageIndex}set pageIndex(e){this._pageIndex=Math.max(e||0,0),this._changeDetectorRef.markForCheck()}get length(){return this._length}set length(e){this._length=e||0,this._changeDetectorRef.markForCheck()}get pageSize(){return this._pageSize}set pageSize(e){this._pageSize=Math.max(e||0,0),this._updateDisplayedPageSizeOptions()}get pageSizeOptions(){return this._pageSizeOptions}set pageSizeOptions(e){this._pageSizeOptions=(e||[]).map(n=>on(n,0)),this._updateDisplayedPageSizeOptions()}constructor(e,n,r){if(this._intl=e,this._changeDetectorRef=n,this._pageSizeLabelId=`mat-paginator-page-size-label-${Sye++}`,this._isInitialized=!1,this._initializedStream=new uu(1),this._pageIndex=0,this._length=0,this._pageSizeOptions=[],this.hidePageSize=!1,this.showFirstLastButtons=!1,this.selectConfig={},this.disabled=!1,this.page=new Qe,this.initialized=this._initializedStream,this._intlChanges=e.changes.subscribe(()=>this._changeDetectorRef.markForCheck()),r){let{pageSize:o,pageSizeOptions:s,hidePageSize:a,showFirstLastButtons:c}=r;o!=null&&(this._pageSize=o),s!=null&&(this._pageSizeOptions=s),a!=null&&(this.hidePageSize=a),c!=null&&(this.showFirstLastButtons=c)}this._formFieldAppearance=r?.formFieldAppearance||"outline"}ngOnInit(){this._isInitialized=!0,this._updateDisplayedPageSizeOptions(),this._initializedStream.next()}ngOnDestroy(){this._initializedStream.complete(),this._intlChanges.unsubscribe()}nextPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex+1,this._emitPageEvent(e)}previousPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=this.pageIndex-1,this._emitPageEvent(e)}firstPage(){if(!this.hasPreviousPage())return;let e=this.pageIndex;this.pageIndex=0,this._emitPageEvent(e)}lastPage(){if(!this.hasNextPage())return;let e=this.pageIndex;this.pageIndex=this.getNumberOfPages()-1,this._emitPageEvent(e)}hasPreviousPage(){return this.pageIndex>=1&&this.pageSize!=0}hasNextPage(){let e=this.getNumberOfPages()-1;return this.pageIndex<e&&this.pageSize!=0}getNumberOfPages(){return this.pageSize?Math.ceil(this.length/this.pageSize):0}_changePageSize(e){let n=this.pageIndex*this.pageSize,r=this.pageIndex;this.pageIndex=Math.floor(n/e)||0,this.pageSize=e,this._emitPageEvent(r)}_nextButtonsDisabled(){return this.disabled||!this.hasNextPage()}_previousButtonsDisabled(){return this.disabled||!this.hasPreviousPage()}_updateDisplayedPageSizeOptions(){this._isInitialized&&(this.pageSize||(this._pageSize=this.pageSizeOptions.length!=0?this.pageSizeOptions[0]:Mye),this._displayedPageSizeOptions=this.pageSizeOptions.slice(),this._displayedPageSizeOptions.indexOf(this.pageSize)===-1&&this._displayedPageSizeOptions.push(this.pageSize),this._displayedPageSizeOptions.sort((e,n)=>e-n),this._changeDetectorRef.markForCheck())}_emitPageEvent(e){this.page.emit({previousPageIndex:e,pageIndex:this.pageIndex,pageSize:this.pageSize,length:this.length})}static{this.\u0275fac=function(n){return new(n||i)(F(OM),F(ci),F(Cye,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-paginator"]],hostAttrs:["role","group",1,"mat-mdc-paginator"],inputs:{color:"color",pageIndex:[ie.HasDecoratorInputTransform,"pageIndex","pageIndex",on],length:[ie.HasDecoratorInputTransform,"length","length",on],pageSize:[ie.HasDecoratorInputTransform,"pageSize","pageSize",on],pageSizeOptions:"pageSizeOptions",hidePageSize:[ie.HasDecoratorInputTransform,"hidePageSize","hidePageSize",Je],showFirstLastButtons:[ie.HasDecoratorInputTransform,"showFirstLastButtons","showFirstLastButtons",Je],selectConfig:"selectConfig",disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je]},outputs:{page:"page"},exportAs:["matPaginator"],standalone:!0,features:[zt,Dt],decls:14,vars:14,consts:[[1,"mat-mdc-paginator-outer-container"],[1,"mat-mdc-paginator-container"],[1,"mat-mdc-paginator-page-size"],[1,"mat-mdc-paginator-range-actions"],["aria-live","polite",1,"mat-mdc-paginator-range-label"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-previous",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["viewBox","0 0 24 24","focusable","false","aria-hidden","true",1,"mat-mdc-paginator-icon"],["d","M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-next",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],[1,"mat-mdc-paginator-page-size-label"],[1,"mat-mdc-paginator-page-size-select",3,"appearance","color"],[1,"mat-mdc-paginator-page-size-value"],["hideSingleSelectionIndicator","",3,"selectionChange","value","disabled","aria-labelledby","panelClass","disableOptionCentering"],[3,"value"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-first",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"],["mat-icon-button","","type","button",1,"mat-mdc-paginator-navigation-last",3,"click","matTooltip","matTooltipDisabled","matTooltipPosition","disabled"],["d","M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"div",1),ve(2,bye,5,4,"div",2),b(3,"div",3)(4,"div",4),M(5),v(),ve(6,vye,3,5,"button",5),b(7,"button",6),ne("click",function(){return r.previousPage()}),Kr(),b(8,"svg",7),Fe(9,"path",8),v()(),ku(),b(10,"button",9),ne("click",function(){return r.nextPage()}),Kr(),b(11,"svg",7),Fe(12,"path",10),v()(),ve(13,yye,3,5,"button",11),v()()()),n&2&&(P(2),Zt(2,r.hidePageSize?-1:2),P(3),gt(" ",r._intl.getRangeLabel(r.pageIndex,r.pageSize,r.length)," "),P(),Zt(6,r.showFirstLastButtons?6:-1),P(),q("matTooltip",r._intl.previousPageLabel)("matTooltipDisabled",r._previousButtonsDisabled())("matTooltipPosition","above")("disabled",r._previousButtonsDisabled()),Tt("aria-label",r._intl.previousPageLabel),P(3),q("matTooltip",r._intl.nextPageLabel)("matTooltipDisabled",r._nextButtonsDisabled())("matTooltipPosition","above")("disabled",r._nextButtonsDisabled()),Tt("aria-label",r._intl.nextPageLabel),P(3),Zt(13,r.showFirstLastButtons?13:-1))},dependencies:[Ud,zX,Mx,Ld,Yp],styles:[".mat-mdc-paginator{display:block;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-paginator-container-text-color);background-color:var(--mat-paginator-container-background-color);font-family:var(--mat-paginator-container-text-font);line-height:var(--mat-paginator-container-text-line-height);font-size:var(--mat-paginator-container-text-size);font-weight:var(--mat-paginator-container-text-weight);letter-spacing:var(--mat-paginator-container-text-tracking);--mat-form-field-container-height:var(--mat-paginator-form-field-container-height);--mat-form-field-container-vertical-padding:var(--mat-paginator-form-field-container-vertical-padding)}.mat-mdc-paginator .mat-mdc-select-value{font-size:var(--mat-paginator-select-trigger-text-size)}.mat-mdc-paginator .mat-mdc-form-field-subscript-wrapper{display:none}.mat-mdc-paginator .mat-mdc-select{line-height:1.5}.mat-mdc-paginator-outer-container{display:flex}.mat-mdc-paginator-container{display:flex;align-items:center;justify-content:flex-end;padding:0 8px;flex-wrap:wrap;width:100%;min-height:var(--mat-paginator-container-size)}.mat-mdc-paginator-page-size{display:flex;align-items:baseline;margin-right:8px}[dir=rtl] .mat-mdc-paginator-page-size{margin-right:0;margin-left:8px}.mat-mdc-paginator-page-size-label{margin:0 4px}.mat-mdc-paginator-page-size-select{margin:0 4px;width:84px}.mat-mdc-paginator-range-label{margin:0 32px 0 24px}.mat-mdc-paginator-range-actions{display:flex;align-items:center}.mat-mdc-paginator-icon{display:inline-block;width:28px;fill:var(--mat-paginator-enabled-icon-color)}.mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon{fill:var(--mat-paginator-disabled-icon-color)}[dir=rtl] .mat-mdc-paginator-icon{transform:rotate(180deg)}.cdk-high-contrast-active .mat-mdc-icon-button[disabled] .mat-mdc-paginator-icon,.cdk-high-contrast-active .mat-mdc-paginator-icon{fill:currentColor;fill:CanvasText}.cdk-high-contrast-active .mat-mdc-paginator-range-actions .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return i})(),qX=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({providers:[wye],imports:[Bd,AM,PM,WF]})}}return i})();var Tye=["imageInput"],Iye=["cameraVideo"],Dye=["captureCanvas"],kye=["barcodeScanner"];function Aye(i,t){if(i&1&&(b(0,"div",36),M(1),v()),i&2){let e=t.$implicit,n=G();q("ngClass",n.getLogClass(e)),P(),gt(" ",e," ")}}function Pye(i,t){i&1&&(b(0,"div",37),M(1," No logs yet... "),v())}function Oye(i,t){if(i&1&&(b(0,"div",38),M(1),v()),i&2){let e=G();P(),gt(" ",e.catalogImportSummary," ")}}function Nye(i,t){if(i&1&&(b(0,"div",39),M(1),v()),i&2){let e=G();P(),gt(" ",e.catalogImportError," ")}}function Rye(i,t){i&1&&(b(0,"div",47),M(1,"None"),v())}function Fye(i,t){if(i&1&&(b(0,"div",48)(1,"span"),M(2),v(),b(3,"span",49),M(4),v(),b(5,"span",50),M(6,"Remove + restock"),v()()),i&2){let e=t.$implicit;P(2),ft(e.name),P(2),gt("Expired ",-e.daysLeft," days")}}function Lye(i,t){i&1&&(b(0,"div",47),M(1,"None"),v())}function Bye(i,t){if(i&1&&(b(0,"div",48)(1,"span"),M(2),v(),b(3,"span",49),M(4),v(),b(5,"span",50),M(6,"Discount + restock plan"),v()()),i&2){let e=t.$implicit;P(2),ft(e.name),P(2),gt("In ",e.daysLeft," days")}}function Vye(i,t){if(i&1&&(b(0,"div",40)(1,"div",41)(2,"div")(3,"h3"),M(4,"Expiry Alerts"),v(),b(5,"p"),M(6),v()()(),b(7,"div",42)(8,"div",43)(9,"h4"),M(10,"Expired"),v(),ve(11,Rye,2,0,"div",44)(12,Fye,7,2,"div",45),v(),b(13,"div",46)(14,"h4"),M(15,"Near Expiry"),v(),ve(16,Lye,2,0,"div",44)(17,Bye,7,2,"div",45),v()()()),i&2){let e=G();P(6),gt("Flag medicines within ",e.expiryThresholdDays," days of expiry. Suggest remove/discount and restock."),P(5),q("ngIf",e.expiredProducts.length===0),P(),q("ngForOf",e.expiredProducts),P(4),q("ngIf",e.expiringSoonProducts.length===0),P(),q("ngForOf",e.expiringSoonProducts)}}function Uye(i,t){if(i&1){let e=ot();b(0,"div",67)(1,"video",68,2),ne("loadedmetadata",function(){Q(e);let r=G(3);return J(r.onVideoLoaded())}),v(),b(3,"p",69),M(4,'Position camera over pharmacy shelf and tap "Capture Photo"'),v()()}}function zye(i,t){if(i&1){let e=ot();b(0,"div",61)(1,"div",62)(2,"button",63),ne("click",function(){Q(e);let r=G(2);return J(r.startCamera())}),b(3,"mat-icon"),M(4,"videocam"),v(),M(5," Start Camera "),v(),b(6,"button",64),ne("click",function(){Q(e);let r=G(2);return J(r.stopCamera())}),b(7,"mat-icon"),M(8,"videocam_off"),v(),M(9," Stop Camera "),v(),b(10,"button",65),ne("click",function(){Q(e);let r=G(2);return J(r.capturePhoto())}),b(11,"mat-icon"),M(12,"camera"),v(),M(13," Capture Photo "),v()(),ve(14,Uye,5,0,"div",66),v()}if(i&2){let e=G(2);P(2),q("disabled",e.cameraActive),P(4),q("disabled",!e.cameraActive),P(4),q("disabled",!e.cameraActive),P(4),q("ngIf",e.cameraActive)}}function Hye(i,t){if(i&1&&(b(0,"div",70)(1,"h3"),M(2,"Captured Image"),v(),Fe(3,"img",71),v()),i&2){let e=G(2);P(3),q("src",e.uploadedImageUrl,W4)}}function jye(i,t){i&1&&(b(0,"div",72),Fe(1,"mat-spinner",73),b(2,"p"),M(3,"Extracting text from image (OCR)..."),v(),b(4,"small"),M(5,"This may take a moment..."),v()())}function $ye(i,t){if(i&1&&(b(0,"div",74)(1,"h4"),M(2,"\u{1F4DD} Text Extracted from Image:"),v(),b(3,"div",75)(4,"p"),M(5),ia(6,"slice"),v()(),b(7,"p",76),M(8,"\u2705 Medicine details have been auto-detected. Check the form above and adjust if needed."),v()()),i&2){let e=G(2);P(5),Dr("",QU(6,2,e.ocrExtractedText,0,300),"",e.ocrExtractedText.length>300?"...":"","")}}function Gye(i,t){if(i&1){let e=ot();b(0,"div",86)(1,"mat-checkbox",87),hi("ngModelChange",function(r){let o=Q(e).index,s=G(3);return gi(s.selectedMedicines[o],r)||(s.selectedMedicines[o]=r),J(r)}),v(),b(2,"div",88)(3,"div",89)(4,"strong"),M(5),v(),b(6,"span",90),M(7),v()(),b(8,"div",91)(9,"button",92),ne("click",function(){let r=Q(e).index,o=G(3);return J(o.editMedicineName(r))}),b(10,"mat-icon"),M(11,"edit"),v()(),b(12,"button",93),ne("click",function(){let r=Q(e).index,o=G(3);return J(o.selectFromCatalog(r))}),b(13,"mat-icon"),M(14,"library_books"),v()()(),b(15,"span",94),M(16),v()()()}if(i&2){let e=t.$implicit,n=t.index,r=G(3);P(),ui("ngModel",r.selectedMedicines[n]),P(4),ft(e.matchedMedicine||e.class),P(2),gt("(",e.class,")"),P(9),gt("Confidence: ",(e.score*100).toFixed(1),"%")}}function Wye(i,t){i&1&&Fe(0,"div",95)}function qye(i,t){if(i&1){let e=ot();b(0,"div",96)(1,"h4"),M(2),v(),b(3,"div",97)(4,"mat-form-field",98)(5,"mat-label"),M(6,"Medicine Name"),v(),b(7,"input",99),hi("ngModelChange",function(r){Q(e);let o=G(3);return gi(o.editingMedicineName,r)||(o.editingMedicineName=r),J(r)}),v()(),b(8,"div",100)(9,"button",23),ne("click",function(){Q(e);let r=G(3);return J(r.confirmEditMedicine())}),b(10,"mat-icon"),M(11,"check"),v(),M(12," Confirm "),v(),b(13,"button",85),ne("click",function(){Q(e);let r=G(3);return J(r.cancelEditMedicine())}),b(14,"mat-icon"),M(15,"close"),v(),M(16," Cancel "),v()()()()}if(i&2){let e=G(3);P(2),gt("Identify Medicine #",e.editingIndex+1,""),P(5),ui("ngModel",e.editingMedicineName)}}function Xye(i,t){if(i&1){let e=ot();b(0,"button",105),ne("click",function(){let r=Q(e).$implicit,o=G(4);return J(o.selectMedicineFromCatalog(o.selectingIndex,r.name))}),M(1),v()}if(i&2){let e=t.$implicit;P(),gt(" ",e.name," ")}}function Yye(i,t){if(i&1){let e=ot();b(0,"div",101)(1,"h4"),M(2),v(),b(3,"div",102),ve(4,Xye,2,1,"button",103),v(),b(5,"div",104)(6,"button",85),ne("click",function(){Q(e);let r=G(3);return J(r.cancelSelectMedicine())}),b(7,"mat-icon"),M(8,"close"),v(),M(9," Close "),v()()()}if(i&2){let e=G(3);P(2),Dr("Select from Catalog for #",e.selectingIndex+1," (",e.detectedMedicines.objects[e.selectingIndex].class,")"),P(2),q("ngForOf",e.catalogMedicines)}}function Zye(i,t){if(i&1){let e=ot();b(0,"div",77)(1,"h3"),M(2),v(),b(3,"div",78)(4,"strong"),M(5,"\u{1F4CB} Identify your medicines:"),v(),b(6,"ul")(7,"li"),M(8,"Click the "),b(9,"strong"),M(10,"\u270F\uFE0F pencil"),v(),M(11," icon to manually type the medicine name"),v(),b(12,"li"),M(13,"Click the "),b(14,"strong"),M(15,"\u{1F4DA} books"),v(),M(16," icon to select from the existing catalog"),v(),b(17,"li"),M(18,"Check the boxes for medicines you want to add"),v(),b(19,"li"),M(20,'Click "Add Selected Medicines" to save them'),v()()(),b(21,"div",79),ve(22,Gye,17,4,"div",80)(23,Wye,1,0,"div",81)(24,qye,17,2,"div",82)(25,Yye,10,3,"div",83),v(),b(26,"div",84)(27,"button",65),ne("click",function(){Q(e);let r=G(2);return J(r.addDetectedMedicines())}),b(28,"mat-icon"),M(29,"add_box"),v(),M(30," Add Selected Medicines "),v(),b(31,"button",85),ne("click",function(){Q(e);let r=G(2);return J(r.resetImageUpload())}),b(32,"mat-icon"),M(33,"clear"),v(),M(34," Clear "),v()()()}if(i&2){let e=G(2);P(2),gt("Detected Objects (",e.detectedMedicines.objects.length,")"),P(20),q("ngForOf",e.detectedMedicines.objects),P(),q("ngIf",e.editingIndex!==null||e.selectingIndex!==null),P(),q("ngIf",e.editingIndex!==null),P(),q("ngIf",e.selectingIndex!==null),P(2),q("disabled",!e.hasSelectedMedicines())}}function Kye(i,t){if(i&1){let e=ot();b(0,"div",51)(1,"div",52)(2,"input",53,1),ne("change",function(r){Q(e);let o=G();return J(o.onImageSelected(r))}),v(),b(4,"div",54)(5,"button",23),ne("click",function(){Q(e);let r=So(3);return J(r.click())}),b(6,"mat-icon"),M(7,"upload_file"),v(),M(8," Upload Image File "),v(),b(9,"button",23),ne("click",function(){Q(e);let r=G();return J(r.toggleCameraView())}),b(10,"mat-icon"),M(11,"camera_alt"),v(),M(12),v(),b(13,"button",55),ne("click",function(){Q(e);let r=G();return J(r.toggleImageUpload())}),b(14,"mat-icon"),M(15,"close"),v(),M(16," Cancel "),v()(),ve(17,zye,15,4,"div",56)(18,Hye,4,1,"div",57)(19,jye,6,0,"div",58)(20,$ye,9,6,"div",59)(21,Zye,35,6,"div",60),v()()}if(i&2){let e=G();P(12),gt(" ",e.showCamera?"Hide Camera":"Take from Camera"," "),P(5),q("ngIf",e.showCamera),P(),q("ngIf",e.uploadedImageUrl),P(),q("ngIf",e.isOcrProcessing),P(),q("ngIf",e.ocrExtractedText&&!e.isOcrProcessing),P(),q("ngIf",e.detectedMedicines&&!e.isDetecting)}}function Qye(i,t){if(i&1&&(b(0,"div",39),M(1),v()),i&2){let e=G(2);P(),gt(" ",e.barcodeScannerError," ")}}function Jye(i,t){i&1&&(b(0,"div",38),M(1," \u2705 Camera ready (optional - primary method is manual input below) "),v())}function exe(i,t){i&1&&(b(0,"div",118),Fe(1,"mat-spinner",119),b(2,"p"),M(3,"Initializing camera..."),v()())}function txe(i,t){i&1&&(b(0,"div",118),Fe(1,"mat-spinner",119),b(2,"p"),M(3,"Looking up barcode in openFDA..."),v()())}function ixe(i,t){i&1&&(b(0,"div",124),Fe(1,"mat-spinner",73),b(2,"p"),M(3,"Initializing camera..."),v()())}function nxe(i,t){if(i&1&&(b(0,"div",120),Fe(1,"video",121,3),b(3,"p",122),M(4,"\u{1F4F7} Camera Active (Optional)"),v(),ve(5,ixe,4,0,"div",123),v()),i&2){let e=G(2);P(5),q("ngIf",e.isBarcodeScanning&&!e.scannedMedicine)}}function rxe(i,t){if(i&1){let e=ot();b(0,"div",125)(1,"h4"),M(2,"\u2705 Medicine Found"),v(),b(3,"div",126)(4,"p")(5,"strong"),M(6,"Name:"),v(),M(7),v(),b(8,"p")(9,"strong"),M(10,"Barcode:"),v(),M(11),v(),b(12,"p")(13,"strong"),M(14,"Strength:"),v(),M(15),v(),b(16,"p")(17,"strong"),M(18,"Manufacturer:"),v(),M(19),v()(),b(20,"div",127)(21,"button",23),ne("click",function(){Q(e);let r=G(2);return J(r.addScannedMedicine())}),b(22,"mat-icon"),M(23,"add_box"),v(),M(24," Add to Catalog "),v(),b(25,"button",85),ne("click",function(){Q(e);let r=G(2);return J(r.cancelBarcodeScanning())}),b(26,"mat-icon"),M(27,"close"),v(),M(28," Cancel "),v()()()}if(i&2){let e=G(2);P(7),gt(" ",e.scannedMedicine.name,""),P(4),gt(" ",e.scannedBarcode,""),P(4),gt(" ",e.scannedMedicine.strength,""),P(4),gt(" ",e.scannedMedicine.manufacturer,"")}}function oxe(i,t){if(i&1){let e=ot();b(0,"div",106)(1,"h3"),M(2,"\u{1F4F1} Barcode Scanner - Add Medicine to Catalog"),v(),b(3,"div",107)(4,"h4"),M(5,"How to use:"),v(),b(6,"ol")(7,"li")(8,"strong"),M(9,"Find the barcode"),v(),M(10," on your medicine package (usually a long number with lines)"),v(),b(11,"li")(12,"strong"),M(13,"Enter the barcode number"),v(),M(14," in the field below (e.g., 5012254500012)"),v(),b(15,"li")(16,"strong"),M(17,"Click Search"),v(),M(18," to look up the medicine"),v(),b(19,"li")(20,"strong"),M(21,"Review the medicine details"),v(),M(22,' and click "Add to Catalog"'),v()()(),ve(23,Qye,2,1,"div",26)(24,Jye,2,0,"div",25)(25,exe,4,0,"div",108)(26,txe,4,0,"div",108)(27,nxe,6,1,"div",109),b(28,"div",110)(29,"h4"),M(30,"\u{1F50D} Search for Medicine by Barcode"),v(),b(31,"p",111)(32,"strong"),M(33,"Primary Method:"),v(),M(34," Type or paste the barcode number from the medicine packaging"),v(),b(35,"div",112)(36,"mat-form-field",113)(37,"mat-label"),M(38,"Barcode Number"),v(),b(39,"input",114),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.manualBarcodeInput,r)||(o.manualBarcodeInput=r),J(r)}),ne("keyup.enter",function(){Q(e);let r=G();return J(r.scanManualBarcode())}),v()(),b(40,"button",63),ne("click",function(){Q(e);let r=G();return J(r.scanManualBarcode())}),b(41,"mat-icon"),M(42,"search"),v(),M(43," Search "),v()(),b(44,"div",115)(45,"p")(46,"strong"),M(47,"\u{1F4CC} Example barcodes to try:"),v()(),b(48,"ul")(49,"li")(50,"code"),M(51,"5012254500012"),v(),M(52," \u2192 Aspirin"),v(),b(53,"li")(54,"code"),M(55,"5014496014175"),v(),M(56," \u2192 Ibuprofen"),v(),b(57,"li")(58,"code"),M(59,"5000017000049"),v(),M(60," \u2192 Paracetamol"),v()()()(),ve(61,rxe,29,4,"div",116),b(62,"div",117)(63,"button",85),ne("click",function(){Q(e);let r=G();return J(r.stopBarcodeScanner())}),b(64,"mat-icon"),M(65,"close"),v(),M(66," Close Scanner "),v()()()}if(i&2){let e=G();P(23),q("ngIf",e.barcodeScannerError),P(),q("ngIf",e.cameraInitialized&&!e.barcodeScannerError&&!e.isBarcodeScanning),P(),q("ngIf",e.isBarcodeScanning),P(),q("ngIf",e.isBarcodeLookup),P(),q("ngIf",e.cameraInitialized||e.isBarcodeScanning),P(12),ui("ngModel",e.manualBarcodeInput),q("disabled",e.isBarcodeScanning||e.isBarcodeLookup),P(),q("disabled",!e.manualBarcodeInput.trim()||e.isBarcodeScanning||e.isBarcodeLookup),P(21),q("ngIf",e.scannedMedicine)}}function sxe(i,t){if(i&1){let e=ot();b(0,"div",128)(1,"mat-form-field",113)(2,"mat-label"),M(3,"Search products"),v(),b(4,"input",129),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.searchTerm,r)||(o.searchTerm=r),J(r)}),ne("ngModelChange",function(){Q(e);let r=G();return J(r.onSearchChange())}),v()()()}if(i&2){let e=G();P(4),ui("ngModel",e.searchTerm)}}function axe(i,t){if(i&1&&(b(0,"span",135),M(1),v()),i&2){let e=t.ngIf;q("ngClass",e.className),P(),gt(" ",e.label," ")}}function cxe(i,t){if(i&1){let e=ot();b(0,"tr")(1,"td"),M(2),v(),b(3,"td"),M(4),v(),b(5,"td"),M(6),v(),b(7,"td"),M(8),v(),b(9,"td"),M(10),v(),b(11,"td"),M(12),ve(13,axe,2,2,"span",132),v(),b(14,"td")(15,"button",133),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.onEditProduct(r))}),M(16,"Edit"),v(),b(17,"button",134),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.onDeleteProduct(r.id))}),M(18,"Delete"),v()()()}if(i&2){let e=t.$implicit,n=G(2);P(2),ft(e.id),P(2),ft(e.name),P(2),ft(e.category),P(2),gt("$",e.price,""),P(2),ft(e.quantity),P(2),gt(" ",e.expiryDate," "),P(),q("ngIf",n.getExpiryStatus(e.expiryDate))}}function lxe(i,t){if(i&1&&(b(0,"table",130)(1,"thead")(2,"tr")(3,"th"),M(4,"ID"),v(),b(5,"th"),M(6,"Product Name"),v(),b(7,"th"),M(8,"Category"),v(),b(9,"th"),M(10,"Price"),v(),b(11,"th"),M(12,"Quantity"),v(),b(13,"th"),M(14,"Expiry Date"),v(),b(15,"th"),M(16,"Actions"),v()()(),b(17,"tbody"),ve(18,cxe,19,7,"tr",131),v()()),i&2){let e=G();P(18),q("ngForOf",e.pagedProducts)}}function dxe(i,t){if(i&1){let e=ot();b(0,"mat-paginator",136),ne("page",function(r){Q(e);let o=G();return J(o.onPageChange(r))}),v()}if(i&2){let e=G();q("length",e.filteredProducts.length)("pageIndex",e.pageIndex)("pageSize",e.pageSize)("pageSizeOptions",e.pageSizeOptions)}}function uxe(i,t){i&1&&(b(0,"div",137)(1,"p"),M(2,"No products found."),v()())}function hxe(i,t){if(i&1){let e=ot();b(0,"div",138)(1,"div",139)(2,"h3"),M(3,"\u2795 Add New Medicine to Catalog"),v(),b(4,"div",140)(5,"mat-form-field",141)(6,"mat-label"),M(7,"Medicine Name *"),v(),b(8,"input",142),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.newMedicine.name,r)||(o.newMedicine.name=r),J(r)}),v()()(),b(9,"div",140)(10,"mat-form-field",141)(11,"mat-label"),M(12,"Generic Name"),v(),b(13,"input",143),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.newMedicine.genericName,r)||(o.newMedicine.genericName=r),J(r)}),v()()(),b(14,"div",144)(15,"mat-form-field",145)(16,"mat-label"),M(17,"Strength"),v(),b(18,"input",146),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.newMedicine.strength,r)||(o.newMedicine.strength=r),J(r)}),v()(),b(19,"mat-form-field",145)(20,"mat-label"),M(21,"Manufacturer"),v(),b(22,"input",147),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.newMedicine.manufacturer,r)||(o.newMedicine.manufacturer=r),J(r)}),v()()(),b(23,"div",144)(24,"mat-form-field",145)(25,"mat-label"),M(26,"Category"),v(),b(27,"input",148),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.newMedicine.category,r)||(o.newMedicine.category=r),J(r)}),v()(),b(28,"mat-form-field",145)(29,"mat-label"),M(30,"Initial Quantity"),v(),b(31,"input",149),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.newMedicine.quantity,r)||(o.newMedicine.quantity=r),J(r)}),v()()(),b(32,"div",150)(33,"button",23),ne("click",function(){Q(e);let r=G();return J(r.saveManualMedicine())}),b(34,"mat-icon"),M(35,"save"),v(),M(36," Add to Catalog "),v(),b(37,"button",85),ne("click",function(){Q(e);let r=G();return J(r.cancelManualMedicine())}),b(38,"mat-icon"),M(39,"close"),v(),M(40," Cancel "),v()()()()}if(i&2){let e=G();P(8),ui("ngModel",e.newMedicine.name),P(5),ui("ngModel",e.newMedicine.genericName),P(5),ui("ngModel",e.newMedicine.strength),P(4),ui("ngModel",e.newMedicine.manufacturer),P(5),ui("ngModel",e.newMedicine.category),P(4),ui("ngModel",e.newMedicine.quantity)}}var NM=(()=>{class i{constructor(e,n,r,o,s,a,c,l){this.imageDetectionService=e,this.advancedDetectionService=n,this.barcodeScannerService=r,this.ocrService=o,this.llmExtractionService=s,this.medicineService=a,this.ngZone=c,this.cdr=l,this.products=[],this.pageIndex=0,this.pageSize=10,this.pageSizeOptions=[5,10,25,50],this.searchTerm="",this.showImageUpload=!1,this.uploadedImageUrl=null,this.detectedMedicines=null,this.selectedMedicines={},this.isDetecting=!1,this.isOcrProcessing=!1,this.ocrExtractedText="",this.ocrExtractedMedicines=[],this.cameraActive=!1,this.cameraStream=null,this.showCamera=!1,this.consoleLogs=[],this.showConsole=!1,this.maxLogs=50,this.modelStatus="Loading...",this.modelReady=!1,this.ocrAvailable=!1,this.editingIndex=null,this.editingMedicineName="",this.selectingIndex=null,this.catalogMedicines=[],this.showBarcodeScanner=!1,this.isBarcodeScanning=!1,this.isBarcodeLookup=!1,this.scannedBarcode=null,this.scannedMedicine=null,this.manualBarcodeInput="",this.barcodeStream=null,this.barcodeScannerError=null,this.cameraPermissionDenied=!1,this.cameraInitialized=!1,this.catalogImportError=null,this.catalogImportSummary=null,this.expiryThresholdDays=60,this.storageKey="buildaq_pharmacy_products",this.layoutStorageKey="buildaq_pharmacy_layout_v2",this.expirySeedKey="buildaq_pharmacy_expiry_seed_v3",this.productsUpdatedHandler=()=>this.loadProductsFromStorage(),this.layoutUpdatedHandler=()=>this.syncFromVisualMapper(),this.showManualMedicineForm=!1,this.newMedicine={name:"",genericName:"",strength:"",manufacturer:"",category:"Medicine",quantity:50},this.setupConsoleLogging()}ngOnInit(){this.loadProducts(),this.ensureExpiryDates(),this.syncFromVisualMapper(),this.checkModelStatus(),this.loadCatalogMedicines(),this.checkOcrAvailability(),window.addEventListener("buildaq-products-updated",this.productsUpdatedHandler),window.addEventListener("buildaq-layout-updated",this.layoutUpdatedHandler)}checkOcrAvailability(){setTimeout(()=>{try{typeof window.Tesseract<"u"?(this.ocrAvailable=!0,console.log("\xE2\u0153\u2026 OCR (Tesseract.js) is available")):(this.ocrAvailable=!1,console.warn("\xE2\u0161\xA0\xEF\xB8\x8F OCR (Tesseract.js) not available"))}catch(e){this.ocrAvailable=!1,console.error("\xE2\x9D\u0152 Error checking OCR availability:",e)}},2e3)}ngOnDestroy(){this.cameraStream&&this.cameraStream.getTracks().forEach(e=>e.stop()),window.removeEventListener("buildaq-products-updated",this.productsUpdatedHandler),window.removeEventListener("buildaq-layout-updated",this.layoutUpdatedHandler)}setupConsoleLogging(){let e=console.log,n=console.error,r=console.warn,o=(s,a)=>{let c=a.map(l=>{if(typeof l=="object")try{return JSON.stringify(l)}catch{return String(l)}return String(l)}).join(" ");setTimeout(()=>{this.consoleLogs.push(`[${s}] ${c}`),this.consoleLogs.length>this.maxLogs&&this.consoleLogs.shift(),this.cdr.detectChanges()},0)};console.log=(...s)=>{e(...s),o("LOG",s)},console.error=(...s)=>{n(...s),o("ERROR",s)},console.warn=(...s)=>{r(...s),o("WARN",s)}}toggleConsole(){this.showConsole=!this.showConsole}clearConsole(){this.consoleLogs=[]}getLogClass(e){return e.startsWith("[ERROR]")?"log-error":e.startsWith("[WARN]")?"log-warn":"log-info"}checkModelStatus(){let e=setInterval(()=>{let n=this.consoleLogs.join(`
`);n.includes("\xE2\u0153\u201C COCO-SSD model loaded successfully")?(this.modelStatus="\xE2\u0153\u201C AI Detection Ready",this.modelReady=!0,clearInterval(e)):n.includes("using fallback detection")?(this.modelStatus="\xE2\u0161\xA0 Fallback Mode (Image Analysis)",this.modelReady=!0,clearInterval(e)):n.includes("Failed to load COCO-SSD model")&&(this.modelStatus="\xE2\u0161\xA0 Using Fallback Detection",this.modelReady=!0,clearInterval(e))},500);setTimeout(()=>clearInterval(e),3e4)}hasSelectedMedicines(){return Object.values(this.selectedMedicines).some(e=>e)}loadProducts(){this.loadProductsFromStorage()||(this.products=[{id:1,name:"Aspirin 500mg",category:"Pain Relief",price:5.99,quantity:100,expiryDate:"2025-12-31"},{id:2,name:"Cough Syrup",category:"Cough & Cold",price:8.99,quantity:50,expiryDate:"2025-11-30"},{id:3,name:"Vitamin C Tablets",category:"Vitamins",price:12.99,quantity:200,expiryDate:"2026-06-30"}],this.saveProducts())}loadProductsFromStorage(){let e=localStorage.getItem(this.storageKey);if(!e)return!1;try{let n=JSON.parse(e);return this.products=n.map((r,o)=>({id:Number(r.id??o+1),name:String(r.name||"").trim(),category:String(r.category||"Medicine").trim(),price:Number(r.price??0),quantity:Number(r.quantity??0),expiryDate:String(r.expiryDate||"N/A")})).filter(r=>r.name),this.ensureExpiryDates(),!0}catch(n){return console.warn("Failed to parse saved products",n),!1}}saveProducts(){localStorage.setItem(this.storageKey,JSON.stringify(this.products)),window.dispatchEvent(new Event("buildaq-products-updated"))}syncFromVisualMapper(){let e=localStorage.getItem(this.layoutStorageKey);if(e)try{let n=JSON.parse(e),r=new Map;if(n.forEach(c=>{if(c.type!=="box"||!c.medicines)return;let l=c.tag||"Medicine",d=[];Array.isArray(c.medicines)?c.medicines.forEach(u=>{if(typeof u=="string"){d.push({name:u,qty:1});return}if(u&&typeof u=="object"){let h=String(u.name||u.medicine||u.title||"").trim(),m=Number(u.qty??u.quantity??1);d.push({name:h,qty:Number.isFinite(m)?m:0})}}):c.medicines&&typeof c.medicines=="object"&&Object.entries(c.medicines).forEach(([u,h])=>{d.push({name:String(u).trim(),qty:Number(h??0)})}),d.forEach(u=>{let h=u.name.trim().toLowerCase();if(!h)return;let m=r.get(h);r.set(h,{qty:(m?.qty||0)+(Number.isFinite(u.qty)?u.qty:0),category:m?.category||l})})}),r.size===0)return;let o=new Map(this.products.map(c=>[c.name.toLowerCase(),c])),s=this.products.reduce((c,l)=>Math.max(c,l.id),0)+1,a=[];r.forEach((c,l)=>{let d=o.get(l);a.push({id:d?.id??s++,name:d?.name||l.replace(/\b\w/g,u=>u.toUpperCase()),category:d?.category||c.category||"Medicine",price:d?.price??0,quantity:c.qty,expiryDate:d?.expiryDate||"N/A"})}),this.products=a.sort((c,l)=>c.name.localeCompare(l.name)),this.pageIndex=0,this.ensureExpiryDates(),this.saveProducts()}catch(n){console.warn("Failed to sync from visual mapper",n)}}get filteredProducts(){let e=this.searchTerm.trim().toLowerCase();return e?this.products.filter(n=>n.name.toLowerCase().includes(e)||n.category.toLowerCase().includes(e)):this.products}get expiringSoonProducts(){return this.products.map(e=>{let n=this.getDaysUntilExpiry(e.expiryDate);return Nt(ge({},e),{daysLeft:n})}).filter(e=>Number.isFinite(e.daysLeft)&&e.daysLeft>0&&e.daysLeft<=this.expiryThresholdDays).sort((e,n)=>e.daysLeft-n.daysLeft)}get expiredProducts(){return this.products.map(e=>{let n=this.getDaysUntilExpiry(e.expiryDate);return Nt(ge({},e),{daysLeft:n})}).filter(e=>Number.isFinite(e.daysLeft)&&e.daysLeft<=0).sort((e,n)=>e.daysLeft-n.daysLeft)}getExpiryStatus(e){let n=this.getDaysUntilExpiry(e);return Number.isFinite(n)?n<=0?{label:"Expired",className:"expiry-expired"}:n<=this.expiryThresholdDays?{label:`${n} days`,className:"expiry-soon"}:null:null}getDaysUntilExpiry(e){if(!e||e.toLowerCase()==="n/a")return Number.NaN;let n=new Date(e);if(Number.isNaN(n.getTime()))return Number.NaN;let r=new Date,o=n.getTime()-r.setHours(0,0,0,0);return Math.ceil(o/(1e3*60*60*24))}ensureExpiryDates(){let e=!1,n=localStorage.getItem(this.expirySeedKey)!=="1",r=n?this.buildExpiryPreset():new Map;this.products=this.products.map(o=>{let s=!o.expiryDate||o.expiryDate.toLowerCase()==="n/a",a=r.get(o.name);return a?(e=!0,Nt(ge({},o),{expiryDate:a})):n||s?(e=!0,Nt(ge({},o),{expiryDate:this.generateExpiryDate(o.name)})):o}),e&&(localStorage.setItem(this.expirySeedKey,"1"),this.saveProducts())}buildExpiryPreset(){let e=new Map,n=[...this.products].filter(a=>a.name).sort((a,c)=>a.name.localeCompare(c.name)),r=new Date,o=n.slice(0,5),s=n.slice(5,10);return o.forEach((a,c)=>{let l=10+(this.simpleHash(a.name)+c)%30,d=new Date(r.getTime());d.setDate(d.getDate()-l),e.set(a.name,d.toISOString().slice(0,10))}),s.forEach((a,c)=>{let l=15+(this.simpleHash(a.name)+c)%45,d=new Date(r.getTime());d.setDate(d.getDate()+l),e.set(a.name,d.toISOString().slice(0,10))}),e}generateExpiryDate(e){let n=new Date,s=180+this.simpleHash(e)%540,a=new Date(n.getTime());return a.setDate(a.getDate()+s),a.toISOString().slice(0,10)}simpleHash(e){let n=0;for(let r=0;r<e.length;r+=1)n=(n<<5)-n+e.charCodeAt(r),n|=0;return Math.abs(n)}get pagedProducts(){let e=this.pageIndex*this.pageSize;return this.filteredProducts.slice(e,e+this.pageSize)}onPageChange(e){this.pageIndex=e.pageIndex,this.pageSize=e.pageSize}onSearchChange(){this.pageIndex=0}onAddProduct(){this.toggleImageUpload()}toggleImageUpload(){this.showImageUpload=!this.showImageUpload,this.showImageUpload||this.resetImageUpload()}onImageSelected(e){let r=e.target.files?.[0];if(!r)return;let o=new FileReader;o.onload=s=>{this.uploadedImageUrl=s.target?.result,this.detectMedicinesFromImage(),this.extractTextFromImage()},o.readAsDataURL(r)}extractTextFromImage(){return oe(this,null,function*(){if(this.uploadedImageUrl){this.isOcrProcessing=!0,this.ocrExtractedText="",this.ocrExtractedMedicines=[],this.cdr.detectChanges(),console.log("\xF0\u0178\u201D\xA4 Starting OCR extraction from uploaded image...");try{let e=yield this.ocrService.extractMedicineDetails(this.uploadedImageUrl);if(console.log("OCR Result:",e),e.success&&e.rawText){this.ocrExtractedText=e.rawText,console.log("\xE2\u0153\u2026 Text extracted successfully:",this.ocrExtractedText.substring(0,100));try{let n=yield this.llmExtractionService.extractMedicineDetails(e.rawText);n&&(e.medicineDetails=ge(ge({},e.medicineDetails),n))}catch(n){console.warn("LLM extraction failed:",n)}if(!e.medicineDetails?.name){let n=this.resolveMedicineFromText(e.rawText);n&&(e.medicineDetails=Nt(ge({},e.medicineDetails),{name:n}))}e.medicineDetails&&e.medicineDetails.name?(this.ocrExtractedMedicines=[e.medicineDetails],console.log("\xF0\u0178\u201C\u2039 Extracted medicine details:",e.medicineDetails),this.newMedicine={name:e.medicineDetails.name||"",genericName:e.medicineDetails.genericName||"",strength:e.medicineDetails.strength||"",manufacturer:e.medicineDetails.manufacturer||"",category:"Medicine",quantity:50},confirm(`Found medicine details:

Name: ${e.medicineDetails.name}
Strength: ${e.medicineDetails.strength||"Not detected"}

Click OK to add this medicine, or Cancel to edit manually.`)&&(this.showManualMedicineForm=!0)):console.log("\xE2\u0161\xA0\xEF\xB8\x8F No medicine details extracted, showing raw text only")}else console.warn("\xE2\u0161\xA0\xEF\xB8\x8F OCR extraction unsuccessful:",e.error)}catch(e){console.error("\xE2\x9D\u0152 Error during OCR extraction:",e)}finally{this.isOcrProcessing=!1,this.cdr.detectChanges()}}})}detectMedicinesFromImage(){return oe(this,null,function*(){if(this.uploadedImageUrl){this.isDetecting=!0;try{let e=new Image;e.crossOrigin="anonymous";let n=this.uploadedImageUrl,o=yield new Promise((a,c)=>{let l=setTimeout(()=>{c(new Error("Image loading timeout"))},5e3);e.onload=()=>{clearTimeout(l),a(e)},e.onerror=()=>{clearTimeout(l),c(new Error("Failed to load image"))},e.src=n});console.log("Image loaded, starting advanced detection...");let s=yield this.advancedDetectionService.detectMedicines(o);if(s&&s.objects&&s.objects.length>0?(console.log("Advanced detection found objects:",s.objects),console.log("Extracted medicines:",s.medicines),this.detectedMedicines={imageUrl:n,objects:s.objects,timestamp:new Date,imageWidth:o.width,imageHeight:o.height}):(console.log("Advanced detection found nothing, using fallback..."),this.detectedMedicines=yield this.imageDetectionService.detectMedicines(o)),console.log("Detection complete:",this.detectedMedicines),this.detectedMedicines&&this.detectedMedicines.objects.length===0){let a=yield this.buildDetectionFromOcr(n,o);a&&(console.log("OCR fallback detected medicine:",a),this.detectedMedicines=a)}if(!this.detectedMedicines||!this.detectedMedicines.objects||this.detectedMedicines.objects.length===0){console.warn("No medicines detected in the image. Please try another image."),this.isDetecting=!1,alert(`\xE2\x9D\u0152 No pharmacy items detected in this image.

Please try a different image that contains:
\xE2\u20AC\xA2 Medicine bottles
\xE2\u20AC\xA2 Medication boxes
\xE2\u20AC\xA2 Pill containers
\xE2\u20AC\xA2 Medicine labels/text`);return}this.detectedMedicines.objects.forEach((a,c)=>{this.selectedMedicines[c]=!0}),console.log("Found",this.detectedMedicines.objects.length,"medicines"),this.isDetecting=!1}catch(e){console.error("Error detecting medicines:",e),alert(`Error detecting medicines: ${e instanceof Error?e.message:"Unknown error"}`),this.isDetecting=!1}}})}buildDetectionFromOcr(e,n){return oe(this,null,function*(){try{console.log("Attempting OCR fallback detection...");let r=yield this.ocrService.extractMedicineDetails(e),o=this.resolveMedicineFromText(r?.rawText||"")||r?.medicineDetails?.name?.trim();return!r?.success||!o?(console.warn("OCR fallback did not find a medicine name"),null):{imageUrl:e,objects:[{class:"text",score:.6,bbox:[0,0,n.width||640,n.height||480],x:0,y:0,matchedMedicine:o,confidence:.6}],timestamp:new Date,imageWidth:n.width||640,imageHeight:n.height||480}}catch(r){return console.error("OCR fallback error:",r),null}})}resolveMedicineFromText(e){if(!e)return null;let n=e.toLowerCase(),r=this.medicineService.getMedicines(),o=null,s=0;return r.forEach(a=>{let c=a.name.toLowerCase(),l=a.genericName?.toLowerCase()||"";c&&n.includes(c)&&c.length>s?(o=a.name,s=c.length):l&&n.includes(l)&&l.length>s&&(o=a.name,s=l.length)}),o}addDetectedMedicines(){if(!this.detectedMedicines){alert("\xE2\x9D\u0152 No medicines detected");return}console.log("=== Adding Detected Medicines ==="),console.log("Detected objects:",this.detectedMedicines.objects.length),console.log("Selected indices:",Object.keys(this.selectedMedicines).filter(o=>this.selectedMedicines[o]));let e=this.medicineService.getMedicines(),n=0,r=[];this.detectedMedicines.objects.forEach((o,s)=>{console.log(`Object ${s}:`,{matchedMedicine:o.matchedMedicine,class:o.class,selected:this.selectedMedicines[s]}),this.selectedMedicines[s]&&o.matchedMedicine&&r.push(o.matchedMedicine)}),console.log("Medicines to add:",r),r.forEach(o=>{if(this.products.some(l=>l.name.toLowerCase()===o.toLowerCase())){console.log("Already in products table:",o);return}let a=e.find(l=>l.name.toLowerCase()===o.toLowerCase());a?console.log("\xE2\u201E\xB9\xEF\xB8\x8F Medicine exists in catalog:",o):(a={id:(e.length+1).toString(),name:o,barcode:this.generateBarcode(),genericName:o,manufacturer:"Unknown",strength:"As per standard",category:"Medications",quantity:50},this.medicineService.addMedicine(a),console.log("\xE2\u0153\u2026 Added new medicine to catalog:",o));let c=this.medicineToProduct(a);this.products.push(c),n++,console.log("\xE2\u0153\u2026 Added to products table:",o)}),this.resetImageUpload(),this.pageIndex*this.pageSize>=this.products.length&&(this.pageIndex=0),this.saveProducts(),console.log("=== Summary ==="),console.log("Total products added:",n),n>0?alert(`\xE2\u0153\u2026 Successfully added ${n} medicine(s)!

Now showing ${this.products.length} total products.`):alert("\xE2\u201E\xB9\xEF\xB8\x8F All selected medicines were already in your products list.")}medicineToProduct(e){return{id:parseInt(e.id),name:e.name,category:e.category||"Uncategorized",price:0,quantity:e.quantity||50,expiryDate:this.generateExpiryDate(e.name)}}generateBarcode(){return"890"+Math.random().toString().slice(2,12)}categorizeByObjectType(e){return{bottle:"Syrups & Liquids",box:"Tablets & Capsules",pill:"Pain Relief",tablet:"Medications",cup:"Containers"}[e]||"Medications"}resetImageUpload(){this.uploadedImageUrl=null,this.detectedMedicines=null,this.selectedMedicines={},this.imageInput&&(this.imageInput.nativeElement.value="")}startCamera(){return oe(this,null,function*(){try{this.cameraStream=yield navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1280},height:{ideal:720}},audio:!1}),this.cameraActive=!0,setTimeout(()=>{this.cameraVideoRef&&(this.cameraVideoRef.nativeElement.srcObject=this.cameraStream,this.cameraVideoRef.nativeElement.play().catch(e=>{console.error("Error playing video:",e)}))},100)}catch(e){console.error("Error accessing camera:",e),alert(`Camera error: ${e.message||"Unable to access camera"}`)}})}stopCamera(){this.cameraStream&&(this.cameraStream.getTracks().forEach(e=>e.stop()),this.cameraStream=null),this.cameraActive=!1}capturePhoto(){if(!this.cameraVideoRef||!this.cameraActive)return;let e=this.cameraVideoRef.nativeElement,n=this.captureCanvasRef.nativeElement,r=n.getContext("2d");if(!r){console.error("Failed to get canvas context");return}console.log("Video dimensions:",e.videoWidth,"x",e.videoHeight),n.width=e.videoWidth||640,n.height=e.videoHeight||480,r.drawImage(e,0,0,n.width,n.height);let o=r.getImageData(0,0,1,1).data;console.log("Canvas pixel data (first pixel):",o),n.toBlob(s=>{if(s){console.log("Blob size:",s.size,"bytes");let a=new FileReader;a.onload=c=>{this.uploadedImageUrl=c.target?.result,console.log("Image URL created, starting detection..."),this.showCamera=!1,this.detectMedicinesFromImage(),this.extractTextFromImage()},a.readAsDataURL(s)}else console.error("Failed to create blob from canvas")},"image/jpeg",.9)}onVideoLoaded(){console.log("Video stream loaded")}toggleCameraView(){this.showCamera=!this.showCamera,this.showCamera||this.stopCamera()}onEditProduct(e){console.log("Edit product:",e)}onDeleteProduct(e){this.products=this.products.filter(n=>n.id!==e),this.pageIndex*this.pageSize>=this.products.length&&(this.pageIndex=Math.max(0,Math.floor((this.products.length-1)/this.pageSize))),this.saveProducts()}loadCatalogMedicines(){this.catalogMedicines=this.medicineService.getMedicines()}onCatalogFileSelected(e){let n=e.target,r=n.files?.[0];if(!r)return;this.catalogImportError=null,this.catalogImportSummary=null;let o=new FileReader;o.onload=()=>{let s=String(o.result||"");this.importCatalogJson(s),n.value=""},o.onerror=()=>{this.catalogImportError="Failed to read file."},o.readAsText(r)}importCatalogJson(e){try{let n=JSON.parse(e),r=Array.isArray(n)?n:n?.medicines;if(!Array.isArray(r)){this.catalogImportError="Invalid JSON format. Expected an array or { medicines: [] }.";return}let o=r.map(a=>({id:String(a.id||""),name:String(a.name||"").trim(),barcode:String(a.barcode||"").trim(),genericName:a.genericName?String(a.genericName).trim():"",manufacturer:a.manufacturer?String(a.manufacturer).trim():"",strength:a.strength?String(a.strength).trim():"",category:a.category?String(a.category).trim():"",quantity:typeof a.quantity=="number"?a.quantity:void 0})),s=this.medicineService.importMedicines(o);this.loadCatalogMedicines(),this.catalogImportSummary=`Imported ${s.total}. Added ${s.added}, updated ${s.updated}, skipped ${s.skipped}.`}catch(n){this.catalogImportError="Invalid JSON. Please check the file format.",console.warn("Catalog import failed:",n)}}loadCatalogToProducts(){let e=this.medicineService.getMedicines();if(!e.length){this.catalogImportError="Catalog is empty. Import a JSON file first.";return}let n=0,r=0,o=new Set(this.products.map(a=>a.name.toLowerCase())),s=this.products.reduce((a,c)=>Math.max(a,c.id),0)+1;e.forEach(a=>{let c=(a.name||"").trim();if(!c){r++;return}let l=c.toLowerCase();if(o.has(l)){r++;return}let d=Number(a.id),u=a.expiryDate?new Date(a.expiryDate):null;this.products.push({id:Number.isFinite(d)?d:s++,name:c,category:a.category||"Uncategorized",price:0,quantity:a.quantity??0,expiryDate:u?u.toISOString().slice(0,10):this.generateExpiryDate(c)}),o.add(l),n++}),this.catalogImportSummary=`Loaded catalog into products. Added ${n}, skipped ${r}.`,this.pageIndex*this.pageSize>=this.products.length&&(this.pageIndex=0),this.ensureExpiryDates(),this.saveProducts()}editMedicineName(e){this.editingIndex=e,this.detectedMedicines&&(this.editingMedicineName=this.detectedMedicines.objects[e].matchedMedicine||this.detectedMedicines.objects[e].class)}confirmEditMedicine(){if(this.editingIndex!==null&&this.detectedMedicines&&this.editingMedicineName.trim()){let e=this.editingIndex;this.detectedMedicines.objects[e].matchedMedicine=this.editingMedicineName.trim(),console.log("Medicine updated:",this.detectedMedicines.objects[e]),this.editingIndex=null,this.editingMedicineName=""}}cancelEditMedicine(){this.editingIndex=null,this.editingMedicineName=""}selectFromCatalog(e){this.selectingIndex=e}selectMedicineFromCatalog(e,n){this.detectedMedicines&&(this.detectedMedicines.objects[e].matchedMedicine=n,this.selectingIndex=null,console.log(`Selected ${n} for object ${e}`))}cancelSelectMedicine(){this.selectingIndex=null}startBarcodeScanner(){return oe(this,null,function*(){console.log("Opening barcode scanner..."),this.showBarcodeScanner=!0,this.isBarcodeScanning=!0,this.scannedBarcode=null,this.scannedMedicine=null,this.manualBarcodeInput="",this.barcodeScannerError=null,this.cameraPermissionDenied=!1,this.cameraInitialized=!1,this.cdr.detectChanges(),this.ngZone.runOutsideAngular(()=>{setTimeout(()=>{this.ngZone.run(()=>oe(this,null,function*(){try{let e=this.barcodeScannerRef?.nativeElement;e?(console.log("Video element found, starting camera..."),this.barcodeScannerError=null,yield this.barcodeScannerService.startScanning(e),console.log("Camera started successfully"),this.isBarcodeScanning=!1,this.cameraInitialized=!0,this.cdr.detectChanges()):(console.warn("Video element not found"),this.isBarcodeScanning=!1,this.barcodeScannerError="\xE2\x9D\u0152 Camera element not found. Please try again.",this.cdr.detectChanges())}catch(e){console.error("Error starting camera:",e),this.isBarcodeScanning=!1;let n=e instanceof Error?e.message:"Unknown error";n.includes("NotAllowedError")||n.includes("permission")||n.includes("denied")?(this.cameraPermissionDenied=!0,this.barcodeScannerError="\xE2\x9D\u0152 Camera permission denied. Please allow camera access in browser settings."):n.includes("NotFoundError")||n.includes("device")?this.barcodeScannerError="\xE2\x9D\u0152 No camera device found. Please use manual barcode input below.":this.barcodeScannerError=`\xE2\x9D\u0152 Camera error: ${n}. Use manual input below.`,this.cdr.detectChanges()}}))},200)})})}scanManualBarcode(){return oe(this,null,function*(){if(!this.manualBarcodeInput.trim()){this.barcodeScannerError="Please enter a barcode number";return}console.log("Manual barcode entered:",this.manualBarcodeInput),this.scannedBarcode=this.manualBarcodeInput,this.barcodeScannerError=null,this.isBarcodeLookup=!0,this.scannedMedicine=null,this.cdr.detectChanges();try{this.scannedMedicine=yield this.barcodeScannerService.lookupMedicine(this.scannedBarcode||"")}catch(e){console.error("Barcode lookup failed:",e),this.barcodeScannerError="Barcode lookup failed. Please try again or add manually."}finally{this.isBarcodeLookup=!1}this.scannedMedicine?.name?.includes("Medicine (Barcode:")?this.barcodeScannerError="Barcode not found in database. You can add it manually.":this.barcodeScannerError=null,console.log("Looked up medicine:",this.scannedMedicine),this.cdr.detectChanges()})}stopBarcodeScanner(){console.log("Stopping barcode scanner..."),this.barcodeScannerService.stopScanning(),this.barcodeStream&&(this.barcodeStream.getTracks().forEach(e=>e.stop()),this.barcodeStream=null),this.showBarcodeScanner=!1,this.isBarcodeScanning=!1,this.barcodeScannerError=null}addScannedMedicine(){if(!this.scannedMedicine){alert("No medicine scanned. Please scan a barcode first.");return}let e=this.medicineService.getMedicines();if(e.some(r=>r.name.toLowerCase()===this.scannedMedicine.name.toLowerCase()))alert(`\xE2\u0153\u2026 "${this.scannedMedicine.name}" already exists in catalog`);else{let r={id:(e.length+1).toString(),name:this.scannedMedicine.name,barcode:this.scannedBarcode||"",genericName:this.scannedMedicine.name,manufacturer:this.scannedMedicine.manufacturer||"Unknown",strength:this.scannedMedicine.strength||"Standard",category:"Medicine",quantity:50};this.medicineService.addMedicine(r),this.catalogMedicines.push(r);let o=this.medicineToProduct(r);this.products.push(o),this.pageIndex*this.pageSize>=this.products.length&&(this.pageIndex=0),this.ensureExpiryDates(),this.saveProducts(),console.log("Added new medicine:",r),alert(`\xE2\u0153\u2026 "${this.scannedMedicine.name}" added to catalog successfully!`)}this.barcodeScannerService.resetBarcode(),this.stopBarcodeScanner(),this.scannedMedicine=null,this.scannedBarcode=null,this.manualBarcodeInput=""}cancelBarcodeScanning(){this.stopBarcodeScanner(),this.scannedBarcode=null,this.scannedMedicine=null,this.manualBarcodeInput=""}openManualMedicineForm(){this.showManualMedicineForm=!0,this.newMedicine={name:"",genericName:"",strength:"",manufacturer:"",category:"Medicine",quantity:50}}saveManualMedicine(){if(!this.newMedicine.name.trim()){alert("\xE2\u0161\xA0\xEF\xB8\x8F Please enter medicine name");return}let e=this.medicineService.getMedicines();if(e.some(s=>s.name.toLowerCase()===this.newMedicine.name.toLowerCase())){alert(`\xE2\u0153\u2026 "${this.newMedicine.name}" already exists in catalog`),this.showManualMedicineForm=!1;return}let r={id:(e.length+1).toString(),name:this.newMedicine.name.trim(),barcode:"",genericName:this.newMedicine.genericName.trim()||this.newMedicine.name.trim(),manufacturer:this.newMedicine.manufacturer.trim()||"Unknown",strength:this.newMedicine.strength.trim()||"Standard",category:this.newMedicine.category,quantity:this.newMedicine.quantity};this.medicineService.addMedicine(r),this.catalogMedicines.push(r);let o=this.medicineToProduct(r);this.products.push(o),this.pageIndex*this.pageSize>=this.products.length&&(this.pageIndex=0),this.ensureExpiryDates(),this.saveProducts(),console.log("Added new medicine manually:",r),alert(`\xE2\u0153\u2026 "${r.name}" added to catalog successfully!`),this.showManualMedicineForm=!1}cancelManualMedicine(){this.showManualMedicineForm=!1}static{this.\u0275fac=function(n){return new(n||i)(F(CM),F(iX),F(nX),F(rX),F(oX),F(SM),F(Ne),F(ci))}}static{this.\u0275cmp=rt({type:i,selectors:[["app-product-list"]],viewQuery:function(n,r){if(n&1&&(Lt(Tye,5),Lt(Iye,5),Lt(Dye,5),Lt(kye,5)),n&2){let o;Be(o=Ve())&&(r.imageInput=o.first),Be(o=Ve())&&(r.cameraVideoRef=o.first),Be(o=Ve())&&(r.captureCanvasRef=o.first),Be(o=Ve())&&(r.barcodeScannerRef=o.first)}},decls:73,vars:22,consts:[["captureCanvas",""],["imageInput",""],["cameraVideo",""],["barcodeScanner",""],[1,"product-list-container"],[1,"header-section"],[1,"model-status"],[1,"ocr-status"],["title","OCR for text extraction from medicine images"],[1,"tool-section"],[1,"debug-console"],[1,"console-header"],[1,"console-controls"],["mat-icon-button","","title","Clear logs",3,"click"],[1,"console-output"],["class","log-line",3,"ngClass",4,"ngFor","ngForOf"],["class","log-empty",4,"ngIf"],[1,"action-buttons-row"],[1,"btn-add",3,"click"],[1,"btn-add",2,"background-color","#ff9800",3,"click"],[1,"catalog-import-section"],["type","file","accept",".json,application/json",3,"change"],[1,"catalog-import-actions"],["mat-raised-button","","color","primary",3,"click"],[1,"catalog-import-hint"],["class","barcode-status-success",4,"ngIf"],["class","barcode-status-error",4,"ngIf"],["class","expiry-alerts",4,"ngIf"],["class","image-upload-section",4,"ngIf"],["class","barcode-scanner-section",4,"ngIf"],["hidden",""],["class","barcode-input-section",4,"ngIf"],["class","products-table",4,"ngIf"],[3,"length","pageIndex","pageSize","pageSizeOptions","page",4,"ngIf"],["class","no-products",4,"ngIf"],["class","manual-medicine-overlay",4,"ngIf"],[1,"log-line",3,"ngClass"],[1,"log-empty"],[1,"barcode-status-success"],[1,"barcode-status-error"],[1,"expiry-alerts"],[1,"expiry-header"],[1,"expiry-grid"],[1,"expiry-card","expiry-card-expired"],["class","expiry-empty",4,"ngIf"],["class","expiry-row",4,"ngFor","ngForOf"],[1,"expiry-card","expiry-card-soon"],[1,"expiry-empty"],[1,"expiry-row"],[1,"expiry-tag"],[1,"expiry-action"],[1,"image-upload-section"],[1,"upload-area"],["type","file","accept","image/*","hidden","",3,"change"],[1,"upload-controls"],["mat-raised-button","",3,"click"],["class","camera-section",4,"ngIf"],["class","image-preview",4,"ngIf"],["class","ocr-processing",4,"ngIf"],["class","ocr-results",4,"ngIf"],["class","detection-results",4,"ngIf"],[1,"camera-section"],[1,"camera-controls"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-raised-button","","color","warn",3,"click","disabled"],["mat-raised-button","","color","accent",3,"click","disabled"],["class","camera-container",4,"ngIf"],[1,"camera-container"],["autoplay","","muted","","playsinline","",1,"camera-video",3,"loadedmetadata"],[1,"camera-hint"],[1,"image-preview"],["alt","Selected pharmacy image",3,"src"],[1,"ocr-processing"],["diameter","40"],[1,"ocr-results"],[1,"extracted-text-box"],[1,"ocr-hint"],[1,"detection-results"],[1,"detection-hint"],[1,"medicines-list"],["class","medicine-item",4,"ngFor","ngForOf"],["class","dialog-overlay",4,"ngIf"],["class","edit-medicine-dialog",4,"ngIf"],["class","catalog-selection-dialog",4,"ngIf"],[1,"action-buttons"],["mat-button","",3,"click"],[1,"medicine-item"],[3,"ngModelChange","ngModel"],[1,"medicine-info"],[1,"medicine-name"],[1,"object-type"],[1,"medicine-actions"],["mat-icon-button","","title","Edit medicine name",3,"click"],["mat-icon-button","","title","Select from catalog",3,"click"],[1,"confidence"],[1,"dialog-overlay"],[1,"edit-medicine-dialog"],[1,"edit-controls"],["appearance","outline"],["matInput","","placeholder","Enter medicine name",3,"ngModelChange","ngModel"],[1,"edit-buttons"],[1,"catalog-selection-dialog"],[1,"catalog-list"],["mat-raised-button","","class","catalog-item",3,"click",4,"ngFor","ngForOf"],[1,"catalog-close-btn"],["mat-raised-button","",1,"catalog-item",3,"click"],[1,"barcode-scanner-section"],[1,"barcode-instructions"],["class","barcode-status-info",4,"ngIf"],["class","barcode-container",4,"ngIf"],[1,"barcode-input-section","barcode-primary"],[1,"barcode-info"],[1,"barcode-input-group"],["appearance","outline",1,"barcode-input-field"],["matInput","","placeholder","e.g., 5012254500012","autofocus","",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"example-barcodes"],["class","scanned-medicine-info",4,"ngIf"],[1,"barcode-close"],[1,"barcode-status-info"],["diameter","30"],[1,"barcode-container"],["autoplay","","muted","","playsinline","",1,"barcode-video"],[1,"barcode-hint"],["class","camera-loading-overlay",4,"ngIf"],[1,"camera-loading-overlay"],[1,"scanned-medicine-info"],[1,"medicine-details"],[1,"barcode-actions"],[1,"barcode-input-section"],["matInput","","placeholder","Search by name or category",3,"ngModelChange","ngModel"],[1,"products-table"],[4,"ngFor","ngForOf"],["class","expiry-pill",3,"ngClass",4,"ngIf"],[1,"btn-edit",3,"click"],[1,"btn-delete",3,"click"],[1,"expiry-pill",3,"ngClass"],[3,"page","length","pageIndex","pageSize","pageSizeOptions"],[1,"no-products"],[1,"manual-medicine-overlay"],[1,"manual-medicine-dialog"],[1,"form-group"],["appearance","outline",1,"full-width"],["matInput","","placeholder","e.g., Paracetamol",3,"ngModelChange","ngModel"],["matInput","","placeholder","e.g., Acetaminophen",3,"ngModelChange","ngModel"],[1,"form-row"],["appearance","outline",1,"half-width"],["matInput","","placeholder","e.g., 500mg",3,"ngModelChange","ngModel"],["matInput","","placeholder","e.g., Generic Inc.",3,"ngModelChange","ngModel"],["matInput","","placeholder","e.g., Medicine",3,"ngModelChange","ngModel"],["matInput","","type","number","placeholder","50",3,"ngModelChange","ngModel"],[1,"dialog-actions"]],template:function(n,r){if(n&1){let o=ot();b(0,"div",4)(1,"div",5)(2,"h2"),M(3,"Pharmacy Products"),v(),b(4,"div",6)(5,"mat-icon"),M(6),v(),b(7,"span"),M(8),v()(),b(9,"div",7)(10,"mat-icon"),M(11),v(),b(12,"span",8),M(13),v()()(),b(14,"details",9)(15,"summary"),M(16,"Debug Console"),v(),b(17,"div",10)(18,"div",11)(19,"h4"),M(20,"Debug Console"),v(),b(21,"div",12)(22,"button",13),ne("click",function(){return Q(o),J(r.clearConsole())}),b(23,"mat-icon"),M(24,"clear_all"),v()()()(),b(25,"div",14),ve(26,Aye,2,2,"div",15)(27,Pye,2,0,"div",16),v()()(),b(28,"div",17)(29,"button",18),ne("click",function(){return Q(o),J(r.syncFromVisualMapper())}),b(30,"mat-icon"),M(31,"sync"),v(),M(32," Sync from Visual Mapper "),v(),b(33,"button",18),ne("click",function(){return Q(o),J(r.onAddProduct())}),b(34,"mat-icon"),M(35,"add_photo_alternate"),v(),M(36," Add Medicines by Image "),v(),b(37,"button",18),ne("click",function(){return Q(o),J(r.startBarcodeScanner())}),b(38,"mat-icon"),M(39,"qr_code_2"),v(),M(40," Scan Barcode "),v(),b(41,"button",19),ne("click",function(){return Q(o),J(r.openManualMedicineForm())}),b(42,"mat-icon"),M(43,"add_circle"),v(),M(44," Add New Medicine "),v()(),b(45,"details",9)(46,"summary"),M(47,"Offline Catalog Import (JSON)"),v(),b(48,"div",20)(49,"p"),M(50,"Load your local medicine database into this browser."),v(),b(51,"input",21),ne("change",function(a){return Q(o),J(r.onCatalogFileSelected(a))}),v(),b(52,"div",22)(53,"button",23),ne("click",function(){return Q(o),J(r.loadCatalogToProducts())}),b(54,"mat-icon"),M(55,"playlist_add"),v(),M(56," Load Catalog into Products "),v()(),b(57,"p",24),M(58," Example: "),b(59,"code"),M(60,'[{"name":"Paracetamol","barcode":"8901234567890","strength":"500mg","manufacturer":"Generic Pharma","category":"Pain Relief","quantity":50}]'),v()(),ve(61,Oye,2,1,"div",25)(62,Nye,2,1,"div",26),v()(),ve(63,Vye,18,5,"div",27)(64,Kye,22,6,"div",28)(65,oxe,67,9,"div",29),Fe(66,"canvas",30,0),ve(68,sxe,5,1,"div",31)(69,lxe,19,1,"table",32)(70,dxe,1,4,"mat-paginator",33)(71,uxe,3,0,"div",34)(72,hxe,41,6,"div",35),v()}n&2&&(P(4),qe("ready",r.modelReady)("error",!r.modelReady&&r.modelStatus.includes("Failed")),P(2),ft(r.modelReady?"check_circle":"autorenew"),P(2),ft(r.modelStatus),P(),qe("ready",r.ocrAvailable),P(2),ft(r.ocrAvailable?"check_circle":"hourglass_empty"),P(2),ft(r.ocrAvailable?"\u2705 OCR Ready":"\u23F3 OCR Loading..."),P(13),q("ngForOf",r.consoleLogs),P(),q("ngIf",r.consoleLogs.length===0),P(34),q("ngIf",r.catalogImportSummary),P(),q("ngIf",r.catalogImportError),P(),q("ngIf",r.products.length>0),P(),q("ngIf",r.showImageUpload),P(),q("ngIf",r.showBarcodeScanner),P(3),q("ngIf",r.products.length>0),P(),q("ngIf",r.products.length>0),P(),q("ngIf",r.products.length>0),P(),q("ngIf",r.products.length===0),P(),q("ngIf",r.showManualMedicineForm))},dependencies:[Dm,Ya,As,Ps,sa,Za,Gc,pc,Ld,Ud,Vd,Wp,ud,CX,DM,WF,Iz],styles:[".product-list-container[_ngcontent-%COMP%]{padding:20px;position:relative}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;color:#2c3e50}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .model-status[_ngcontent-%COMP%], .product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .ocr-status[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 12px;background-color:#fff3cd;border:1px solid #ffc107;border-radius:4px;color:#856404;font-weight:500}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .model-status[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .ocr-status[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;animation:_ngcontent-%COMP%_spin 2s linear infinite}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .model-status.ready[_ngcontent-%COMP%], .product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .ocr-status.ready[_ngcontent-%COMP%]{background-color:#d4edda;border-color:#28a745;color:#155724}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .model-status.ready[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .ocr-status.ready[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{animation:none}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .model-status.error[_ngcontent-%COMP%], .product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .ocr-status.error[_ngcontent-%COMP%]{background-color:#f8d7da;border-color:#f5c6cb;color:#721c24}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .model-status.error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .ocr-status.error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{animation:none}.product-list-container[_ngcontent-%COMP%]   .header-section[_ngcontent-%COMP%]   .ocr-status[_ngcontent-%COMP%]{margin-left:10px;background-color:#e3f2fd;border-color:#2196f3;color:#1565c0}.product-list-container[_ngcontent-%COMP%]   .tool-section[_ngcontent-%COMP%]{border:1px solid #e2e8f0;border-radius:8px;background-color:#fff;padding:0;margin-bottom:16px;overflow:hidden}.product-list-container[_ngcontent-%COMP%]   .tool-section[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{list-style:none;cursor:pointer;padding:12px 16px;font-weight:600;color:#0f172a;background-color:#f8fafc;border-bottom:1px solid #e2e8f0;display:flex;align-items:center;justify-content:space-between}.product-list-container[_ngcontent-%COMP%]   .tool-section[_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]::-webkit-details-marker{display:none}.product-list-container[_ngcontent-%COMP%]   .tool-section[open][_ngcontent-%COMP%]   summary[_ngcontent-%COMP%]{background-color:#eef2ff}.product-list-container[_ngcontent-%COMP%]   .tool-section[_ngcontent-%COMP%] > [_ngcontent-%COMP%]:not(summary){padding:12px 16px 16px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]{background-color:#1e1e1e;border:2px solid #ff9800;border-radius:4px;margin-bottom:20px;color:#d4d4d4;font-family:Courier New,monospace;font-size:12px;max-height:300px;display:flex;flex-direction:column}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 15px;background-color:#2d2d2d;border-bottom:1px solid #ff9800}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-header[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;color:#ff9800}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-header[_ngcontent-%COMP%]   .console-controls[_ngcontent-%COMP%]{display:flex;gap:5px}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-header[_ngcontent-%COMP%]   .console-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#ff9800}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-output[_ngcontent-%COMP%]{overflow-y:auto;padding:10px 15px;flex:1;background-color:#1e1e1e}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-output[_ngcontent-%COMP%]   .log-line[_ngcontent-%COMP%]{margin:2px 0;white-space:pre-wrap;word-break:break-all}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-output[_ngcontent-%COMP%]   .log-line.log-error[_ngcontent-%COMP%]{color:#f48771}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-output[_ngcontent-%COMP%]   .log-line.log-warn[_ngcontent-%COMP%]{color:#dcdcaa}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-output[_ngcontent-%COMP%]   .log-line.log-info[_ngcontent-%COMP%]{color:#9cdcfe}.product-list-container[_ngcontent-%COMP%]   .debug-console[_ngcontent-%COMP%]   .console-output[_ngcontent-%COMP%]   .log-empty[_ngcontent-%COMP%]{color:#666;font-style:italic}.product-list-container[_ngcontent-%COMP%]   .action-buttons-row[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px;flex-wrap:wrap}.product-list-container[_ngcontent-%COMP%]   .action-buttons-row[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{padding:10px 20px;background-color:#27ae60;color:#fff;border:none;border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:8px;font-weight:500}.product-list-container[_ngcontent-%COMP%]   .action-buttons-row[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background-color:#229954}.product-list-container[_ngcontent-%COMP%]   .action-buttons-row[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px}.product-list-container[_ngcontent-%COMP%]   .expiry-alerts[_ngcontent-%COMP%]{background:#fff;border-radius:10px;padding:16px;box-shadow:0 10px 24px #0f172a14;margin-bottom:20px}.product-list-container[_ngcontent-%COMP%]   .expiry-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:16px}.product-list-container[_ngcontent-%COMP%]   .expiry-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 6px;color:#1f2937}.product-list-container[_ngcontent-%COMP%]   .expiry-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#6b7280}.product-list-container[_ngcontent-%COMP%]   .expiry-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:12px;margin-top:12px}.product-list-container[_ngcontent-%COMP%]   .expiry-card[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:10px;padding:12px;display:grid;gap:8px}.product-list-container[_ngcontent-%COMP%]   .expiry-card[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#111827}.product-list-container[_ngcontent-%COMP%]   .expiry-card-expired[_ngcontent-%COMP%]{border-color:#fecaca;background:#fff1f2}.product-list-container[_ngcontent-%COMP%]   .expiry-card-soon[_ngcontent-%COMP%]{border-color:#fed7aa;background:#fff7ed}.product-list-container[_ngcontent-%COMP%]   .expiry-row[_ngcontent-%COMP%]{display:grid;gap:4px;font-size:12px;color:#111827}.product-list-container[_ngcontent-%COMP%]   .expiry-tag[_ngcontent-%COMP%]{font-weight:600;color:#b91c1c}.product-list-container[_ngcontent-%COMP%]   .expiry-card-soon[_ngcontent-%COMP%]   .expiry-tag[_ngcontent-%COMP%]{color:#c2410c}.product-list-container[_ngcontent-%COMP%]   .expiry-action[_ngcontent-%COMP%]{font-size:11px;color:#6b7280}.product-list-container[_ngcontent-%COMP%]   .expiry-empty[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.product-list-container[_ngcontent-%COMP%]   .expiry-pill[_ngcontent-%COMP%]{display:inline-flex;align-items:center;padding:2px 8px;border-radius:999px;font-size:11px;margin-left:8px}.product-list-container[_ngcontent-%COMP%]   .expiry-pill.expiry-expired[_ngcontent-%COMP%]{background:#fecaca;color:#b91c1c}.product-list-container[_ngcontent-%COMP%]   .expiry-pill.expiry-soon[_ngcontent-%COMP%]{background:#fed7aa;color:#c2410c}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]{background:linear-gradient(135deg,#f5f5f5,#fafafa);border:2px solid #1976d2;border-radius:8px;padding:25px;margin-bottom:20px;box-shadow:0 2px 8px #0000001a;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#1976d2;margin-top:0;margin-bottom:15px;font-size:1.3rem}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#333;margin-top:15px;margin-bottom:10px;font-size:1rem}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-instructions[_ngcontent-%COMP%]{background-color:#e3f2fd;border-left:4px solid #1976d2;padding:20px;border-radius:6px;margin-bottom:20px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-instructions[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#1565c0;margin-top:0;margin-bottom:12px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{margin:0;padding-left:20px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;color:#333;line-height:1.6}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-instructions[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1565c0}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-status-error[_ngcontent-%COMP%]{background-color:#ffebee;border:1px solid #ef5350;color:#c62828;padding:15px;border-radius:6px;margin-bottom:15px;font-weight:500;display:flex;align-items:center;gap:10px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-status-success[_ngcontent-%COMP%]{background-color:#e8f5e9;border:1px solid #66bb6a;color:#2e7d32;padding:15px;border-radius:6px;margin-bottom:15px;font-weight:500;display:flex;align-items:center;gap:10px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-status-info[_ngcontent-%COMP%]{background-color:#e3f2fd;border:1px solid #42a5f5;color:#1565c0;padding:15px;border-radius:6px;margin-bottom:15px;display:flex;align-items:center;gap:15px;font-weight:500}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-status-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]{background-color:#000;border-radius:6px;overflow:hidden;margin-bottom:20px;position:relative;aspect-ratio:4/3}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]   .barcode-video[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]   .barcode-hint[_ngcontent-%COMP%]{position:absolute;bottom:15px;left:50%;transform:translate(-50%);background-color:#000000b3;color:#fff;padding:8px 15px;border-radius:4px;font-size:.9rem;white-space:nowrap;margin:0}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]   .camera-loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background-color:#000c;z-index:10}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-container[_ngcontent-%COMP%]   .camera-loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#fff;margin-top:15px;font-weight:500}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #ddd;border-radius:6px;padding:20px;margin-bottom:15px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section.barcode-primary[_ngcontent-%COMP%]{border:2px solid #1976d2;background-color:#f8f9fa;box-shadow:0 2px 6px #1976d21a}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .barcode-info[_ngcontent-%COMP%]{margin:0 0 15px;font-size:.9rem;color:#555;padding:12px;background-color:#f0f7ff;border-left:3px solid #1976d2;border-radius:3px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .barcode-input-group[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-end;margin-bottom:15px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .barcode-input-group[_ngcontent-%COMP%]   .barcode-input-field[_ngcontent-%COMP%]{flex:1;min-width:200px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .barcode-input-group[_ngcontent-%COMP%]   .barcode-input-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .barcode-input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px;height:56px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .example-barcodes[_ngcontent-%COMP%]{background-color:#fffbf0;border:1px solid #ffb74d;border-radius:4px;padding:15px;margin-top:10px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .example-barcodes[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 10px;font-weight:500;color:#f57c00}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .example-barcodes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .example-barcodes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:6px;color:#666;font-family:Courier New,monospace;font-size:.9rem}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .example-barcodes[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{background-color:#fff;padding:2px 6px;border-radius:3px;border:1px solid #ddd;color:#d32f2f;font-weight:700}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-input-section[_ngcontent-%COMP%]   .helper-text[_ngcontent-%COMP%]{margin:10px 0 0;font-size:.85rem;color:#666;padding:12px;background-color:#f5f5f5;border-left:3px solid #ff9800;border-radius:3px;line-height:1.5}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanned-medicine-info[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e8f5e9,#f1f8e9);border-left:4px solid #4caf50;border-radius:6px;padding:20px;margin-bottom:15px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanned-medicine-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2e7d32;margin-top:0}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanned-medicine-info[_ngcontent-%COMP%]   .medicine-details[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;padding:15px;margin-bottom:15px;border:1px solid #c8e6c9}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanned-medicine-info[_ngcontent-%COMP%]   .medicine-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:.95rem}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanned-medicine-info[_ngcontent-%COMP%]   .medicine-details[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1565c0}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanned-medicine-info[_ngcontent-%COMP%]   .barcode-actions[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanned-medicine-info[_ngcontent-%COMP%]   .barcode-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;min-width:150px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanning-indicator[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;background-color:#fff;border-radius:6px;margin-bottom:15px}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .scanning-indicator[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:15px;color:#1976d2;font-weight:500}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-close[_ngcontent-%COMP%]{text-align:center;padding-top:10px;border-top:1px solid #ddd}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-close[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#d32f2f}.product-list-container[_ngcontent-%COMP%]   .barcode-scanner-section[_ngcontent-%COMP%]   .barcode-close[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#ffebee}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.product-list-container[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]{padding:10px 20px;background-color:#27ae60;color:#fff;border:none;border-radius:4px;cursor:pointer;margin-bottom:20px;display:flex;align-items:center;gap:8px}.product-list-container[_ngcontent-%COMP%]   .btn-add[_ngcontent-%COMP%]:hover{background-color:#229954}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]{background-color:#f8f9fa;border:2px dashed #1976d2;border-radius:8px;padding:20px;margin-bottom:20px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .upload-area[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .upload-controls[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .upload-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .camera-section[_ngcontent-%COMP%]{margin:20px 0;padding:15px;background-color:#f5f5f5;border-radius:4px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .camera-section[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]{display:flex;gap:10px;flex-wrap:wrap;margin-bottom:15px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .camera-section[_ngcontent-%COMP%]   .camera-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]{margin:15px 0;border:2px solid #1976d2;background:#000;border-radius:4px;overflow:hidden}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .camera-video[_ngcontent-%COMP%]{width:100%;max-height:500px;min-height:300px;background:#000;object-fit:cover}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .camera-section[_ngcontent-%COMP%]   .camera-container[_ngcontent-%COMP%]   .camera-hint[_ngcontent-%COMP%]{padding:10px;margin:0;background-color:#333;color:#fff;font-size:12px;text-align:center}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]{text-align:center;margin:20px 0;padding:15px;background-color:#f9f9f9;border-radius:4px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:15px;color:#2c3e50}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .image-preview[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;max-height:400px;border-radius:4px;box-shadow:0 2px 8px #0000001a}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .ocr-processing[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;padding:30px 20px;background-color:#e3f2fd;border:2px solid #2196f3;border-radius:6px;margin:20px 0}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .ocr-processing[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#1565c0;font-weight:500}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .ocr-processing[_ngcontent-%COMP%]   small[_ngcontent-%COMP%]{color:#0d47a1;font-size:.85rem}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .ocr-results[_ngcontent-%COMP%]{background-color:#f1f8e9;border:2px solid #66bb6a;border-radius:6px;padding:20px;margin:20px 0}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .ocr-results[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#2e7d32;margin-top:0;margin-bottom:15px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .ocr-results[_ngcontent-%COMP%]   .extracted-text-box[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #c8e6c9;border-radius:4px;padding:15px;max-height:150px;overflow-y:auto;margin-bottom:12px;font-family:Courier New,monospace;font-size:.9rem;color:#333;white-space:pre-wrap;word-break:break-word}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .ocr-results[_ngcontent-%COMP%]   .extracted-text-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .ocr-results[_ngcontent-%COMP%]   .ocr-hint[_ngcontent-%COMP%]{color:#2e7d32;font-size:.9rem;margin:0}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-loading[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;padding:20px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-loading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;padding:15px;position:relative}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:5px;color:#2c3e50}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .detection-hint[_ngcontent-%COMP%]{font-size:13px;color:#333;background-color:#f0f7ff;border-left:4px solid #1976d2;padding:12px;margin-bottom:15px;border-radius:4px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .detection-hint[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2;display:block;margin-bottom:8px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .detection-hint[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:20px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .detection-hint[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:4px 0;color:#555}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .detection-hint[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50;display:inline;margin:0}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:10px;margin-bottom:15px;max-height:300px;overflow-y:auto;border:1px solid #ddd;padding:10px;border-radius:4px;background-color:#fafafa}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;padding:10px;background-color:#fff;border-radius:4px;border-left:3px solid #1976d2}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]   .medicine-info[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:5px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]   .medicine-info[_ngcontent-%COMP%]   .medicine-name[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]   .medicine-info[_ngcontent-%COMP%]   .medicine-name[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#2c3e50}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]   .medicine-info[_ngcontent-%COMP%]   .medicine-name[_ngcontent-%COMP%]   .object-type[_ngcontent-%COMP%]{display:inline-block;font-size:11px;padding:2px 8px;background-color:#e3f2fd;color:#1976d2;border-radius:12px;font-weight:500}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]   .medicine-info[_ngcontent-%COMP%]   .confidence[_ngcontent-%COMP%]{font-size:12px;color:#7f8c8d}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]   .medicine-actions[_ngcontent-%COMP%]{display:flex;gap:5px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]   .medicine-actions[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]{width:36px;height:36px;line-height:36px;color:#1976d2}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .medicines-list[_ngcontent-%COMP%]   .medicine-item[_ngcontent-%COMP%]   .medicine-actions[_ngcontent-%COMP%]   button[mat-icon-button][_ngcontent-%COMP%]:hover{color:#1565c0;background-color:#f0f0f0}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .edit-medicine-dialog[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:20px;z-index:1000;box-shadow:0 4px 6px #0000001a;min-width:350px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .edit-medicine-dialog[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;color:#2c3e50;font-size:16px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .edit-medicine-dialog[_ngcontent-%COMP%]   .edit-controls[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:15px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .edit-medicine-dialog[_ngcontent-%COMP%]   .edit-controls[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .edit-medicine-dialog[_ngcontent-%COMP%]   .edit-controls[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .edit-medicine-dialog[_ngcontent-%COMP%]   .edit-controls[_ngcontent-%COMP%]   .edit-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:100px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background-color:#fff;border:1px solid #ddd;border-radius:8px;padding:20px;z-index:1000;box-shadow:0 4px 6px #0000001a;min-width:400px;max-height:500px;display:flex;flex-direction:column}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 15px;color:#2c3e50;font-size:16px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   .catalog-list[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:10px;overflow-y:auto;flex:1;padding-right:5px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   .catalog-list[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   .catalog-list[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1;border-radius:3px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   .catalog-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:3px}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   .catalog-list[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   .catalog-list[_ngcontent-%COMP%]   .catalog-item[_ngcontent-%COMP%]{padding:10px;background-color:#f5f5f5;border:1px solid #ddd;border-radius:4px;cursor:pointer;text-align:center;font-size:13px;transition:all .2s ease}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   .catalog-list[_ngcontent-%COMP%]   .catalog-item[_ngcontent-%COMP%]:hover{background-color:#e3f2fd;border-color:#1976d2;color:#1976d2}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .catalog-selection-dialog[_ngcontent-%COMP%]   .catalog-close-btn[_ngcontent-%COMP%]{margin-top:15px;display:flex;justify-content:flex-end}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .dialog-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;z-index:999}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;flex-wrap:wrap}.product-list-container[_ngcontent-%COMP%]   .image-upload-section[_ngcontent-%COMP%]   .detection-results[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.product-list-container[_ngcontent-%COMP%]   .products-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.product-list-container[_ngcontent-%COMP%]   .products-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#34495e;color:#fff}.product-list-container[_ngcontent-%COMP%]   .products-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .product-list-container[_ngcontent-%COMP%]   .products-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.product-list-container[_ngcontent-%COMP%]   .products-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.product-list-container[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%], .product-list-container[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{padding:6px 12px;margin-right:5px;border:none;border-radius:4px;cursor:pointer}.product-list-container[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.product-list-container[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]:hover{background-color:#2980b9}.product-list-container[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]{background-color:#e74c3c;color:#fff}.product-list-container[_ngcontent-%COMP%]   .btn-delete[_ngcontent-%COMP%]:hover{background-color:#c0392b}.product-list-container[_ngcontent-%COMP%]   .no-products[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#7f8c8d}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:1000}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;padding:30px;max-width:500px;width:90%;box-shadow:0 4px 20px #0003;animation:_ngcontent-%COMP%_slideUp .3s ease-out}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#ff9800;margin-top:0;margin-bottom:20px;font-size:1.2rem}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:16px}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-bottom:16px}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{width:100%}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-top:25px;padding-top:20px;border-top:1px solid #eee}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]   .dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]     .mat-form-field{width:100%}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]     .mat-form-field-outline{color:#ddd!important}.product-list-container[_ngcontent-%COMP%]   .manual-medicine-dialog[_ngcontent-%COMP%]     .mat-form-field-outline-thick{color:#ff9800!important}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}"]})}}return i})();function pxe(i,t){i&1&&(b(0,"div",35),M(1," No products available yet. Add products in the Products tab or sync from Visual Mapper. "),v())}function fxe(i,t){if(i&1&&(b(0,"span",39),M(1),v()),i&2){let e=G().$implicit;P(),ft(e.phone)}}function gxe(i,t){if(i&1){let e=ot();b(0,"button",36),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.selectCustomer(r))}),b(1,"span",37),M(2),v(),ve(3,fxe,2,1,"span",38),v()}if(i&2){let e=t.$implicit;P(2),ft(e.name),P(),q("ngIf",e.phone)}}function _xe(i,t){i&1&&(b(0,"div",35),M(1," No customers yet. "),v())}function bxe(i,t){if(i&1){let e=ot();b(0,"div",40)(1,"div")(2,"div",41),M(3),v(),b(4,"div",42),M(5),v()(),b(6,"button",43),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.addToDraft(r))}),M(7,"Add"),v()()}if(i&2){let e=t.$implicit;P(3),ft(e.name),P(2),Dr("",e.category," \xB7 stock ",e.quantity,"")}}function vxe(i,t){i&1&&(b(0,"div",35),M(1," No products found. "),v())}function yxe(i,t){if(i&1){let e=ot();b(0,"div",44)(1,"div",45)(2,"div",46),M(3),v(),b(4,"div",47),M(5),v()(),b(6,"div",48)(7,"button",43),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.updateDraftQty(r,r.qty-1))}),M(8,"-"),v(),b(9,"input",49),ne("ngModelChange",function(r){let o=Q(e).$implicit,s=G();return J(s.updateDraftQty(o,r))}),v(),b(10,"button",43),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.updateDraftQty(r,r.qty+1))}),M(11,"+"),v()(),b(12,"div",50),M(13),ia(14,"number"),v(),b(15,"button",51),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.removeDraftItem(r))}),M(16,"Remove"),v()()}if(i&2){let e=t.$implicit;P(3),ft(e.name),P(2),ft(e.category),P(4),q("ngModel",e.qty),P(4),gt("INR ",Yl(14,4,e.qty*e.price,"1.2-2"),"")}}function xxe(i,t){i&1&&(b(0,"div",35),M(1," No items yet. Add products on the left. "),v())}function wxe(i,t){if(i&1){let e=ot();b(0,"div",40)(1,"div")(2,"div",41),M(3),v(),b(4,"div",42),M(5),v()(),b(6,"button",43),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.addToReceiptDraft(r))}),M(7,"Add"),v()()}if(i&2){let e=t.$implicit;P(3),ft(e.name),P(2),Dr("",e.category," \xB7 stock ",e.quantity,"")}}function Mxe(i,t){i&1&&(b(0,"div",35),M(1," No products found. "),v())}function Cxe(i,t){if(i&1){let e=ot();b(0,"div",44)(1,"div",45)(2,"div",46),M(3),v(),b(4,"div",47),M(5),v()(),b(6,"div",48)(7,"button",43),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.updateReceiptQty(r,r.qty-1))}),M(8,"-"),v(),b(9,"input",49),ne("ngModelChange",function(r){let o=Q(e).$implicit,s=G();return J(s.updateReceiptQty(o,r))}),v(),b(10,"button",43),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.updateReceiptQty(r,r.qty+1))}),M(11,"+"),v()(),b(12,"button",51),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.removeReceiptItem(r))}),M(13,"Remove"),v()()}if(i&2){let e=t.$implicit;P(3),ft(e.name),P(2),ft(e.category),P(4),q("ngModel",e.qty)}}function Sxe(i,t){i&1&&(b(0,"div",35),M(1," No inbound items yet. "),v())}function Exe(i,t){if(i&1&&(b(0,"span"),M(1),v()),i&2){let e=t.$implicit;P(),Dr(" ",e.name," (",e.qty,") ")}}function Txe(i,t){if(i&1&&(b(0,"div",52)(1,"div",53),M(2,"Low stock alerts"),v(),b(3,"div",54),ve(4,Exe,2,2,"span",55),v()()),i&2){let e=G();P(4),q("ngForOf",e.lowStockItems)}}function Ixe(i,t){if(i&1){let e=ot();b(0,"tr")(1,"td"),M(2),v(),b(3,"td"),M(4),v(),b(5,"td"),M(6),ia(7,"number"),v(),b(8,"td")(9,"span",57),M(10),ia(11,"uppercase"),v()(),b(12,"td"),M(13),v(),b(14,"td")(15,"button",58),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.quickReorder(r))}),M(16,"Reorder"),v(),b(17,"button",58),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.onViewOrder(r))}),M(18,"View"),v(),b(19,"button",59),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.onUpdateStatus(r))}),M(20,"Update"),v()()()}if(i&2){let e=t.$implicit,n=G(2);P(2),ft(e.orderNumber),P(2),ft(e.customerName),P(2),gt("INR ",Yl(7,7,e.totalAmount,"1.2-2"),""),P(3),$n("background-color",n.getStatusColor(e.status)),P(),gt(" ",KU(11,10,e.status)," "),P(3),ft(e.orderDate)}}function Dxe(i,t){if(i&1&&(b(0,"table",56)(1,"thead")(2,"tr")(3,"th"),M(4,"Order #"),v(),b(5,"th"),M(6,"Customer"),v(),b(7,"th"),M(8,"Amount"),v(),b(9,"th"),M(10,"Status"),v(),b(11,"th"),M(12,"Order Date"),v(),b(13,"th"),M(14,"Actions"),v()()(),b(15,"tbody"),ve(16,Ixe,21,12,"tr",55),v()()),i&2){let e=G();P(16),q("ngForOf",e.orders)}}function kxe(i,t){i&1&&(b(0,"div",60)(1,"p"),M(2,"No orders found."),v()())}function Axe(i,t){if(i&1&&(b(0,"tr")(1,"td"),M(2),v(),b(3,"td"),M(4),v(),b(5,"td"),M(6),v(),b(7,"td"),M(8),v()()),i&2){let e=t.$implicit;P(2),ft(e.receiptNumber),P(2),ft(e.supplierName),P(2),ft(e.totalUnits),P(2),ft(e.receivedDate)}}function Pxe(i,t){if(i&1&&(b(0,"table",56)(1,"thead")(2,"tr")(3,"th"),M(4,"Receipt #"),v(),b(5,"th"),M(6,"Supplier"),v(),b(7,"th"),M(8,"Units"),v(),b(9,"th"),M(10,"Received Date"),v()()(),b(11,"tbody"),ve(12,Axe,9,4,"tr",55),v()()),i&2){let e=G();P(12),q("ngForOf",e.receipts)}}function Oxe(i,t){i&1&&(b(0,"div",60)(1,"p"),M(2,"No receipts found."),v()())}var RM=(()=>{class i{constructor(){this.orders=[],this.receipts=[],this.products=[],this.customers=[],this.productSearch="",this.inboundProductSearch="",this.lowStockItems=[],this.lowStockThreshold=10,this.customerSearch="",this.orderDraft={customerName:"",items:[]},this.customerDraft={name:"",phone:""},this.receiptDraft={supplierName:"",items:[]},this.ordersStorageKey="buildaq_pharmacy_orders",this.receiptsStorageKey="buildaq_pharmacy_receipts",this.productsStorageKey="buildaq_pharmacy_products",this.customersStorageKey="buildaq_pharmacy_customers",this.productsUpdatedHandler=()=>{this.loadProductsFromStorage(),this.refreshLowStockItems()}}ngOnInit(){this.loadOrdersFromStorage(),this.loadReceiptsFromStorage(),this.loadProductsFromStorage(),this.loadCustomersFromStorage(),this.refreshLowStockItems(),window.addEventListener("buildaq-products-updated",this.productsUpdatedHandler)}ngOnDestroy(){window.removeEventListener("buildaq-products-updated",this.productsUpdatedHandler)}loadOrdersFromStorage(){let e=localStorage.getItem(this.ordersStorageKey);if(!e){this.orders=[];return}try{let n=JSON.parse(e);this.orders=n.map(r=>Nt(ge({},r),{applied:r.applied??r.status==="completed"}))}catch(n){console.warn("Failed to parse orders",n),this.orders=[]}}saveOrders(){localStorage.setItem(this.ordersStorageKey,JSON.stringify(this.orders))}loadCustomersFromStorage(){let e=localStorage.getItem(this.customersStorageKey);if(!e){this.customers=[];return}try{let n=JSON.parse(e);this.customers=n.map(r=>({id:Number(r.id),name:String(r.name||"").trim(),phone:r.phone?String(r.phone).trim():""})).filter(r=>r.name)}catch(n){console.warn("Failed to parse customers",n),this.customers=[]}}saveCustomers(){localStorage.setItem(this.customersStorageKey,JSON.stringify(this.customers))}loadReceiptsFromStorage(){let e=localStorage.getItem(this.receiptsStorageKey);if(!e){this.receipts=[];return}try{this.receipts=JSON.parse(e)}catch(n){console.warn("Failed to parse receipts",n),this.receipts=[]}}saveReceipts(){localStorage.setItem(this.receiptsStorageKey,JSON.stringify(this.receipts))}saveProductsToStorage(){localStorage.setItem(this.productsStorageKey,JSON.stringify(this.products)),window.dispatchEvent(new Event("buildaq-products-updated"))}loadProductsFromStorage(){let e=localStorage.getItem(this.productsStorageKey);if(!e){this.products=[],this.refreshLowStockItems();return}try{let n=JSON.parse(e);this.products=n.map(r=>({id:Number(r.id),name:String(r.name||"").trim(),category:String(r.category||"Medicine"),price:Number(r.price??0),quantity:Number(r.quantity??0),expiryDate:String(r.expiryDate||"N/A")})).filter(r=>r.name)}catch(n){console.warn("Failed to parse products",n),this.products=[]}}get filteredProducts(){let e=this.productSearch.trim().toLowerCase();return e?this.products.filter(n=>n.name.toLowerCase().includes(e)||n.category.toLowerCase().includes(e)):this.products}get filteredInboundProducts(){let e=this.inboundProductSearch.trim().toLowerCase();return e?this.products.filter(n=>n.name.toLowerCase().includes(e)||n.category.toLowerCase().includes(e)):this.products}get draftTotal(){return this.orderDraft.items.reduce((e,n)=>e+n.qty*n.price,0)}get filteredCustomers(){let e=this.customerSearch.trim().toLowerCase();return e?this.customers.filter(n=>n.name.toLowerCase().includes(e)||(n.phone||"").toLowerCase().includes(e)):this.customers}get receiptUnits(){return this.receiptDraft.items.reduce((e,n)=>e+n.qty,0)}addToDraft(e){let n=this.orderDraft.items.find(r=>r.productId===e.id);if(n){n.qty+=1;return}this.orderDraft.items.push({productId:e.id,name:e.name,category:e.category,price:e.price??0,qty:1})}updateDraftQty(e,n){let r=Math.max(1,Math.floor(Number(n)||1));e.qty=r}removeDraftItem(e){this.orderDraft.items=this.orderDraft.items.filter(n=>n!==e)}clearDraft(){this.orderDraft={customerName:"",items:[]}}selectCustomer(e){this.orderDraft.customerName=e.name}addCustomer(){let e=this.customerDraft.name.trim();if(!e)return;let n=this.customers.find(s=>s.name.toLowerCase()===e.toLowerCase());if(n){this.orderDraft.customerName=n.name,this.customerDraft={name:"",phone:""};return}let o={id:this.customers.reduce((s,a)=>Math.max(s,a.id),0)+1,name:e,phone:this.customerDraft.phone.trim()};this.customers.unshift(o),this.saveCustomers(),this.orderDraft.customerName=o.name,this.customerDraft={name:"",phone:""}}addToReceiptDraft(e){let n=this.receiptDraft.items.find(r=>r.productId===e.id);if(n){n.qty+=1;return}this.receiptDraft.items.push({productId:e.id,name:e.name,category:e.category,qty:1})}updateReceiptQty(e,n){let r=Math.max(1,Math.floor(Number(n)||1));e.qty=r}removeReceiptItem(e){this.receiptDraft.items=this.receiptDraft.items.filter(n=>n!==e)}clearReceiptDraft(){this.receiptDraft={supplierName:"",items:[]}}getStatusColor(e){switch(e){case"completed":return"#27ae60";case"processing":return"#f39c12";case"pending":return"#3498db";case"cancelled":return"#e74c3c";default:return"#95a5a6"}}createOrder(){let e=this.orderDraft.customerName.trim();if(!e||this.orderDraft.items.length===0)return;if(!this.customers.find(c=>c.name.toLowerCase()===e.toLowerCase())){let c=this.customers.reduce((l,d)=>Math.max(l,d.id),0)+1;this.customers.unshift({id:c,name:e}),this.saveCustomers()}let r=this.orders.reduce((c,l)=>Math.max(c,l.id),0)+1,o=new Date,a=`ORD-${o.toISOString().slice(0,10).replace(/-/g,"")}-${String(r).padStart(3,"0")}`;this.orders.unshift({id:r,orderNumber:a,customerId:r,customerName:e,totalAmount:this.draftTotal,status:"pending",orderDate:o.toISOString().slice(0,10),items:this.orderDraft.items.map(c=>ge({},c)),applied:!1}),this.saveOrders(),this.clearDraft()}quickReorder(e){this.orderDraft={customerName:e.customerName,items:e.items.map(n=>ge({},n))}}receiveStock(){let e=this.receiptDraft.supplierName.trim();if(!e||this.receiptDraft.items.length===0)return;let n=this.receipts.reduce((a,c)=>Math.max(a,c.id),0)+1,r=new Date,s=`REC-${r.toISOString().slice(0,10).replace(/-/g,"")}-${String(n).padStart(3,"0")}`;this.receiptDraft.items.forEach(a=>{let c=this.products.find(l=>l.id===a.productId);c?c.quantity+=a.qty:this.products.push({id:a.productId,name:a.name,category:a.category||"Medicine",price:0,quantity:a.qty,expiryDate:"N/A"})}),this.saveProductsToStorage(),this.applyInboundToLayout(this.receiptDraft.items),this.refreshLowStockItems(),this.receipts.unshift({id:n,receiptNumber:s,supplierName:e,receivedDate:r.toISOString().slice(0,10),items:this.receiptDraft.items.map(a=>ge({},a)),totalUnits:this.receiptUnits}),this.saveReceipts(),this.clearReceiptDraft()}applyInboundToLayout(e){let n="buildaq_pharmacy_layout_v2",r=localStorage.getItem(n);if(r)try{let o=JSON.parse(r),s=!1,a=o.map(c=>{if(c.type!=="box"||!c.medicines)return c;if(c.medicines.length>0&&typeof c.medicines[0]=="string"){let l=c.medicines;return Nt(ge({},c),{medicines:l.map(d=>({name:d,qty:1}))})}return c});e.forEach(c=>{let l=c.qty;if(l<=0)return;let d=c.name.trim().toLowerCase(),u=a.filter(h=>h.type==="box");if(u.forEach(h=>{if(l<=0||!h.medicines)return;let m=h.medicines.find(_=>_.name.toLowerCase()===d);if(!m)return;let p=l;m.qty+=p,l-=p,s=!0}),l>0){let m=u.find(p=>(p.tag||"").toLowerCase()===c.category.toLowerCase())||u[0];if(m){m.medicines||(m.medicines=[]);let p=m.medicines.find(_=>_.name.toLowerCase()===d);p?p.qty+=l:m.medicines.push({name:c.name,qty:l}),s=!0}}}),s&&(localStorage.setItem(n,JSON.stringify(a)),window.dispatchEvent(new Event("buildaq-layout-updated")))}catch(o){console.warn("Failed to apply inbound stock to layout",o)}}onViewOrder(e){console.log("View order:",e)}onUpdateStatus(e){let n=e.status==="pending"?"processing":e.status==="processing"?"completed":e.status==="completed"?"cancelled":"pending";e.status=n,n==="completed"&&!e.applied&&(this.applyOutboundToProducts(e.items),this.applyOutboundToLayout(e.items),e.applied=!0,this.refreshLowStockItems()),this.saveOrders()}applyOutboundToProducts(e){e.forEach(n=>{let r=this.products.find(o=>o.id===n.productId);if(r){r.quantity-=n.qty;return}this.products.push({id:n.productId,name:n.name,category:n.category||"Medicine",price:n.price??0,quantity:-n.qty,expiryDate:"N/A"})}),this.saveProductsToStorage()}applyOutboundToLayout(e){let n="buildaq_pharmacy_layout_v2",r=localStorage.getItem(n);if(r)try{let o=JSON.parse(r),s=!1,a=o.map(l=>{if(l.type!=="box"||!l.medicines)return l;if(l.medicines.length>0&&typeof l.medicines[0]=="string"){let d=l.medicines;return Nt(ge({},l),{medicines:d.map(u=>({name:u,qty:1}))})}return l}),c=a.filter(l=>l.type==="box");e.forEach(l=>{let d=l.qty;if(d<=0)return;let u=l.name.trim().toLowerCase();if(c.forEach(h=>{if(d<=0||!h.medicines)return;let m=h.medicines.find(_=>_.name.toLowerCase()===u);if(!m||m.qty<=0)return;let p=Math.min(m.qty,d);m.qty-=p,d-=p,s=!0}),d>0){let h=c[0];if(h){h.medicines||(h.medicines=[]);let m=h.medicines.find(p=>p.name.toLowerCase()===u);m?m.qty-=d:h.medicines.push({name:l.name,qty:-d}),s=!0}}}),s&&(localStorage.setItem(n,JSON.stringify(a)),window.dispatchEvent(new Event("buildaq-layout-updated")))}catch(o){console.warn("Failed to apply outbound stock to layout",o)}}refreshLowStockItems(){this.lowStockItems=this.products.filter(e=>e.quantity<this.lowStockThreshold).map(e=>({name:e.name,qty:e.quantity}))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=rt({type:i,selectors:[["app-order-management"]],decls:90,vars:31,consts:[[1,"order-management-container"],[1,"order-banner"],[1,"order-layout"],[1,"order-builder"],["class","empty-state",4,"ngIf"],[1,"customer-panel"],[1,"customer-header"],["type","text","placeholder","Search customers",3,"ngModelChange","ngModel"],[1,"customer-list"],["type","button","class","customer-row",3,"click",4,"ngFor","ngForOf"],[1,"customer-add"],["type","text","placeholder","Customer name",3,"ngModelChange","ngModel"],["type","text","placeholder","Phone (optional)",3,"ngModelChange","ngModel"],["type","button",1,"btn-primary",3,"click","disabled"],[1,"builder-fields"],["type","text","placeholder","Enter customer name",3,"ngModelChange","ngModel"],[1,"product-picker"],[1,"picker-header"],["type","text","placeholder","Search products",3,"ngModelChange","ngModel"],[1,"product-list"],["class","product-row",4,"ngFor","ngForOf"],[1,"draft-panel"],[1,"draft-header"],[1,"draft-total"],[1,"draft-list"],["class","draft-row",4,"ngFor","ngForOf"],[1,"draft-actions"],["type","button",1,"btn-secondary",3,"click"],[1,"receipt-panel"],["type","text","placeholder","Enter supplier name",3,"ngModelChange","ngModel"],[1,"order-list"],["class","stock-alert",4,"ngIf"],["class","orders-table",4,"ngIf"],["class","no-orders",4,"ngIf"],[1,"receipts-section"],[1,"empty-state"],["type","button",1,"customer-row",3,"click"],[1,"customer-name"],["class","customer-phone",4,"ngIf"],[1,"customer-phone"],[1,"product-row"],[1,"product-name"],[1,"product-meta"],["type","button",3,"click"],[1,"draft-row"],[1,"draft-info"],[1,"draft-name"],[1,"draft-meta"],[1,"draft-qty"],["type","number","min","1",3,"ngModelChange","ngModel"],[1,"draft-total-line"],["type","button",1,"remove-btn",3,"click"],[1,"stock-alert"],[1,"stock-alert-title"],[1,"stock-alert-items"],[4,"ngFor","ngForOf"],[1,"orders-table"],[1,"status-badge"],[1,"btn-view",3,"click"],[1,"btn-update",3,"click"],[1,"no-orders"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"h2"),M(2,"Order Management"),v(),b(3,"div",1),M(4," Build a customer order from your product list. All data is saved in local storage. "),v(),b(5,"div",2)(6,"section",3)(7,"h3"),M(8,"Create Order"),v(),ve(9,pxe,2,0,"div",4),b(10,"div",5)(11,"div",6)(12,"span"),M(13,"Customer List"),v(),b(14,"input",7),hi("ngModelChange",function(s){return gi(r.customerSearch,s)||(r.customerSearch=s),s}),v()(),b(15,"div",8),ve(16,gxe,4,2,"button",9)(17,_xe,2,0,"div",4),v(),b(18,"div",10)(19,"input",11),hi("ngModelChange",function(s){return gi(r.customerDraft.name,s)||(r.customerDraft.name=s),s}),v(),b(20,"input",12),hi("ngModelChange",function(s){return gi(r.customerDraft.phone,s)||(r.customerDraft.phone=s),s}),v(),b(21,"button",13),ne("click",function(){return r.addCustomer()}),M(22,"Add Customer"),v()()(),b(23,"div",14)(24,"label"),M(25," Customer Name "),b(26,"input",15),hi("ngModelChange",function(s){return gi(r.orderDraft.customerName,s)||(r.orderDraft.customerName=s),s}),v()()(),b(27,"div",16)(28,"div",17)(29,"span"),M(30,"Products"),v(),b(31,"input",18),hi("ngModelChange",function(s){return gi(r.productSearch,s)||(r.productSearch=s),s}),v()(),b(32,"div",19),ve(33,bxe,8,3,"div",20)(34,vxe,2,0,"div",4),v()(),b(35,"div",21)(36,"div",22)(37,"span"),M(38,"Order Items"),v(),b(39,"span",23),M(40),ia(41,"number"),v()(),b(42,"div",24),ve(43,yxe,17,7,"div",25)(44,xxe,2,0,"div",4),v(),b(45,"div",26)(46,"button",27),ne("click",function(){return r.clearDraft()}),M(47,"Clear"),v(),b(48,"button",13),ne("click",function(){return r.createOrder()}),M(49," Create Order "),v()()(),b(50,"div",28)(51,"h3"),M(52,"Receive Stock (Inbound)"),v(),b(53,"div",14)(54,"label"),M(55," Supplier Name "),b(56,"input",29),hi("ngModelChange",function(s){return gi(r.receiptDraft.supplierName,s)||(r.receiptDraft.supplierName=s),s}),v()()(),b(57,"div",16)(58,"div",17)(59,"span"),M(60,"Products"),v(),b(61,"input",18),hi("ngModelChange",function(s){return gi(r.inboundProductSearch,s)||(r.inboundProductSearch=s),s}),v()(),b(62,"div",19),ve(63,wxe,8,3,"div",20)(64,Mxe,2,0,"div",4),v()(),b(65,"div",21)(66,"div",22)(67,"span"),M(68,"Inbound Items"),v(),b(69,"span",23),M(70),v()(),b(71,"div",24),ve(72,Cxe,14,3,"div",25)(73,Sxe,2,0,"div",4),v(),b(74,"div",26)(75,"button",27),ne("click",function(){return r.clearReceiptDraft()}),M(76,"Clear"),v(),b(77,"button",13),ne("click",function(){return r.receiveStock()}),M(78," Receive Stock "),v()()()()(),b(79,"section",30)(80,"h3"),M(81,"Recent Orders"),v(),ve(82,Txe,5,1,"div",31)(83,Dxe,17,1,"table",32)(84,kxe,3,0,"div",33),b(85,"div",34)(86,"h3"),M(87,"Recent Receipts"),v(),ve(88,Pxe,13,1,"table",32)(89,Oxe,3,0,"div",33),v()()()()),n&2&&(P(9),q("ngIf",r.products.length===0),P(5),ui("ngModel",r.customerSearch),P(2),q("ngForOf",r.filteredCustomers),P(),q("ngIf",r.filteredCustomers.length===0),P(2),ui("ngModel",r.customerDraft.name),P(),ui("ngModel",r.customerDraft.phone),P(),q("disabled",!r.customerDraft.name),P(5),ui("ngModel",r.orderDraft.customerName),P(5),ui("ngModel",r.productSearch),P(2),q("ngForOf",r.filteredProducts),P(),q("ngIf",r.filteredProducts.length===0),P(6),gt("Total INR ",Yl(41,28,r.draftTotal,"1.2-2"),""),P(3),q("ngForOf",r.orderDraft.items),P(),q("ngIf",r.orderDraft.items.length===0),P(4),q("disabled",!r.orderDraft.customerName||r.orderDraft.items.length===0),P(8),ui("ngModel",r.receiptDraft.supplierName),P(5),ui("ngModel",r.inboundProductSearch),P(2),q("ngForOf",r.filteredInboundProducts),P(),q("ngIf",r.filteredInboundProducts.length===0),P(6),gt("Units ",r.receiptUnits,""),P(2),q("ngForOf",r.receiptDraft.items),P(),q("ngIf",r.receiptDraft.items.length===0),P(4),q("disabled",!r.receiptDraft.supplierName||r.receiptDraft.items.length===0),P(5),q("ngIf",r.lowStockItems.length>0),P(),q("ngIf",r.orders.length>0),P(),q("ngIf",r.orders.length===0),P(4),q("ngIf",r.receipts.length>0),P(),q("ngIf",r.receipts.length===0))},dependencies:[Ya,As,Ps,sa,Za,Wc,Gc,Ez,Tz],styles:["[_nghost-%COMP%]{display:block}.order-management-container[_ngcontent-%COMP%]{padding:20px;min-height:520px;background:#f8fafc;border-radius:12px}.order-management-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;color:#2c3e50}.order-management-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 12px;color:#1f2937;font-size:18px}.order-management-container[_ngcontent-%COMP%]   .order-banner[_ngcontent-%COMP%]{background:#0f172a;color:#f8fafc;padding:10px 14px;border-radius:10px;font-size:13px;margin-bottom:16px}.order-management-container[_ngcontent-%COMP%]   .order-layout[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(260px,1fr) minmax(280px,1fr);gap:20px}.order-management-container[_ngcontent-%COMP%]   .order-builder[_ngcontent-%COMP%], .order-management-container[_ngcontent-%COMP%]   .order-list[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:16px;box-shadow:0 10px 24px #0f172a14}.order-management-container[_ngcontent-%COMP%]   .builder-fields[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:grid;gap:6px;font-size:13px;color:#1f2937}.order-management-container[_ngcontent-%COMP%]   .builder-fields[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #d1d5db;padding:8px 10px;font-size:14px}.order-management-container[_ngcontent-%COMP%]   .product-picker[_ngcontent-%COMP%]{margin-top:16px;border:1px solid #e5e7eb;border-radius:10px;overflow:hidden}.order-management-container[_ngcontent-%COMP%]   .customer-panel[_ngcontent-%COMP%]{border:1px solid #e5e7eb;border-radius:12px;padding:12px;display:grid;gap:10px;background:#fff}.order-management-container[_ngcontent-%COMP%]   .customer-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:12px;font-weight:600;font-size:13px}.order-management-container[_ngcontent-%COMP%]   .customer-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;max-width:220px;border-radius:8px;border:1px solid #d1d5db;padding:6px 8px;font-size:13px}.order-management-container[_ngcontent-%COMP%]   .customer-list[_ngcontent-%COMP%]{display:grid;gap:8px;max-height:160px;overflow:auto}.order-management-container[_ngcontent-%COMP%]   .customer-row[_ngcontent-%COMP%]{border:1px solid #e5e7eb;background:#f9fafb;border-radius:10px;padding:8px 10px;display:flex;justify-content:space-between;align-items:center;cursor:pointer;text-align:left}.order-management-container[_ngcontent-%COMP%]   .customer-name[_ngcontent-%COMP%]{font-weight:600;font-size:13px}.order-management-container[_ngcontent-%COMP%]   .customer-phone[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.order-management-container[_ngcontent-%COMP%]   .customer-add[_ngcontent-%COMP%]{display:grid;gap:8px}.order-management-container[_ngcontent-%COMP%]   .customer-add[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;border:1px solid #d1d5db;padding:6px 8px;font-size:13px}.order-management-container[_ngcontent-%COMP%]   .picker-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:12px;padding:10px 12px;background:#f8fafc;font-weight:600;font-size:13px}.order-management-container[_ngcontent-%COMP%]   .picker-header[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;max-width:220px;border-radius:8px;border:1px solid #d1d5db;padding:6px 8px;font-size:13px}.order-management-container[_ngcontent-%COMP%]   .product-list[_ngcontent-%COMP%]{max-height:220px;overflow:auto;display:grid;gap:8px;padding:12px}.order-management-container[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;gap:10px;padding:10px 12px;border-radius:10px;background:#f8fafc}.order-management-container[_ngcontent-%COMP%]   .product-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.order-management-container[_ngcontent-%COMP%]   .product-meta[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.order-management-container[_ngcontent-%COMP%]   .product-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;border-radius:8px;background:#2563eb;color:#fff;padding:6px 12px;cursor:pointer}.order-management-container[_ngcontent-%COMP%]   .draft-panel[_ngcontent-%COMP%]{margin-top:16px;border:1px solid #e5e7eb;border-radius:12px;overflow:hidden}.order-management-container[_ngcontent-%COMP%]   .receipt-panel[_ngcontent-%COMP%]{margin-top:20px;border-top:1px dashed #e5e7eb;padding-top:16px}.order-management-container[_ngcontent-%COMP%]   .draft-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;background:#111827;color:#f8fafc;font-weight:600}.order-management-container[_ngcontent-%COMP%]   .draft-total[_ngcontent-%COMP%]{font-size:13px;color:#93c5fd}.order-management-container[_ngcontent-%COMP%]   .draft-list[_ngcontent-%COMP%]{display:grid;gap:8px;padding:12px;max-height:240px;overflow:auto}.order-management-container[_ngcontent-%COMP%]   .draft-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:minmax(140px,1fr) auto auto auto;gap:10px;align-items:center;background:#f9fafb;padding:10px;border-radius:10px}.order-management-container[_ngcontent-%COMP%]   .draft-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.order-management-container[_ngcontent-%COMP%]   .draft-meta[_ngcontent-%COMP%]{font-size:12px;color:#6b7280}.order-management-container[_ngcontent-%COMP%]   .draft-qty[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.order-management-container[_ngcontent-%COMP%]   .draft-qty[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:26px;height:26px;border-radius:6px;border:1px solid #d1d5db;background:#fff;cursor:pointer}.order-management-container[_ngcontent-%COMP%]   .draft-qty[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:50px;text-align:center;border-radius:6px;border:1px solid #d1d5db;padding:4px}.order-management-container[_ngcontent-%COMP%]   .draft-total-line[_ngcontent-%COMP%]{font-weight:600;color:#111827}.order-management-container[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{border:none;background:transparent;color:#dc2626;cursor:pointer}.order-management-container[_ngcontent-%COMP%]   .draft-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding:12px 14px 16px}.order-management-container[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%], .order-management-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{border:none;border-radius:8px;padding:8px 14px;cursor:pointer;font-weight:600}.order-management-container[_ngcontent-%COMP%]   .btn-secondary[_ngcontent-%COMP%]{background:#e5e7eb;color:#111827}.order-management-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]{background:#22c55e;color:#0f172a}.order-management-container[_ngcontent-%COMP%]   .btn-primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.order-management-container[_ngcontent-%COMP%]   .receipts-section[_ngcontent-%COMP%]{margin-top:24px}.order-management-container[_ngcontent-%COMP%]   .stock-alert[_ngcontent-%COMP%]{background:#fff7ed;border:1px solid #fdba74;color:#9a3412;border-radius:10px;padding:10px 12px;font-size:12px;margin-bottom:12px}.order-management-container[_ngcontent-%COMP%]   .stock-alert-title[_ngcontent-%COMP%]{font-weight:700;margin-bottom:6px}.order-management-container[_ngcontent-%COMP%]   .stock-alert-items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.order-management-container[_ngcontent-%COMP%]   .stock-alert-items[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background:#fff;border:1px solid #fed7aa;border-radius:999px;padding:4px 10px}.order-management-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.order-management-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background-color:#34495e;color:#fff}.order-management-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .order-management-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px;text-align:left;border-bottom:1px solid #ddd}.order-management-container[_ngcontent-%COMP%]   .orders-table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.order-management-container[_ngcontent-%COMP%]   .status-badge[_ngcontent-%COMP%]{padding:6px 12px;border-radius:20px;color:#fff;font-size:12px;font-weight:700}.order-management-container[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%], .order-management-container[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]{padding:6px 12px;margin-right:5px;border:none;border-radius:4px;cursor:pointer}.order-management-container[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.order-management-container[_ngcontent-%COMP%]   .btn-view[_ngcontent-%COMP%]:hover{background-color:#2980b9}.order-management-container[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]{background-color:#f39c12;color:#fff}.order-management-container[_ngcontent-%COMP%]   .btn-update[_ngcontent-%COMP%]:hover{background-color:#e67e22}.order-management-container[_ngcontent-%COMP%]   .no-orders[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#7f8c8d}.order-management-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;font-size:12px;color:#6b7280;padding:12px 6px}"]})}}return i})();var AC="182",Jd={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},eu={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},yY=0,TL=1,xY=2;var J0=1,wY=2,wf=3,Dl=0,Ro=1,po=2,xc=0,Ph=1,IL=2,DL=3,kL=4,MY=5,qd=100,CY=101,SY=102,EY=103,TY=104,IY=200,DY=201,kY=202,AY=203,sC=204,aC=205,PY=206,OY=207,NY=208,RY=209,FY=210,LY=211,BY=212,VY=213,UY=214,PC=0,OC=1,NC=2,Oh=3,RC=4,FC=5,LC=6,BC=7,AL=0,zY=1,HY=2,Aa=0,PL=1,OL=2,NL=3,RL=4,FL=5,LL=6,BL=7;var _L=300,tu=301,Uh=302,VC=303,UC=304,eb=306,cC=1e3,fc=1001,lC=1002,Br=1003,jY=1004;var tb=1005;var Yn=1006,zC=1007;var iu=1008;var ts=1009,VL=1010,UL=1011,Mf=1012,HC=1013,Pa=1014,Oa=1015,wc=1016,jC=1017,$C=1018,Cf=1020,zL=35902,HL=35899,jL=1021,$L=1022,Xs=1023,_c=1026,nu=1027,GL=1028,GC=1029,zh=1030,WC=1031;var qC=1033,ib=33776,nb=33777,rb=33778,ob=33779,XC=35840,YC=35841,ZC=35842,KC=35843,QC=36196,JC=37492,eS=37496,tS=37488,iS=37489,nS=37490,rS=37491,oS=37808,sS=37809,aS=37810,cS=37811,lS=37812,dS=37813,uS=37814,hS=37815,mS=37816,pS=37817,fS=37818,gS=37819,_S=37820,bS=37821,vS=36492,yS=36494,xS=36495,wS=36283,MS=36284,CS=36285,SS=36286;var N0=2300,dC=2301,oC=2302,bL=2400,vL=2401,yL=2402;var $Y=3200;var WL=0,GY=1,Ol="",bs="srgb",Nh="srgb-linear",R0="linear",Ki="srgb";var Ah=7680;var xL=519,WY=512,qY=513,XY=514,ES=515,YY=516,ZY=517,TS=518,KY=519,wL=35044;var qL="300 es",Da=2e3,F0=2001;function XL(i){for(let t=i.length-1;t>=0;--t)if(i[t]>=65535)return!0;return!1}function Rxe(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function L0(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function QY(){let i=L0("canvas");return i.style.display="block",i}var XX={},hf=null;function YL(...i){let t="THREE."+i.shift();hf?hf("log",t,...i):console.log(t,...i)}function Ut(...i){let t="THREE."+i.shift();hf?hf("warn",t,...i):console.warn(t,...i)}function jt(...i){let t="THREE."+i.shift();hf?hf("error",t,...i):console.error(t,...i)}function mf(...i){let t=i.join(" ");t in XX||(XX[t]=!0,Ut(...i))}function JY(i,t,e){return new Promise(function(n,r){function o(){switch(i.clientWaitSync(t,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(o,e);break;default:n()}}setTimeout(o,e)})}var bc=class{addEventListener(t,e){this._listeners===void 0&&(this._listeners={});let n=this._listeners;n[t]===void 0&&(n[t]=[]),n[t].indexOf(e)===-1&&n[t].push(e)}hasEventListener(t,e){let n=this._listeners;return n===void 0?!1:n[t]!==void 0&&n[t].indexOf(e)!==-1}removeEventListener(t,e){let n=this._listeners;if(n===void 0)return;let r=n[t];if(r!==void 0){let o=r.indexOf(e);o!==-1&&r.splice(o,1)}}dispatchEvent(t){let e=this._listeners;if(e===void 0)return;let n=e[t.type];if(n!==void 0){t.target=this;let r=n.slice(0);for(let o=0,s=r.length;o<s;o++)r[o].call(this,t);t.target=null}}},uo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],YX=1234567,df=Math.PI/180,pf=180/Math.PI;function Sf(){let i=Math.random()*4294967295|0,t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(uo[i&255]+uo[i>>8&255]+uo[i>>16&255]+uo[i>>24&255]+"-"+uo[t&255]+uo[t>>8&255]+"-"+uo[t>>16&15|64]+uo[t>>24&255]+"-"+uo[e&63|128]+uo[e>>8&255]+"-"+uo[e>>16&255]+uo[e>>24&255]+uo[n&255]+uo[n>>8&255]+uo[n>>16&255]+uo[n>>24&255]).toLowerCase()}function Di(i,t,e){return Math.max(t,Math.min(e,i))}function ZL(i,t){return(i%t+t)%t}function Fxe(i,t,e,n,r){return n+(i-t)*(r-n)/(e-t)}function Lxe(i,t,e){return i!==t?(e-i)/(t-i):0}function O0(i,t,e){return(1-e)*i+e*t}function Bxe(i,t,e,n){return O0(i,t,1-Math.exp(-e*n))}function Vxe(i,t=1){return t-Math.abs(ZL(i,t*2)-t)}function Uxe(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*(3-2*i))}function zxe(i,t,e){return i<=t?0:i>=e?1:(i=(i-t)/(e-t),i*i*i*(i*(i*6-15)+10))}function Hxe(i,t){return i+Math.floor(Math.random()*(t-i+1))}function jxe(i,t){return i+Math.random()*(t-i)}function $xe(i){return i*(.5-Math.random())}function Gxe(i){i!==void 0&&(YX=i);let t=YX+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function Wxe(i){return i*df}function qxe(i){return i*pf}function Xxe(i){return(i&i-1)===0&&i!==0}function Yxe(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function Zxe(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function Kxe(i,t,e,n,r){let o=Math.cos,s=Math.sin,a=o(e/2),c=s(e/2),l=o((t+n)/2),d=s((t+n)/2),u=o((t-n)/2),h=s((t-n)/2),m=o((n-t)/2),p=s((n-t)/2);switch(r){case"XYX":i.set(a*d,c*u,c*h,a*l);break;case"YZY":i.set(c*h,a*d,c*u,a*l);break;case"ZXZ":i.set(c*u,c*h,a*d,a*l);break;case"XZX":i.set(a*d,c*p,c*m,a*l);break;case"YXY":i.set(c*m,a*d,c*p,a*l);break;case"ZYZ":i.set(c*p,c*m,a*d,a*l);break;default:Ut("MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function lf(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Oo(i,t){switch(t.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}var KL={DEG2RAD:df,RAD2DEG:pf,generateUUID:Sf,clamp:Di,euclideanModulo:ZL,mapLinear:Fxe,inverseLerp:Lxe,lerp:O0,damp:Bxe,pingpong:Vxe,smoothstep:Uxe,smootherstep:zxe,randInt:Hxe,randFloat:jxe,randFloatSpread:$xe,seededRandom:Gxe,degToRad:Wxe,radToDeg:qxe,isPowerOfTwo:Xxe,ceilPowerOfTwo:Yxe,floorPowerOfTwo:Zxe,setQuaternionFromProperEuler:Kxe,normalize:Oo,denormalize:lf},Ht=class i{constructor(t=0,e=0){i.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){let e=this.x,n=this.y,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6],this.y=r[1]*e+r[4]*n+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Di(this.x,t.x,e.x),this.y=Di(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Di(this.x,t,e),this.y=Di(this.y,t,e),this}clampLength(t,e){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Di(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let n=this.dot(t)/e;return Math.acos(Di(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){let n=Math.cos(e),r=Math.sin(e),o=this.x-t.x,s=this.y-t.y;return this.x=o*n-s*r+t.x,this.y=o*r+s*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}},Vn=class{constructor(t=0,e=0,n=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=n,this._w=r}static slerpFlat(t,e,n,r,o,s,a){let c=n[r+0],l=n[r+1],d=n[r+2],u=n[r+3],h=o[s+0],m=o[s+1],p=o[s+2],_=o[s+3];if(a<=0){t[e+0]=c,t[e+1]=l,t[e+2]=d,t[e+3]=u;return}if(a>=1){t[e+0]=h,t[e+1]=m,t[e+2]=p,t[e+3]=_;return}if(u!==_||c!==h||l!==m||d!==p){let f=c*h+l*m+d*p+u*_;f<0&&(h=-h,m=-m,p=-p,_=-_,f=-f);let g=1-a;if(f<.9995){let S=Math.acos(f),C=Math.sin(S);g=Math.sin(g*S)/C,a=Math.sin(a*S)/C,c=c*g+h*a,l=l*g+m*a,d=d*g+p*a,u=u*g+_*a}else{c=c*g+h*a,l=l*g+m*a,d=d*g+p*a,u=u*g+_*a;let S=1/Math.sqrt(c*c+l*l+d*d+u*u);c*=S,l*=S,d*=S,u*=S}}t[e]=c,t[e+1]=l,t[e+2]=d,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,r,o,s){let a=n[r],c=n[r+1],l=n[r+2],d=n[r+3],u=o[s],h=o[s+1],m=o[s+2],p=o[s+3];return t[e]=a*p+d*u+c*m-l*h,t[e+1]=c*p+d*h+l*u-a*m,t[e+2]=l*p+d*m+a*h-c*u,t[e+3]=d*p-a*u-c*h-l*m,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){let n=t._x,r=t._y,o=t._z,s=t._order,a=Math.cos,c=Math.sin,l=a(n/2),d=a(r/2),u=a(o/2),h=c(n/2),m=c(r/2),p=c(o/2);switch(s){case"XYZ":this._x=h*d*u+l*m*p,this._y=l*m*u-h*d*p,this._z=l*d*p+h*m*u,this._w=l*d*u-h*m*p;break;case"YXZ":this._x=h*d*u+l*m*p,this._y=l*m*u-h*d*p,this._z=l*d*p-h*m*u,this._w=l*d*u+h*m*p;break;case"ZXY":this._x=h*d*u-l*m*p,this._y=l*m*u+h*d*p,this._z=l*d*p+h*m*u,this._w=l*d*u-h*m*p;break;case"ZYX":this._x=h*d*u-l*m*p,this._y=l*m*u+h*d*p,this._z=l*d*p-h*m*u,this._w=l*d*u+h*m*p;break;case"YZX":this._x=h*d*u+l*m*p,this._y=l*m*u+h*d*p,this._z=l*d*p-h*m*u,this._w=l*d*u-h*m*p;break;case"XZY":this._x=h*d*u-l*m*p,this._y=l*m*u-h*d*p,this._z=l*d*p+h*m*u,this._w=l*d*u+h*m*p;break;default:Ut("Quaternion: .setFromEuler() encountered an unknown order: "+s)}return e===!0&&this._onChangeCallback(),this}setFromAxisAngle(t,e){let n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){let e=t.elements,n=e[0],r=e[4],o=e[8],s=e[1],a=e[5],c=e[9],l=e[2],d=e[6],u=e[10],h=n+a+u;if(h>0){let m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(d-c)*m,this._y=(o-l)*m,this._z=(s-r)*m}else if(n>a&&n>u){let m=2*Math.sqrt(1+n-a-u);this._w=(d-c)/m,this._x=.25*m,this._y=(r+s)/m,this._z=(o+l)/m}else if(a>u){let m=2*Math.sqrt(1+a-n-u);this._w=(o-l)/m,this._x=(r+s)/m,this._y=.25*m,this._z=(c+d)/m}else{let m=2*Math.sqrt(1+u-n-a);this._w=(s-r)/m,this._x=(o+l)/m,this._y=(c+d)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let n=t.dot(e)+1;return n<1e-8?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Di(this.dot(t),-1,1)))}rotateTowards(t,e){let n=this.angleTo(t);if(n===0)return this;let r=Math.min(1,e/n);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){let n=t._x,r=t._y,o=t._z,s=t._w,a=e._x,c=e._y,l=e._z,d=e._w;return this._x=n*d+s*a+r*l-o*c,this._y=r*d+s*c+o*a-n*l,this._z=o*d+s*l+n*c-r*a,this._w=s*d-n*a-r*c-o*l,this._onChangeCallback(),this}slerp(t,e){if(e<=0)return this;if(e>=1)return this.copy(t);let n=t._x,r=t._y,o=t._z,s=t._w,a=this.dot(t);a<0&&(n=-n,r=-r,o=-o,s=-s,a=-a);let c=1-e;if(a<.9995){let l=Math.acos(a),d=Math.sin(l);c=Math.sin(c*l)/d,e=Math.sin(e*l)/d,this._x=this._x*c+n*e,this._y=this._y*c+r*e,this._z=this._z*c+o*e,this._w=this._w*c+s*e,this._onChangeCallback()}else this._x=this._x*c+n*e,this._y=this._y*c+r*e,this._z=this._z*c+o*e,this._w=this._w*c+s*e,this.normalize();return this}slerpQuaternions(t,e,n){return this.copy(t).slerp(e,n)}random(){let t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),o=Math.sqrt(n);return this.set(r*Math.sin(t),r*Math.cos(t),o*Math.sin(e),o*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}},j=class i{constructor(t=0,e=0,n=0){i.prototype.isVector3=!0,this.x=t,this.y=e,this.z=n}set(t,e,n){return n===void 0&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(ZX.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(ZX.setFromAxisAngle(t,e))}applyMatrix3(t){let e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[3]*n+o[6]*r,this.y=o[1]*e+o[4]*n+o[7]*r,this.z=o[2]*e+o[5]*n+o[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){let e=this.x,n=this.y,r=this.z,o=t.elements,s=1/(o[3]*e+o[7]*n+o[11]*r+o[15]);return this.x=(o[0]*e+o[4]*n+o[8]*r+o[12])*s,this.y=(o[1]*e+o[5]*n+o[9]*r+o[13])*s,this.z=(o[2]*e+o[6]*n+o[10]*r+o[14])*s,this}applyQuaternion(t){let e=this.x,n=this.y,r=this.z,o=t.x,s=t.y,a=t.z,c=t.w,l=2*(s*r-a*n),d=2*(a*e-o*r),u=2*(o*n-s*e);return this.x=e+c*l+s*u-a*d,this.y=n+c*d+a*l-o*u,this.z=r+c*u+o*d-s*l,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){let e=this.x,n=this.y,r=this.z,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*r,this.y=o[1]*e+o[5]*n+o[9]*r,this.z=o[2]*e+o[6]*n+o[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Di(this.x,t.x,e.x),this.y=Di(this.y,t.y,e.y),this.z=Di(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Di(this.x,t,e),this.y=Di(this.y,t,e),this.z=Di(this.z,t,e),this}clampLength(t,e){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Di(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){let n=t.x,r=t.y,o=t.z,s=e.x,a=e.y,c=e.z;return this.x=r*c-o*a,this.y=o*s-n*c,this.z=n*a-r*s,this}projectOnVector(t){let e=t.lengthSq();if(e===0)return this.set(0,0,0);let n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return qF.copy(this).projectOnVector(t),this.sub(qF)}reflect(t){return this.sub(qF.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){let e=Math.sqrt(this.lengthSq()*t.lengthSq());if(e===0)return Math.PI/2;let n=this.dot(t)/e;return Math.acos(Di(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){let e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){let r=Math.sin(e)*t;return this.x=r*Math.sin(n),this.y=Math.cos(e)*t,this.z=r*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){let e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,e*4)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,e*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){let t=Math.random()*Math.PI*2,e=Math.random()*2-1,n=Math.sqrt(1-e*e);return this.x=n*Math.cos(t),this.y=e,this.z=n*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}},qF=new j,ZX=new Vn,mi=class i{constructor(t,e,n,r,o,s,a,c,l){i.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],t!==void 0&&this.set(t,e,n,r,o,s,a,c,l)}set(t,e,n,r,o,s,a,c,l){let d=this.elements;return d[0]=t,d[1]=r,d[2]=a,d[3]=e,d[4]=o,d[5]=c,d[6]=n,d[7]=s,d[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){let e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){let e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let n=t.elements,r=e.elements,o=this.elements,s=n[0],a=n[3],c=n[6],l=n[1],d=n[4],u=n[7],h=n[2],m=n[5],p=n[8],_=r[0],f=r[3],g=r[6],S=r[1],C=r[4],E=r[7],N=r[2],R=r[5],B=r[8];return o[0]=s*_+a*S+c*N,o[3]=s*f+a*C+c*R,o[6]=s*g+a*E+c*B,o[1]=l*_+d*S+u*N,o[4]=l*f+d*C+u*R,o[7]=l*g+d*E+u*B,o[2]=h*_+m*S+p*N,o[5]=h*f+m*C+p*R,o[8]=h*g+m*E+p*B,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){let t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],d=t[8];return e*s*d-e*a*l-n*o*d+n*a*c+r*o*l-r*s*c}invert(){let t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],d=t[8],u=d*s-a*l,h=a*c-d*o,m=l*o-s*c,p=e*u+n*h+r*m;if(p===0)return this.set(0,0,0,0,0,0,0,0,0);let _=1/p;return t[0]=u*_,t[1]=(r*l-d*n)*_,t[2]=(a*n-r*s)*_,t[3]=h*_,t[4]=(d*e-r*c)*_,t[5]=(r*o-a*e)*_,t[6]=m*_,t[7]=(n*c-l*e)*_,t[8]=(s*e-n*o)*_,this}transpose(){let t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){let e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,r,o,s,a){let c=Math.cos(o),l=Math.sin(o);return this.set(n*c,n*l,-n*(c*s+l*a)+s+t,-r*l,r*c,-r*(-l*s+c*a)+a+e,0,0,1),this}scale(t,e){return this.premultiply(XF.makeScale(t,e)),this}rotate(t){return this.premultiply(XF.makeRotation(-t)),this}translate(t,e){return this.premultiply(XF.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,n,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){let e=this.elements,n=t.elements;for(let r=0;r<9;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){let n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}clone(){return new this.constructor().fromArray(this.elements)}},XF=new mi,KX=new mi().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),QX=new mi().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Qxe(){let i={enabled:!0,workingColorSpace:Nh,spaces:{},convert:function(r,o,s){return this.enabled===!1||o===s||!o||!s||(this.spaces[o].transfer===Ki&&(r.r=Il(r.r),r.g=Il(r.g),r.b=Il(r.b)),this.spaces[o].primaries!==this.spaces[s].primaries&&(r.applyMatrix3(this.spaces[o].toXYZ),r.applyMatrix3(this.spaces[s].fromXYZ)),this.spaces[s].transfer===Ki&&(r.r=uf(r.r),r.g=uf(r.g),r.b=uf(r.b))),r},workingToColorSpace:function(r,o){return this.convert(r,this.workingColorSpace,o)},colorSpaceToWorking:function(r,o){return this.convert(r,o,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ol?R0:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,o=this.workingColorSpace){return r.fromArray(this.spaces[o].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,o,s){return r.copy(this.spaces[o].toXYZ).multiply(this.spaces[s].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,o){return mf("ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(r,o)},toWorkingColorSpace:function(r,o){return mf("ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(r,o)}},t=[.64,.33,.3,.6,.15,.06],e=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[Nh]:{primaries:t,whitePoint:n,transfer:R0,toXYZ:KX,fromXYZ:QX,luminanceCoefficients:e,workingColorSpaceConfig:{unpackColorSpace:bs},outputColorSpaceConfig:{drawingBufferColorSpace:bs}},[bs]:{primaries:t,whitePoint:n,transfer:Ki,toXYZ:KX,fromXYZ:QX,luminanceCoefficients:e,outputColorSpaceConfig:{drawingBufferColorSpace:bs}}}),i}var Fi=Qxe();function Il(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function uf(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}var Zp,uC=class{static getDataURL(t,e="image/png"){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement>"u")return t.src;let n;if(t instanceof HTMLCanvasElement)n=t;else{Zp===void 0&&(Zp=L0("canvas")),Zp.width=t.width,Zp.height=t.height;let r=Zp.getContext("2d");t instanceof ImageData?r.putImageData(t,0,0):r.drawImage(t,0,0,t.width,t.height),n=Zp}return n.toDataURL(e)}static sRGBToLinear(t){if(typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap){let e=L0("canvas");e.width=t.width,e.height=t.height;let n=e.getContext("2d");n.drawImage(t,0,0,t.width,t.height);let r=n.getImageData(0,0,t.width,t.height),o=r.data;for(let s=0;s<o.length;s++)o[s]=Il(o[s]/255)*255;return n.putImageData(r,0,0),e}else if(t.data){let e=t.data.slice(0);for(let n=0;n<e.length;n++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[n]=Math.floor(Il(e[n]/255)*255):e[n]=Il(e[n]);return{data:e,width:t.width,height:t.height}}else return Ut("ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}},Jxe=0,ff=class{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Jxe++}),this.uuid=Sf(),this.data=t,this.dataReady=!0,this.version=0}getSize(t){let e=this.data;return typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement?t.set(e.videoWidth,e.videoHeight,0):typeof VideoFrame<"u"&&e instanceof VideoFrame?t.set(e.displayHeight,e.displayWidth,0):e!==null?t.set(e.width,e.height,e.depth||0):t.set(0,0,0),t}set needsUpdate(t){t===!0&&this.version++}toJSON(t){let e=t===void 0||typeof t=="string";if(!e&&t.images[this.uuid]!==void 0)return t.images[this.uuid];let n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let o;if(Array.isArray(r)){o=[];for(let s=0,a=r.length;s<a;s++)r[s].isDataTexture?o.push(YF(r[s].image)):o.push(YF(r[s]))}else o=YF(r);n.url=o}return e||(t.images[this.uuid]=n),n}};function YF(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?uC.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(Ut("Texture: Unable to serialize Texture."),{})}var ewe=0,ZF=new j,Mc=(()=>{class i extends bc{constructor(e=i.DEFAULT_IMAGE,n=i.DEFAULT_MAPPING,r=fc,o=fc,s=Yn,a=iu,c=Xs,l=ts,d=i.DEFAULT_ANISOTROPY,u=Ol){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ewe++}),this.uuid=Sf(),this.name="",this.source=new ff(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=r,this.wrapT=o,this.magFilter=s,this.minFilter=a,this.anisotropy=d,this.format=c,this.internalFormat=null,this.type=l,this.offset=new Ht(0,0),this.repeat=new Ht(1,1),this.center=new Ht(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new mi,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(ZF).x}get height(){return this.source.getSize(ZF).y}get depth(){return this.source.getSize(ZF).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(let n in e){let r=e[n];if(r===void 0){Ut(`Texture.setValues(): parameter '${n}' has value of undefined.`);continue}let o=this[n];if(o===void 0){Ut(`Texture.setValues(): property '${n}' does not exist.`);continue}o&&r&&o.isVector2&&r.isVector2||o&&r&&o.isVector3&&r.isVector3||o&&r&&o.isMatrix3&&r.isMatrix3?o.copy(r):this[n]=r}}toJSON(e){let n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];let r={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(r.userData=this.userData),n||(e.textures[this.uuid]=r),r}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==_L)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case cC:e.x=e.x-Math.floor(e.x);break;case fc:e.x=e.x<0?0:1;break;case lC:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case cC:e.y=e.y-Math.floor(e.y);break;case fc:e.y=e.y<0?0:1;break;case lC:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}return i.DEFAULT_IMAGE=null,i.DEFAULT_MAPPING=_L,i.DEFAULT_ANISOTROPY=1,i})(),Un=class i{constructor(t=0,e=0,n=0,r=1){i.prototype.isVector4=!0,this.x=t,this.y=e,this.z=n,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,r){return this.x=t,this.y=e,this.z=n,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){let e=this.x,n=this.y,r=this.z,o=this.w,s=t.elements;return this.x=s[0]*e+s[4]*n+s[8]*r+s[12]*o,this.y=s[1]*e+s[5]*n+s[9]*r+s[13]*o,this.z=s[2]*e+s[6]*n+s[10]*r+s[14]*o,this.w=s[3]*e+s[7]*n+s[11]*r+s[15]*o,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);let e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,r,o,c=t.elements,l=c[0],d=c[4],u=c[8],h=c[1],m=c[5],p=c[9],_=c[2],f=c[6],g=c[10];if(Math.abs(d-h)<.01&&Math.abs(u-_)<.01&&Math.abs(p-f)<.01){if(Math.abs(d+h)<.1&&Math.abs(u+_)<.1&&Math.abs(p+f)<.1&&Math.abs(l+m+g-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;let C=(l+1)/2,E=(m+1)/2,N=(g+1)/2,R=(d+h)/4,B=(u+_)/4,z=(p+f)/4;return C>E&&C>N?C<.01?(n=0,r=.707106781,o=.707106781):(n=Math.sqrt(C),r=R/n,o=B/n):E>N?E<.01?(n=.707106781,r=0,o=.707106781):(r=Math.sqrt(E),n=R/r,o=z/r):N<.01?(n=.707106781,r=.707106781,o=0):(o=Math.sqrt(N),n=B/o,r=z/o),this.set(n,r,o,e),this}let S=Math.sqrt((f-p)*(f-p)+(u-_)*(u-_)+(h-d)*(h-d));return Math.abs(S)<.001&&(S=1),this.x=(f-p)/S,this.y=(u-_)/S,this.z=(h-d)/S,this.w=Math.acos((l+m+g-1)/2),this}setFromMatrixPosition(t){let e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Di(this.x,t.x,e.x),this.y=Di(this.y,t.y,e.y),this.z=Di(this.z,t.z,e.z),this.w=Di(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Di(this.x,t,e),this.y=Di(this.y,t,e),this.z=Di(this.z,t,e),this.w=Di(this.w,t,e),this}clampLength(t,e){let n=this.length();return this.divideScalar(n||1).multiplyScalar(Di(n,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}},hC=class extends bc{constructor(t=1,e=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Yn,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=n.depth,this.scissor=new Un(0,0,t,e),this.scissorTest=!1,this.viewport=new Un(0,0,t,e);let r={width:t,height:e,depth:n.depth},o=new Mc(r);this.textures=[];let s=n.count;for(let a=0;a<s;a++)this.textures[a]=o.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(t={}){let e={minFilter:Yn,generateMipmaps:!1,flipY:!1,internalFormat:null};t.mapping!==void 0&&(e.mapping=t.mapping),t.wrapS!==void 0&&(e.wrapS=t.wrapS),t.wrapT!==void 0&&(e.wrapT=t.wrapT),t.wrapR!==void 0&&(e.wrapR=t.wrapR),t.magFilter!==void 0&&(e.magFilter=t.magFilter),t.minFilter!==void 0&&(e.minFilter=t.minFilter),t.format!==void 0&&(e.format=t.format),t.type!==void 0&&(e.type=t.type),t.anisotropy!==void 0&&(e.anisotropy=t.anisotropy),t.colorSpace!==void 0&&(e.colorSpace=t.colorSpace),t.flipY!==void 0&&(e.flipY=t.flipY),t.generateMipmaps!==void 0&&(e.generateMipmaps=t.generateMipmaps),t.internalFormat!==void 0&&(e.internalFormat=t.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(e)}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),t!==null&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,n=1){if(this.width!==t||this.height!==e||this.depth!==n){this.width=t,this.height=e,this.depth=n;for(let r=0,o=this.textures.length;r<o;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=n,this.textures[r].isData3DTexture!==!0&&(this.textures[r].isArrayTexture=this.textures[r].image.depth>1);this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,n=t.textures.length;e<n;e++){this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;let r=Object.assign({},t.textures[e].image);this.textures[e].source=new ff(r)}return this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}},ys=class extends hC{constructor(t=1,e=1,n={}){super(t,e,n),this.isWebGLRenderTarget=!0}},B0=class extends Mc{constructor(t=null,e=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Br,this.minFilter=Br,this.wrapR=fc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}};var mC=class extends Mc{constructor(t=null,e=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:n,depth:r},this.magFilter=Br,this.minFilter=Br,this.wrapR=fc,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var vc=class{constructor(t=new j(1/0,1/0,1/0),e=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e+=3)this.expandByPoint(Ea.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,n=t.count;e<n;e++)this.expandByPoint(Ea.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){let n=Ea.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);let n=t.geometry;if(n!==void 0){let o=n.getAttribute("position");if(e===!0&&o!==void 0&&t.isInstancedMesh!==!0)for(let s=0,a=o.count;s<a;s++)t.isMesh===!0?t.getVertexPosition(s,Ea):Ea.fromBufferAttribute(o,s),Ea.applyMatrix4(t.matrixWorld),this.expandByPoint(Ea);else t.boundingBox!==void 0?(t.boundingBox===null&&t.computeBoundingBox(),FM.copy(t.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),FM.copy(n.boundingBox)),FM.applyMatrix4(t.matrixWorld),this.union(FM)}let r=t.children;for(let o=0,s=r.length;o<s;o++)this.expandByObject(r[o],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Ea),Ea.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(I0),LM.subVectors(this.max,I0),Kp.subVectors(t.a,I0),Qp.subVectors(t.b,I0),Jp.subVectors(t.c,I0),zd.subVectors(Qp,Kp),Hd.subVectors(Jp,Qp),Th.subVectors(Kp,Jp);let e=[0,-zd.z,zd.y,0,-Hd.z,Hd.y,0,-Th.z,Th.y,zd.z,0,-zd.x,Hd.z,0,-Hd.x,Th.z,0,-Th.x,-zd.y,zd.x,0,-Hd.y,Hd.x,0,-Th.y,Th.x,0];return!KF(e,Kp,Qp,Jp,LM)||(e=[1,0,0,0,1,0,0,0,1],!KF(e,Kp,Qp,Jp,LM))?!1:(BM.crossVectors(zd,Hd),e=[BM.x,BM.y,BM.z],KF(e,Kp,Qp,Jp,LM))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Ea).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=this.getSize(Ea).length()*.5),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(wl[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),wl[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),wl[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),wl[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),wl[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),wl[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),wl[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),wl[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(wl),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(t){return this.min.fromArray(t.min),this.max.fromArray(t.max),this}},wl=[new j,new j,new j,new j,new j,new j,new j,new j],Ea=new j,FM=new vc,Kp=new j,Qp=new j,Jp=new j,zd=new j,Hd=new j,Th=new j,I0=new j,LM=new j,BM=new j,Ih=new j;function KF(i,t,e,n,r){for(let o=0,s=i.length-3;o<=s;o+=3){Ih.fromArray(i,o);let a=r.x*Math.abs(Ih.x)+r.y*Math.abs(Ih.y)+r.z*Math.abs(Ih.z),c=t.dot(Ih),l=e.dot(Ih),d=n.dot(Ih);if(Math.max(-Math.max(c,l,d),Math.min(c,l,d))>a)return!1}return!0}var twe=new vc,D0=new j,QF=new j,Rh=class{constructor(t=new j,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){let n=this.center;e!==void 0?n.copy(e):twe.setFromPoints(t).getCenter(n);let r=0;for(let o=0,s=t.length;o<s;o++)r=Math.max(r,n.distanceToSquared(t[o]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){let e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){let n=this.center.distanceToSquared(t);return e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;D0.subVectors(t,this.center);let e=D0.lengthSq();if(e>this.radius*this.radius){let n=Math.sqrt(e),r=(n-this.radius)*.5;this.center.addScaledVector(D0,r/n),this.radius+=r}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(this.center.equals(t.center)===!0?this.radius=Math.max(this.radius,t.radius):(QF.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(D0.copy(t.center).add(QF)),this.expandByPoint(D0.copy(t.center).sub(QF))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(t){return this.radius=t.radius,this.center.fromArray(t.center),this}},Ml=new j,JF=new j,VM=new j,jd=new j,eL=new j,UM=new j,tL=new j,Xd=class{constructor(t=new j,e=new j(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Ml)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);let n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){let e=Ml.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(Ml.copy(this.origin).addScaledVector(this.direction,e),Ml.distanceToSquared(t))}distanceSqToSegment(t,e,n,r){JF.copy(t).add(e).multiplyScalar(.5),VM.copy(e).sub(t).normalize(),jd.copy(this.origin).sub(JF);let o=t.distanceTo(e)*.5,s=-this.direction.dot(VM),a=jd.dot(this.direction),c=-jd.dot(VM),l=jd.lengthSq(),d=Math.abs(1-s*s),u,h,m,p;if(d>0)if(u=s*c-a,h=s*a-c,p=o*d,u>=0)if(h>=-p)if(h<=p){let _=1/d;u*=_,h*=_,m=u*(u+s*h+2*a)+h*(s*u+h+2*c)+l}else h=o,u=Math.max(0,-(s*h+a)),m=-u*u+h*(h+2*c)+l;else h=-o,u=Math.max(0,-(s*h+a)),m=-u*u+h*(h+2*c)+l;else h<=-p?(u=Math.max(0,-(-s*o+a)),h=u>0?-o:Math.min(Math.max(-o,-c),o),m=-u*u+h*(h+2*c)+l):h<=p?(u=0,h=Math.min(Math.max(-o,-c),o),m=h*(h+2*c)+l):(u=Math.max(0,-(s*o+a)),h=u>0?o:Math.min(Math.max(-o,-c),o),m=-u*u+h*(h+2*c)+l);else h=s>0?-o:o,u=Math.max(0,-(s*h+a)),m=-u*u+h*(h+2*c)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(JF).addScaledVector(VM,h),m}intersectSphere(t,e){Ml.subVectors(t.center,this.origin);let n=Ml.dot(this.direction),r=Ml.dot(Ml)-n*n,o=t.radius*t.radius;if(r>o)return null;let s=Math.sqrt(o-r),a=n-s,c=n+s;return c<0?null:a<0?this.at(c,e):this.at(a,e)}intersectsSphere(t){return t.radius<0?!1:this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){let e=t.normal.dot(this.direction);if(e===0)return t.distanceToPoint(this.origin)===0?0:null;let n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){let n=this.distanceToPlane(t);return n===null?null:this.at(n,e)}intersectsPlane(t){let e=t.distanceToPoint(this.origin);return e===0||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let n,r,o,s,a,c,l=1/this.direction.x,d=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,r=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,r=(t.min.x-h.x)*l),d>=0?(o=(t.min.y-h.y)*d,s=(t.max.y-h.y)*d):(o=(t.max.y-h.y)*d,s=(t.min.y-h.y)*d),n>s||o>r||((o>n||isNaN(n))&&(n=o),(s<r||isNaN(r))&&(r=s),u>=0?(a=(t.min.z-h.z)*u,c=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,c=(t.min.z-h.z)*u),n>c||a>r)||((a>n||n!==n)&&(n=a),(c<r||r!==r)&&(r=c),r<0)?null:this.at(n>=0?n:r,e)}intersectsBox(t){return this.intersectBox(t,Ml)!==null}intersectTriangle(t,e,n,r,o){eL.subVectors(e,t),UM.subVectors(n,t),tL.crossVectors(eL,UM);let s=this.direction.dot(tL),a;if(s>0){if(r)return null;a=1}else if(s<0)a=-1,s=-s;else return null;jd.subVectors(this.origin,t);let c=a*this.direction.dot(UM.crossVectors(jd,UM));if(c<0)return null;let l=a*this.direction.dot(eL.cross(jd));if(l<0||c+l>s)return null;let d=-a*jd.dot(tL);return d<0?null:this.at(d/s,o)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}},vn=class i{constructor(t,e,n,r,o,s,a,c,l,d,u,h,m,p,_,f){i.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],t!==void 0&&this.set(t,e,n,r,o,s,a,c,l,d,u,h,m,p,_,f)}set(t,e,n,r,o,s,a,c,l,d,u,h,m,p,_,f){let g=this.elements;return g[0]=t,g[4]=e,g[8]=n,g[12]=r,g[1]=o,g[5]=s,g[9]=a,g[13]=c,g[2]=l,g[6]=d,g[10]=u,g[14]=h,g[3]=m,g[7]=p,g[11]=_,g[15]=f,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new i().fromArray(this.elements)}copy(t){let e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){let e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){let e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return this.determinant()===0?(t.set(1,0,0),e.set(0,1,0),n.set(0,0,1),this):(t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this)}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){if(t.determinant()===0)return this.identity();let e=this.elements,n=t.elements,r=1/ef.setFromMatrixColumn(t,0).length(),o=1/ef.setFromMatrixColumn(t,1).length(),s=1/ef.setFromMatrixColumn(t,2).length();return e[0]=n[0]*r,e[1]=n[1]*r,e[2]=n[2]*r,e[3]=0,e[4]=n[4]*o,e[5]=n[5]*o,e[6]=n[6]*o,e[7]=0,e[8]=n[8]*s,e[9]=n[9]*s,e[10]=n[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){let e=this.elements,n=t.x,r=t.y,o=t.z,s=Math.cos(n),a=Math.sin(n),c=Math.cos(r),l=Math.sin(r),d=Math.cos(o),u=Math.sin(o);if(t.order==="XYZ"){let h=s*d,m=s*u,p=a*d,_=a*u;e[0]=c*d,e[4]=-c*u,e[8]=l,e[1]=m+p*l,e[5]=h-_*l,e[9]=-a*c,e[2]=_-h*l,e[6]=p+m*l,e[10]=s*c}else if(t.order==="YXZ"){let h=c*d,m=c*u,p=l*d,_=l*u;e[0]=h+_*a,e[4]=p*a-m,e[8]=s*l,e[1]=s*u,e[5]=s*d,e[9]=-a,e[2]=m*a-p,e[6]=_+h*a,e[10]=s*c}else if(t.order==="ZXY"){let h=c*d,m=c*u,p=l*d,_=l*u;e[0]=h-_*a,e[4]=-s*u,e[8]=p+m*a,e[1]=m+p*a,e[5]=s*d,e[9]=_-h*a,e[2]=-s*l,e[6]=a,e[10]=s*c}else if(t.order==="ZYX"){let h=s*d,m=s*u,p=a*d,_=a*u;e[0]=c*d,e[4]=p*l-m,e[8]=h*l+_,e[1]=c*u,e[5]=_*l+h,e[9]=m*l-p,e[2]=-l,e[6]=a*c,e[10]=s*c}else if(t.order==="YZX"){let h=s*c,m=s*l,p=a*c,_=a*l;e[0]=c*d,e[4]=_-h*u,e[8]=p*u+m,e[1]=u,e[5]=s*d,e[9]=-a*d,e[2]=-l*d,e[6]=m*u+p,e[10]=h-_*u}else if(t.order==="XZY"){let h=s*c,m=s*l,p=a*c,_=a*l;e[0]=c*d,e[4]=-u,e[8]=l*d,e[1]=h*u+_,e[5]=s*d,e[9]=m*u-p,e[2]=p*u-m,e[6]=a*d,e[10]=_*u+h}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(iwe,t,nwe)}lookAt(t,e,n){let r=this.elements;return gs.subVectors(t,e),gs.lengthSq()===0&&(gs.z=1),gs.normalize(),$d.crossVectors(n,gs),$d.lengthSq()===0&&(Math.abs(n.z)===1?gs.x+=1e-4:gs.z+=1e-4,gs.normalize(),$d.crossVectors(n,gs)),$d.normalize(),zM.crossVectors(gs,$d),r[0]=$d.x,r[4]=zM.x,r[8]=gs.x,r[1]=$d.y,r[5]=zM.y,r[9]=gs.y,r[2]=$d.z,r[6]=zM.z,r[10]=gs.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){let n=t.elements,r=e.elements,o=this.elements,s=n[0],a=n[4],c=n[8],l=n[12],d=n[1],u=n[5],h=n[9],m=n[13],p=n[2],_=n[6],f=n[10],g=n[14],S=n[3],C=n[7],E=n[11],N=n[15],R=r[0],B=r[4],z=r[8],T=r[12],O=r[1],U=r[5],X=r[9],ee=r[13],de=r[2],se=r[6],ue=r[10],ae=r[14],Ce=r[3],Pe=r[7],He=r[11],tt=r[15];return o[0]=s*R+a*O+c*de+l*Ce,o[4]=s*B+a*U+c*se+l*Pe,o[8]=s*z+a*X+c*ue+l*He,o[12]=s*T+a*ee+c*ae+l*tt,o[1]=d*R+u*O+h*de+m*Ce,o[5]=d*B+u*U+h*se+m*Pe,o[9]=d*z+u*X+h*ue+m*He,o[13]=d*T+u*ee+h*ae+m*tt,o[2]=p*R+_*O+f*de+g*Ce,o[6]=p*B+_*U+f*se+g*Pe,o[10]=p*z+_*X+f*ue+g*He,o[14]=p*T+_*ee+f*ae+g*tt,o[3]=S*R+C*O+E*de+N*Ce,o[7]=S*B+C*U+E*se+N*Pe,o[11]=S*z+C*X+E*ue+N*He,o[15]=S*T+C*ee+E*ae+N*tt,this}multiplyScalar(t){let e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){let t=this.elements,e=t[0],n=t[4],r=t[8],o=t[12],s=t[1],a=t[5],c=t[9],l=t[13],d=t[2],u=t[6],h=t[10],m=t[14],p=t[3],_=t[7],f=t[11],g=t[15],S=c*m-l*h,C=a*m-l*u,E=a*h-c*u,N=s*m-l*d,R=s*h-c*d,B=s*u-a*d;return e*(_*S-f*C+g*E)-n*(p*S-f*N+g*R)+r*(p*C-_*N+g*B)-o*(p*E-_*R+f*B)}transpose(){let t=this.elements,e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){let r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=n),this}invert(){let t=this.elements,e=t[0],n=t[1],r=t[2],o=t[3],s=t[4],a=t[5],c=t[6],l=t[7],d=t[8],u=t[9],h=t[10],m=t[11],p=t[12],_=t[13],f=t[14],g=t[15],S=u*f*l-_*h*l+_*c*m-a*f*m-u*c*g+a*h*g,C=p*h*l-d*f*l-p*c*m+s*f*m+d*c*g-s*h*g,E=d*_*l-p*u*l+p*a*m-s*_*m-d*a*g+s*u*g,N=p*u*c-d*_*c-p*a*h+s*_*h+d*a*f-s*u*f,R=e*S+n*C+r*E+o*N;if(R===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);let B=1/R;return t[0]=S*B,t[1]=(_*h*o-u*f*o-_*r*m+n*f*m+u*r*g-n*h*g)*B,t[2]=(a*f*o-_*c*o+_*r*l-n*f*l-a*r*g+n*c*g)*B,t[3]=(u*c*o-a*h*o-u*r*l+n*h*l+a*r*m-n*c*m)*B,t[4]=C*B,t[5]=(d*f*o-p*h*o+p*r*m-e*f*m-d*r*g+e*h*g)*B,t[6]=(p*c*o-s*f*o-p*r*l+e*f*l+s*r*g-e*c*g)*B,t[7]=(s*h*o-d*c*o+d*r*l-e*h*l-s*r*m+e*c*m)*B,t[8]=E*B,t[9]=(p*u*o-d*_*o-p*n*m+e*_*m+d*n*g-e*u*g)*B,t[10]=(s*_*o-p*a*o+p*n*l-e*_*l-s*n*g+e*a*g)*B,t[11]=(d*a*o-s*u*o-d*n*l+e*u*l+s*n*m-e*a*m)*B,t[12]=N*B,t[13]=(d*_*r-p*u*r+p*n*h-e*_*h-d*n*f+e*u*f)*B,t[14]=(p*a*r-s*_*r-p*n*c+e*_*c+s*n*f-e*a*f)*B,t[15]=(s*u*r-d*a*r+d*n*c-e*u*c-s*n*h+e*a*h)*B,this}scale(t){let e=this.elements,n=t.x,r=t.y,o=t.z;return e[0]*=n,e[4]*=r,e[8]*=o,e[1]*=n,e[5]*=r,e[9]*=o,e[2]*=n,e[6]*=r,e[10]*=o,e[3]*=n,e[7]*=r,e[11]*=o,this}getMaxScaleOnAxis(){let t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,r))}makeTranslation(t,e,n){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){let e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){let e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){let n=Math.cos(e),r=Math.sin(e),o=1-n,s=t.x,a=t.y,c=t.z,l=o*s,d=o*a;return this.set(l*s+n,l*a-r*c,l*c+r*a,0,l*a+r*c,d*a+n,d*c-r*s,0,l*c-r*a,d*c+r*s,o*c*c+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n,r,o,s){return this.set(1,n,o,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,n){let r=this.elements,o=e._x,s=e._y,a=e._z,c=e._w,l=o+o,d=s+s,u=a+a,h=o*l,m=o*d,p=o*u,_=s*d,f=s*u,g=a*u,S=c*l,C=c*d,E=c*u,N=n.x,R=n.y,B=n.z;return r[0]=(1-(_+g))*N,r[1]=(m+E)*N,r[2]=(p-C)*N,r[3]=0,r[4]=(m-E)*R,r[5]=(1-(h+g))*R,r[6]=(f+S)*R,r[7]=0,r[8]=(p+C)*B,r[9]=(f-S)*B,r[10]=(1-(h+_))*B,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,n){let r=this.elements;if(t.x=r[12],t.y=r[13],t.z=r[14],this.determinant()===0)return n.set(1,1,1),e.identity(),this;let o=ef.set(r[0],r[1],r[2]).length(),s=ef.set(r[4],r[5],r[6]).length(),a=ef.set(r[8],r[9],r[10]).length();this.determinant()<0&&(o=-o),Ta.copy(this);let l=1/o,d=1/s,u=1/a;return Ta.elements[0]*=l,Ta.elements[1]*=l,Ta.elements[2]*=l,Ta.elements[4]*=d,Ta.elements[5]*=d,Ta.elements[6]*=d,Ta.elements[8]*=u,Ta.elements[9]*=u,Ta.elements[10]*=u,e.setFromRotationMatrix(Ta),n.x=o,n.y=s,n.z=a,this}makePerspective(t,e,n,r,o,s,a=Da,c=!1){let l=this.elements,d=2*o/(e-t),u=2*o/(n-r),h=(e+t)/(e-t),m=(n+r)/(n-r),p,_;if(c)p=o/(s-o),_=s*o/(s-o);else if(a===Da)p=-(s+o)/(s-o),_=-2*s*o/(s-o);else if(a===F0)p=-s/(s-o),_=-s*o/(s-o);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=d,l[4]=0,l[8]=h,l[12]=0,l[1]=0,l[5]=u,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=p,l[14]=_,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(t,e,n,r,o,s,a=Da,c=!1){let l=this.elements,d=2/(e-t),u=2/(n-r),h=-(e+t)/(e-t),m=-(n+r)/(n-r),p,_;if(c)p=1/(s-o),_=s/(s-o);else if(a===Da)p=-2/(s-o),_=-(s+o)/(s-o);else if(a===F0)p=-1/(s-o),_=-o/(s-o);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=d,l[4]=0,l[8]=0,l[12]=h,l[1]=0,l[5]=u,l[9]=0,l[13]=m,l[2]=0,l[6]=0,l[10]=p,l[14]=_,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(t){let e=this.elements,n=t.elements;for(let r=0;r<16;r++)if(e[r]!==n[r])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){let n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}},ef=new j,Ta=new vn,iwe=new j(0,0,0),nwe=new j(1,1,1),$d=new j,zM=new j,gs=new j,JX=new vn,eY=new Vn,yc=(()=>{class i{constructor(e=0,n=0,r=0,o=i.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=r,this._order=o}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,r,o=this._order){return this._x=e,this._y=n,this._z=r,this._order=o,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,r=!0){let o=e.elements,s=o[0],a=o[4],c=o[8],l=o[1],d=o[5],u=o[9],h=o[2],m=o[6],p=o[10];switch(n){case"XYZ":this._y=Math.asin(Di(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(m,d),this._z=0);break;case"YXZ":this._x=Math.asin(-Di(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(c,p),this._z=Math.atan2(l,d)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(Di(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,d)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Di(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(m,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-a,d));break;case"YZX":this._z=Math.asin(Di(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,d),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(c,p));break;case"XZY":this._z=Math.asin(-Di(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(m,d),this._y=Math.atan2(c,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:Ut("Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,r===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,r){return JX.makeRotationFromQuaternion(e),this.setFromRotationMatrix(JX,n,r)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return eY.setFromEuler(this),this.setFromQuaternion(eY,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}return i.DEFAULT_ORDER="XYZ",i})(),gf=class{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}},rwe=0,tY=new j,tf=new Vn,Cl=new vn,HM=new j,k0=new j,owe=new j,swe=new Vn,iY=new j(1,0,0),nY=new j(0,1,0),rY=new j(0,0,1),oY={type:"added"},awe={type:"removed"},nf={type:"childadded",child:null},iL={type:"childremoved",child:null},No=(()=>{class i extends bc{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:rwe++}),this.uuid=Sf(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=i.DEFAULT_UP.clone();let e=new j,n=new yc,r=new Vn,o=new j(1,1,1);function s(){r.setFromEuler(n,!1)}function a(){n.setFromQuaternion(r,void 0,!1)}n._onChange(s),r._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:o},modelViewMatrix:{value:new vn},normalMatrix:{value:new mi}}),this.matrix=new vn,this.matrixWorld=new vn,this.matrixAutoUpdate=i.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new gf,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return tf.setFromAxisAngle(e,n),this.quaternion.multiply(tf),this}rotateOnWorldAxis(e,n){return tf.setFromAxisAngle(e,n),this.quaternion.premultiply(tf),this}rotateX(e){return this.rotateOnAxis(iY,e)}rotateY(e){return this.rotateOnAxis(nY,e)}rotateZ(e){return this.rotateOnAxis(rY,e)}translateOnAxis(e,n){return tY.copy(e).applyQuaternion(this.quaternion),this.position.add(tY.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(iY,e)}translateY(e){return this.translateOnAxis(nY,e)}translateZ(e){return this.translateOnAxis(rY,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Cl.copy(this.matrixWorld).invert())}lookAt(e,n,r){e.isVector3?HM.copy(e):HM.set(e,n,r);let o=this.parent;this.updateWorldMatrix(!0,!1),k0.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Cl.lookAt(k0,HM,this.up):Cl.lookAt(HM,k0,this.up),this.quaternion.setFromRotationMatrix(Cl),o&&(Cl.extractRotation(o.matrixWorld),tf.setFromRotationMatrix(Cl),this.quaternion.premultiply(tf.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(jt("Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(oY),nf.child=e,this.dispatchEvent(nf),nf.child=null):jt("Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let r=0;r<arguments.length;r++)this.remove(arguments[r]);return this}let n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(awe),iL.child=e,this.dispatchEvent(iL),iL.child=null),this}removeFromParent(){let e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Cl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Cl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Cl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(oY),nf.child=e,this.dispatchEvent(nf),nf.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let r=0,o=this.children.length;r<o;r++){let a=this.children[r].getObjectByProperty(e,n);if(a!==void 0)return a}}getObjectsByProperty(e,n,r=[]){this[e]===n&&r.push(this);let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].getObjectsByProperty(e,n,r);return r}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(k0,e,owe),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(k0,swe,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);let n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);let n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);let n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].traverseVisible(e)}traverseAncestors(e){let n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);let n=this.children;for(let r=0,o=n.length;r<o;r++)n[r].updateMatrixWorld(e)}updateWorldMatrix(e,n){let r=this.parent;if(e===!0&&r!==null&&r.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){let o=this.children;for(let s=0,a=o.length;s<a;s++)o[s].updateWorldMatrix(!1,!0)}}toJSON(e){let n=e===void 0||typeof e=="string",r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},r.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});let o={};o.uuid=this.uuid,o.type=this.type,this.name!==""&&(o.name=this.name),this.castShadow===!0&&(o.castShadow=!0),this.receiveShadow===!0&&(o.receiveShadow=!0),this.visible===!1&&(o.visible=!1),this.frustumCulled===!1&&(o.frustumCulled=!1),this.renderOrder!==0&&(o.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),o.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(o.matrixAutoUpdate=!1),this.isInstancedMesh&&(o.type="InstancedMesh",o.count=this.count,o.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(o.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(o.type="BatchedMesh",o.perObjectFrustumCulled=this.perObjectFrustumCulled,o.sortObjects=this.sortObjects,o.drawRanges=this._drawRanges,o.reservedRanges=this._reservedRanges,o.geometryInfo=this._geometryInfo.map(c=>Nt(ge({},c),{boundingBox:c.boundingBox?c.boundingBox.toJSON():void 0,boundingSphere:c.boundingSphere?c.boundingSphere.toJSON():void 0})),o.instanceInfo=this._instanceInfo.map(c=>ge({},c)),o.availableInstanceIds=this._availableInstanceIds.slice(),o.availableGeometryIds=this._availableGeometryIds.slice(),o.nextIndexStart=this._nextIndexStart,o.nextVertexStart=this._nextVertexStart,o.geometryCount=this._geometryCount,o.maxInstanceCount=this._maxInstanceCount,o.maxVertexCount=this._maxVertexCount,o.maxIndexCount=this._maxIndexCount,o.geometryInitialized=this._geometryInitialized,o.matricesTexture=this._matricesTexture.toJSON(e),o.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(o.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(o.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(o.boundingBox=this.boundingBox.toJSON()));function s(c,l){return c[l.uuid]===void 0&&(c[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?o.background=this.background.toJSON():this.background.isTexture&&(o.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(o.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){o.geometry=s(e.geometries,this.geometry);let c=this.geometry.parameters;if(c!==void 0&&c.shapes!==void 0){let l=c.shapes;if(Array.isArray(l))for(let d=0,u=l.length;d<u;d++){let h=l[d];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(o.bindMode=this.bindMode,o.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),o.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){let c=[];for(let l=0,d=this.material.length;l<d;l++)c.push(s(e.materials,this.material[l]));o.material=c}else o.material=s(e.materials,this.material);if(this.children.length>0){o.children=[];for(let c=0;c<this.children.length;c++)o.children.push(this.children[c].toJSON(e).object)}if(this.animations.length>0){o.animations=[];for(let c=0;c<this.animations.length;c++){let l=this.animations[c];o.animations.push(s(e.animations,l))}}if(n){let c=a(e.geometries),l=a(e.materials),d=a(e.textures),u=a(e.images),h=a(e.shapes),m=a(e.skeletons),p=a(e.animations),_=a(e.nodes);c.length>0&&(r.geometries=c),l.length>0&&(r.materials=l),d.length>0&&(r.textures=d),u.length>0&&(r.images=u),h.length>0&&(r.shapes=h),m.length>0&&(r.skeletons=m),p.length>0&&(r.animations=p),_.length>0&&(r.nodes=_)}return r.object=o,r;function a(c){let l=[];for(let d in c){let u=c[d];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let r=0;r<e.children.length;r++){let o=e.children[r];this.add(o.clone())}return this}}return i.DEFAULT_UP=new j(0,1,0),i.DEFAULT_MATRIX_AUTO_UPDATE=!0,i.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0,i})(),Ia=new j,Sl=new j,nL=new j,El=new j,rf=new j,of=new j,sY=new j,rL=new j,oL=new j,sL=new j,aL=new Un,cL=new Un,lL=new Un,Tl=class i{constructor(t=new j,e=new j,n=new j){this.a=t,this.b=e,this.c=n}static getNormal(t,e,n,r){r.subVectors(n,e),Ia.subVectors(t,e),r.cross(Ia);let o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}static getBarycoord(t,e,n,r,o){Ia.subVectors(r,e),Sl.subVectors(n,e),nL.subVectors(t,e);let s=Ia.dot(Ia),a=Ia.dot(Sl),c=Ia.dot(nL),l=Sl.dot(Sl),d=Sl.dot(nL),u=s*l-a*a;if(u===0)return o.set(0,0,0),null;let h=1/u,m=(l*c-a*d)*h,p=(s*d-a*c)*h;return o.set(1-m-p,p,m)}static containsPoint(t,e,n,r){return this.getBarycoord(t,e,n,r,El)===null?!1:El.x>=0&&El.y>=0&&El.x+El.y<=1}static getInterpolation(t,e,n,r,o,s,a,c){return this.getBarycoord(t,e,n,r,El)===null?(c.x=0,c.y=0,"z"in c&&(c.z=0),"w"in c&&(c.w=0),null):(c.setScalar(0),c.addScaledVector(o,El.x),c.addScaledVector(s,El.y),c.addScaledVector(a,El.z),c)}static getInterpolatedAttribute(t,e,n,r,o,s){return aL.setScalar(0),cL.setScalar(0),lL.setScalar(0),aL.fromBufferAttribute(t,e),cL.fromBufferAttribute(t,n),lL.fromBufferAttribute(t,r),s.setScalar(0),s.addScaledVector(aL,o.x),s.addScaledVector(cL,o.y),s.addScaledVector(lL,o.z),s}static isFrontFacing(t,e,n,r){return Ia.subVectors(n,e),Sl.subVectors(t,e),Ia.cross(Sl).dot(r)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,r){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,n,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,n),this.c.fromBufferAttribute(t,r),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Ia.subVectors(this.c,this.b),Sl.subVectors(this.a,this.b),Ia.cross(Sl).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return i.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return i.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,n,r,o){return i.getInterpolation(t,this.a,this.b,this.c,e,n,r,o)}containsPoint(t){return i.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return i.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){let n=this.a,r=this.b,o=this.c,s,a;rf.subVectors(r,n),of.subVectors(o,n),rL.subVectors(t,n);let c=rf.dot(rL),l=of.dot(rL);if(c<=0&&l<=0)return e.copy(n);oL.subVectors(t,r);let d=rf.dot(oL),u=of.dot(oL);if(d>=0&&u<=d)return e.copy(r);let h=c*u-d*l;if(h<=0&&c>=0&&d<=0)return s=c/(c-d),e.copy(n).addScaledVector(rf,s);sL.subVectors(t,o);let m=rf.dot(sL),p=of.dot(sL);if(p>=0&&m<=p)return e.copy(o);let _=m*l-c*p;if(_<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(n).addScaledVector(of,a);let f=d*p-m*u;if(f<=0&&u-d>=0&&m-p>=0)return sY.subVectors(o,r),a=(u-d)/(u-d+(m-p)),e.copy(r).addScaledVector(sY,a);let g=1/(f+_+h);return s=_*g,a=h*g,e.copy(n).addScaledVector(rf,s).addScaledVector(of,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}},eZ={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Gd={h:0,s:0,l:0},jM={h:0,s:0,l:0};function dL(i,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?i+(t-i)*6*e:e<1/2?t:e<2/3?i+(t-i)*6*(2/3-e):i}var Ci=class{constructor(t,e,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,n)}set(t,e,n){if(e===void 0&&n===void 0){let r=t;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(t,e,n);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=bs){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Fi.colorSpaceToWorking(this,e),this}setRGB(t,e,n,r=Fi.workingColorSpace){return this.r=t,this.g=e,this.b=n,Fi.colorSpaceToWorking(this,r),this}setHSL(t,e,n,r=Fi.workingColorSpace){if(t=ZL(t,1),e=Di(e,0,1),n=Di(n,0,1),e===0)this.r=this.g=this.b=n;else{let o=n<=.5?n*(1+e):n+e-n*e,s=2*n-o;this.r=dL(s,o,t+1/3),this.g=dL(s,o,t),this.b=dL(s,o,t-1/3)}return Fi.colorSpaceToWorking(this,r),this}setStyle(t,e=bs){function n(o){o!==void 0&&parseFloat(o)<1&&Ut("Color: Alpha component of "+t+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(t)){let o,s=r[1],a=r[2];switch(s){case"rgb":case"rgba":if(o=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setRGB(Math.min(255,parseInt(o[1],10))/255,Math.min(255,parseInt(o[2],10))/255,Math.min(255,parseInt(o[3],10))/255,e);if(o=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setRGB(Math.min(100,parseInt(o[1],10))/100,Math.min(100,parseInt(o[2],10))/100,Math.min(100,parseInt(o[3],10))/100,e);break;case"hsl":case"hsla":if(o=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(o[4]),this.setHSL(parseFloat(o[1])/360,parseFloat(o[2])/100,parseFloat(o[3])/100,e);break;default:Ut("Color: Unknown color model "+t)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(t)){let o=r[1],s=o.length;if(s===3)return this.setRGB(parseInt(o.charAt(0),16)/15,parseInt(o.charAt(1),16)/15,parseInt(o.charAt(2),16)/15,e);if(s===6)return this.setHex(parseInt(o,16),e);Ut("Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=bs){let n=eZ[t.toLowerCase()];return n!==void 0?this.setHex(n,e):Ut("Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Il(t.r),this.g=Il(t.g),this.b=Il(t.b),this}copyLinearToSRGB(t){return this.r=uf(t.r),this.g=uf(t.g),this.b=uf(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=bs){return Fi.workingToColorSpace(ho.copy(this),t),Math.round(Di(ho.r*255,0,255))*65536+Math.round(Di(ho.g*255,0,255))*256+Math.round(Di(ho.b*255,0,255))}getHexString(t=bs){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=Fi.workingColorSpace){Fi.workingToColorSpace(ho.copy(this),e);let n=ho.r,r=ho.g,o=ho.b,s=Math.max(n,r,o),a=Math.min(n,r,o),c,l,d=(a+s)/2;if(a===s)c=0,l=0;else{let u=s-a;switch(l=d<=.5?u/(s+a):u/(2-s-a),s){case n:c=(r-o)/u+(r<o?6:0);break;case r:c=(o-n)/u+2;break;case o:c=(n-r)/u+4;break}c/=6}return t.h=c,t.s=l,t.l=d,t}getRGB(t,e=Fi.workingColorSpace){return Fi.workingToColorSpace(ho.copy(this),e),t.r=ho.r,t.g=ho.g,t.b=ho.b,t}getStyle(t=bs){Fi.workingToColorSpace(ho.copy(this),t);let e=ho.r,n=ho.g,r=ho.b;return t!==bs?`color(${t} ${e.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(e*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(t,e,n){return this.getHSL(Gd),this.setHSL(Gd.h+t,Gd.s+e,Gd.l+n)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(Gd),t.getHSL(jM);let n=O0(Gd.h,jM.h,e),r=O0(Gd.s,jM.s,e),o=O0(Gd.l,jM.l,e);return this.setHSL(n,r,o),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){let e=this.r,n=this.g,r=this.b,o=t.elements;return this.r=o[0]*e+o[3]*n+o[6]*r,this.g=o[1]*e+o[4]*n+o[7]*r,this.b=o[2]*e+o[5]*n+o[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}},ho=new Ci;Ci.NAMES=eZ;var cwe=0,kl=class extends bc{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:cwe++}),this.uuid=Sf(),this.name="",this.type="Material",this.blending=Ph,this.side=Dl,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=sC,this.blendDst=aC,this.blendEquation=qd,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ci(0,0,0),this.blendAlpha=0,this.depthFunc=Oh,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=xL,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Ah,this.stencilZFail=Ah,this.stencilZPass=Ah,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(let e in t){let n=t[e];if(n===void 0){Ut(`Material: parameter '${e}' has value of undefined.`);continue}let r=this[e];if(r===void 0){Ut(`Material: '${e}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[e]=n}}toJSON(t){let e=t===void 0||typeof t=="string";e&&(t={textures:{},images:{}});let n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(n.sheenColorMap=this.sheenColorMap.toJSON(t).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(n.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(t).uuid),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Ph&&(n.blending=this.blending),this.side!==Dl&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==sC&&(n.blendSrc=this.blendSrc),this.blendDst!==aC&&(n.blendDst=this.blendDst),this.blendEquation!==qd&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Oh&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==xL&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Ah&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Ah&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Ah&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.allowOverride===!1&&(n.allowOverride=!1),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(o){let s=[];for(let a in o){let c=o[a];delete c.metadata,s.push(c)}return s}if(e){let o=r(t.textures),s=r(t.images);o.length>0&&(n.textures=o),s.length>0&&(n.images=s)}return n}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;let e=t.clippingPlanes,n=null;if(e!==null){let r=e.length;n=new Array(r);for(let o=0;o!==r;++o)n[o]=e[o].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.allowOverride=t.allowOverride,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}},qs=class extends kl{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ci(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yc,this.combine=AL,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}};var fr=new j,$M=new Ht,lwe=0,vs=class{constructor(t,e,n=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:lwe++}),this.name="",this.array=t,this.itemSize=e,this.count=t!==void 0?t.length/e:0,this.normalized=n,this.usage=wL,this.updateRanges=[],this.gpuType=Oa,this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let r=0,o=this.itemSize;r<o;r++)this.array[t+r]=e.array[n+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(this.itemSize===2)for(let e=0,n=this.count;e<n;e++)$M.fromBufferAttribute(this,e),$M.applyMatrix3(t),this.setXY(e,$M.x,$M.y);else if(this.itemSize===3)for(let e=0,n=this.count;e<n;e++)fr.fromBufferAttribute(this,e),fr.applyMatrix3(t),this.setXYZ(e,fr.x,fr.y,fr.z);return this}applyMatrix4(t){for(let e=0,n=this.count;e<n;e++)fr.fromBufferAttribute(this,e),fr.applyMatrix4(t),this.setXYZ(e,fr.x,fr.y,fr.z);return this}applyNormalMatrix(t){for(let e=0,n=this.count;e<n;e++)fr.fromBufferAttribute(this,e),fr.applyNormalMatrix(t),this.setXYZ(e,fr.x,fr.y,fr.z);return this}transformDirection(t){for(let e=0,n=this.count;e<n;e++)fr.fromBufferAttribute(this,e),fr.transformDirection(t),this.setXYZ(e,fr.x,fr.y,fr.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let n=this.array[t*this.itemSize+e];return this.normalized&&(n=lf(n,this.array)),n}setComponent(t,e,n){return this.normalized&&(n=Oo(n,this.array)),this.array[t*this.itemSize+e]=n,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=lf(e,this.array)),e}setX(t,e){return this.normalized&&(e=Oo(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=lf(e,this.array)),e}setY(t,e){return this.normalized&&(e=Oo(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=lf(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Oo(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=lf(e,this.array)),e}setW(t,e){return this.normalized&&(e=Oo(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,n){return t*=this.itemSize,this.normalized&&(e=Oo(e,this.array),n=Oo(n,this.array)),this.array[t+0]=e,this.array[t+1]=n,this}setXYZ(t,e,n,r){return t*=this.itemSize,this.normalized&&(e=Oo(e,this.array),n=Oo(n,this.array),r=Oo(r,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this}setXYZW(t,e,n,r,o){return t*=this.itemSize,this.normalized&&(e=Oo(e,this.array),n=Oo(n,this.array),r=Oo(r,this.array),o=Oo(o,this.array)),this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=r,this.array[t+3]=o,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){let t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==wL&&(t.usage=this.usage),t}};var V0=class extends vs{constructor(t,e,n){super(new Uint16Array(t),e,n)}};var U0=class extends vs{constructor(t,e,n){super(new Uint32Array(t),e,n)}};var Hi=class extends vs{constructor(t,e,n){super(new Float32Array(t),e,n)}},dwe=0,Gs=new vn,uL=new No,sf=new j,_s=new vc,A0=new vc,Lr=new j,gr=class i extends bc{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dwe++}),this.uuid=Sf(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.indirectOffset=0,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(XL(t)?U0:V0)(t,1):this.index=t,this}setIndirect(t,e=0){return this.indirect=t,this.indirectOffset=e,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){let e=this.attributes.position;e!==void 0&&(e.applyMatrix4(t),e.needsUpdate=!0);let n=this.attributes.normal;if(n!==void 0){let o=new mi().getNormalMatrix(t);n.applyNormalMatrix(o),n.needsUpdate=!0}let r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(t),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Gs.makeRotationFromQuaternion(t),this.applyMatrix4(Gs),this}rotateX(t){return Gs.makeRotationX(t),this.applyMatrix4(Gs),this}rotateY(t){return Gs.makeRotationY(t),this.applyMatrix4(Gs),this}rotateZ(t){return Gs.makeRotationZ(t),this.applyMatrix4(Gs),this}translate(t,e,n){return Gs.makeTranslation(t,e,n),this.applyMatrix4(Gs),this}scale(t,e,n){return Gs.makeScale(t,e,n),this.applyMatrix4(Gs),this}lookAt(t){return uL.lookAt(t),uL.updateMatrix(),this.applyMatrix4(uL.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(sf).negate(),this.translate(sf.x,sf.y,sf.z),this}setFromPoints(t){let e=this.getAttribute("position");if(e===void 0){let n=[];for(let r=0,o=t.length;r<o;r++){let s=t[r];n.push(s.x,s.y,s.z||0)}this.setAttribute("position",new Hi(n,3))}else{let n=Math.min(t.length,e.count);for(let r=0;r<n;r++){let o=t[r];e.setXYZ(r,o.x,o.y,o.z||0)}t.length>e.count&&Ut("BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new vc);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){jt("BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,r=e.length;n<r;n++){let o=e[n];_s.setFromBufferAttribute(o),this.morphTargetsRelative?(Lr.addVectors(this.boundingBox.min,_s.min),this.boundingBox.expandByPoint(Lr),Lr.addVectors(this.boundingBox.max,_s.max),this.boundingBox.expandByPoint(Lr)):(this.boundingBox.expandByPoint(_s.min),this.boundingBox.expandByPoint(_s.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&jt('BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Rh);let t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){jt("BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(t){let n=this.boundingSphere.center;if(_s.setFromBufferAttribute(t),e)for(let o=0,s=e.length;o<s;o++){let a=e[o];A0.setFromBufferAttribute(a),this.morphTargetsRelative?(Lr.addVectors(_s.min,A0.min),_s.expandByPoint(Lr),Lr.addVectors(_s.max,A0.max),_s.expandByPoint(Lr)):(_s.expandByPoint(A0.min),_s.expandByPoint(A0.max))}_s.getCenter(n);let r=0;for(let o=0,s=t.count;o<s;o++)Lr.fromBufferAttribute(t,o),r=Math.max(r,n.distanceToSquared(Lr));if(e)for(let o=0,s=e.length;o<s;o++){let a=e[o],c=this.morphTargetsRelative;for(let l=0,d=a.count;l<d;l++)Lr.fromBufferAttribute(a,l),c&&(sf.fromBufferAttribute(t,l),Lr.add(sf)),r=Math.max(r,n.distanceToSquared(Lr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&jt('BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){let t=this.index,e=this.attributes;if(t===null||e.position===void 0||e.normal===void 0||e.uv===void 0){jt("BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}let n=e.position,r=e.normal,o=e.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new vs(new Float32Array(4*n.count),4));let s=this.getAttribute("tangent"),a=[],c=[];for(let z=0;z<n.count;z++)a[z]=new j,c[z]=new j;let l=new j,d=new j,u=new j,h=new Ht,m=new Ht,p=new Ht,_=new j,f=new j;function g(z,T,O){l.fromBufferAttribute(n,z),d.fromBufferAttribute(n,T),u.fromBufferAttribute(n,O),h.fromBufferAttribute(o,z),m.fromBufferAttribute(o,T),p.fromBufferAttribute(o,O),d.sub(l),u.sub(l),m.sub(h),p.sub(h);let U=1/(m.x*p.y-p.x*m.y);isFinite(U)&&(_.copy(d).multiplyScalar(p.y).addScaledVector(u,-m.y).multiplyScalar(U),f.copy(u).multiplyScalar(m.x).addScaledVector(d,-p.x).multiplyScalar(U),a[z].add(_),a[T].add(_),a[O].add(_),c[z].add(f),c[T].add(f),c[O].add(f))}let S=this.groups;S.length===0&&(S=[{start:0,count:t.count}]);for(let z=0,T=S.length;z<T;++z){let O=S[z],U=O.start,X=O.count;for(let ee=U,de=U+X;ee<de;ee+=3)g(t.getX(ee+0),t.getX(ee+1),t.getX(ee+2))}let C=new j,E=new j,N=new j,R=new j;function B(z){N.fromBufferAttribute(r,z),R.copy(N);let T=a[z];C.copy(T),C.sub(N.multiplyScalar(N.dot(T))).normalize(),E.crossVectors(R,T);let U=E.dot(c[z])<0?-1:1;s.setXYZW(z,C.x,C.y,C.z,U)}for(let z=0,T=S.length;z<T;++z){let O=S[z],U=O.start,X=O.count;for(let ee=U,de=U+X;ee<de;ee+=3)B(t.getX(ee+0)),B(t.getX(ee+1)),B(t.getX(ee+2))}}computeVertexNormals(){let t=this.index,e=this.getAttribute("position");if(e!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new vs(new Float32Array(e.count*3),3),this.setAttribute("normal",n);else for(let h=0,m=n.count;h<m;h++)n.setXYZ(h,0,0,0);let r=new j,o=new j,s=new j,a=new j,c=new j,l=new j,d=new j,u=new j;if(t)for(let h=0,m=t.count;h<m;h+=3){let p=t.getX(h+0),_=t.getX(h+1),f=t.getX(h+2);r.fromBufferAttribute(e,p),o.fromBufferAttribute(e,_),s.fromBufferAttribute(e,f),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),a.fromBufferAttribute(n,p),c.fromBufferAttribute(n,_),l.fromBufferAttribute(n,f),a.add(d),c.add(d),l.add(d),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(_,c.x,c.y,c.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let h=0,m=e.count;h<m;h+=3)r.fromBufferAttribute(e,h+0),o.fromBufferAttribute(e,h+1),s.fromBufferAttribute(e,h+2),d.subVectors(s,o),u.subVectors(r,o),d.cross(u),n.setXYZ(h+0,d.x,d.y,d.z),n.setXYZ(h+1,d.x,d.y,d.z),n.setXYZ(h+2,d.x,d.y,d.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){let t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Lr.fromBufferAttribute(t,e),Lr.normalize(),t.setXYZ(e,Lr.x,Lr.y,Lr.z)}toNonIndexed(){function t(a,c){let l=a.array,d=a.itemSize,u=a.normalized,h=new l.constructor(c.length*d),m=0,p=0;for(let _=0,f=c.length;_<f;_++){a.isInterleavedBufferAttribute?m=c[_]*a.data.stride+a.offset:m=c[_]*d;for(let g=0;g<d;g++)h[p++]=l[m++]}return new vs(h,d,u)}if(this.index===null)return Ut("BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;let e=new i,n=this.index.array,r=this.attributes;for(let a in r){let c=r[a],l=t(c,n);e.setAttribute(a,l)}let o=this.morphAttributes;for(let a in o){let c=[],l=o[a];for(let d=0,u=l.length;d<u;d++){let h=l[d],m=t(h,n);c.push(m)}e.morphAttributes[a]=c}e.morphTargetsRelative=this.morphTargetsRelative;let s=this.groups;for(let a=0,c=s.length;a<c;a++){let l=s[a];e.addGroup(l.start,l.count,l.materialIndex)}return e}toJSON(){let t={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){let c=this.parameters;for(let l in c)c[l]!==void 0&&(t[l]=c[l]);return t}t.data={attributes:{}};let e=this.index;e!==null&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});let n=this.attributes;for(let c in n){let l=n[c];t.data.attributes[c]=l.toJSON(t.data)}let r={},o=!1;for(let c in this.morphAttributes){let l=this.morphAttributes[c],d=[];for(let u=0,h=l.length;u<h;u++){let m=l[u];d.push(m.toJSON(t.data))}d.length>0&&(r[c]=d,o=!0)}o&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);let s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));let a=this.boundingSphere;return a!==null&&(t.data.boundingSphere=a.toJSON()),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;let e={};this.name=t.name;let n=t.index;n!==null&&this.setIndex(n.clone());let r=t.attributes;for(let l in r){let d=r[l];this.setAttribute(l,d.clone(e))}let o=t.morphAttributes;for(let l in o){let d=[],u=o[l];for(let h=0,m=u.length;h<m;h++)d.push(u[h].clone(e));this.morphAttributes[l]=d}this.morphTargetsRelative=t.morphTargetsRelative;let s=t.groups;for(let l=0,d=s.length;l<d;l++){let u=s[l];this.addGroup(u.start,u.count,u.materialIndex)}let a=t.boundingBox;a!==null&&(this.boundingBox=a.clone());let c=t.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}},aY=new vn,Dh=new Xd,GM=new Rh,cY=new j,WM=new j,qM=new j,XM=new j,hL=new j,YM=new j,lY=new j,ZM=new j,ze=class extends No{constructor(t=new gr,e=new qs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){let e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){let r=e[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}getVertexPosition(t,e){let n=this.geometry,r=n.attributes.position,o=n.morphAttributes.position,s=n.morphTargetsRelative;e.fromBufferAttribute(r,t);let a=this.morphTargetInfluences;if(o&&a){YM.set(0,0,0);for(let c=0,l=o.length;c<l;c++){let d=a[c],u=o[c];d!==0&&(hL.fromBufferAttribute(u,t),s?YM.addScaledVector(hL,d):YM.addScaledVector(hL.sub(e),d))}e.add(YM)}return e}raycast(t,e){let n=this.geometry,r=this.material,o=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),GM.copy(n.boundingSphere),GM.applyMatrix4(o),Dh.copy(t.ray).recast(t.near),!(GM.containsPoint(Dh.origin)===!1&&(Dh.intersectSphere(GM,cY)===null||Dh.origin.distanceToSquared(cY)>(t.far-t.near)**2))&&(aY.copy(o).invert(),Dh.copy(t.ray).applyMatrix4(aY),!(n.boundingBox!==null&&Dh.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(t,e,Dh)))}_computeIntersections(t,e,n){let r,o=this.geometry,s=this.material,a=o.index,c=o.attributes.position,l=o.attributes.uv,d=o.attributes.uv1,u=o.attributes.normal,h=o.groups,m=o.drawRange;if(a!==null)if(Array.isArray(s))for(let p=0,_=h.length;p<_;p++){let f=h[p],g=s[f.materialIndex],S=Math.max(f.start,m.start),C=Math.min(a.count,Math.min(f.start+f.count,m.start+m.count));for(let E=S,N=C;E<N;E+=3){let R=a.getX(E),B=a.getX(E+1),z=a.getX(E+2);r=KM(this,g,t,n,l,d,u,R,B,z),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=f.materialIndex,e.push(r))}}else{let p=Math.max(0,m.start),_=Math.min(a.count,m.start+m.count);for(let f=p,g=_;f<g;f+=3){let S=a.getX(f),C=a.getX(f+1),E=a.getX(f+2);r=KM(this,s,t,n,l,d,u,S,C,E),r&&(r.faceIndex=Math.floor(f/3),e.push(r))}}else if(c!==void 0)if(Array.isArray(s))for(let p=0,_=h.length;p<_;p++){let f=h[p],g=s[f.materialIndex],S=Math.max(f.start,m.start),C=Math.min(c.count,Math.min(f.start+f.count,m.start+m.count));for(let E=S,N=C;E<N;E+=3){let R=E,B=E+1,z=E+2;r=KM(this,g,t,n,l,d,u,R,B,z),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=f.materialIndex,e.push(r))}}else{let p=Math.max(0,m.start),_=Math.min(c.count,m.start+m.count);for(let f=p,g=_;f<g;f+=3){let S=f,C=f+1,E=f+2;r=KM(this,s,t,n,l,d,u,S,C,E),r&&(r.faceIndex=Math.floor(f/3),e.push(r))}}}};function uwe(i,t,e,n,r,o,s,a){let c;if(t.side===Ro?c=n.intersectTriangle(s,o,r,!0,a):c=n.intersectTriangle(r,o,s,t.side===Dl,a),c===null)return null;ZM.copy(a),ZM.applyMatrix4(i.matrixWorld);let l=e.ray.origin.distanceTo(ZM);return l<e.near||l>e.far?null:{distance:l,point:ZM.clone(),object:i}}function KM(i,t,e,n,r,o,s,a,c,l){i.getVertexPosition(a,WM),i.getVertexPosition(c,qM),i.getVertexPosition(l,XM);let d=uwe(i,t,e,n,WM,qM,XM,lY);if(d){let u=new j;Tl.getBarycoord(lY,WM,qM,XM,u),r&&(d.uv=Tl.getInterpolatedAttribute(r,a,c,l,u,new Ht)),o&&(d.uv1=Tl.getInterpolatedAttribute(o,a,c,l,u,new Ht)),s&&(d.normal=Tl.getInterpolatedAttribute(s,a,c,l,u,new j),d.normal.dot(n.direction)>0&&d.normal.multiplyScalar(-1));let h={a,b:c,c:l,normal:new j,materialIndex:0};Tl.getNormal(WM,qM,XM,h.normal),d.face=h,d.barycoord=u}return d}var qi=class i extends gr{constructor(t=1,e=1,n=1,r=1,o=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:r,heightSegments:o,depthSegments:s};let a=this;r=Math.floor(r),o=Math.floor(o),s=Math.floor(s);let c=[],l=[],d=[],u=[],h=0,m=0;p("z","y","x",-1,-1,n,e,t,s,o,0),p("z","y","x",1,-1,n,e,-t,s,o,1),p("x","z","y",1,1,t,n,e,r,s,2),p("x","z","y",1,-1,t,n,-e,r,s,3),p("x","y","z",1,-1,t,e,n,r,o,4),p("x","y","z",-1,-1,t,e,-n,r,o,5),this.setIndex(c),this.setAttribute("position",new Hi(l,3)),this.setAttribute("normal",new Hi(d,3)),this.setAttribute("uv",new Hi(u,2));function p(_,f,g,S,C,E,N,R,B,z,T){let O=E/B,U=N/z,X=E/2,ee=N/2,de=R/2,se=B+1,ue=z+1,ae=0,Ce=0,Pe=new j;for(let He=0;He<ue;He++){let tt=He*U-ee;for(let ai=0;ai<se;ai++){let pi=ai*O-X;Pe[_]=pi*S,Pe[f]=tt*C,Pe[g]=de,l.push(Pe.x,Pe.y,Pe.z),Pe[_]=0,Pe[f]=0,Pe[g]=R>0?1:-1,d.push(Pe.x,Pe.y,Pe.z),u.push(ai/B),u.push(1-He/z),ae+=1}}for(let He=0;He<z;He++)for(let tt=0;tt<B;tt++){let ai=h+tt+se*He,pi=h+tt+se*(He+1),xn=h+(tt+1)+se*(He+1),In=h+(tt+1)+se*He;c.push(ai,pi,In),c.push(pi,xn,In),Ce+=6}a.addGroup(m,Ce,T),m+=Ce,h+=ae}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new i(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}};function Hh(i){let t={};for(let e in i){t[e]={};for(let n in i[e]){let r=i[e][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(Ut("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[e][n]=null):t[e][n]=r.clone():Array.isArray(r)?t[e][n]=r.slice():t[e][n]=r}}return t}function fo(i){let t={};for(let e=0;e<i.length;e++){let n=Hh(i[e]);for(let r in n)t[r]=n[r]}return t}function hwe(i){let t=[];for(let e=0;e<i.length;e++)t.push(i[e].clone());return t}function QL(i){let t=i.getRenderTarget();return t===null?i.outputColorSpace:t.isXRRenderTarget===!0?t.texture.colorSpace:Fi.workingColorSpace}var tZ={clone:Hh,merge:fo},mwe=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,pwe=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`,xs=class extends kl{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mwe,this.fragmentShader=pwe,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=Hh(t.uniforms),this.uniformsGroups=hwe(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this.defaultAttributeValues=Object.assign({},t.defaultAttributeValues),this.index0AttributeName=t.index0AttributeName,this.uniformsNeedUpdate=t.uniformsNeedUpdate,this}toJSON(t){let e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(let r in this.uniforms){let s=this.uniforms[r].value;s&&s.isTexture?e.uniforms[r]={type:"t",value:s.toJSON(t).uuid}:s&&s.isColor?e.uniforms[r]={type:"c",value:s.getHex()}:s&&s.isVector2?e.uniforms[r]={type:"v2",value:s.toArray()}:s&&s.isVector3?e.uniforms[r]={type:"v3",value:s.toArray()}:s&&s.isVector4?e.uniforms[r]={type:"v4",value:s.toArray()}:s&&s.isMatrix3?e.uniforms[r]={type:"m3",value:s.toArray()}:s&&s.isMatrix4?e.uniforms[r]={type:"m4",value:s.toArray()}:e.uniforms[r]={value:s}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;let n={};for(let r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(e.extensions=n),e}},z0=class extends No{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vn,this.projectionMatrix=new vn,this.projectionMatrixInverse=new vn,this.coordinateSystem=Da,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}},Wd=new j,dY=new Ht,uY=new Ht,mo=class extends z0{constructor(t=50,e=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){let e=.5*this.getFilmHeight()/t;this.fov=pf*2*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){let t=Math.tan(df*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return pf*2*Math.atan(Math.tan(df*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,n){Wd.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Wd.x,Wd.y).multiplyScalar(-t/Wd.z),Wd.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Wd.x,Wd.y).multiplyScalar(-t/Wd.z)}getViewSize(t,e){return this.getViewBounds(t,dY,uY),e.subVectors(uY,dY)}setViewOffset(t,e,n,r,o,s){this.aspect=t/e,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=this.near,e=t*Math.tan(df*.5*this.fov)/this.zoom,n=2*e,r=this.aspect*n,o=-.5*r,s=this.view;if(this.view!==null&&this.view.enabled){let c=s.fullWidth,l=s.fullHeight;o+=s.offsetX*r/c,e-=s.offsetY*n/l,r*=s.width/c,n*=s.height/l}let a=this.filmOffset;a!==0&&(o+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(o,o+r,e,e-n,t,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,this.view!==null&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}},af=-90,cf=1,pC=class extends No{constructor(t,e,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;let r=new mo(af,cf,t,e);r.layers=this.layers,this.add(r);let o=new mo(af,cf,t,e);o.layers=this.layers,this.add(o);let s=new mo(af,cf,t,e);s.layers=this.layers,this.add(s);let a=new mo(af,cf,t,e);a.layers=this.layers,this.add(a);let c=new mo(af,cf,t,e);c.layers=this.layers,this.add(c);let l=new mo(af,cf,t,e);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){let t=this.coordinateSystem,e=this.children.concat(),[n,r,o,s,a,c]=e;for(let l of e)this.remove(l);if(t===Da)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),o.up.set(0,0,-1),o.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(t===F0)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),o.up.set(0,0,1),o.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);for(let l of e)this.add(l),l.updateMatrixWorld()}update(t,e){this.parent===null&&this.updateMatrixWorld();let{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());let[o,s,a,c,l,d]=this.children,u=t.getRenderTarget(),h=t.getActiveCubeFace(),m=t.getActiveMipmapLevel(),p=t.xr.enabled;t.xr.enabled=!1;let _=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0,r),t.render(e,o),t.setRenderTarget(n,1,r),t.render(e,s),t.setRenderTarget(n,2,r),t.render(e,a),t.setRenderTarget(n,3,r),t.render(e,c),t.setRenderTarget(n,4,r),t.render(e,l),n.texture.generateMipmaps=_,t.setRenderTarget(n,5,r),t.render(e,d),t.setRenderTarget(u,h,m),t.xr.enabled=p,n.texture.needsPMREMUpdate=!0}},H0=class extends Mc{constructor(t=[],e=tu,n,r,o,s,a,c,l,d){super(t,e,n,r,o,s,a,c,l,d),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}},j0=class extends ys{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;let n={width:t,height:t,depth:1},r=[n,n,n,n,n,n];this.texture=new H0(r),this._setTextureOptions(e),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;let n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new qi(5,5,5),o=new xs({name:"CubemapFromEquirect",uniforms:Hh(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Ro,blending:xc});o.uniforms.tEquirect.value=e;let s=new ze(r,o),a=e.minFilter;return e.minFilter===iu&&(e.minFilter=Yn),new pC(1,10,this).update(t,s),e.minFilter=a,s.geometry.dispose(),s.material.dispose(),this}clear(t,e=!0,n=!0,r=!0){let o=t.getRenderTarget();for(let s=0;s<6;s++)t.setRenderTarget(this,s),t.clear(e,n,r);t.setRenderTarget(o)}},gc=class extends No{constructor(){super(),this.isGroup=!0,this.type="Group"}},fwe={type:"move"},_f=class{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new gc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new gc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new gc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){let e=this._hand;if(e)for(let n of t.hand.values())this._getHandJoint(e,n)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,e,n){let r=null,o=null,s=null,a=this._targetRay,c=this._grip,l=this._hand;if(t&&e.session.visibilityState!=="visible-blurred"){if(l&&t.hand){s=!0;for(let _ of t.hand.values()){let f=e.getJointPose(_,n),g=this._getHandJoint(l,_);f!==null&&(g.matrix.fromArray(f.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.matrixWorldNeedsUpdate=!0,g.jointRadius=f.radius),g.visible=f!==null}let d=l.joints["index-finger-tip"],u=l.joints["thumb-tip"],h=d.position.distanceTo(u.position),m=.02,p=.005;l.inputState.pinching&&h>m+p?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&h<=m-p&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else c!==null&&t.gripSpace&&(o=e.getPose(t.gripSpace,n),o!==null&&(c.matrix.fromArray(o.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,o.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(o.linearVelocity)):c.hasLinearVelocity=!1,o.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(o.angularVelocity)):c.hasAngularVelocity=!1));a!==null&&(r=e.getPose(t.targetRaySpace,n),r===null&&o!==null&&(r=o),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(fwe)))}return a!==null&&(a.visible=r!==null),c!==null&&(c.visible=o!==null),l!==null&&(l.visible=s!==null),this}_getHandJoint(t,e){if(t.joints[e.jointName]===void 0){let n=new gc;n.matrixAutoUpdate=!1,n.visible=!1,t.joints[e.jointName]=n,t.add(n)}return t.joints[e.jointName]}};var $0=class extends No{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new yc,this.environmentIntensity=1,this.environmentRotation=new yc,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){let e=super.toJSON(t);return this.fog!==null&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}};var fC=class extends Mc{constructor(t=null,e=1,n=1,r,o,s,a,c,l=Br,d=Br,u,h){super(null,s,a,c,l,d,r,o,u,h),this.isDataTexture=!0,this.image={data:t,width:e,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}};var mL=new j,gwe=new j,_we=new mi,Ws=class{constructor(t=new j(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){let r=mL.subVectors(n,e).cross(gwe.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){let t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){let n=t.delta(mL),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(t.start)===0?e.copy(t.start):null;let o=-(t.start.dot(this.normal)+this.constant)/r;return o<0||o>1?null:e.copy(t.start).addScaledVector(n,o)}intersectsLine(t){let e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){let n=e||_we.getNormalMatrix(t),r=this.coplanarPoint(mL).applyMatrix4(t),o=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(o),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}},kh=new Rh,bwe=new Ht(.5,.5),QM=new j,bf=class{constructor(t=new Ws,e=new Ws,n=new Ws,r=new Ws,o=new Ws,s=new Ws){this.planes=[t,e,n,r,o,s]}set(t,e,n,r,o,s){let a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(o),a[5].copy(s),this}copy(t){let e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t,e=Da,n=!1){let r=this.planes,o=t.elements,s=o[0],a=o[1],c=o[2],l=o[3],d=o[4],u=o[5],h=o[6],m=o[7],p=o[8],_=o[9],f=o[10],g=o[11],S=o[12],C=o[13],E=o[14],N=o[15];if(r[0].setComponents(l-s,m-d,g-p,N-S).normalize(),r[1].setComponents(l+s,m+d,g+p,N+S).normalize(),r[2].setComponents(l+a,m+u,g+_,N+C).normalize(),r[3].setComponents(l-a,m-u,g-_,N-C).normalize(),n)r[4].setComponents(c,h,f,E).normalize(),r[5].setComponents(l-c,m-h,g-f,N-E).normalize();else if(r[4].setComponents(l-c,m-h,g-f,N-E).normalize(),e===Da)r[5].setComponents(l+c,m+h,g+f,N+E).normalize();else if(e===F0)r[5].setComponents(c,h,f,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);return this}intersectsObject(t){if(t.boundingSphere!==void 0)t.boundingSphere===null&&t.computeBoundingSphere(),kh.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{let e=t.geometry;e.boundingSphere===null&&e.computeBoundingSphere(),kh.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(kh)}intersectsSprite(t){kh.center.set(0,0,0);let e=bwe.distanceTo(t.center);return kh.radius=.7071067811865476+e,kh.applyMatrix4(t.matrixWorld),this.intersectsSphere(kh)}intersectsSphere(t){let e=this.planes,n=t.center,r=-t.radius;for(let o=0;o<6;o++)if(e[o].distanceToPoint(n)<r)return!1;return!0}intersectsBox(t){let e=this.planes;for(let n=0;n<6;n++){let r=e[n];if(QM.x=r.normal.x>0?t.max.x:t.min.x,QM.y=r.normal.y>0?t.max.y:t.min.y,QM.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint(QM)<0)return!1}return!0}containsPoint(t){let e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}};var Al=class extends kl{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ci(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}},gC=new j,_C=new j,hY=new vn,P0=new Xd,JM=new Rh,pL=new j,mY=new j,ws=class extends No{constructor(t=new gr,e=new Al){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,n=[0];for(let r=1,o=e.count;r<o;r++)gC.fromBufferAttribute(e,r-1),_C.fromBufferAttribute(e,r),n[r]=n[r-1],n[r]+=gC.distanceTo(_C);t.setAttribute("lineDistance",new Hi(n,1))}else Ut("Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){let n=this.geometry,r=this.matrixWorld,o=t.params.Line.threshold,s=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),JM.copy(n.boundingSphere),JM.applyMatrix4(r),JM.radius+=o,t.ray.intersectsSphere(JM)===!1)return;hY.copy(r).invert(),P0.copy(t.ray).applyMatrix4(hY);let a=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=a*a,l=this.isLineSegments?2:1,d=n.index,h=n.attributes.position;if(d!==null){let m=Math.max(0,s.start),p=Math.min(d.count,s.start+s.count);for(let _=m,f=p-1;_<f;_+=l){let g=d.getX(_),S=d.getX(_+1),C=eC(this,t,P0,c,g,S,_);C&&e.push(C)}if(this.isLineLoop){let _=d.getX(p-1),f=d.getX(m),g=eC(this,t,P0,c,_,f,p-1);g&&e.push(g)}}else{let m=Math.max(0,s.start),p=Math.min(h.count,s.start+s.count);for(let _=m,f=p-1;_<f;_+=l){let g=eC(this,t,P0,c,_,_+1,_);g&&e.push(g)}if(this.isLineLoop){let _=eC(this,t,P0,c,p-1,m,p-1);_&&e.push(_)}}}updateMorphTargets(){let e=this.geometry.morphAttributes,n=Object.keys(e);if(n.length>0){let r=e[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let o=0,s=r.length;o<s;o++){let a=r[o].name||String(o);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=o}}}}};function eC(i,t,e,n,r,o,s){let a=i.geometry.attributes.position;if(gC.fromBufferAttribute(a,r),_C.fromBufferAttribute(a,o),e.distanceSqToSegment(gC,_C,pL,mY)>n)return;pL.applyMatrix4(i.matrixWorld);let l=t.ray.origin.distanceTo(pL);if(!(l<t.near||l>t.far))return{distance:l,point:mY.clone().applyMatrix4(i.matrixWorld),index:s,face:null,faceIndex:null,barycoord:null,object:i}}var pY=new j,fY=new j,vf=class extends ws{constructor(t,e){super(t,e),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){let t=this.geometry;if(t.index===null){let e=t.attributes.position,n=[];for(let r=0,o=e.count;r<o;r+=2)pY.fromBufferAttribute(e,r),fY.fromBufferAttribute(e,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+pY.distanceTo(fY);t.setAttribute("lineDistance",new Hi(n,1))}else Ut("LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}};var Fh=class extends Mc{constructor(t,e,n,r,o,s,a,c,l){super(t,e,n,r,o,s,a,c,l),this.isCanvasTexture=!0,this.needsUpdate=!0}},Yd=class extends Mc{constructor(t,e,n=Pa,r,o,s,a=Br,c=Br,l,d=_c,u=1){if(d!==_c&&d!==nu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");let h={width:t,height:e,depth:u};super(h,r,o,s,a,c,d,n,l),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.source=new ff(Object.assign({},t.image)),this.compareFunction=t.compareFunction,this}toJSON(t){let e=super.toJSON(t);return this.compareFunction!==null&&(e.compareFunction=this.compareFunction),e}},bC=class extends Yd{constructor(t,e=Pa,n=tu,r,o,s=Br,a=Br,c,l=_c){let d={width:t,height:t,depth:1},u=[d,d,d,d,d,d];super(t,t,e,n,r,o,s,a,c,l),this.image=u,this.isCubeDepthTexture=!0,this.isCubeTexture=!0}get images(){return this.image}set images(t){this.image=t}},G0=class extends Mc{constructor(t=null){super(),this.sourceTexture=t,this.isExternalTexture=!0}copy(t){return super.copy(t),this.sourceTexture=t.sourceTexture,this}};var _r=class i extends gr{constructor(t=1,e=1,n=1,r=32,o=1,s=!1,a=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:r,heightSegments:o,openEnded:s,thetaStart:a,thetaLength:c};let l=this;r=Math.floor(r),o=Math.floor(o);let d=[],u=[],h=[],m=[],p=0,_=[],f=n/2,g=0;S(),s===!1&&(t>0&&C(!0),e>0&&C(!1)),this.setIndex(d),this.setAttribute("position",new Hi(u,3)),this.setAttribute("normal",new Hi(h,3)),this.setAttribute("uv",new Hi(m,2));function S(){let E=new j,N=new j,R=0,B=(e-t)/n;for(let z=0;z<=o;z++){let T=[],O=z/o,U=O*(e-t)+t;for(let X=0;X<=r;X++){let ee=X/r,de=ee*c+a,se=Math.sin(de),ue=Math.cos(de);N.x=U*se,N.y=-O*n+f,N.z=U*ue,u.push(N.x,N.y,N.z),E.set(se,B,ue).normalize(),h.push(E.x,E.y,E.z),m.push(ee,1-O),T.push(p++)}_.push(T)}for(let z=0;z<r;z++)for(let T=0;T<o;T++){let O=_[T][z],U=_[T+1][z],X=_[T+1][z+1],ee=_[T][z+1];(t>0||T!==0)&&(d.push(O,U,ee),R+=3),(e>0||T!==o-1)&&(d.push(U,X,ee),R+=3)}l.addGroup(g,R,0),g+=R}function C(E){let N=p,R=new Ht,B=new j,z=0,T=E===!0?t:e,O=E===!0?1:-1;for(let X=1;X<=r;X++)u.push(0,f*O,0),h.push(0,O,0),m.push(.5,.5),p++;let U=p;for(let X=0;X<=r;X++){let de=X/r*c+a,se=Math.cos(de),ue=Math.sin(de);B.x=T*ue,B.y=f*O,B.z=T*se,u.push(B.x,B.y,B.z),h.push(0,O,0),R.x=se*.5+.5,R.y=ue*.5*O+.5,m.push(R.x,R.y),p++}for(let X=0;X<r;X++){let ee=N+X,de=U+X;E===!0?d.push(de,de+1,ee):d.push(de+1,de,ee),z+=3}l.addGroup(g,z,E===!0?1:2),g+=z}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new i(t.radiusTop,t.radiusBottom,t.height,t.radialSegments,t.heightSegments,t.openEnded,t.thetaStart,t.thetaLength)}};var vC=class i extends gr{constructor(t=[],e=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:r};let o=[],s=[];a(r),l(n),d(),this.setAttribute("position",new Hi(o,3)),this.setAttribute("normal",new Hi(o.slice(),3)),this.setAttribute("uv",new Hi(s,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){let C=new j,E=new j,N=new j;for(let R=0;R<e.length;R+=3)m(e[R+0],C),m(e[R+1],E),m(e[R+2],N),c(C,E,N,S)}function c(S,C,E,N){let R=N+1,B=[];for(let z=0;z<=R;z++){B[z]=[];let T=S.clone().lerp(E,z/R),O=C.clone().lerp(E,z/R),U=R-z;for(let X=0;X<=U;X++)X===0&&z===R?B[z][X]=T:B[z][X]=T.clone().lerp(O,X/U)}for(let z=0;z<R;z++)for(let T=0;T<2*(R-z)-1;T++){let O=Math.floor(T/2);T%2===0?(h(B[z][O+1]),h(B[z+1][O]),h(B[z][O])):(h(B[z][O+1]),h(B[z+1][O+1]),h(B[z+1][O]))}}function l(S){let C=new j;for(let E=0;E<o.length;E+=3)C.x=o[E+0],C.y=o[E+1],C.z=o[E+2],C.normalize().multiplyScalar(S),o[E+0]=C.x,o[E+1]=C.y,o[E+2]=C.z}function d(){let S=new j;for(let C=0;C<o.length;C+=3){S.x=o[C+0],S.y=o[C+1],S.z=o[C+2];let E=f(S)/2/Math.PI+.5,N=g(S)/Math.PI+.5;s.push(E,1-N)}p(),u()}function u(){for(let S=0;S<s.length;S+=6){let C=s[S+0],E=s[S+2],N=s[S+4],R=Math.max(C,E,N),B=Math.min(C,E,N);R>.9&&B<.1&&(C<.2&&(s[S+0]+=1),E<.2&&(s[S+2]+=1),N<.2&&(s[S+4]+=1))}}function h(S){o.push(S.x,S.y,S.z)}function m(S,C){let E=S*3;C.x=t[E+0],C.y=t[E+1],C.z=t[E+2]}function p(){let S=new j,C=new j,E=new j,N=new j,R=new Ht,B=new Ht,z=new Ht;for(let T=0,O=0;T<o.length;T+=9,O+=6){S.set(o[T+0],o[T+1],o[T+2]),C.set(o[T+3],o[T+4],o[T+5]),E.set(o[T+6],o[T+7],o[T+8]),R.set(s[O+0],s[O+1]),B.set(s[O+2],s[O+3]),z.set(s[O+4],s[O+5]),N.copy(S).add(C).add(E).divideScalar(3);let U=f(N);_(R,O+0,S,U),_(B,O+2,C,U),_(z,O+4,E,U)}}function _(S,C,E,N){N<0&&S.x===1&&(s[C]=S.x-1),E.x===0&&E.z===0&&(s[C]=N/2/Math.PI+.5)}function f(S){return Math.atan2(S.z,-S.x)}function g(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new i(t.vertices,t.indices,t.radius,t.detail)}};var tC=new j,iC=new j,fL=new j,nC=new Tl,W0=class extends gr{constructor(t=null,e=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:t,thresholdAngle:e},t!==null){let r=Math.pow(10,4),o=Math.cos(df*e),s=t.getIndex(),a=t.getAttribute("position"),c=s?s.count:a.count,l=[0,0,0],d=["a","b","c"],u=new Array(3),h={},m=[];for(let p=0;p<c;p+=3){s?(l[0]=s.getX(p),l[1]=s.getX(p+1),l[2]=s.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);let{a:_,b:f,c:g}=nC;if(_.fromBufferAttribute(a,l[0]),f.fromBufferAttribute(a,l[1]),g.fromBufferAttribute(a,l[2]),nC.getNormal(fL),u[0]=`${Math.round(_.x*r)},${Math.round(_.y*r)},${Math.round(_.z*r)}`,u[1]=`${Math.round(f.x*r)},${Math.round(f.y*r)},${Math.round(f.z*r)}`,u[2]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,!(u[0]===u[1]||u[1]===u[2]||u[2]===u[0]))for(let S=0;S<3;S++){let C=(S+1)%3,E=u[S],N=u[C],R=nC[d[S]],B=nC[d[C]],z=`${E}_${N}`,T=`${N}_${E}`;T in h&&h[T]?(fL.dot(h[T].normal)<=o&&(m.push(R.x,R.y,R.z),m.push(B.x,B.y,B.z)),h[T]=null):z in h||(h[z]={index0:l[S],index1:l[C],normal:fL.clone()})}}for(let p in h)if(h[p]){let{index0:_,index1:f}=h[p];tC.fromBufferAttribute(a,_),iC.fromBufferAttribute(a,f),m.push(tC.x,tC.y,tC.z),m.push(iC.x,iC.y,iC.z)}this.setAttribute("position",new Hi(m,3))}}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}};var Zd=class i extends vC{constructor(t=1,e=0){let n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}static fromJSON(t){return new i(t.radius,t.detail)}},Ms=class i extends gr{constructor(t=1,e=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:r};let o=t/2,s=e/2,a=Math.floor(n),c=Math.floor(r),l=a+1,d=c+1,u=t/a,h=e/c,m=[],p=[],_=[],f=[];for(let g=0;g<d;g++){let S=g*h-s;for(let C=0;C<l;C++){let E=C*u-o;p.push(E,-S,0),_.push(0,0,1),f.push(C/a),f.push(1-g/c)}}for(let g=0;g<c;g++)for(let S=0;S<a;S++){let C=S+l*g,E=S+l*(g+1),N=S+1+l*(g+1),R=S+1+l*g;m.push(C,E,R),m.push(E,N,R)}this.setIndex(m),this.setAttribute("position",new Hi(p,3)),this.setAttribute("normal",new Hi(_,3)),this.setAttribute("uv",new Hi(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new i(t.width,t.height,t.widthSegments,t.heightSegments)}};var q0=class i extends gr{constructor(t=1,e=32,n=16,r=0,o=Math.PI*2,s=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:r,phiLength:o,thetaStart:s,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));let c=Math.min(s+a,Math.PI),l=0,d=[],u=new j,h=new j,m=[],p=[],_=[],f=[];for(let g=0;g<=n;g++){let S=[],C=g/n,E=0;g===0&&s===0?E=.5/e:g===n&&c===Math.PI&&(E=-.5/e);for(let N=0;N<=e;N++){let R=N/e;u.x=-t*Math.cos(r+R*o)*Math.sin(s+C*a),u.y=t*Math.cos(s+C*a),u.z=t*Math.sin(r+R*o)*Math.sin(s+C*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),_.push(h.x,h.y,h.z),f.push(R+E,1-C),S.push(l++)}d.push(S)}for(let g=0;g<n;g++)for(let S=0;S<e;S++){let C=d[g][S+1],E=d[g][S],N=d[g+1][S],R=d[g+1][S+1];(g!==0||s>0)&&m.push(C,E,R),(g!==n-1||c<Math.PI)&&m.push(E,N,R)}this.setIndex(m),this.setAttribute("position",new Hi(p,3)),this.setAttribute("normal",new Hi(_,3)),this.setAttribute("uv",new Hi(f,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new i(t.radius,t.widthSegments,t.heightSegments,t.phiStart,t.phiLength,t.thetaStart,t.thetaLength)}};var Pl=class i extends gr{constructor(t=1,e=.4,n=12,r=48,o=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:r,arc:o},n=Math.floor(n),r=Math.floor(r);let s=[],a=[],c=[],l=[],d=new j,u=new j,h=new j;for(let m=0;m<=n;m++)for(let p=0;p<=r;p++){let _=p/r*o,f=m/n*Math.PI*2;u.x=(t+e*Math.cos(f))*Math.cos(_),u.y=(t+e*Math.cos(f))*Math.sin(_),u.z=e*Math.sin(f),a.push(u.x,u.y,u.z),d.x=t*Math.cos(_),d.y=t*Math.sin(_),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(p/r),l.push(m/n)}for(let m=1;m<=n;m++)for(let p=1;p<=r;p++){let _=(r+1)*m+p-1,f=(r+1)*(m-1)+p-1,g=(r+1)*(m-1)+p,S=(r+1)*m+p;s.push(_,f,S),s.push(f,g,S)}this.setIndex(s),this.setAttribute("position",new Hi(a,3)),this.setAttribute("normal",new Hi(c,3)),this.setAttribute("uv",new Hi(l,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new i(t.radius,t.tube,t.radialSegments,t.tubularSegments,t.arc)}};var yC=class extends xs{constructor(t){super(t),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}},ka=class extends kl{constructor(t){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Ci(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ci(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=WL,this.normalScale=new Ht(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yc,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}};var xC=class extends kl{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=$Y,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}},wC=class extends kl{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}};function rC(i,t){return!i||i.constructor===t?i:typeof t.BYTES_PER_ELEMENT=="number"?new t(i):Array.prototype.slice.call(i)}var Lh=class{constructor(t,e,n,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new e.constructor(n),this.sampleValues=e,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(t){let e=this.parameterPositions,n=this._cachedIndex,r=e[n],o=e[n-1];e:{t:{let s;i:{n:if(!(t<r)){for(let a=n+2;;){if(r===void 0){if(t<o)break n;return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(o=r,r=e[++n],t<r)break t}s=e.length;break i}if(!(t>=o)){let a=e[1];t<a&&(n=2,o=a);for(let c=n-2;;){if(o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===c)break;if(r=o,o=e[--n-1],t>=o)break t}s=n,n=0;break i}break e}for(;n<s;){let a=n+s>>>1;t<e[a]?s=a:n=a+1}if(r=e[n],o=e[n-1],o===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=e.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,o,r)}return this.interpolate_(n,o,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){let e=this.resultBuffer,n=this.sampleValues,r=this.valueSize,o=t*r;for(let s=0;s!==r;++s)e[s]=n[o+s];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}},MC=class extends Lh{constructor(t,e,n,r){super(t,e,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:bL,endingEnd:bL}}intervalChanged_(t,e,n){let r=this.parameterPositions,o=t-2,s=t+1,a=r[o],c=r[s];if(a===void 0)switch(this.getSettings_().endingStart){case vL:o=t,a=2*e-n;break;case yL:o=r.length-2,a=e+r[o]-r[o+1];break;default:o=t,a=n}if(c===void 0)switch(this.getSettings_().endingEnd){case vL:s=t,c=2*n-e;break;case yL:s=1,c=n+r[1]-r[0];break;default:s=t-1,c=e}let l=(n-e)*.5,d=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(c-n),this._offsetPrev=o*d,this._offsetNext=s*d}interpolate_(t,e,n,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=t*a,l=c-a,d=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,m=this._weightNext,p=(n-e)/(r-e),_=p*p,f=_*p,g=-h*f+2*h*_-h*p,S=(1+h)*f+(-1.5-2*h)*_+(-.5+h)*p+1,C=(-1-m)*f+(1.5+m)*_+.5*p,E=m*f-m*_;for(let N=0;N!==a;++N)o[N]=g*s[d+N]+S*s[l+N]+C*s[c+N]+E*s[u+N];return o}},CC=class extends Lh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=t*a,l=c-a,d=(n-e)/(r-e),u=1-d;for(let h=0;h!==a;++h)o[h]=s[l+h]*u+s[c+h]*d;return o}},SC=class extends Lh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t){return this.copySampleValue_(t-1)}},Cs=class{constructor(t,e,n,r){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(e===void 0||e.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=rC(e,this.TimeBufferType),this.values=rC(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){let e=t.constructor,n;if(e.toJSON!==this.toJSON)n=e.toJSON(t);else{n={name:t.name,times:rC(t.times,Array),values:rC(t.values,Array)};let r=t.getInterpolation();r!==t.DefaultInterpolation&&(n.interpolation=r)}return n.type=t.ValueTypeName,n}InterpolantFactoryMethodDiscrete(t){return new SC(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new CC(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new MC(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case N0:e=this.InterpolantFactoryMethodDiscrete;break;case dC:e=this.InterpolantFactoryMethodLinear;break;case oC:e=this.InterpolantFactoryMethodSmooth;break}if(e===void 0){let n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return Ut("KeyframeTrack:",n),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return N0;case this.InterpolantFactoryMethodLinear:return dC;case this.InterpolantFactoryMethodSmooth:return oC}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){let e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]+=t}return this}scale(t){if(t!==1){let e=this.times;for(let n=0,r=e.length;n!==r;++n)e[n]*=t}return this}trim(t,e){let n=this.times,r=n.length,o=0,s=r-1;for(;o!==r&&n[o]<t;)++o;for(;s!==-1&&n[s]>e;)--s;if(++s,o!==0||s!==r){o>=s&&(s=Math.max(s,1),o=s-1);let a=this.getValueSize();this.times=n.slice(o,s),this.values=this.values.slice(o*a,s*a)}return this}validate(){let t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(jt("KeyframeTrack: Invalid value size in track.",this),t=!1);let n=this.times,r=this.values,o=n.length;o===0&&(jt("KeyframeTrack: Track is empty.",this),t=!1);let s=null;for(let a=0;a!==o;a++){let c=n[a];if(typeof c=="number"&&isNaN(c)){jt("KeyframeTrack: Time is not a valid number.",this,a,c),t=!1;break}if(s!==null&&s>c){jt("KeyframeTrack: Out of order keys.",this,a,c,s),t=!1;break}s=c}if(r!==void 0&&Rxe(r))for(let a=0,c=r.length;a!==c;++a){let l=r[a];if(isNaN(l)){jt("KeyframeTrack: Value is not a valid number.",this,a,l),t=!1;break}}return t}optimize(){let t=this.times.slice(),e=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===oC,o=t.length-1,s=1;for(let a=1;a<o;++a){let c=!1,l=t[a],d=t[a+1];if(l!==d&&(a!==1||l!==t[0]))if(r)c=!0;else{let u=a*n,h=u-n,m=u+n;for(let p=0;p!==n;++p){let _=e[u+p];if(_!==e[h+p]||_!==e[m+p]){c=!0;break}}}if(c){if(a!==s){t[s]=t[a];let u=a*n,h=s*n;for(let m=0;m!==n;++m)e[h+m]=e[u+m]}++s}}if(o>0){t[s]=t[o];for(let a=o*n,c=s*n,l=0;l!==n;++l)e[c+l]=e[a+l];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*n)):(this.times=t,this.values=e),this}clone(){let t=this.times.slice(),e=this.values.slice(),n=this.constructor,r=new n(this.name,t,e);return r.createInterpolant=this.createInterpolant,r}};Cs.prototype.ValueTypeName="";Cs.prototype.TimeBufferType=Float32Array;Cs.prototype.ValueBufferType=Float32Array;Cs.prototype.DefaultInterpolation=dC;var Kd=class extends Cs{constructor(t,e,n){super(t,e,n)}};Kd.prototype.ValueTypeName="bool";Kd.prototype.ValueBufferType=Array;Kd.prototype.DefaultInterpolation=N0;Kd.prototype.InterpolantFactoryMethodLinear=void 0;Kd.prototype.InterpolantFactoryMethodSmooth=void 0;var EC=class extends Cs{constructor(t,e,n,r){super(t,e,n,r)}};EC.prototype.ValueTypeName="color";var TC=class extends Cs{constructor(t,e,n,r){super(t,e,n,r)}};TC.prototype.ValueTypeName="number";var IC=class extends Lh{constructor(t,e,n,r){super(t,e,n,r)}interpolate_(t,e,n,r){let o=this.resultBuffer,s=this.sampleValues,a=this.valueSize,c=(n-e)/(r-e),l=t*a;for(let d=l+a;l!==d;l+=4)Vn.slerpFlat(o,0,s,l-a,s,l,c);return o}},X0=class extends Cs{constructor(t,e,n,r){super(t,e,n,r)}InterpolantFactoryMethodLinear(t){return new IC(this.times,this.values,this.getValueSize(),t)}};X0.prototype.ValueTypeName="quaternion";X0.prototype.InterpolantFactoryMethodSmooth=void 0;var Qd=class extends Cs{constructor(t,e,n){super(t,e,n)}};Qd.prototype.ValueTypeName="string";Qd.prototype.ValueBufferType=Array;Qd.prototype.DefaultInterpolation=N0;Qd.prototype.InterpolantFactoryMethodLinear=void 0;Qd.prototype.InterpolantFactoryMethodSmooth=void 0;var DC=class extends Cs{constructor(t,e,n,r){super(t,e,n,r)}};DC.prototype.ValueTypeName="vector";var Y0=class extends No{constructor(t,e=1){super(),this.isLight=!0,this.type="Light",this.color=new Ci(t),this.intensity=e}dispose(){this.dispatchEvent({type:"dispose"})}copy(t,e){return super.copy(t,e),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){let e=super.toJSON(t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,e}};var gL=new vn,gY=new j,_Y=new j,ML=class{constructor(t){this.camera=t,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ht(512,512),this.mapType=ts,this.map=null,this.mapPass=null,this.matrix=new vn,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new bf,this._frameExtents=new Ht(1,1),this._viewportCount=1,this._viewports=[new Un(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){let e=this.camera,n=this.matrix;gY.setFromMatrixPosition(t.matrixWorld),e.position.copy(gY),_Y.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(_Y),e.updateMatrixWorld(),gL.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(gL,e.coordinateSystem,e.reversedDepth),e.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(gL)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.intensity=t.intensity,this.bias=t.bias,this.radius=t.radius,this.autoUpdate=t.autoUpdate,this.needsUpdate=t.needsUpdate,this.normalBias=t.normalBias,this.blurSamples=t.blurSamples,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){let t={};return this.intensity!==1&&(t.intensity=this.intensity),this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}};var yf=class extends z0{constructor(t=-1,e=1,n=1,r=-1,o=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=r,this.near=o,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,e,n,r,o,s){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=r,this.view.width=o,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){let t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2,o=n-t,s=n+t,a=r+e,c=r-e;if(this.view!==null&&this.view.enabled){let l=(this.right-this.left)/this.view.fullWidth/this.zoom,d=(this.top-this.bottom)/this.view.fullHeight/this.zoom;o+=l*this.view.offsetX,s=o+l*this.view.width,a-=d*this.view.offsetY,c=a-d*this.view.height}this.projectionMatrix.makeOrthographic(o,s,a,c,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){let e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,this.view!==null&&(e.object.view=Object.assign({},this.view)),e}},CL=class extends ML{constructor(){super(new yf(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}},Z0=class extends Y0{constructor(t,e){super(t,e),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(No.DEFAULT_UP),this.updateMatrix(),this.target=new No,this.shadow=new CL}dispose(){super.dispose(),this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}toJSON(t){let e=super.toJSON(t);return e.object.shadow=this.shadow.toJSON(),e.object.target=this.target.uuid,e}},K0=class extends Y0{constructor(t,e){super(t,e),this.isAmbientLight=!0,this.type="AmbientLight"}};var kC=class extends mo{constructor(t=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=t}};var JL="\\[\\]\\.:\\/",vwe=new RegExp("["+JL+"]","g"),e3="[^"+JL+"]",ywe="[^"+JL.replace("\\.","")+"]",xwe=/((?:WC+[\/:])*)/.source.replace("WC",e3),wwe=/(WCOD+)?/.source.replace("WCOD",ywe),Mwe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",e3),Cwe=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",e3),Swe=new RegExp("^"+xwe+wwe+Mwe+Cwe+"$"),Ewe=["material","materials","bones","map"],SL=class{constructor(t,e,n){let r=n||Xn.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();let n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(t,e)}setValue(t,e){let n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,o=n.length;r!==o;++r)n[r].setValue(t,e)}bind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()}unbind(){let t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}},Xn=(()=>{class i{constructor(e,n,r){this.path=n,this.parsedPath=r||i.parseTrackName(n),this.node=i.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,n,r){return e&&e.isAnimationObjectGroup?new i.Composite(e,n,r):new i(e,n,r)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(vwe,"")}static parseTrackName(e){let n=Swe.exec(e);if(n===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);let r={nodeName:n[2],objectName:n[3],objectIndex:n[4],propertyName:n[5],propertyIndex:n[6]},o=r.nodeName&&r.nodeName.lastIndexOf(".");if(o!==void 0&&o!==-1){let s=r.nodeName.substring(o+1);Ewe.indexOf(s)!==-1&&(r.nodeName=r.nodeName.substring(0,o),r.objectName=s)}if(r.propertyName===null||r.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return r}static findNode(e,n){if(n===void 0||n===""||n==="."||n===-1||n===e.name||n===e.uuid)return e;if(e.skeleton){let r=e.skeleton.getBoneByName(n);if(r!==void 0)return r}if(e.children){let r=function(s){for(let a=0;a<s.length;a++){let c=s[a];if(c.name===n||c.uuid===n)return c;let l=r(c.children);if(l)return l}return null},o=r(e.children);if(o)return o}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,n){e[n]=this.targetObject[this.propertyName]}_getValue_array(e,n){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)e[n++]=r[o]}_getValue_arrayElement(e,n){e[n]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,n){this.resolvedProperty.toArray(e,n)}_setValue_direct(e,n){this.targetObject[this.propertyName]=e[n]}_setValue_direct_setNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,n){this.targetObject[this.propertyName]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,n){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[n++]}_setValue_array_setNeedsUpdate(e,n){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[n++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,n){let r=this.resolvedProperty;for(let o=0,s=r.length;o!==s;++o)r[o]=e[n++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,n){this.resolvedProperty[this.propertyIndex]=e[n]}_setValue_arrayElement_setNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty[this.propertyIndex]=e[n],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,n){this.resolvedProperty.fromArray(e,n)}_setValue_fromArray_setNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,n){this.resolvedProperty.fromArray(e,n),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,n){this.bind(),this.getValue(e,n)}_setValue_unbound(e,n){this.bind(),this.setValue(e,n)}bind(){let e=this.node,n=this.parsedPath,r=n.objectName,o=n.propertyName,s=n.propertyIndex;if(e||(e=i.findNode(this.rootNode,n.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){Ut("PropertyBinding: No target node found for track: "+this.path+".");return}if(r){let d=n.objectIndex;switch(r){case"materials":if(!e.material){jt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){jt("PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){jt("PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===d){d=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){jt("PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){jt("PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[r]===void 0){jt("PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[r]}if(d!==void 0){if(e[d]===void 0){jt("PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[d]}}let a=e[o];if(a===void 0){let d=n.nodeName;jt("PropertyBinding: Trying to update property for track: "+d+"."+o+" but it wasn't found.",e);return}let c=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?c=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(c=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(o==="morphTargetInfluences"){if(!e.geometry){jt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){jt("PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(l=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=o;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][c]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}return i.Composite=SL,i})();Xn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Xn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Xn.prototype.GetterByBindingType=[Xn.prototype._getValue_direct,Xn.prototype._getValue_array,Xn.prototype._getValue_arrayElement,Xn.prototype._getValue_toArray];Xn.prototype.SetterByBindingTypeAndVersioning=[[Xn.prototype._setValue_direct,Xn.prototype._setValue_direct_setNeedsUpdate,Xn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_array,Xn.prototype._setValue_array_setNeedsUpdate,Xn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_arrayElement,Xn.prototype._setValue_arrayElement_setNeedsUpdate,Xn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Xn.prototype._setValue_fromArray,Xn.prototype._setValue_fromArray_setNeedsUpdate,Xn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var xxt=new Float32Array(1);var bY=new vn,Bh=class{constructor(t,e,n=0,r=1/0){this.ray=new Xd(t,e),this.near=n,this.far=r,this.camera=null,this.layers=new gf,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):jt("Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return bY.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(bY),this}intersectObject(t,e=!0,n=[]){return EL(t,this,n,e),n.sort(vY),n}intersectObjects(t,e=!0,n=[]){for(let r=0,o=t.length;r<o;r++)EL(t[r],this,n,e);return n.sort(vY),n}};function vY(i,t){return i.distance-t.distance}function EL(i,t,e,n){let r=!0;if(i.layers.test(t.layers)&&i.raycast(t,e)===!1&&(r=!1),r===!0&&n===!0){let o=i.children;for(let s=0,a=o.length;s<a;s++)EL(o[s],t,e,!0)}}var xf=class{constructor(t=1,e=0,n=0){this.radius=t,this.phi=e,this.theta=n}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){return this.phi=Di(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Di(e/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}};var Q0=class extends vf{constructor(t=10,e=10,n=4473924,r=8947848){n=new Ci(n),r=new Ci(r);let o=e/2,s=t/e,a=t/2,c=[],l=[];for(let h=0,m=0,p=-a;h<=e;h++,p+=s){c.push(-a,0,p,a,0,p),c.push(p,0,-a,p,0,a);let _=h===o?n:r;_.toArray(l,m),m+=3,_.toArray(l,m),m+=3,_.toArray(l,m),m+=3,_.toArray(l,m),m+=3}let d=new gr;d.setAttribute("position",new Hi(c,3)),d.setAttribute("color",new Hi(l,3));let u=new Al({vertexColors:!0,toneMapped:!1});super(d,u),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}};var Vh=class extends bc{constructor(t,e=null){super(),this.object=t,this.domElement=e,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(t){if(t===void 0){Ut("Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=t}disconnect(){}dispose(){}update(){}};function t3(i,t,e,n){let r=Twe(n);switch(e){case jL:return i*t;case GL:return i*t/r.components*r.byteLength;case GC:return i*t/r.components*r.byteLength;case zh:return i*t*2/r.components*r.byteLength;case WC:return i*t*2/r.components*r.byteLength;case $L:return i*t*3/r.components*r.byteLength;case Xs:return i*t*4/r.components*r.byteLength;case qC:return i*t*4/r.components*r.byteLength;case ib:case nb:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case rb:case ob:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case YC:case KC:return Math.max(i,16)*Math.max(t,8)/4;case XC:case ZC:return Math.max(i,8)*Math.max(t,8)/2;case QC:case JC:case tS:case iS:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*8;case eS:case nS:case rS:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case oS:return Math.floor((i+3)/4)*Math.floor((t+3)/4)*16;case sS:return Math.floor((i+4)/5)*Math.floor((t+3)/4)*16;case aS:return Math.floor((i+4)/5)*Math.floor((t+4)/5)*16;case cS:return Math.floor((i+5)/6)*Math.floor((t+4)/5)*16;case lS:return Math.floor((i+5)/6)*Math.floor((t+5)/6)*16;case dS:return Math.floor((i+7)/8)*Math.floor((t+4)/5)*16;case uS:return Math.floor((i+7)/8)*Math.floor((t+5)/6)*16;case hS:return Math.floor((i+7)/8)*Math.floor((t+7)/8)*16;case mS:return Math.floor((i+9)/10)*Math.floor((t+4)/5)*16;case pS:return Math.floor((i+9)/10)*Math.floor((t+5)/6)*16;case fS:return Math.floor((i+9)/10)*Math.floor((t+7)/8)*16;case gS:return Math.floor((i+9)/10)*Math.floor((t+9)/10)*16;case _S:return Math.floor((i+11)/12)*Math.floor((t+9)/10)*16;case bS:return Math.floor((i+11)/12)*Math.floor((t+11)/12)*16;case vS:case yS:case xS:return Math.ceil(i/4)*Math.ceil(t/4)*16;case wS:case MS:return Math.ceil(i/4)*Math.ceil(t/4)*8;case CS:case SS:return Math.ceil(i/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${e} format.`)}function Twe(i){switch(i){case ts:case VL:return{byteLength:1,components:1};case Mf:case UL:case wc:return{byteLength:2,components:1};case jC:case $C:return{byteLength:2,components:4};case Pa:case HC:case Oa:return{byteLength:4,components:1};case zL:case HL:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:AC}}));typeof window<"u"&&(window.__THREE__?Ut("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=AC);function CZ(){let i=null,t=!1,e=null,n=null;function r(o,s){e(o,s),n=i.requestAnimationFrame(r)}return{start:function(){t!==!0&&e!==null&&(n=i.requestAnimationFrame(r),t=!0)},stop:function(){i.cancelAnimationFrame(n),t=!1},setAnimationLoop:function(o){e=o},setContext:function(o){i=o}}}function Iwe(i){let t=new WeakMap;function e(a,c){let l=a.array,d=a.usage,u=l.byteLength,h=i.createBuffer();i.bindBuffer(c,h),i.bufferData(c,l,d),a.onUploadCallback();let m;if(l instanceof Float32Array)m=i.FLOAT;else if(typeof Float16Array<"u"&&l instanceof Float16Array)m=i.HALF_FLOAT;else if(l instanceof Uint16Array)a.isFloat16BufferAttribute?m=i.HALF_FLOAT:m=i.UNSIGNED_SHORT;else if(l instanceof Int16Array)m=i.SHORT;else if(l instanceof Uint32Array)m=i.UNSIGNED_INT;else if(l instanceof Int32Array)m=i.INT;else if(l instanceof Int8Array)m=i.BYTE;else if(l instanceof Uint8Array)m=i.UNSIGNED_BYTE;else if(l instanceof Uint8ClampedArray)m=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+l);return{buffer:h,type:m,bytesPerElement:l.BYTES_PER_ELEMENT,version:a.version,size:u}}function n(a,c,l){let d=c.array,u=c.updateRanges;if(i.bindBuffer(l,a),u.length===0)i.bufferSubData(l,0,d);else{u.sort((m,p)=>m.start-p.start);let h=0;for(let m=1;m<u.length;m++){let p=u[h],_=u[m];_.start<=p.start+p.count+1?p.count=Math.max(p.count,_.start+_.count-p.start):(++h,u[h]=_)}u.length=h+1;for(let m=0,p=u.length;m<p;m++){let _=u[m];i.bufferSubData(l,_.start*d.BYTES_PER_ELEMENT,d,_.start,_.count)}c.clearUpdateRanges()}c.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),t.get(a)}function o(a){a.isInterleavedBufferAttribute&&(a=a.data);let c=t.get(a);c&&(i.deleteBuffer(c.buffer),t.delete(a))}function s(a,c){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){let d=t.get(a);(!d||d.version<a.version)&&t.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}let l=t.get(a);if(l===void 0)t.set(a,e(a,c));else if(l.version<a.version){if(l.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(l.buffer,a,c),l.version=a.version}}return{get:r,remove:o,update:s}}var Dwe=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,kwe=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Awe=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Pwe=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Owe=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Nwe=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Rwe=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Fwe=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Lwe=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Bwe=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Vwe=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Uwe=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,zwe=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Hwe=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,jwe=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$we=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Gwe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Wwe=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,qwe=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Xwe=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Ywe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Zwe=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,Kwe=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Qwe=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Jwe=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,eMe=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,tMe=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,iMe=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,nMe=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,rMe=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,oMe="gl_FragColor = linearToOutputTexel( gl_FragColor );",sMe=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,aMe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,cMe=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
#endif`,lMe=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dMe=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,uMe=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hMe=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,mMe=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,pMe=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,fMe=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,gMe=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_Me=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,bMe=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,vMe=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,yMe=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,xMe=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, pow4( roughness ) ) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,wMe=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,MMe=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,CMe=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,SMe=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,EMe=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.diffuseContribution = diffuseColor.rgb * ( 1.0 - metalnessFactor );
material.metalness = metalnessFactor;
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor;
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = vec3( 0.04 );
	material.specularColorBlended = mix( material.specularColor, diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.0001, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,TMe=`uniform sampler2D dfgLUT;
struct PhysicalMaterial {
	vec3 diffuseColor;
	vec3 diffuseContribution;
	vec3 specularColor;
	vec3 specularColorBlended;
	float roughness;
	float metalness;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
		vec3 iridescenceFresnelDielectric;
		vec3 iridescenceFresnelMetallic;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return v;
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColorBlended;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transpose( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float rInv = 1.0 / ( roughness + 0.1 );
	float a = -1.9362 + 1.0678 * roughness + 0.4573 * r2 - 0.8469 * rInv;
	float b = -0.6014 + 0.5538 * roughness - 0.4670 * r2 - 0.1255 * rInv;
	float DG = exp( a * dotNV + b );
	return saturate( DG );
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 fab = texture2D( dfgLUT, vec2( roughness, dotNV ) ).rg;
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
vec3 BRDF_GGX_Multiscatter( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 singleScatter = BRDF_GGX( lightDir, viewDir, normal, material );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	vec2 dfgV = texture2D( dfgLUT, vec2( material.roughness, dotNV ) ).rg;
	vec2 dfgL = texture2D( dfgLUT, vec2( material.roughness, dotNL ) ).rg;
	vec3 FssEss_V = material.specularColorBlended * dfgV.x + material.specularF90 * dfgV.y;
	vec3 FssEss_L = material.specularColorBlended * dfgL.x + material.specularF90 * dfgL.y;
	float Ess_V = dfgV.x + dfgV.y;
	float Ess_L = dfgL.x + dfgL.y;
	float Ems_V = 1.0 - Ess_V;
	float Ems_L = 1.0 - Ess_L;
	vec3 Favg = material.specularColorBlended + ( 1.0 - material.specularColorBlended ) * 0.047619;
	vec3 Fms = FssEss_V * FssEss_L * Favg / ( 1.0 - Ems_V * Ems_L * Favg + EPSILON );
	float compensationFactor = Ems_V * Ems_L;
	vec3 multiScatter = Fms * compensationFactor;
	return singleScatter + multiScatter;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColorBlended * t2.x + ( vec3( 1.0 ) - material.specularColorBlended ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseContribution * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
 
 		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
 
 		float sheenAlbedoV = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
 		float sheenAlbedoL = IBLSheenBRDF( geometryNormal, directLight.direction, material.sheenRoughness );
 
 		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * max( sheenAlbedoV, sheenAlbedoL );
 
 		irradiance *= sheenEnergyComp;
 
 	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX_Multiscatter( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseContribution );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 diffuse = irradiance * BRDF_Lambert( material.diffuseContribution );
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		diffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectDiffuse += diffuse;
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness ) * RECIPROCAL_PI;
 	#endif
	vec3 singleScatteringDielectric = vec3( 0.0 );
	vec3 multiScatteringDielectric = vec3( 0.0 );
	vec3 singleScatteringMetallic = vec3( 0.0 );
	vec3 multiScatteringMetallic = vec3( 0.0 );
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnelDielectric, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.iridescence, material.iridescenceFresnelMetallic, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScatteringDielectric, multiScatteringDielectric );
		computeMultiscattering( geometryNormal, geometryViewDir, material.diffuseColor, material.specularF90, material.roughness, singleScatteringMetallic, multiScatteringMetallic );
	#endif
	vec3 singleScattering = mix( singleScatteringDielectric, singleScatteringMetallic, material.metalness );
	vec3 multiScattering = mix( multiScatteringDielectric, multiScatteringMetallic, material.metalness );
	vec3 totalScatteringDielectric = singleScatteringDielectric + multiScatteringDielectric;
	vec3 diffuse = material.diffuseContribution * ( 1.0 - totalScatteringDielectric );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	vec3 indirectSpecular = radiance * singleScattering;
	indirectSpecular += multiScattering * cosineWeightedIrradiance;
	vec3 indirectDiffuse = diffuse * cosineWeightedIrradiance;
	#ifdef USE_SHEEN
		float sheenAlbedo = IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
		float sheenEnergyComp = 1.0 - max3( material.sheenColor ) * sheenAlbedo;
		indirectSpecular *= sheenEnergyComp;
		indirectDiffuse *= sheenEnergyComp;
	#endif
	reflectedLight.indirectSpecular += indirectSpecular;
	reflectedLight.indirectDiffuse += indirectDiffuse;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,IMe=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnelDielectric = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceFresnelMetallic = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.diffuseColor );
		material.iridescenceFresnel = mix( material.iridescenceFresnelDielectric, material.iridescenceFresnelMetallic, material.metalness );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS ) && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,DMe=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,kMe=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,AMe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,PMe=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,OMe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,NMe=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,RMe=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,FMe=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,LMe=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,BMe=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,VMe=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,UMe=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,zMe=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,HMe=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,jMe=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,$Me=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,GMe=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,WMe=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,qMe=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,XMe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,YMe=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,ZMe=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,KMe=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,QMe=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,JMe=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,eCe=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,tCe=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,iCe=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,nCe=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,rCe=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,oCe=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,sCe=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,aCe=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,cCe=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,lCe=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,dCe=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#else
			uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		#endif
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform sampler2DShadow spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#else
			uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		#endif
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#if defined( SHADOWMAP_TYPE_PCF )
			uniform samplerCubeShadow pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#elif defined( SHADOWMAP_TYPE_BASIC )
			uniform samplerCube pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		#endif
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float interleavedGradientNoise( vec2 position ) {
			return fract( 52.9829189 * fract( dot( position, vec2( 0.06711056, 0.00583715 ) ) ) );
		}
		vec2 vogelDiskSample( int sampleIndex, int samplesCount, float phi ) {
			const float goldenAngle = 2.399963229728653;
			float r = sqrt( ( float( sampleIndex ) + 0.5 ) / float( samplesCount ) );
			float theta = float( sampleIndex ) * goldenAngle + phi;
			return vec2( cos( theta ), sin( theta ) ) * r;
		}
	#endif
	#if defined( SHADOWMAP_TYPE_PCF )
		float getShadow( sampler2DShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
				float radius = shadowRadius * texelSize.x;
				float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
				shadow = (
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 0, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 1, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 2, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 3, 5, phi ) * radius, shadowCoord.z ) ) +
					texture( shadowMap, vec3( shadowCoord.xy + vogelDiskSample( 4, 5, phi ) * radius, shadowCoord.z ) )
				) * 0.2;
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#elif defined( SHADOWMAP_TYPE_VSM )
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				vec2 distribution = texture2D( shadowMap, shadowCoord.xy ).rg;
				float mean = distribution.x;
				float variance = distribution.y * distribution.y;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					float hard_shadow = step( mean, shadowCoord.z );
				#else
					float hard_shadow = step( shadowCoord.z, mean );
				#endif
				if ( hard_shadow == 1.0 ) {
					shadow = 1.0;
				} else {
					variance = max( variance, 0.0000001 );
					float d = shadowCoord.z - mean;
					float p_max = variance / ( variance + d * d );
					p_max = clamp( ( p_max - 0.3 ) / 0.65, 0.0, 1.0 );
					shadow = max( hard_shadow, p_max );
				}
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#else
		float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
			float shadow = 1.0;
			shadowCoord.xyz /= shadowCoord.w;
			shadowCoord.z += shadowBias;
			bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
			bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
			if ( frustumTest ) {
				float depth = texture2D( shadowMap, shadowCoord.xy ).r;
				#ifdef USE_REVERSED_DEPTH_BUFFER
					shadow = step( depth, shadowCoord.z );
				#else
					shadow = step( shadowCoord.z, depth );
				#endif
			}
			return mix( 1.0, shadow, shadowIntensity );
		}
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#if defined( SHADOWMAP_TYPE_PCF )
	float getPointShadow( samplerCubeShadow shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float texelSize = shadowRadius / shadowMapSize.x;
			vec3 absDir = abs( bd3D );
			vec3 tangent = absDir.x > absDir.z ? vec3( 0.0, 1.0, 0.0 ) : vec3( 1.0, 0.0, 0.0 );
			tangent = normalize( cross( bd3D, tangent ) );
			vec3 bitangent = cross( bd3D, tangent );
			float phi = interleavedGradientNoise( gl_FragCoord.xy ) * 6.28318530718;
			shadow = (
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 0, 5, phi ).x + bitangent * vogelDiskSample( 0, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 1, 5, phi ).x + bitangent * vogelDiskSample( 1, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 2, 5, phi ).x + bitangent * vogelDiskSample( 2, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 3, 5, phi ).x + bitangent * vogelDiskSample( 3, 5, phi ).y ) * texelSize, dp ) ) +
				texture( shadowMap, vec4( bd3D + ( tangent * vogelDiskSample( 4, 5, phi ).x + bitangent * vogelDiskSample( 4, 5, phi ).y ) * texelSize, dp ) )
			) * 0.2;
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#elif defined( SHADOWMAP_TYPE_BASIC )
	float getPointShadow( samplerCube shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		vec3 bd3D = normalize( lightToPosition );
		vec3 absVec = abs( lightToPosition );
		float viewSpaceZ = max( max( absVec.x, absVec.y ), absVec.z );
		if ( viewSpaceZ - shadowCameraFar <= 0.0 && viewSpaceZ - shadowCameraNear >= 0.0 ) {
			float dp = ( shadowCameraFar * ( viewSpaceZ - shadowCameraNear ) ) / ( viewSpaceZ * ( shadowCameraFar - shadowCameraNear ) );
			dp += shadowBias;
			float depth = textureCube( shadowMap, bd3D ).r;
			#ifdef USE_REVERSED_DEPTH_BUFFER
				shadow = step( depth, dp );
			#else
				shadow = step( dp, depth );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	#endif
	#endif
#endif`,uCe=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,hCe=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,mCe=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0 && ( defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_BASIC ) )
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,pCe=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,fCe=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,gCe=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_Ce=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,bCe=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,vCe=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,yCe=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,xCe=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,wCe=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseContribution, material.specularColorBlended, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,MCe=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,CCe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,SCe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,ECe=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,TCe=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`,ICe=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,DCe=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ACe=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,PCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,OCe=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,NCe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,RCe=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,FCe=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,LCe=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = vec4( dist, 0.0, 0.0, 1.0 );
}`,BCe=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,VCe=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,UCe=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,zCe=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,HCe=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,jCe=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$Ce=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,GCe=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WCe=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,qCe=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,XCe=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,YCe=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( normalize( normal ) * 0.5 + 0.5, diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,ZCe=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KCe=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,QCe=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,JCe=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
 
		outgoingLight = outgoingLight + sheenSpecularDirect + sheenSpecularIndirect;
 
 	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,eSe=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,tSe=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iSe=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,nSe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,rSe=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,oSe=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,sSe=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,aSe=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,yi={alphahash_fragment:Dwe,alphahash_pars_fragment:kwe,alphamap_fragment:Awe,alphamap_pars_fragment:Pwe,alphatest_fragment:Owe,alphatest_pars_fragment:Nwe,aomap_fragment:Rwe,aomap_pars_fragment:Fwe,batching_pars_vertex:Lwe,batching_vertex:Bwe,begin_vertex:Vwe,beginnormal_vertex:Uwe,bsdfs:zwe,iridescence_fragment:Hwe,bumpmap_pars_fragment:jwe,clipping_planes_fragment:$we,clipping_planes_pars_fragment:Gwe,clipping_planes_pars_vertex:Wwe,clipping_planes_vertex:qwe,color_fragment:Xwe,color_pars_fragment:Ywe,color_pars_vertex:Zwe,color_vertex:Kwe,common:Qwe,cube_uv_reflection_fragment:Jwe,defaultnormal_vertex:eMe,displacementmap_pars_vertex:tMe,displacementmap_vertex:iMe,emissivemap_fragment:nMe,emissivemap_pars_fragment:rMe,colorspace_fragment:oMe,colorspace_pars_fragment:sMe,envmap_fragment:aMe,envmap_common_pars_fragment:cMe,envmap_pars_fragment:lMe,envmap_pars_vertex:dMe,envmap_physical_pars_fragment:xMe,envmap_vertex:uMe,fog_vertex:hMe,fog_pars_vertex:mMe,fog_fragment:pMe,fog_pars_fragment:fMe,gradientmap_pars_fragment:gMe,lightmap_pars_fragment:_Me,lights_lambert_fragment:bMe,lights_lambert_pars_fragment:vMe,lights_pars_begin:yMe,lights_toon_fragment:wMe,lights_toon_pars_fragment:MMe,lights_phong_fragment:CMe,lights_phong_pars_fragment:SMe,lights_physical_fragment:EMe,lights_physical_pars_fragment:TMe,lights_fragment_begin:IMe,lights_fragment_maps:DMe,lights_fragment_end:kMe,logdepthbuf_fragment:AMe,logdepthbuf_pars_fragment:PMe,logdepthbuf_pars_vertex:OMe,logdepthbuf_vertex:NMe,map_fragment:RMe,map_pars_fragment:FMe,map_particle_fragment:LMe,map_particle_pars_fragment:BMe,metalnessmap_fragment:VMe,metalnessmap_pars_fragment:UMe,morphinstance_vertex:zMe,morphcolor_vertex:HMe,morphnormal_vertex:jMe,morphtarget_pars_vertex:$Me,morphtarget_vertex:GMe,normal_fragment_begin:WMe,normal_fragment_maps:qMe,normal_pars_fragment:XMe,normal_pars_vertex:YMe,normal_vertex:ZMe,normalmap_pars_fragment:KMe,clearcoat_normal_fragment_begin:QMe,clearcoat_normal_fragment_maps:JMe,clearcoat_pars_fragment:eCe,iridescence_pars_fragment:tCe,opaque_fragment:iCe,packing:nCe,premultiplied_alpha_fragment:rCe,project_vertex:oCe,dithering_fragment:sCe,dithering_pars_fragment:aCe,roughnessmap_fragment:cCe,roughnessmap_pars_fragment:lCe,shadowmap_pars_fragment:dCe,shadowmap_pars_vertex:uCe,shadowmap_vertex:hCe,shadowmask_pars_fragment:mCe,skinbase_vertex:pCe,skinning_pars_vertex:fCe,skinning_vertex:gCe,skinnormal_vertex:_Ce,specularmap_fragment:bCe,specularmap_pars_fragment:vCe,tonemapping_fragment:yCe,tonemapping_pars_fragment:xCe,transmission_fragment:wCe,transmission_pars_fragment:MCe,uv_pars_fragment:CCe,uv_pars_vertex:SCe,uv_vertex:ECe,worldpos_vertex:TCe,background_vert:ICe,background_frag:DCe,backgroundCube_vert:kCe,backgroundCube_frag:ACe,cube_vert:PCe,cube_frag:OCe,depth_vert:NCe,depth_frag:RCe,distance_vert:FCe,distance_frag:LCe,equirect_vert:BCe,equirect_frag:VCe,linedashed_vert:UCe,linedashed_frag:zCe,meshbasic_vert:HCe,meshbasic_frag:jCe,meshlambert_vert:$Ce,meshlambert_frag:GCe,meshmatcap_vert:WCe,meshmatcap_frag:qCe,meshnormal_vert:XCe,meshnormal_frag:YCe,meshphong_vert:ZCe,meshphong_frag:KCe,meshphysical_vert:QCe,meshphysical_frag:JCe,meshtoon_vert:eSe,meshtoon_frag:tSe,points_vert:iSe,points_frag:nSe,shadow_vert:rSe,shadow_frag:oSe,sprite_vert:sSe,sprite_frag:aSe},et={common:{diffuse:{value:new Ci(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new mi},alphaMap:{value:null},alphaMapTransform:{value:new mi},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new mi}},envmap:{envMap:{value:null},envMapRotation:{value:new mi},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98},dfgLUT:{value:null}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new mi}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new mi}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new mi},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new mi},normalScale:{value:new Ht(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new mi},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new mi}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new mi}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new mi}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ci(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ci(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new mi},alphaTest:{value:0},uvTransform:{value:new mi}},sprite:{diffuse:{value:new Ci(16777215)},opacity:{value:1},center:{value:new Ht(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new mi},alphaMap:{value:null},alphaMapTransform:{value:new mi},alphaTest:{value:0}}},Sc={basic:{uniforms:fo([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.fog]),vertexShader:yi.meshbasic_vert,fragmentShader:yi.meshbasic_frag},lambert:{uniforms:fo([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new Ci(0)}}]),vertexShader:yi.meshlambert_vert,fragmentShader:yi.meshlambert_frag},phong:{uniforms:fo([et.common,et.specularmap,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.fog,et.lights,{emissive:{value:new Ci(0)},specular:{value:new Ci(1118481)},shininess:{value:30}}]),vertexShader:yi.meshphong_vert,fragmentShader:yi.meshphong_frag},standard:{uniforms:fo([et.common,et.envmap,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.roughnessmap,et.metalnessmap,et.fog,et.lights,{emissive:{value:new Ci(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yi.meshphysical_vert,fragmentShader:yi.meshphysical_frag},toon:{uniforms:fo([et.common,et.aomap,et.lightmap,et.emissivemap,et.bumpmap,et.normalmap,et.displacementmap,et.gradientmap,et.fog,et.lights,{emissive:{value:new Ci(0)}}]),vertexShader:yi.meshtoon_vert,fragmentShader:yi.meshtoon_frag},matcap:{uniforms:fo([et.common,et.bumpmap,et.normalmap,et.displacementmap,et.fog,{matcap:{value:null}}]),vertexShader:yi.meshmatcap_vert,fragmentShader:yi.meshmatcap_frag},points:{uniforms:fo([et.points,et.fog]),vertexShader:yi.points_vert,fragmentShader:yi.points_frag},dashed:{uniforms:fo([et.common,et.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yi.linedashed_vert,fragmentShader:yi.linedashed_frag},depth:{uniforms:fo([et.common,et.displacementmap]),vertexShader:yi.depth_vert,fragmentShader:yi.depth_frag},normal:{uniforms:fo([et.common,et.bumpmap,et.normalmap,et.displacementmap,{opacity:{value:1}}]),vertexShader:yi.meshnormal_vert,fragmentShader:yi.meshnormal_frag},sprite:{uniforms:fo([et.sprite,et.fog]),vertexShader:yi.sprite_vert,fragmentShader:yi.sprite_frag},background:{uniforms:{uvTransform:{value:new mi},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yi.background_vert,fragmentShader:yi.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new mi}},vertexShader:yi.backgroundCube_vert,fragmentShader:yi.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yi.cube_vert,fragmentShader:yi.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yi.equirect_vert,fragmentShader:yi.equirect_frag},distance:{uniforms:fo([et.common,et.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yi.distance_vert,fragmentShader:yi.distance_frag},shadow:{uniforms:fo([et.lights,et.fog,{color:{value:new Ci(0)},opacity:{value:1}}]),vertexShader:yi.shadow_vert,fragmentShader:yi.shadow_frag}};Sc.physical={uniforms:fo([Sc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new mi},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new mi},clearcoatNormalScale:{value:new Ht(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new mi},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new mi},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new mi},sheen:{value:0},sheenColor:{value:new Ci(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new mi},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new mi},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new mi},transmissionSamplerSize:{value:new Ht},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new mi},attenuationDistance:{value:0},attenuationColor:{value:new Ci(0)},specularColor:{value:new Ci(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new mi},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new mi},anisotropyVector:{value:new Ht},anisotropyMap:{value:null},anisotropyMapTransform:{value:new mi}}]),vertexShader:yi.meshphysical_vert,fragmentShader:yi.meshphysical_frag};var IS={r:0,b:0,g:0},jh=new yc,cSe=new vn;function lSe(i,t,e,n,r,o,s){let a=new Ci(0),c=o===!0?0:1,l,d,u=null,h=0,m=null;function p(C){let E=C.isScene===!0?C.background:null;return E&&E.isTexture&&(E=(C.backgroundBlurriness>0?e:t).get(E)),E}function _(C){let E=!1,N=p(C);N===null?g(a,c):N&&N.isColor&&(g(N,1),E=!0);let R=i.xr.getEnvironmentBlendMode();R==="additive"?n.buffers.color.setClear(0,0,0,1,s):R==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,s),(i.autoClear||E)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function f(C,E){let N=p(E);N&&(N.isCubeTexture||N.mapping===eb)?(d===void 0&&(d=new ze(new qi(1,1,1),new xs({name:"BackgroundCubeMaterial",uniforms:Hh(Sc.backgroundCube.uniforms),vertexShader:Sc.backgroundCube.vertexShader,fragmentShader:Sc.backgroundCube.fragmentShader,side:Ro,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),d.geometry.deleteAttribute("normal"),d.geometry.deleteAttribute("uv"),d.onBeforeRender=function(R,B,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(d.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(d)),jh.copy(E.backgroundRotation),jh.x*=-1,jh.y*=-1,jh.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(jh.y*=-1,jh.z*=-1),d.material.uniforms.envMap.value=N,d.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,d.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,d.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,d.material.uniforms.backgroundRotation.value.setFromMatrix4(cSe.makeRotationFromEuler(jh)),d.material.toneMapped=Fi.getTransfer(N.colorSpace)!==Ki,(u!==N||h!==N.version||m!==i.toneMapping)&&(d.material.needsUpdate=!0,u=N,h=N.version,m=i.toneMapping),d.layers.enableAll(),C.unshift(d,d.geometry,d.material,0,0,null)):N&&N.isTexture&&(l===void 0&&(l=new ze(new Ms(2,2),new xs({name:"BackgroundMaterial",uniforms:Hh(Sc.background.uniforms),vertexShader:Sc.background.vertexShader,fragmentShader:Sc.background.fragmentShader,side:Dl,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(l)),l.material.uniforms.t2D.value=N,l.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,l.material.toneMapped=Fi.getTransfer(N.colorSpace)!==Ki,N.matrixAutoUpdate===!0&&N.updateMatrix(),l.material.uniforms.uvTransform.value.copy(N.matrix),(u!==N||h!==N.version||m!==i.toneMapping)&&(l.material.needsUpdate=!0,u=N,h=N.version,m=i.toneMapping),l.layers.enableAll(),C.unshift(l,l.geometry,l.material,0,0,null))}function g(C,E){C.getRGB(IS,QL(i)),n.buffers.color.setClear(IS.r,IS.g,IS.b,E,s)}function S(){d!==void 0&&(d.geometry.dispose(),d.material.dispose(),d=void 0),l!==void 0&&(l.geometry.dispose(),l.material.dispose(),l=void 0)}return{getClearColor:function(){return a},setClearColor:function(C,E=1){a.set(C),c=E,g(a,c)},getClearAlpha:function(){return c},setClearAlpha:function(C){c=C,g(a,c)},render:_,addToRenderList:f,dispose:S}}function dSe(i,t){let e=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=h(null),o=r,s=!1;function a(O,U,X,ee,de){let se=!1,ue=u(ee,X,U);o!==ue&&(o=ue,l(o.object)),se=m(O,ee,X,de),se&&p(O,ee,X,de),de!==null&&t.update(de,i.ELEMENT_ARRAY_BUFFER),(se||s)&&(s=!1,E(O,U,X,ee),de!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,t.get(de).buffer))}function c(){return i.createVertexArray()}function l(O){return i.bindVertexArray(O)}function d(O){return i.deleteVertexArray(O)}function u(O,U,X){let ee=X.wireframe===!0,de=n[O.id];de===void 0&&(de={},n[O.id]=de);let se=de[U.id];se===void 0&&(se={},de[U.id]=se);let ue=se[ee];return ue===void 0&&(ue=h(c()),se[ee]=ue),ue}function h(O){let U=[],X=[],ee=[];for(let de=0;de<e;de++)U[de]=0,X[de]=0,ee[de]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:U,enabledAttributes:X,attributeDivisors:ee,object:O,attributes:{},index:null}}function m(O,U,X,ee){let de=o.attributes,se=U.attributes,ue=0,ae=X.getAttributes();for(let Ce in ae)if(ae[Ce].location>=0){let He=de[Ce],tt=se[Ce];if(tt===void 0&&(Ce==="instanceMatrix"&&O.instanceMatrix&&(tt=O.instanceMatrix),Ce==="instanceColor"&&O.instanceColor&&(tt=O.instanceColor)),He===void 0||He.attribute!==tt||tt&&He.data!==tt.data)return!0;ue++}return o.attributesNum!==ue||o.index!==ee}function p(O,U,X,ee){let de={},se=U.attributes,ue=0,ae=X.getAttributes();for(let Ce in ae)if(ae[Ce].location>=0){let He=se[Ce];He===void 0&&(Ce==="instanceMatrix"&&O.instanceMatrix&&(He=O.instanceMatrix),Ce==="instanceColor"&&O.instanceColor&&(He=O.instanceColor));let tt={};tt.attribute=He,He&&He.data&&(tt.data=He.data),de[Ce]=tt,ue++}o.attributes=de,o.attributesNum=ue,o.index=ee}function _(){let O=o.newAttributes;for(let U=0,X=O.length;U<X;U++)O[U]=0}function f(O){g(O,0)}function g(O,U){let X=o.newAttributes,ee=o.enabledAttributes,de=o.attributeDivisors;X[O]=1,ee[O]===0&&(i.enableVertexAttribArray(O),ee[O]=1),de[O]!==U&&(i.vertexAttribDivisor(O,U),de[O]=U)}function S(){let O=o.newAttributes,U=o.enabledAttributes;for(let X=0,ee=U.length;X<ee;X++)U[X]!==O[X]&&(i.disableVertexAttribArray(X),U[X]=0)}function C(O,U,X,ee,de,se,ue){ue===!0?i.vertexAttribIPointer(O,U,X,de,se):i.vertexAttribPointer(O,U,X,ee,de,se)}function E(O,U,X,ee){_();let de=ee.attributes,se=X.getAttributes(),ue=U.defaultAttributeValues;for(let ae in se){let Ce=se[ae];if(Ce.location>=0){let Pe=de[ae];if(Pe===void 0&&(ae==="instanceMatrix"&&O.instanceMatrix&&(Pe=O.instanceMatrix),ae==="instanceColor"&&O.instanceColor&&(Pe=O.instanceColor)),Pe!==void 0){let He=Pe.normalized,tt=Pe.itemSize,ai=t.get(Pe);if(ai===void 0)continue;let pi=ai.buffer,xn=ai.type,In=ai.bytesPerElement,Se=xn===i.INT||xn===i.UNSIGNED_INT||Pe.gpuType===HC;if(Pe.isInterleavedBufferAttribute){let De=Pe.data,ht=De.stride,fi=Pe.offset;if(De.isInstancedInterleavedBuffer){for(let bt=0;bt<Ce.locationSize;bt++)g(Ce.location+bt,De.meshPerAttribute);O.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=De.meshPerAttribute*De.count)}else for(let bt=0;bt<Ce.locationSize;bt++)f(Ce.location+bt);i.bindBuffer(i.ARRAY_BUFFER,pi);for(let bt=0;bt<Ce.locationSize;bt++)C(Ce.location+bt,tt/Ce.locationSize,xn,He,ht*In,(fi+tt/Ce.locationSize*bt)*In,Se)}else{if(Pe.isInstancedBufferAttribute){for(let De=0;De<Ce.locationSize;De++)g(Ce.location+De,Pe.meshPerAttribute);O.isInstancedMesh!==!0&&ee._maxInstanceCount===void 0&&(ee._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let De=0;De<Ce.locationSize;De++)f(Ce.location+De);i.bindBuffer(i.ARRAY_BUFFER,pi);for(let De=0;De<Ce.locationSize;De++)C(Ce.location+De,tt/Ce.locationSize,xn,He,tt*In,tt/Ce.locationSize*De*In,Se)}}else if(ue!==void 0){let He=ue[ae];if(He!==void 0)switch(He.length){case 2:i.vertexAttrib2fv(Ce.location,He);break;case 3:i.vertexAttrib3fv(Ce.location,He);break;case 4:i.vertexAttrib4fv(Ce.location,He);break;default:i.vertexAttrib1fv(Ce.location,He)}}}}S()}function N(){z();for(let O in n){let U=n[O];for(let X in U){let ee=U[X];for(let de in ee)d(ee[de].object),delete ee[de];delete U[X]}delete n[O]}}function R(O){if(n[O.id]===void 0)return;let U=n[O.id];for(let X in U){let ee=U[X];for(let de in ee)d(ee[de].object),delete ee[de];delete U[X]}delete n[O.id]}function B(O){for(let U in n){let X=n[U];if(X[O.id]===void 0)continue;let ee=X[O.id];for(let de in ee)d(ee[de].object),delete ee[de];delete X[O.id]}}function z(){T(),s=!0,o!==r&&(o=r,l(o.object))}function T(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:z,resetDefaultState:T,dispose:N,releaseStatesOfGeometry:R,releaseStatesOfProgram:B,initAttributes:_,enableAttribute:f,disableUnusedAttributes:S}}function uSe(i,t,e){let n;function r(l){n=l}function o(l,d){i.drawArrays(n,l,d),e.update(d,n,1)}function s(l,d,u){u!==0&&(i.drawArraysInstanced(n,l,d,u),e.update(d,n,u))}function a(l,d,u){if(u===0)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,l,0,d,0,u);let m=0;for(let p=0;p<u;p++)m+=d[p];e.update(m,n,1)}function c(l,d,u,h){if(u===0)return;let m=t.get("WEBGL_multi_draw");if(m===null)for(let p=0;p<l.length;p++)s(l[p],d[p],h[p]);else{m.multiDrawArraysInstancedWEBGL(n,l,0,d,0,h,0,u);let p=0;for(let _=0;_<u;_++)p+=d[_]*h[_];e.update(p,n,1)}}this.setMode=r,this.render=o,this.renderInstances=s,this.renderMultiDraw=a,this.renderMultiDrawInstances=c}function hSe(i,t,e,n){let r;function o(){if(r!==void 0)return r;if(t.has("EXT_texture_filter_anisotropic")===!0){let B=t.get("EXT_texture_filter_anisotropic");r=i.getParameter(B.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function s(B){return!(B!==Xs&&n.convert(B)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(B){let z=B===wc&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(B!==ts&&n.convert(B)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&B!==Oa&&!z)}function c(B){if(B==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";B="mediump"}return B==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let l=e.precision!==void 0?e.precision:"highp",d=c(l);d!==l&&(Ut("WebGLRenderer:",l,"not supported, using",d,"instead."),l=d);let u=e.logarithmicDepthBuffer===!0,h=e.reversedDepthBuffer===!0&&t.has("EXT_clip_control"),m=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),p=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),_=i.getParameter(i.MAX_TEXTURE_SIZE),f=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),g=i.getParameter(i.MAX_VERTEX_ATTRIBS),S=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),C=i.getParameter(i.MAX_VARYING_VECTORS),E=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),N=i.getParameter(i.MAX_SAMPLES),R=i.getParameter(i.SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:o,getMaxPrecision:c,textureFormatReadable:s,textureTypeReadable:a,precision:l,logarithmicDepthBuffer:u,reversedDepthBuffer:h,maxTextures:m,maxVertexTextures:p,maxTextureSize:_,maxCubemapSize:f,maxAttributes:g,maxVertexUniforms:S,maxVaryings:C,maxFragmentUniforms:E,maxSamples:N,samples:R}}function mSe(i){let t=this,e=null,n=0,r=!1,o=!1,s=new Ws,a=new mi,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(u,h){let m=u.length!==0||h||n!==0||r;return r=h,n=u.length,m},this.beginShadows=function(){o=!0,d(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(u,h){e=d(u,h,0)},this.setState=function(u,h,m){let p=u.clippingPlanes,_=u.clipIntersection,f=u.clipShadows,g=i.get(u);if(!r||p===null||p.length===0||o&&!f)o?d(null):l();else{let S=o?0:n,C=S*4,E=g.clippingState||null;c.value=E,E=d(p,h,C,m);for(let N=0;N!==C;++N)E[N]=e[N];g.clippingState=E,this.numIntersection=_?this.numPlanes:0,this.numPlanes+=S}};function l(){c.value!==e&&(c.value=e,c.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function d(u,h,m,p){let _=u!==null?u.length:0,f=null;if(_!==0){if(f=c.value,p!==!0||f===null){let g=m+_*4,S=h.matrixWorldInverse;a.getNormalMatrix(S),(f===null||f.length<g)&&(f=new Float32Array(g));for(let C=0,E=m;C!==_;++C,E+=4)s.copy(u[C]).applyMatrix4(S,a),s.normal.toArray(f,E),f[E+3]=s.constant}c.value=f,c.needsUpdate=!0}return t.numPlanes=_,t.numIntersection=0,f}}function pSe(i){let t=new WeakMap;function e(s,a){return a===VC?s.mapping=tu:a===UC&&(s.mapping=Uh),s}function n(s){if(s&&s.isTexture){let a=s.mapping;if(a===VC||a===UC)if(t.has(s)){let c=t.get(s).texture;return e(c,s.mapping)}else{let c=s.image;if(c&&c.height>0){let l=new j0(c.height);return l.fromEquirectangularTexture(i,s),t.set(s,l),s.addEventListener("dispose",r),e(l.texture,s.mapping)}else return null}}return s}function r(s){let a=s.target;a.removeEventListener("dispose",r);let c=t.get(a);c!==void 0&&(t.delete(a),c.dispose())}function o(){t=new WeakMap}return{get:n,dispose:o}}var ru=4,iZ=[.125,.215,.35,.446,.526,.582],Gh=20,fSe=256,sb=new yf,nZ=new Ci,i3=null,n3=0,r3=0,o3=!1,gSe=new j,kS=class{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._backgroundBox=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._blurMaterial=null,this._ggxMaterial=null}fromScene(t,e=0,n=.1,r=100,o={}){let{size:s=256,position:a=gSe}=o;i3=this._renderer.getRenderTarget(),n3=this._renderer.getActiveCubeFace(),r3=this._renderer.getActiveMipmapLevel(),o3=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(s);let c=this._allocateTargets();return c.depthBuffer=!0,this._sceneToCubeUV(t,n,r,c,a),e>0&&this._blur(c,0,0,e),this._applyPMREM(c),this._cleanup(c),c}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=sZ(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=oZ(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._ggxMaterial!==null&&this._ggxMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodMeshes.length;t++)this._lodMeshes[t].geometry.dispose()}_cleanup(t){this._renderer.setRenderTarget(i3,n3,r3),this._renderer.xr.enabled=o3,t.scissorTest=!1,Ef(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===tu||t.mapping===Uh?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),i3=this._renderer.getRenderTarget(),n3=this._renderer.getActiveCubeFace(),r3=this._renderer.getActiveMipmapLevel(),o3=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;let n=e||this._allocateTargets();return this._textureToCubeUV(t,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){let t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,n={magFilter:Yn,minFilter:Yn,generateMipmaps:!1,type:wc,format:Xs,colorSpace:Nh,depthBuffer:!1},r=rZ(t,e,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=rZ(t,e,n);let{_lodMax:o}=this;({lodMeshes:this._lodMeshes,sizeLods:this._sizeLods,sigmas:this._sigmas}=_Se(o)),this._blurMaterial=vSe(o,t,e),this._ggxMaterial=bSe(o,t,e)}return r}_compileMaterial(t){let e=new ze(new gr,t);this._renderer.compile(e,sb)}_sceneToCubeUV(t,e,n,r,o){let c=new mo(90,1,e,n),l=[1,-1,1,1,1,1],d=[1,1,1,-1,-1,-1],u=this._renderer,h=u.autoClear,m=u.toneMapping;u.getClearColor(nZ),u.toneMapping=Aa,u.autoClear=!1,u.state.buffers.depth.getReversed()&&(u.setRenderTarget(r),u.clearDepth(),u.setRenderTarget(null)),this._backgroundBox===null&&(this._backgroundBox=new ze(new qi,new qs({name:"PMREM.Background",side:Ro,depthWrite:!1,depthTest:!1})));let _=this._backgroundBox,f=_.material,g=!1,S=t.background;S?S.isColor&&(f.color.copy(S),t.background=null,g=!0):(f.color.copy(nZ),g=!0);for(let C=0;C<6;C++){let E=C%3;E===0?(c.up.set(0,l[C],0),c.position.set(o.x,o.y,o.z),c.lookAt(o.x+d[C],o.y,o.z)):E===1?(c.up.set(0,0,l[C]),c.position.set(o.x,o.y,o.z),c.lookAt(o.x,o.y+d[C],o.z)):(c.up.set(0,l[C],0),c.position.set(o.x,o.y,o.z),c.lookAt(o.x,o.y,o.z+d[C]));let N=this._cubeSize;Ef(r,E*N,C>2?N:0,N,N),u.setRenderTarget(r),g&&u.render(_,c),u.render(t,c)}u.toneMapping=m,u.autoClear=h,t.background=S}_textureToCubeUV(t,e){let n=this._renderer,r=t.mapping===tu||t.mapping===Uh;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=sZ()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=oZ());let o=r?this._cubemapMaterial:this._equirectMaterial,s=this._lodMeshes[0];s.material=o;let a=o.uniforms;a.envMap.value=t;let c=this._cubeSize;Ef(e,0,0,3*c,2*c),n.setRenderTarget(e),n.render(s,sb)}_applyPMREM(t){let e=this._renderer,n=e.autoClear;e.autoClear=!1;let r=this._lodMeshes.length;for(let o=1;o<r;o++)this._applyGGXFilter(t,o-1,o);e.autoClear=n}_applyGGXFilter(t,e,n){let r=this._renderer,o=this._pingPongRenderTarget,s=this._ggxMaterial,a=this._lodMeshes[n];a.material=s;let c=s.uniforms,l=n/(this._lodMeshes.length-1),d=e/(this._lodMeshes.length-1),u=Math.sqrt(l*l-d*d),h=0+l*1.25,m=u*h,{_lodMax:p}=this,_=this._sizeLods[n],f=3*_*(n>p-ru?n-p+ru:0),g=4*(this._cubeSize-_);c.envMap.value=t.texture,c.roughness.value=m,c.mipInt.value=p-e,Ef(o,f,g,3*_,2*_),r.setRenderTarget(o),r.render(a,sb),c.envMap.value=o.texture,c.roughness.value=0,c.mipInt.value=p-n,Ef(t,f,g,3*_,2*_),r.setRenderTarget(t),r.render(a,sb)}_blur(t,e,n,r,o){let s=this._pingPongRenderTarget;this._halfBlur(t,s,e,n,r,"latitudinal",o),this._halfBlur(s,t,n,n,r,"longitudinal",o)}_halfBlur(t,e,n,r,o,s,a){let c=this._renderer,l=this._blurMaterial;s!=="latitudinal"&&s!=="longitudinal"&&jt("blur direction must be either latitudinal or longitudinal!");let d=3,u=this._lodMeshes[r];u.material=l;let h=l.uniforms,m=this._sizeLods[n]-1,p=isFinite(o)?Math.PI/(2*m):2*Math.PI/(2*Gh-1),_=o/p,f=isFinite(o)?1+Math.floor(d*_):Gh;f>Gh&&Ut(`sigmaRadians, ${o}, is too large and will clip, as it requested ${f} samples when the maximum is set to ${Gh}`);let g=[],S=0;for(let B=0;B<Gh;++B){let z=B/_,T=Math.exp(-z*z/2);g.push(T),B===0?S+=T:B<f&&(S+=2*T)}for(let B=0;B<g.length;B++)g[B]=g[B]/S;h.envMap.value=t.texture,h.samples.value=f,h.weights.value=g,h.latitudinal.value=s==="latitudinal",a&&(h.poleAxis.value=a);let{_lodMax:C}=this;h.dTheta.value=p,h.mipInt.value=C-n;let E=this._sizeLods[r],N=3*E*(r>C-ru?r-C+ru:0),R=4*(this._cubeSize-E);Ef(e,N,R,3*E,2*E),c.setRenderTarget(e),c.render(u,sb)}};function _Se(i){let t=[],e=[],n=[],r=i,o=i-ru+1+iZ.length;for(let s=0;s<o;s++){let a=Math.pow(2,r);t.push(a);let c=1/a;s>i-ru?c=iZ[s-i+ru-1]:s===0&&(c=0),e.push(c);let l=1/(a-2),d=-l,u=1+l,h=[d,d,u,d,u,u,d,d,u,u,d,u],m=6,p=6,_=3,f=2,g=1,S=new Float32Array(_*p*m),C=new Float32Array(f*p*m),E=new Float32Array(g*p*m);for(let R=0;R<m;R++){let B=R%3*2/3-1,z=R>2?0:-1,T=[B,z,0,B+2/3,z,0,B+2/3,z+1,0,B,z,0,B+2/3,z+1,0,B,z+1,0];S.set(T,_*p*R),C.set(h,f*p*R);let O=[R,R,R,R,R,R];E.set(O,g*p*R)}let N=new gr;N.setAttribute("position",new vs(S,_)),N.setAttribute("uv",new vs(C,f)),N.setAttribute("faceIndex",new vs(E,g)),n.push(new ze(N,null)),r>ru&&r--}return{lodMeshes:n,sizeLods:t,sigmas:e}}function rZ(i,t,e){let n=new ys(i,t,e);return n.texture.mapping=eb,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function Ef(i,t,e,n,r){i.viewport.set(t,e,n,r),i.scissor.set(t,e,n,r)}function bSe(i,t,e){return new xs({name:"PMREMGGXConvolution",defines:{GGX_SAMPLES:fSe,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},roughness:{value:0},mipInt:{value:0}},vertexShader:PS(),fragmentShader:`

			precision highp float;
			precision highp int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform float roughness;
			uniform float mipInt;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			#define PI 3.14159265359

			// Van der Corput radical inverse
			float radicalInverse_VdC(uint bits) {
				bits = (bits << 16u) | (bits >> 16u);
				bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
				bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
				bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
				bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
				return float(bits) * 2.3283064365386963e-10; // / 0x100000000
			}

			// Hammersley sequence
			vec2 hammersley(uint i, uint N) {
				return vec2(float(i) / float(N), radicalInverse_VdC(i));
			}

			// GGX VNDF importance sampling (Eric Heitz 2018)
			// "Sampling the GGX Distribution of Visible Normals"
			// https://jcgt.org/published/0007/04/01/
			vec3 importanceSampleGGX_VNDF(vec2 Xi, vec3 V, float roughness) {
				float alpha = roughness * roughness;

				// Section 3.2: Transform view direction to hemisphere configuration
				vec3 Vh = normalize(vec3(alpha * V.x, alpha * V.y, V.z));

				// Section 4.1: Orthonormal basis
				float lensq = Vh.x * Vh.x + Vh.y * Vh.y;
				vec3 T1 = lensq > 0.0 ? vec3(-Vh.y, Vh.x, 0.0) / sqrt(lensq) : vec3(1.0, 0.0, 0.0);
				vec3 T2 = cross(Vh, T1);

				// Section 4.2: Parameterization of projected area
				float r = sqrt(Xi.x);
				float phi = 2.0 * PI * Xi.y;
				float t1 = r * cos(phi);
				float t2 = r * sin(phi);
				float s = 0.5 * (1.0 + Vh.z);
				t2 = (1.0 - s) * sqrt(1.0 - t1 * t1) + s * t2;

				// Section 4.3: Reprojection onto hemisphere
				vec3 Nh = t1 * T1 + t2 * T2 + sqrt(max(0.0, 1.0 - t1 * t1 - t2 * t2)) * Vh;

				// Section 3.4: Transform back to ellipsoid configuration
				return normalize(vec3(alpha * Nh.x, alpha * Nh.y, max(0.0, Nh.z)));
			}

			void main() {
				vec3 N = normalize(vOutputDirection);
				vec3 V = N; // Assume view direction equals normal for pre-filtering

				vec3 prefilteredColor = vec3(0.0);
				float totalWeight = 0.0;

				// For very low roughness, just sample the environment directly
				if (roughness < 0.001) {
					gl_FragColor = vec4(bilinearCubeUV(envMap, N, mipInt), 1.0);
					return;
				}

				// Tangent space basis for VNDF sampling
				vec3 up = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
				vec3 tangent = normalize(cross(up, N));
				vec3 bitangent = cross(N, tangent);

				for(uint i = 0u; i < uint(GGX_SAMPLES); i++) {
					vec2 Xi = hammersley(i, uint(GGX_SAMPLES));

					// For PMREM, V = N, so in tangent space V is always (0, 0, 1)
					vec3 H_tangent = importanceSampleGGX_VNDF(Xi, vec3(0.0, 0.0, 1.0), roughness);

					// Transform H back to world space
					vec3 H = normalize(tangent * H_tangent.x + bitangent * H_tangent.y + N * H_tangent.z);
					vec3 L = normalize(2.0 * dot(V, H) * H - V);

					float NdotL = max(dot(N, L), 0.0);

					if(NdotL > 0.0) {
						// Sample environment at fixed mip level
						// VNDF importance sampling handles the distribution filtering
						vec3 sampleColor = bilinearCubeUV(envMap, L, mipInt);

						// Weight by NdotL for the split-sum approximation
						// VNDF PDF naturally accounts for the visible microfacet distribution
						prefilteredColor += sampleColor * NdotL;
						totalWeight += NdotL;
					}
				}

				if (totalWeight > 0.0) {
					prefilteredColor = prefilteredColor / totalWeight;
				}

				gl_FragColor = vec4(prefilteredColor, 1.0);
			}
		`,blending:xc,depthTest:!1,depthWrite:!1})}function vSe(i,t,e){let n=new Float32Array(Gh),r=new j(0,1,0);return new xs({name:"SphericalGaussianBlur",defines:{n:Gh,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/e,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:PS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:xc,depthTest:!1,depthWrite:!1})}function oZ(){return new xs({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:PS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:xc,depthTest:!1,depthWrite:!1})}function sZ(){return new xs({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:PS(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:xc,depthTest:!1,depthWrite:!1})}function PS(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function ySe(i){let t=new WeakMap,e=null;function n(a){if(a&&a.isTexture){let c=a.mapping,l=c===VC||c===UC,d=c===tu||c===Uh;if(l||d){let u=t.get(a),h=u!==void 0?u.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return e===null&&(e=new kS(i)),u=l?e.fromEquirectangular(a,u):e.fromCubemap(a,u),u.texture.pmremVersion=a.pmremVersion,t.set(a,u),u.texture;if(u!==void 0)return u.texture;{let m=a.image;return l&&m&&m.height>0||d&&m&&r(m)?(e===null&&(e=new kS(i)),u=l?e.fromEquirectangular(a):e.fromCubemap(a),u.texture.pmremVersion=a.pmremVersion,t.set(a,u),a.addEventListener("dispose",o),u.texture):null}}}return a}function r(a){let c=0,l=6;for(let d=0;d<l;d++)a[d]!==void 0&&c++;return c===l}function o(a){let c=a.target;c.removeEventListener("dispose",o);let l=t.get(c);l!==void 0&&(t.delete(c),l.dispose())}function s(){t=new WeakMap,e!==null&&(e.dispose(),e=null)}return{get:n,dispose:s}}function xSe(i){let t={};function e(n){if(t[n]!==void 0)return t[n];let r=i.getExtension(n);return t[n]=r,r}return{has:function(n){return e(n)!==null},init:function(){e("EXT_color_buffer_float"),e("WEBGL_clip_cull_distance"),e("OES_texture_float_linear"),e("EXT_color_buffer_half_float"),e("WEBGL_multisampled_render_to_texture"),e("WEBGL_render_shared_exponent")},get:function(n){let r=e(n);return r===null&&mf("WebGLRenderer: "+n+" extension not supported."),r}}}function wSe(i,t,e,n){let r={},o=new WeakMap;function s(u){let h=u.target;h.index!==null&&t.remove(h.index);for(let p in h.attributes)t.remove(h.attributes[p]);h.removeEventListener("dispose",s),delete r[h.id];let m=o.get(h);m&&(t.remove(m),o.delete(h)),n.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,e.memory.geometries--}function a(u,h){return r[h.id]===!0||(h.addEventListener("dispose",s),r[h.id]=!0,e.memory.geometries++),h}function c(u){let h=u.attributes;for(let m in h)t.update(h[m],i.ARRAY_BUFFER)}function l(u){let h=[],m=u.index,p=u.attributes.position,_=0;if(m!==null){let S=m.array;_=m.version;for(let C=0,E=S.length;C<E;C+=3){let N=S[C+0],R=S[C+1],B=S[C+2];h.push(N,R,R,B,B,N)}}else if(p!==void 0){let S=p.array;_=p.version;for(let C=0,E=S.length/3-1;C<E;C+=3){let N=C+0,R=C+1,B=C+2;h.push(N,R,R,B,B,N)}}else return;let f=new(XL(h)?U0:V0)(h,1);f.version=_;let g=o.get(u);g&&t.remove(g),o.set(u,f)}function d(u){let h=o.get(u);if(h){let m=u.index;m!==null&&h.version<m.version&&l(u)}else l(u);return o.get(u)}return{get:a,update:c,getWireframeAttribute:d}}function MSe(i,t,e){let n;function r(h){n=h}let o,s;function a(h){o=h.type,s=h.bytesPerElement}function c(h,m){i.drawElements(n,m,o,h*s),e.update(m,n,1)}function l(h,m,p){p!==0&&(i.drawElementsInstanced(n,m,o,h*s,p),e.update(m,n,p))}function d(h,m,p){if(p===0)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,m,0,o,h,0,p);let f=0;for(let g=0;g<p;g++)f+=m[g];e.update(f,n,1)}function u(h,m,p,_){if(p===0)return;let f=t.get("WEBGL_multi_draw");if(f===null)for(let g=0;g<h.length;g++)l(h[g]/s,m[g],_[g]);else{f.multiDrawElementsInstancedWEBGL(n,m,0,o,h,0,_,0,p);let g=0;for(let S=0;S<p;S++)g+=m[S]*_[S];e.update(g,n,1)}}this.setMode=r,this.setIndex=a,this.render=c,this.renderInstances=l,this.renderMultiDraw=d,this.renderMultiDrawInstances=u}function CSe(i){let t={geometries:0,textures:0},e={frame:0,calls:0,triangles:0,points:0,lines:0};function n(o,s,a){switch(e.calls++,s){case i.TRIANGLES:e.triangles+=a*(o/3);break;case i.LINES:e.lines+=a*(o/2);break;case i.LINE_STRIP:e.lines+=a*(o-1);break;case i.LINE_LOOP:e.lines+=a*o;break;case i.POINTS:e.points+=a*o;break;default:jt("WebGLInfo: Unknown draw mode:",s);break}}function r(){e.calls=0,e.triangles=0,e.points=0,e.lines=0}return{memory:t,render:e,programs:null,autoReset:!0,reset:r,update:n}}function SSe(i,t,e){let n=new WeakMap,r=new Un;function o(s,a,c){let l=s.morphTargetInfluences,d=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=d!==void 0?d.length:0,h=n.get(a);if(h===void 0||h.count!==u){let O=function(){z.dispose(),n.delete(a),a.removeEventListener("dispose",O)};var m=O;h!==void 0&&h.texture.dispose();let p=a.morphAttributes.position!==void 0,_=a.morphAttributes.normal!==void 0,f=a.morphAttributes.color!==void 0,g=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],C=a.morphAttributes.color||[],E=0;p===!0&&(E=1),_===!0&&(E=2),f===!0&&(E=3);let N=a.attributes.position.count*E,R=1;N>t.maxTextureSize&&(R=Math.ceil(N/t.maxTextureSize),N=t.maxTextureSize);let B=new Float32Array(N*R*4*u),z=new B0(B,N,R,u);z.type=Oa,z.needsUpdate=!0;let T=E*4;for(let U=0;U<u;U++){let X=g[U],ee=S[U],de=C[U],se=N*R*4*U;for(let ue=0;ue<X.count;ue++){let ae=ue*T;p===!0&&(r.fromBufferAttribute(X,ue),B[se+ae+0]=r.x,B[se+ae+1]=r.y,B[se+ae+2]=r.z,B[se+ae+3]=0),_===!0&&(r.fromBufferAttribute(ee,ue),B[se+ae+4]=r.x,B[se+ae+5]=r.y,B[se+ae+6]=r.z,B[se+ae+7]=0),f===!0&&(r.fromBufferAttribute(de,ue),B[se+ae+8]=r.x,B[se+ae+9]=r.y,B[se+ae+10]=r.z,B[se+ae+11]=de.itemSize===4?r.w:1)}}h={count:u,texture:z,size:new Ht(N,R)},n.set(a,h),a.addEventListener("dispose",O)}if(s.isInstancedMesh===!0&&s.morphTexture!==null)c.getUniforms().setValue(i,"morphTexture",s.morphTexture,e);else{let p=0;for(let f=0;f<l.length;f++)p+=l[f];let _=a.morphTargetsRelative?1:1-p;c.getUniforms().setValue(i,"morphTargetBaseInfluence",_),c.getUniforms().setValue(i,"morphTargetInfluences",l)}c.getUniforms().setValue(i,"morphTargetsTexture",h.texture,e),c.getUniforms().setValue(i,"morphTargetsTextureSize",h.size)}return{update:o}}function ESe(i,t,e,n){let r=new WeakMap;function o(c){let l=n.render.frame,d=c.geometry,u=t.get(c,d);if(r.get(u)!==l&&(t.update(u),r.set(u,l)),c.isInstancedMesh&&(c.hasEventListener("dispose",a)===!1&&c.addEventListener("dispose",a),r.get(c)!==l&&(e.update(c.instanceMatrix,i.ARRAY_BUFFER),c.instanceColor!==null&&e.update(c.instanceColor,i.ARRAY_BUFFER),r.set(c,l))),c.isSkinnedMesh){let h=c.skeleton;r.get(h)!==l&&(h.update(),r.set(h,l))}return u}function s(){r=new WeakMap}function a(c){let l=c.target;l.removeEventListener("dispose",a),e.remove(l.instanceMatrix),l.instanceColor!==null&&e.remove(l.instanceColor)}return{update:o,dispose:s}}var TSe={[PL]:"LINEAR_TONE_MAPPING",[OL]:"REINHARD_TONE_MAPPING",[NL]:"CINEON_TONE_MAPPING",[RL]:"ACES_FILMIC_TONE_MAPPING",[LL]:"AGX_TONE_MAPPING",[BL]:"NEUTRAL_TONE_MAPPING",[FL]:"CUSTOM_TONE_MAPPING"};function ISe(i,t,e,n,r){let o=new ys(t,e,{type:i,depthBuffer:n,stencilBuffer:r}),s=new ys(t,e,{type:wc,depthBuffer:!1,stencilBuffer:!1}),a=new gr;a.setAttribute("position",new Hi([-1,3,0,-1,-1,0,3,-1,0],3)),a.setAttribute("uv",new Hi([0,2,0,0,2,0],2));let c=new yC({uniforms:{tDiffuse:{value:null}},vertexShader:`
			precision highp float;

			uniform mat4 modelViewMatrix;
			uniform mat4 projectionMatrix;

			attribute vec3 position;
			attribute vec2 uv;

			varying vec2 vUv;

			void main() {
				vUv = uv;
				gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
			}`,fragmentShader:`
			precision highp float;

			uniform sampler2D tDiffuse;

			varying vec2 vUv;

			#include <tonemapping_pars_fragment>
			#include <colorspace_pars_fragment>

			void main() {
				gl_FragColor = texture2D( tDiffuse, vUv );

				#ifdef LINEAR_TONE_MAPPING
					gl_FragColor.rgb = LinearToneMapping( gl_FragColor.rgb );
				#elif defined( REINHARD_TONE_MAPPING )
					gl_FragColor.rgb = ReinhardToneMapping( gl_FragColor.rgb );
				#elif defined( CINEON_TONE_MAPPING )
					gl_FragColor.rgb = CineonToneMapping( gl_FragColor.rgb );
				#elif defined( ACES_FILMIC_TONE_MAPPING )
					gl_FragColor.rgb = ACESFilmicToneMapping( gl_FragColor.rgb );
				#elif defined( AGX_TONE_MAPPING )
					gl_FragColor.rgb = AgXToneMapping( gl_FragColor.rgb );
				#elif defined( NEUTRAL_TONE_MAPPING )
					gl_FragColor.rgb = NeutralToneMapping( gl_FragColor.rgb );
				#elif defined( CUSTOM_TONE_MAPPING )
					gl_FragColor.rgb = CustomToneMapping( gl_FragColor.rgb );
				#endif

				#ifdef SRGB_TRANSFER
					gl_FragColor = sRGBTransferOETF( gl_FragColor );
				#endif
			}`,depthTest:!1,depthWrite:!1}),l=new ze(a,c),d=new yf(-1,1,1,-1,0,1),u=null,h=null,m=!1,p,_=null,f=[],g=!1;this.setSize=function(S,C){o.setSize(S,C),s.setSize(S,C);for(let E=0;E<f.length;E++){let N=f[E];N.setSize&&N.setSize(S,C)}},this.setEffects=function(S){f=S,g=f.length>0&&f[0].isRenderPass===!0;let C=o.width,E=o.height;for(let N=0;N<f.length;N++){let R=f[N];R.setSize&&R.setSize(C,E)}},this.begin=function(S,C){if(m||S.toneMapping===Aa&&f.length===0)return!1;if(_=C,C!==null){let E=C.width,N=C.height;(o.width!==E||o.height!==N)&&this.setSize(E,N)}return g===!1&&S.setRenderTarget(o),p=S.toneMapping,S.toneMapping=Aa,!0},this.hasRenderPass=function(){return g},this.end=function(S,C){S.toneMapping=p,m=!0;let E=o,N=s;for(let R=0;R<f.length;R++){let B=f[R];if(B.enabled!==!1&&(B.render(S,N,E,C),B.needsSwap!==!1)){let z=E;E=N,N=z}}if(u!==S.outputColorSpace||h!==S.toneMapping){u=S.outputColorSpace,h=S.toneMapping,c.defines={},Fi.getTransfer(u)===Ki&&(c.defines.SRGB_TRANSFER="");let R=TSe[h];R&&(c.defines[R]=""),c.needsUpdate=!0}c.uniforms.tDiffuse.value=E.texture,S.setRenderTarget(_),S.render(l,d),_=null,m=!1},this.isCompositing=function(){return m},this.dispose=function(){o.dispose(),s.dispose(),a.dispose(),c.dispose()}}var SZ=new Mc,c3=new Yd(1,1),EZ=new B0,TZ=new mC,IZ=new H0,aZ=[],cZ=[],lZ=new Float32Array(16),dZ=new Float32Array(9),uZ=new Float32Array(4);function If(i,t,e){let n=i[0];if(n<=0||n>0)return i;let r=t*e,o=aZ[r];if(o===void 0&&(o=new Float32Array(r),aZ[r]=o),t!==0){n.toArray(o,0);for(let s=1,a=0;s!==t;++s)a+=e,i[s].toArray(o,a)}return o}function Cr(i,t){if(i.length!==t.length)return!1;for(let e=0,n=i.length;e<n;e++)if(i[e]!==t[e])return!1;return!0}function Sr(i,t){for(let e=0,n=t.length;e<n;e++)i[e]=t[e]}function OS(i,t){let e=cZ[t];e===void 0&&(e=new Int32Array(t),cZ[t]=e);for(let n=0;n!==t;++n)e[n]=i.allocateTextureUnit();return e}function DSe(i,t){let e=this.cache;e[0]!==t&&(i.uniform1f(this.addr,t),e[0]=t)}function kSe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2f(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Cr(e,t))return;i.uniform2fv(this.addr,t),Sr(e,t)}}function ASe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3f(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else if(t.r!==void 0)(e[0]!==t.r||e[1]!==t.g||e[2]!==t.b)&&(i.uniform3f(this.addr,t.r,t.g,t.b),e[0]=t.r,e[1]=t.g,e[2]=t.b);else{if(Cr(e,t))return;i.uniform3fv(this.addr,t),Sr(e,t)}}function PSe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4f(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Cr(e,t))return;i.uniform4fv(this.addr,t),Sr(e,t)}}function OSe(i,t){let e=this.cache,n=t.elements;if(n===void 0){if(Cr(e,t))return;i.uniformMatrix2fv(this.addr,!1,t),Sr(e,t)}else{if(Cr(e,n))return;uZ.set(n),i.uniformMatrix2fv(this.addr,!1,uZ),Sr(e,n)}}function NSe(i,t){let e=this.cache,n=t.elements;if(n===void 0){if(Cr(e,t))return;i.uniformMatrix3fv(this.addr,!1,t),Sr(e,t)}else{if(Cr(e,n))return;dZ.set(n),i.uniformMatrix3fv(this.addr,!1,dZ),Sr(e,n)}}function RSe(i,t){let e=this.cache,n=t.elements;if(n===void 0){if(Cr(e,t))return;i.uniformMatrix4fv(this.addr,!1,t),Sr(e,t)}else{if(Cr(e,n))return;lZ.set(n),i.uniformMatrix4fv(this.addr,!1,lZ),Sr(e,n)}}function FSe(i,t){let e=this.cache;e[0]!==t&&(i.uniform1i(this.addr,t),e[0]=t)}function LSe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2i(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Cr(e,t))return;i.uniform2iv(this.addr,t),Sr(e,t)}}function BSe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3i(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Cr(e,t))return;i.uniform3iv(this.addr,t),Sr(e,t)}}function VSe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4i(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Cr(e,t))return;i.uniform4iv(this.addr,t),Sr(e,t)}}function USe(i,t){let e=this.cache;e[0]!==t&&(i.uniform1ui(this.addr,t),e[0]=t)}function zSe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y)&&(i.uniform2ui(this.addr,t.x,t.y),e[0]=t.x,e[1]=t.y);else{if(Cr(e,t))return;i.uniform2uiv(this.addr,t),Sr(e,t)}}function HSe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z)&&(i.uniform3ui(this.addr,t.x,t.y,t.z),e[0]=t.x,e[1]=t.y,e[2]=t.z);else{if(Cr(e,t))return;i.uniform3uiv(this.addr,t),Sr(e,t)}}function jSe(i,t){let e=this.cache;if(t.x!==void 0)(e[0]!==t.x||e[1]!==t.y||e[2]!==t.z||e[3]!==t.w)&&(i.uniform4ui(this.addr,t.x,t.y,t.z,t.w),e[0]=t.x,e[1]=t.y,e[2]=t.z,e[3]=t.w);else{if(Cr(e,t))return;i.uniform4uiv(this.addr,t),Sr(e,t)}}function $Se(i,t,e){let n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let o;this.type===i.SAMPLER_2D_SHADOW?(c3.compareFunction=e.isReversedDepthBuffer()?TS:ES,o=c3):o=SZ,e.setTexture2D(t||o,r)}function GSe(i,t,e){let n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture3D(t||TZ,r)}function WSe(i,t,e){let n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTextureCube(t||IZ,r)}function qSe(i,t,e){let n=this.cache,r=e.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),e.setTexture2DArray(t||EZ,r)}function XSe(i){switch(i){case 5126:return DSe;case 35664:return kSe;case 35665:return ASe;case 35666:return PSe;case 35674:return OSe;case 35675:return NSe;case 35676:return RSe;case 5124:case 35670:return FSe;case 35667:case 35671:return LSe;case 35668:case 35672:return BSe;case 35669:case 35673:return VSe;case 5125:return USe;case 36294:return zSe;case 36295:return HSe;case 36296:return jSe;case 35678:case 36198:case 36298:case 36306:case 35682:return $Se;case 35679:case 36299:case 36307:return GSe;case 35680:case 36300:case 36308:case 36293:return WSe;case 36289:case 36303:case 36311:case 36292:return qSe}}function YSe(i,t){i.uniform1fv(this.addr,t)}function ZSe(i,t){let e=If(t,this.size,2);i.uniform2fv(this.addr,e)}function KSe(i,t){let e=If(t,this.size,3);i.uniform3fv(this.addr,e)}function QSe(i,t){let e=If(t,this.size,4);i.uniform4fv(this.addr,e)}function JSe(i,t){let e=If(t,this.size,4);i.uniformMatrix2fv(this.addr,!1,e)}function e1e(i,t){let e=If(t,this.size,9);i.uniformMatrix3fv(this.addr,!1,e)}function t1e(i,t){let e=If(t,this.size,16);i.uniformMatrix4fv(this.addr,!1,e)}function i1e(i,t){i.uniform1iv(this.addr,t)}function n1e(i,t){i.uniform2iv(this.addr,t)}function r1e(i,t){i.uniform3iv(this.addr,t)}function o1e(i,t){i.uniform4iv(this.addr,t)}function s1e(i,t){i.uniform1uiv(this.addr,t)}function a1e(i,t){i.uniform2uiv(this.addr,t)}function c1e(i,t){i.uniform3uiv(this.addr,t)}function l1e(i,t){i.uniform4uiv(this.addr,t)}function d1e(i,t,e){let n=this.cache,r=t.length,o=OS(e,r);Cr(n,o)||(i.uniform1iv(this.addr,o),Sr(n,o));let s;this.type===i.SAMPLER_2D_SHADOW?s=c3:s=SZ;for(let a=0;a!==r;++a)e.setTexture2D(t[a]||s,o[a])}function u1e(i,t,e){let n=this.cache,r=t.length,o=OS(e,r);Cr(n,o)||(i.uniform1iv(this.addr,o),Sr(n,o));for(let s=0;s!==r;++s)e.setTexture3D(t[s]||TZ,o[s])}function h1e(i,t,e){let n=this.cache,r=t.length,o=OS(e,r);Cr(n,o)||(i.uniform1iv(this.addr,o),Sr(n,o));for(let s=0;s!==r;++s)e.setTextureCube(t[s]||IZ,o[s])}function m1e(i,t,e){let n=this.cache,r=t.length,o=OS(e,r);Cr(n,o)||(i.uniform1iv(this.addr,o),Sr(n,o));for(let s=0;s!==r;++s)e.setTexture2DArray(t[s]||EZ,o[s])}function p1e(i){switch(i){case 5126:return YSe;case 35664:return ZSe;case 35665:return KSe;case 35666:return QSe;case 35674:return JSe;case 35675:return e1e;case 35676:return t1e;case 5124:case 35670:return i1e;case 35667:case 35671:return n1e;case 35668:case 35672:return r1e;case 35669:case 35673:return o1e;case 5125:return s1e;case 36294:return a1e;case 36295:return c1e;case 36296:return l1e;case 35678:case 36198:case 36298:case 36306:case 35682:return d1e;case 35679:case 36299:case 36307:return u1e;case 35680:case 36300:case 36308:case 36293:return h1e;case 36289:case 36303:case 36311:case 36292:return m1e}}var l3=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.setValue=XSe(e.type)}},d3=class{constructor(t,e,n){this.id=t,this.addr=n,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=p1e(e.type)}},u3=class{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,n){let r=this.seq;for(let o=0,s=r.length;o!==s;++o){let a=r[o];a.setValue(t,e[a.id],n)}}},s3=/(\w+)(\])?(\[|\.)?/g;function hZ(i,t){i.seq.push(t),i.map[t.id]=t}function f1e(i,t,e){let n=i.name,r=n.length;for(s3.lastIndex=0;;){let o=s3.exec(n),s=s3.lastIndex,a=o[1],c=o[2]==="]",l=o[3];if(c&&(a=a|0),l===void 0||l==="["&&s+2===r){hZ(e,l===void 0?new l3(a,i,t):new d3(a,i,t));break}else{let u=e.map[a];u===void 0&&(u=new u3(a),hZ(e,u)),e=u}}}var Tf=class{constructor(t,e){this.seq=[],this.map={};let n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let s=0;s<n;++s){let a=t.getActiveUniform(e,s),c=t.getUniformLocation(e,a.name);f1e(a,c,this)}let r=[],o=[];for(let s of this.seq)s.type===t.SAMPLER_2D_SHADOW||s.type===t.SAMPLER_CUBE_SHADOW||s.type===t.SAMPLER_2D_ARRAY_SHADOW?r.push(s):o.push(s);r.length>0&&(this.seq=r.concat(o))}setValue(t,e,n,r){let o=this.map[e];o!==void 0&&o.setValue(t,n,r)}setOptional(t,e,n){let r=e[n];r!==void 0&&this.setValue(t,n,r)}static upload(t,e,n,r){for(let o=0,s=e.length;o!==s;++o){let a=e[o],c=n[a.id];c.needsUpdate!==!1&&a.setValue(t,c.value,r)}}static seqWithValue(t,e){let n=[];for(let r=0,o=t.length;r!==o;++r){let s=t[r];s.id in e&&n.push(s)}return n}};function mZ(i,t,e){let n=i.createShader(t);return i.shaderSource(n,e),i.compileShader(n),n}var g1e=37297,_1e=0;function b1e(i,t){let e=i.split(`
`),n=[],r=Math.max(t-6,0),o=Math.min(t+6,e.length);for(let s=r;s<o;s++){let a=s+1;n.push(`${a===t?">":" "} ${a}: ${e[s]}`)}return n.join(`
`)}var pZ=new mi;function v1e(i){Fi._getMatrix(pZ,Fi.workingColorSpace,i);let t=`mat3( ${pZ.elements.map(e=>e.toFixed(4))} )`;switch(Fi.getTransfer(i)){case R0:return[t,"LinearTransferOETF"];case Ki:return[t,"sRGBTransferOETF"];default:return Ut("WebGLProgram: Unsupported color space: ",i),[t,"LinearTransferOETF"]}}function fZ(i,t,e){let n=i.getShaderParameter(t,i.COMPILE_STATUS),o=(i.getShaderInfoLog(t)||"").trim();if(n&&o==="")return"";let s=/ERROR: 0:(\d+)/.exec(o);if(s){let a=parseInt(s[1]);return e.toUpperCase()+`

`+o+`

`+b1e(i.getShaderSource(t),a)}else return o}function y1e(i,t){let e=v1e(t);return[`vec4 ${i}( vec4 value ) {`,`	return ${e[1]}( vec4( value.rgb * ${e[0]}, value.a ) );`,"}"].join(`
`)}var x1e={[PL]:"Linear",[OL]:"Reinhard",[NL]:"Cineon",[RL]:"ACESFilmic",[LL]:"AgX",[BL]:"Neutral",[FL]:"Custom"};function w1e(i,t){let e=x1e[t];return e===void 0?(Ut("WebGLProgram: Unsupported toneMapping:",t),"vec3 "+i+"( vec3 color ) { return LinearToneMapping( color ); }"):"vec3 "+i+"( vec3 color ) { return "+e+"ToneMapping( color ); }"}var DS=new j;function M1e(){Fi.getLuminanceCoefficients(DS);let i=DS.x.toFixed(4),t=DS.y.toFixed(4),e=DS.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${t}, ${e} );`,"	return dot( weights, rgb );","}"].join(`
`)}function C1e(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(cb).join(`
`)}function S1e(i){let t=[];for(let e in i){let n=i[e];n!==!1&&t.push("#define "+e+" "+n)}return t.join(`
`)}function E1e(i,t){let e={},n=i.getProgramParameter(t,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){let o=i.getActiveAttrib(t,r),s=o.name,a=1;o.type===i.FLOAT_MAT2&&(a=2),o.type===i.FLOAT_MAT3&&(a=3),o.type===i.FLOAT_MAT4&&(a=4),e[s]={type:o.type,location:i.getAttribLocation(t,s),locationSize:a}}return e}function cb(i){return i!==""}function gZ(i,t){let e=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,e).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function _Z(i,t){return i.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}var T1e=/^[ \t]*#include +<([\w\d./]+)>/gm;function h3(i){return i.replace(T1e,D1e)}var I1e=new Map;function D1e(i,t){let e=yi[t];if(e===void 0){let n=I1e.get(t);if(n!==void 0)e=yi[n],Ut('WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,n);else throw new Error("Can not resolve #include <"+t+">")}return h3(e)}var k1e=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function bZ(i){return i.replace(k1e,A1e)}function A1e(i,t,e,n){let r="";for(let o=parseInt(t);o<parseInt(e);o++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function vZ(i){let t=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?t+=`
#define HIGH_PRECISION`:i.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}var P1e={[J0]:"SHADOWMAP_TYPE_PCF",[wf]:"SHADOWMAP_TYPE_VSM"};function O1e(i){return P1e[i.shadowMapType]||"SHADOWMAP_TYPE_BASIC"}var N1e={[tu]:"ENVMAP_TYPE_CUBE",[Uh]:"ENVMAP_TYPE_CUBE",[eb]:"ENVMAP_TYPE_CUBE_UV"};function R1e(i){return i.envMap===!1?"ENVMAP_TYPE_CUBE":N1e[i.envMapMode]||"ENVMAP_TYPE_CUBE"}var F1e={[Uh]:"ENVMAP_MODE_REFRACTION"};function L1e(i){return i.envMap===!1?"ENVMAP_MODE_REFLECTION":F1e[i.envMapMode]||"ENVMAP_MODE_REFLECTION"}var B1e={[AL]:"ENVMAP_BLENDING_MULTIPLY",[zY]:"ENVMAP_BLENDING_MIX",[HY]:"ENVMAP_BLENDING_ADD"};function V1e(i){return i.envMap===!1?"ENVMAP_BLENDING_NONE":B1e[i.combine]||"ENVMAP_BLENDING_NONE"}function U1e(i){let t=i.envMapCubeUVHeight;if(t===null)return null;let e=Math.log2(t)-2,n=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:n,maxMip:e}}function z1e(i,t,e,n){let r=i.getContext(),o=e.defines,s=e.vertexShader,a=e.fragmentShader,c=O1e(e),l=R1e(e),d=L1e(e),u=V1e(e),h=U1e(e),m=C1e(e),p=S1e(o),_=r.createProgram(),f,g,S=e.glslVersion?"#version "+e.glslVersion+`
`:"";e.isRawShaderMaterial?(f=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,p].filter(cb).join(`
`),f.length>0&&(f+=`
`),g=["#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,p].filter(cb).join(`
`),g.length>0&&(g+=`
`)):(f=[vZ(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,p,e.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",e.batching?"#define USE_BATCHING":"",e.batchingColor?"#define USE_BATCHING_COLOR":"",e.instancing?"#define USE_INSTANCING":"",e.instancingColor?"#define USE_INSTANCING_COLOR":"",e.instancingMorph?"#define USE_INSTANCING_MORPH":"",e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.map?"#define USE_MAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+d:"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.displacementMap?"#define USE_DISPLACEMENTMAP":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.mapUv?"#define MAP_UV "+e.mapUv:"",e.alphaMapUv?"#define ALPHAMAP_UV "+e.alphaMapUv:"",e.lightMapUv?"#define LIGHTMAP_UV "+e.lightMapUv:"",e.aoMapUv?"#define AOMAP_UV "+e.aoMapUv:"",e.emissiveMapUv?"#define EMISSIVEMAP_UV "+e.emissiveMapUv:"",e.bumpMapUv?"#define BUMPMAP_UV "+e.bumpMapUv:"",e.normalMapUv?"#define NORMALMAP_UV "+e.normalMapUv:"",e.displacementMapUv?"#define DISPLACEMENTMAP_UV "+e.displacementMapUv:"",e.metalnessMapUv?"#define METALNESSMAP_UV "+e.metalnessMapUv:"",e.roughnessMapUv?"#define ROUGHNESSMAP_UV "+e.roughnessMapUv:"",e.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+e.anisotropyMapUv:"",e.clearcoatMapUv?"#define CLEARCOATMAP_UV "+e.clearcoatMapUv:"",e.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+e.clearcoatNormalMapUv:"",e.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+e.clearcoatRoughnessMapUv:"",e.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+e.iridescenceMapUv:"",e.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+e.iridescenceThicknessMapUv:"",e.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+e.sheenColorMapUv:"",e.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+e.sheenRoughnessMapUv:"",e.specularMapUv?"#define SPECULARMAP_UV "+e.specularMapUv:"",e.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+e.specularColorMapUv:"",e.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+e.specularIntensityMapUv:"",e.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+e.transmissionMapUv:"",e.thicknessMapUv?"#define THICKNESSMAP_UV "+e.thicknessMapUv:"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.flatShading?"#define FLAT_SHADED":"",e.skinning?"#define USE_SKINNING":"",e.morphTargets?"#define USE_MORPHTARGETS":"",e.morphNormals&&e.flatShading===!1?"#define USE_MORPHNORMALS":"",e.morphColors?"#define USE_MORPHCOLORS":"",e.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+e.morphTextureStride:"",e.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+e.morphTargetsCount:"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.sizeAttenuation?"#define USE_SIZEATTENUATION":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(cb).join(`
`),g=[vZ(e),"#define SHADER_TYPE "+e.shaderType,"#define SHADER_NAME "+e.shaderName,p,e.useFog&&e.fog?"#define USE_FOG":"",e.useFog&&e.fogExp2?"#define FOG_EXP2":"",e.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",e.map?"#define USE_MAP":"",e.matcap?"#define USE_MATCAP":"",e.envMap?"#define USE_ENVMAP":"",e.envMap?"#define "+l:"",e.envMap?"#define "+d:"",e.envMap?"#define "+u:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",e.lightMap?"#define USE_LIGHTMAP":"",e.aoMap?"#define USE_AOMAP":"",e.bumpMap?"#define USE_BUMPMAP":"",e.normalMap?"#define USE_NORMALMAP":"",e.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",e.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",e.emissiveMap?"#define USE_EMISSIVEMAP":"",e.anisotropy?"#define USE_ANISOTROPY":"",e.anisotropyMap?"#define USE_ANISOTROPYMAP":"",e.clearcoat?"#define USE_CLEARCOAT":"",e.clearcoatMap?"#define USE_CLEARCOATMAP":"",e.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",e.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",e.dispersion?"#define USE_DISPERSION":"",e.iridescence?"#define USE_IRIDESCENCE":"",e.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",e.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",e.specularMap?"#define USE_SPECULARMAP":"",e.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",e.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",e.roughnessMap?"#define USE_ROUGHNESSMAP":"",e.metalnessMap?"#define USE_METALNESSMAP":"",e.alphaMap?"#define USE_ALPHAMAP":"",e.alphaTest?"#define USE_ALPHATEST":"",e.alphaHash?"#define USE_ALPHAHASH":"",e.sheen?"#define USE_SHEEN":"",e.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",e.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",e.transmission?"#define USE_TRANSMISSION":"",e.transmissionMap?"#define USE_TRANSMISSIONMAP":"",e.thicknessMap?"#define USE_THICKNESSMAP":"",e.vertexTangents&&e.flatShading===!1?"#define USE_TANGENT":"",e.vertexColors||e.instancingColor||e.batchingColor?"#define USE_COLOR":"",e.vertexAlphas?"#define USE_COLOR_ALPHA":"",e.vertexUv1s?"#define USE_UV1":"",e.vertexUv2s?"#define USE_UV2":"",e.vertexUv3s?"#define USE_UV3":"",e.pointsUvs?"#define USE_POINTS_UV":"",e.gradientMap?"#define USE_GRADIENTMAP":"",e.flatShading?"#define FLAT_SHADED":"",e.doubleSided?"#define DOUBLE_SIDED":"",e.flipSided?"#define FLIP_SIDED":"",e.shadowMapEnabled?"#define USE_SHADOWMAP":"",e.shadowMapEnabled?"#define "+c:"",e.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",e.numLightProbes>0?"#define USE_LIGHT_PROBES":"",e.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",e.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",e.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",e.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",e.toneMapping!==Aa?"#define TONE_MAPPING":"",e.toneMapping!==Aa?yi.tonemapping_pars_fragment:"",e.toneMapping!==Aa?w1e("toneMapping",e.toneMapping):"",e.dithering?"#define DITHERING":"",e.opaque?"#define OPAQUE":"",yi.colorspace_pars_fragment,y1e("linearToOutputTexel",e.outputColorSpace),M1e(),e.useDepthPacking?"#define DEPTH_PACKING "+e.depthPacking:"",`
`].filter(cb).join(`
`)),s=h3(s),s=gZ(s,e),s=_Z(s,e),a=h3(a),a=gZ(a,e),a=_Z(a,e),s=bZ(s),a=bZ(a),e.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,f=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+f,g=["#define varying in",e.glslVersion===qL?"":"layout(location = 0) out highp vec4 pc_fragColor;",e.glslVersion===qL?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+g);let C=S+f+s,E=S+g+a,N=mZ(r,r.VERTEX_SHADER,C),R=mZ(r,r.FRAGMENT_SHADER,E);r.attachShader(_,N),r.attachShader(_,R),e.index0AttributeName!==void 0?r.bindAttribLocation(_,0,e.index0AttributeName):e.morphTargets===!0&&r.bindAttribLocation(_,0,"position"),r.linkProgram(_);function B(U){if(i.debug.checkShaderErrors){let X=r.getProgramInfoLog(_)||"",ee=r.getShaderInfoLog(N)||"",de=r.getShaderInfoLog(R)||"",se=X.trim(),ue=ee.trim(),ae=de.trim(),Ce=!0,Pe=!0;if(r.getProgramParameter(_,r.LINK_STATUS)===!1)if(Ce=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,_,N,R);else{let He=fZ(r,N,"vertex"),tt=fZ(r,R,"fragment");jt("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(_,r.VALIDATE_STATUS)+`

Material Name: `+U.name+`
Material Type: `+U.type+`

Program Info Log: `+se+`
`+He+`
`+tt)}else se!==""?Ut("WebGLProgram: Program Info Log:",se):(ue===""||ae==="")&&(Pe=!1);Pe&&(U.diagnostics={runnable:Ce,programLog:se,vertexShader:{log:ue,prefix:f},fragmentShader:{log:ae,prefix:g}})}r.deleteShader(N),r.deleteShader(R),z=new Tf(r,_),T=E1e(r,_)}let z;this.getUniforms=function(){return z===void 0&&B(this),z};let T;this.getAttributes=function(){return T===void 0&&B(this),T};let O=e.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return O===!1&&(O=r.getProgramParameter(_,g1e)),O},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(_),this.program=void 0},this.type=e.shaderType,this.name=e.shaderName,this.id=_1e++,this.cacheKey=t,this.usedTimes=1,this.program=_,this.vertexShader=N,this.fragmentShader=R,this}var H1e=0,m3=class{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){let e=t.vertexShader,n=t.fragmentShader,r=this._getShaderStage(e),o=this._getShaderStage(n),s=this._getShaderCacheForMaterial(t);return s.has(r)===!1&&(s.add(r),r.usedTimes++),s.has(o)===!1&&(s.add(o),o.usedTimes++),this}remove(t){let e=this.materialCache.get(t);for(let n of e)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){let e=this.materialCache,n=e.get(t);return n===void 0&&(n=new Set,e.set(t,n)),n}_getShaderStage(t){let e=this.shaderCache,n=e.get(t);return n===void 0&&(n=new p3(t),e.set(t,n)),n}},p3=class{constructor(t){this.id=H1e++,this.code=t,this.usedTimes=0}};function j1e(i,t,e,n,r,o,s){let a=new gf,c=new m3,l=new Set,d=[],u=new Map,h=r.logarithmicDepthBuffer,m=r.precision,p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distance",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function _(T){return l.add(T),T===0?"uv":`uv${T}`}function f(T,O,U,X,ee){let de=X.fog,se=ee.geometry,ue=T.isMeshStandardMaterial?X.environment:null,ae=(T.isMeshStandardMaterial?e:t).get(T.envMap||ue),Ce=ae&&ae.mapping===eb?ae.image.height:null,Pe=p[T.type];T.precision!==null&&(m=r.getMaxPrecision(T.precision),m!==T.precision&&Ut("WebGLProgram.getParameters:",T.precision,"not supported, using",m,"instead."));let He=se.morphAttributes.position||se.morphAttributes.normal||se.morphAttributes.color,tt=He!==void 0?He.length:0,ai=0;se.morphAttributes.position!==void 0&&(ai=1),se.morphAttributes.normal!==void 0&&(ai=2),se.morphAttributes.color!==void 0&&(ai=3);let pi,xn,In,Se;if(Pe){let Ji=Sc[Pe];pi=Ji.vertexShader,xn=Ji.fragmentShader}else pi=T.vertexShader,xn=T.fragmentShader,c.update(T),In=c.getVertexShaderID(T),Se=c.getFragmentShaderID(T);let De=i.getRenderTarget(),ht=i.state.buffers.depth.getReversed(),fi=ee.isInstancedMesh===!0,bt=ee.isBatchedMesh===!0,Vi=!!T.map,Tr=!!T.matcap,Li=!!ae,Qi=!!T.aoMap,un=!!T.lightMap,xi=!!T.bumpMap,ir=!!T.normalMap,W=!!T.displacementMap,nr=!!T.emissiveMap,Xi=!!T.metalnessMap,wn=!!T.roughnessMap,yt=T.anisotropy>0,V=T.clearcoat>0,k=T.dispersion>0,K=T.iridescence>0,xe=T.sheen>0,Te=T.transmission>0,be=yt&&!!T.anisotropyMap,Mt=V&&!!T.clearcoatMap,Xe=V&&!!T.clearcoatNormalMap,vt=V&&!!T.clearcoatRoughnessMap,Xt=K&&!!T.iridescenceMap,Oe=K&&!!T.iridescenceThicknessMap,Ze=xe&&!!T.sheenColorMap,_t=xe&&!!T.sheenRoughnessMap,xt=!!T.specularMap,Ye=!!T.specularColorMap,wi=!!T.specularIntensityMap,Y=Te&&!!T.transmissionMap,nt=Te&&!!T.thicknessMap,Ue=!!T.gradientMap,ct=!!T.alphaMap,Ae=T.alphaTest>0,Ee=!!T.alphaHash,We=!!T.extensions,ti=Aa;T.toneMapped&&(De===null||De.isXRRenderTarget===!0)&&(ti=i.toneMapping);let Mn={shaderID:Pe,shaderType:T.type,shaderName:T.name,vertexShader:pi,fragmentShader:xn,defines:T.defines,customVertexShaderID:In,customFragmentShaderID:Se,isRawShaderMaterial:T.isRawShaderMaterial===!0,glslVersion:T.glslVersion,precision:m,batching:bt,batchingColor:bt&&ee._colorsTexture!==null,instancing:fi,instancingColor:fi&&ee.instanceColor!==null,instancingMorph:fi&&ee.morphTexture!==null,outputColorSpace:De===null?i.outputColorSpace:De.isXRRenderTarget===!0?De.texture.colorSpace:Nh,alphaToCoverage:!!T.alphaToCoverage,map:Vi,matcap:Tr,envMap:Li,envMapMode:Li&&ae.mapping,envMapCubeUVHeight:Ce,aoMap:Qi,lightMap:un,bumpMap:xi,normalMap:ir,displacementMap:W,emissiveMap:nr,normalMapObjectSpace:ir&&T.normalMapType===GY,normalMapTangentSpace:ir&&T.normalMapType===WL,metalnessMap:Xi,roughnessMap:wn,anisotropy:yt,anisotropyMap:be,clearcoat:V,clearcoatMap:Mt,clearcoatNormalMap:Xe,clearcoatRoughnessMap:vt,dispersion:k,iridescence:K,iridescenceMap:Xt,iridescenceThicknessMap:Oe,sheen:xe,sheenColorMap:Ze,sheenRoughnessMap:_t,specularMap:xt,specularColorMap:Ye,specularIntensityMap:wi,transmission:Te,transmissionMap:Y,thicknessMap:nt,gradientMap:Ue,opaque:T.transparent===!1&&T.blending===Ph&&T.alphaToCoverage===!1,alphaMap:ct,alphaTest:Ae,alphaHash:Ee,combine:T.combine,mapUv:Vi&&_(T.map.channel),aoMapUv:Qi&&_(T.aoMap.channel),lightMapUv:un&&_(T.lightMap.channel),bumpMapUv:xi&&_(T.bumpMap.channel),normalMapUv:ir&&_(T.normalMap.channel),displacementMapUv:W&&_(T.displacementMap.channel),emissiveMapUv:nr&&_(T.emissiveMap.channel),metalnessMapUv:Xi&&_(T.metalnessMap.channel),roughnessMapUv:wn&&_(T.roughnessMap.channel),anisotropyMapUv:be&&_(T.anisotropyMap.channel),clearcoatMapUv:Mt&&_(T.clearcoatMap.channel),clearcoatNormalMapUv:Xe&&_(T.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:vt&&_(T.clearcoatRoughnessMap.channel),iridescenceMapUv:Xt&&_(T.iridescenceMap.channel),iridescenceThicknessMapUv:Oe&&_(T.iridescenceThicknessMap.channel),sheenColorMapUv:Ze&&_(T.sheenColorMap.channel),sheenRoughnessMapUv:_t&&_(T.sheenRoughnessMap.channel),specularMapUv:xt&&_(T.specularMap.channel),specularColorMapUv:Ye&&_(T.specularColorMap.channel),specularIntensityMapUv:wi&&_(T.specularIntensityMap.channel),transmissionMapUv:Y&&_(T.transmissionMap.channel),thicknessMapUv:nt&&_(T.thicknessMap.channel),alphaMapUv:ct&&_(T.alphaMap.channel),vertexTangents:!!se.attributes.tangent&&(ir||yt),vertexColors:T.vertexColors,vertexAlphas:T.vertexColors===!0&&!!se.attributes.color&&se.attributes.color.itemSize===4,pointsUvs:ee.isPoints===!0&&!!se.attributes.uv&&(Vi||ct),fog:!!de,useFog:T.fog===!0,fogExp2:!!de&&de.isFogExp2,flatShading:T.flatShading===!0&&T.wireframe===!1,sizeAttenuation:T.sizeAttenuation===!0,logarithmicDepthBuffer:h,reversedDepthBuffer:ht,skinning:ee.isSkinnedMesh===!0,morphTargets:se.morphAttributes.position!==void 0,morphNormals:se.morphAttributes.normal!==void 0,morphColors:se.morphAttributes.color!==void 0,morphTargetsCount:tt,morphTextureStride:ai,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numLightProbes:O.numLightProbes,numClippingPlanes:s.numPlanes,numClipIntersection:s.numIntersection,dithering:T.dithering,shadowMapEnabled:i.shadowMap.enabled&&U.length>0,shadowMapType:i.shadowMap.type,toneMapping:ti,decodeVideoTexture:Vi&&T.map.isVideoTexture===!0&&Fi.getTransfer(T.map.colorSpace)===Ki,decodeVideoTextureEmissive:nr&&T.emissiveMap.isVideoTexture===!0&&Fi.getTransfer(T.emissiveMap.colorSpace)===Ki,premultipliedAlpha:T.premultipliedAlpha,doubleSided:T.side===po,flipSided:T.side===Ro,useDepthPacking:T.depthPacking>=0,depthPacking:T.depthPacking||0,index0AttributeName:T.index0AttributeName,extensionClipCullDistance:We&&T.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(We&&T.extensions.multiDraw===!0||bt)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:T.customProgramCacheKey()};return Mn.vertexUv1s=l.has(1),Mn.vertexUv2s=l.has(2),Mn.vertexUv3s=l.has(3),l.clear(),Mn}function g(T){let O=[];if(T.shaderID?O.push(T.shaderID):(O.push(T.customVertexShaderID),O.push(T.customFragmentShaderID)),T.defines!==void 0)for(let U in T.defines)O.push(U),O.push(T.defines[U]);return T.isRawShaderMaterial===!1&&(S(O,T),C(O,T),O.push(i.outputColorSpace)),O.push(T.customProgramCacheKey),O.join()}function S(T,O){T.push(O.precision),T.push(O.outputColorSpace),T.push(O.envMapMode),T.push(O.envMapCubeUVHeight),T.push(O.mapUv),T.push(O.alphaMapUv),T.push(O.lightMapUv),T.push(O.aoMapUv),T.push(O.bumpMapUv),T.push(O.normalMapUv),T.push(O.displacementMapUv),T.push(O.emissiveMapUv),T.push(O.metalnessMapUv),T.push(O.roughnessMapUv),T.push(O.anisotropyMapUv),T.push(O.clearcoatMapUv),T.push(O.clearcoatNormalMapUv),T.push(O.clearcoatRoughnessMapUv),T.push(O.iridescenceMapUv),T.push(O.iridescenceThicknessMapUv),T.push(O.sheenColorMapUv),T.push(O.sheenRoughnessMapUv),T.push(O.specularMapUv),T.push(O.specularColorMapUv),T.push(O.specularIntensityMapUv),T.push(O.transmissionMapUv),T.push(O.thicknessMapUv),T.push(O.combine),T.push(O.fogExp2),T.push(O.sizeAttenuation),T.push(O.morphTargetsCount),T.push(O.morphAttributeCount),T.push(O.numDirLights),T.push(O.numPointLights),T.push(O.numSpotLights),T.push(O.numSpotLightMaps),T.push(O.numHemiLights),T.push(O.numRectAreaLights),T.push(O.numDirLightShadows),T.push(O.numPointLightShadows),T.push(O.numSpotLightShadows),T.push(O.numSpotLightShadowsWithMaps),T.push(O.numLightProbes),T.push(O.shadowMapType),T.push(O.toneMapping),T.push(O.numClippingPlanes),T.push(O.numClipIntersection),T.push(O.depthPacking)}function C(T,O){a.disableAll(),O.instancing&&a.enable(0),O.instancingColor&&a.enable(1),O.instancingMorph&&a.enable(2),O.matcap&&a.enable(3),O.envMap&&a.enable(4),O.normalMapObjectSpace&&a.enable(5),O.normalMapTangentSpace&&a.enable(6),O.clearcoat&&a.enable(7),O.iridescence&&a.enable(8),O.alphaTest&&a.enable(9),O.vertexColors&&a.enable(10),O.vertexAlphas&&a.enable(11),O.vertexUv1s&&a.enable(12),O.vertexUv2s&&a.enable(13),O.vertexUv3s&&a.enable(14),O.vertexTangents&&a.enable(15),O.anisotropy&&a.enable(16),O.alphaHash&&a.enable(17),O.batching&&a.enable(18),O.dispersion&&a.enable(19),O.batchingColor&&a.enable(20),O.gradientMap&&a.enable(21),T.push(a.mask),a.disableAll(),O.fog&&a.enable(0),O.useFog&&a.enable(1),O.flatShading&&a.enable(2),O.logarithmicDepthBuffer&&a.enable(3),O.reversedDepthBuffer&&a.enable(4),O.skinning&&a.enable(5),O.morphTargets&&a.enable(6),O.morphNormals&&a.enable(7),O.morphColors&&a.enable(8),O.premultipliedAlpha&&a.enable(9),O.shadowMapEnabled&&a.enable(10),O.doubleSided&&a.enable(11),O.flipSided&&a.enable(12),O.useDepthPacking&&a.enable(13),O.dithering&&a.enable(14),O.transmission&&a.enable(15),O.sheen&&a.enable(16),O.opaque&&a.enable(17),O.pointsUvs&&a.enable(18),O.decodeVideoTexture&&a.enable(19),O.decodeVideoTextureEmissive&&a.enable(20),O.alphaToCoverage&&a.enable(21),T.push(a.mask)}function E(T){let O=p[T.type],U;if(O){let X=Sc[O];U=tZ.clone(X.uniforms)}else U=T.uniforms;return U}function N(T,O){let U=u.get(O);return U!==void 0?++U.usedTimes:(U=new z1e(i,O,T,o),d.push(U),u.set(O,U)),U}function R(T){if(--T.usedTimes===0){let O=d.indexOf(T);d[O]=d[d.length-1],d.pop(),u.delete(T.cacheKey),T.destroy()}}function B(T){c.remove(T)}function z(){c.dispose()}return{getParameters:f,getProgramCacheKey:g,getUniforms:E,acquireProgram:N,releaseProgram:R,releaseShaderCache:B,programs:d,dispose:z}}function $1e(){let i=new WeakMap;function t(s){return i.has(s)}function e(s){let a=i.get(s);return a===void 0&&(a={},i.set(s,a)),a}function n(s){i.delete(s)}function r(s,a,c){i.get(s)[a]=c}function o(){i=new WeakMap}return{has:t,get:e,remove:n,update:r,dispose:o}}function G1e(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.material.id!==t.material.id?i.material.id-t.material.id:i.z!==t.z?i.z-t.z:i.id-t.id}function yZ(i,t){return i.groupOrder!==t.groupOrder?i.groupOrder-t.groupOrder:i.renderOrder!==t.renderOrder?i.renderOrder-t.renderOrder:i.z!==t.z?t.z-i.z:i.id-t.id}function xZ(){let i=[],t=0,e=[],n=[],r=[];function o(){t=0,e.length=0,n.length=0,r.length=0}function s(u,h,m,p,_,f){let g=i[t];return g===void 0?(g={id:u.id,object:u,geometry:h,material:m,groupOrder:p,renderOrder:u.renderOrder,z:_,group:f},i[t]=g):(g.id=u.id,g.object=u,g.geometry=h,g.material=m,g.groupOrder=p,g.renderOrder=u.renderOrder,g.z=_,g.group=f),t++,g}function a(u,h,m,p,_,f){let g=s(u,h,m,p,_,f);m.transmission>0?n.push(g):m.transparent===!0?r.push(g):e.push(g)}function c(u,h,m,p,_,f){let g=s(u,h,m,p,_,f);m.transmission>0?n.unshift(g):m.transparent===!0?r.unshift(g):e.unshift(g)}function l(u,h){e.length>1&&e.sort(u||G1e),n.length>1&&n.sort(h||yZ),r.length>1&&r.sort(h||yZ)}function d(){for(let u=t,h=i.length;u<h;u++){let m=i[u];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:e,transmissive:n,transparent:r,init:o,push:a,unshift:c,finish:d,sort:l}}function W1e(){let i=new WeakMap;function t(n,r){let o=i.get(n),s;return o===void 0?(s=new xZ,i.set(n,[s])):r>=o.length?(s=new xZ,o.push(s)):s=o[r],s}function e(){i=new WeakMap}return{get:t,dispose:e}}function q1e(){let i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={direction:new j,color:new Ci};break;case"SpotLight":e={position:new j,direction:new j,color:new Ci,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":e={position:new j,color:new Ci,distance:0,decay:0};break;case"HemisphereLight":e={direction:new j,skyColor:new Ci,groundColor:new Ci};break;case"RectAreaLight":e={color:new Ci,position:new j,halfWidth:new j,halfHeight:new j};break}return i[t.id]=e,e}}}function X1e(){let i={};return{get:function(t){if(i[t.id]!==void 0)return i[t.id];let e;switch(t.type){case"DirectionalLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht};break;case"SpotLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht};break;case"PointLight":e={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ht,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[t.id]=e,e}}}var Y1e=0;function Z1e(i,t){return(t.castShadow?2:0)-(i.castShadow?2:0)+(t.map?1:0)-(i.map?1:0)}function K1e(i){let t=new q1e,e=X1e(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let l=0;l<9;l++)n.probe.push(new j);let r=new j,o=new vn,s=new vn;function a(l){let d=0,u=0,h=0;for(let T=0;T<9;T++)n.probe[T].set(0,0,0);let m=0,p=0,_=0,f=0,g=0,S=0,C=0,E=0,N=0,R=0,B=0;l.sort(Z1e);for(let T=0,O=l.length;T<O;T++){let U=l[T],X=U.color,ee=U.intensity,de=U.distance,se=null;if(U.shadow&&U.shadow.map&&(U.shadow.map.texture.format===zh?se=U.shadow.map.texture:se=U.shadow.map.depthTexture||U.shadow.map.texture),U.isAmbientLight)d+=X.r*ee,u+=X.g*ee,h+=X.b*ee;else if(U.isLightProbe){for(let ue=0;ue<9;ue++)n.probe[ue].addScaledVector(U.sh.coefficients[ue],ee);B++}else if(U.isDirectionalLight){let ue=t.get(U);if(ue.color.copy(U.color).multiplyScalar(U.intensity),U.castShadow){let ae=U.shadow,Ce=e.get(U);Ce.shadowIntensity=ae.intensity,Ce.shadowBias=ae.bias,Ce.shadowNormalBias=ae.normalBias,Ce.shadowRadius=ae.radius,Ce.shadowMapSize=ae.mapSize,n.directionalShadow[m]=Ce,n.directionalShadowMap[m]=se,n.directionalShadowMatrix[m]=U.shadow.matrix,S++}n.directional[m]=ue,m++}else if(U.isSpotLight){let ue=t.get(U);ue.position.setFromMatrixPosition(U.matrixWorld),ue.color.copy(X).multiplyScalar(ee),ue.distance=de,ue.coneCos=Math.cos(U.angle),ue.penumbraCos=Math.cos(U.angle*(1-U.penumbra)),ue.decay=U.decay,n.spot[_]=ue;let ae=U.shadow;if(U.map&&(n.spotLightMap[N]=U.map,N++,ae.updateMatrices(U),U.castShadow&&R++),n.spotLightMatrix[_]=ae.matrix,U.castShadow){let Ce=e.get(U);Ce.shadowIntensity=ae.intensity,Ce.shadowBias=ae.bias,Ce.shadowNormalBias=ae.normalBias,Ce.shadowRadius=ae.radius,Ce.shadowMapSize=ae.mapSize,n.spotShadow[_]=Ce,n.spotShadowMap[_]=se,E++}_++}else if(U.isRectAreaLight){let ue=t.get(U);ue.color.copy(X).multiplyScalar(ee),ue.halfWidth.set(U.width*.5,0,0),ue.halfHeight.set(0,U.height*.5,0),n.rectArea[f]=ue,f++}else if(U.isPointLight){let ue=t.get(U);if(ue.color.copy(U.color).multiplyScalar(U.intensity),ue.distance=U.distance,ue.decay=U.decay,U.castShadow){let ae=U.shadow,Ce=e.get(U);Ce.shadowIntensity=ae.intensity,Ce.shadowBias=ae.bias,Ce.shadowNormalBias=ae.normalBias,Ce.shadowRadius=ae.radius,Ce.shadowMapSize=ae.mapSize,Ce.shadowCameraNear=ae.camera.near,Ce.shadowCameraFar=ae.camera.far,n.pointShadow[p]=Ce,n.pointShadowMap[p]=se,n.pointShadowMatrix[p]=U.shadow.matrix,C++}n.point[p]=ue,p++}else if(U.isHemisphereLight){let ue=t.get(U);ue.skyColor.copy(U.color).multiplyScalar(ee),ue.groundColor.copy(U.groundColor).multiplyScalar(ee),n.hemi[g]=ue,g++}}f>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=et.LTC_FLOAT_1,n.rectAreaLTC2=et.LTC_FLOAT_2):(n.rectAreaLTC1=et.LTC_HALF_1,n.rectAreaLTC2=et.LTC_HALF_2)),n.ambient[0]=d,n.ambient[1]=u,n.ambient[2]=h;let z=n.hash;(z.directionalLength!==m||z.pointLength!==p||z.spotLength!==_||z.rectAreaLength!==f||z.hemiLength!==g||z.numDirectionalShadows!==S||z.numPointShadows!==C||z.numSpotShadows!==E||z.numSpotMaps!==N||z.numLightProbes!==B)&&(n.directional.length=m,n.spot.length=_,n.rectArea.length=f,n.point.length=p,n.hemi.length=g,n.directionalShadow.length=S,n.directionalShadowMap.length=S,n.pointShadow.length=C,n.pointShadowMap.length=C,n.spotShadow.length=E,n.spotShadowMap.length=E,n.directionalShadowMatrix.length=S,n.pointShadowMatrix.length=C,n.spotLightMatrix.length=E+N-R,n.spotLightMap.length=N,n.numSpotLightShadowsWithMaps=R,n.numLightProbes=B,z.directionalLength=m,z.pointLength=p,z.spotLength=_,z.rectAreaLength=f,z.hemiLength=g,z.numDirectionalShadows=S,z.numPointShadows=C,z.numSpotShadows=E,z.numSpotMaps=N,z.numLightProbes=B,n.version=Y1e++)}function c(l,d){let u=0,h=0,m=0,p=0,_=0,f=d.matrixWorldInverse;for(let g=0,S=l.length;g<S;g++){let C=l[g];if(C.isDirectionalLight){let E=n.directional[u];E.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(f),u++}else if(C.isSpotLight){let E=n.spot[m];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(f),E.direction.setFromMatrixPosition(C.matrixWorld),r.setFromMatrixPosition(C.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(f),m++}else if(C.isRectAreaLight){let E=n.rectArea[p];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(f),s.identity(),o.copy(C.matrixWorld),o.premultiply(f),s.extractRotation(o),E.halfWidth.set(C.width*.5,0,0),E.halfHeight.set(0,C.height*.5,0),E.halfWidth.applyMatrix4(s),E.halfHeight.applyMatrix4(s),p++}else if(C.isPointLight){let E=n.point[h];E.position.setFromMatrixPosition(C.matrixWorld),E.position.applyMatrix4(f),h++}else if(C.isHemisphereLight){let E=n.hemi[_];E.direction.setFromMatrixPosition(C.matrixWorld),E.direction.transformDirection(f),_++}}}return{setup:a,setupView:c,state:n}}function wZ(i){let t=new K1e(i),e=[],n=[];function r(d){l.camera=d,e.length=0,n.length=0}function o(d){e.push(d)}function s(d){n.push(d)}function a(){t.setup(e)}function c(d){t.setupView(e,d)}let l={lightsArray:e,shadowsArray:n,camera:null,lights:t,transmissionRenderTarget:{}};return{init:r,state:l,setupLights:a,setupLightsView:c,pushLight:o,pushShadow:s}}function Q1e(i){let t=new WeakMap;function e(r,o=0){let s=t.get(r),a;return s===void 0?(a=new wZ(i),t.set(r,[a])):o>=s.length?(a=new wZ(i),s.push(a)):a=s[o],a}function n(){t=new WeakMap}return{get:e,dispose:n}}var J1e=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,eEe=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ).rg;
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ).r;
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( max( 0.0, squared_mean - mean * mean ) );
	gl_FragColor = vec4( mean, std_dev, 0.0, 1.0 );
}`,tEe=[new j(1,0,0),new j(-1,0,0),new j(0,1,0),new j(0,-1,0),new j(0,0,1),new j(0,0,-1)],iEe=[new j(0,-1,0),new j(0,-1,0),new j(0,0,1),new j(0,0,-1),new j(0,-1,0),new j(0,-1,0)],MZ=new vn,ab=new j,a3=new j;function nEe(i,t,e){let n=new bf,r=new Ht,o=new Ht,s=new Un,a=new xC,c=new wC,l={},d=e.maxTextureSize,u={[Dl]:Ro,[Ro]:Dl,[po]:po},h=new xs({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ht},radius:{value:4}},vertexShader:J1e,fragmentShader:eEe}),m=h.clone();m.defines.HORIZONTAL_PASS=1;let p=new gr;p.setAttribute("position",new vs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));let _=new ze(p,h),f=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=J0;let g=this.type;this.render=function(R,B,z){if(f.enabled===!1||f.autoUpdate===!1&&f.needsUpdate===!1||R.length===0)return;R.type===wY&&(Ut("WebGLShadowMap: PCFSoftShadowMap has been deprecated. Using PCFShadowMap instead."),R.type=J0);let T=i.getRenderTarget(),O=i.getActiveCubeFace(),U=i.getActiveMipmapLevel(),X=i.state;X.setBlending(xc),X.buffers.depth.getReversed()===!0?X.buffers.color.setClear(0,0,0,0):X.buffers.color.setClear(1,1,1,1),X.buffers.depth.setTest(!0),X.setScissorTest(!1);let ee=g!==this.type;ee&&B.traverse(function(de){de.material&&(Array.isArray(de.material)?de.material.forEach(se=>se.needsUpdate=!0):de.material.needsUpdate=!0)});for(let de=0,se=R.length;de<se;de++){let ue=R[de],ae=ue.shadow;if(ae===void 0){Ut("WebGLShadowMap:",ue,"has no shadow.");continue}if(ae.autoUpdate===!1&&ae.needsUpdate===!1)continue;r.copy(ae.mapSize);let Ce=ae.getFrameExtents();if(r.multiply(Ce),o.copy(ae.mapSize),(r.x>d||r.y>d)&&(r.x>d&&(o.x=Math.floor(d/Ce.x),r.x=o.x*Ce.x,ae.mapSize.x=o.x),r.y>d&&(o.y=Math.floor(d/Ce.y),r.y=o.y*Ce.y,ae.mapSize.y=o.y)),ae.map===null||ee===!0){if(ae.map!==null&&(ae.map.depthTexture!==null&&(ae.map.depthTexture.dispose(),ae.map.depthTexture=null),ae.map.dispose()),this.type===wf){if(ue.isPointLight){Ut("WebGLShadowMap: VSM shadow maps are not supported for PointLights. Use PCF or BasicShadowMap instead.");continue}ae.map=new ys(r.x,r.y,{format:zh,type:wc,minFilter:Yn,magFilter:Yn,generateMipmaps:!1}),ae.map.texture.name=ue.name+".shadowMap",ae.map.depthTexture=new Yd(r.x,r.y,Oa),ae.map.depthTexture.name=ue.name+".shadowMapDepth",ae.map.depthTexture.format=_c,ae.map.depthTexture.compareFunction=null,ae.map.depthTexture.minFilter=Br,ae.map.depthTexture.magFilter=Br}else{ue.isPointLight?(ae.map=new j0(r.x),ae.map.depthTexture=new bC(r.x,Pa)):(ae.map=new ys(r.x,r.y),ae.map.depthTexture=new Yd(r.x,r.y,Pa)),ae.map.depthTexture.name=ue.name+".shadowMap",ae.map.depthTexture.format=_c;let He=i.state.buffers.depth.getReversed();this.type===J0?(ae.map.depthTexture.compareFunction=He?TS:ES,ae.map.depthTexture.minFilter=Yn,ae.map.depthTexture.magFilter=Yn):(ae.map.depthTexture.compareFunction=null,ae.map.depthTexture.minFilter=Br,ae.map.depthTexture.magFilter=Br)}ae.camera.updateProjectionMatrix()}let Pe=ae.map.isWebGLCubeRenderTarget?6:1;for(let He=0;He<Pe;He++){if(ae.map.isWebGLCubeRenderTarget)i.setRenderTarget(ae.map,He),i.clear();else{He===0&&(i.setRenderTarget(ae.map),i.clear());let tt=ae.getViewport(He);s.set(o.x*tt.x,o.y*tt.y,o.x*tt.z,o.y*tt.w),X.viewport(s)}if(ue.isPointLight){let tt=ae.camera,ai=ae.matrix,pi=ue.distance||tt.far;pi!==tt.far&&(tt.far=pi,tt.updateProjectionMatrix()),ab.setFromMatrixPosition(ue.matrixWorld),tt.position.copy(ab),a3.copy(tt.position),a3.add(tEe[He]),tt.up.copy(iEe[He]),tt.lookAt(a3),tt.updateMatrixWorld(),ai.makeTranslation(-ab.x,-ab.y,-ab.z),MZ.multiplyMatrices(tt.projectionMatrix,tt.matrixWorldInverse),ae._frustum.setFromProjectionMatrix(MZ,tt.coordinateSystem,tt.reversedDepth)}else ae.updateMatrices(ue);n=ae.getFrustum(),E(B,z,ae.camera,ue,this.type)}ae.isPointLightShadow!==!0&&this.type===wf&&S(ae,z),ae.needsUpdate=!1}g=this.type,f.needsUpdate=!1,i.setRenderTarget(T,O,U)};function S(R,B){let z=t.update(_);h.defines.VSM_SAMPLES!==R.blurSamples&&(h.defines.VSM_SAMPLES=R.blurSamples,m.defines.VSM_SAMPLES=R.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),R.mapPass===null&&(R.mapPass=new ys(r.x,r.y,{format:zh,type:wc})),h.uniforms.shadow_pass.value=R.map.depthTexture,h.uniforms.resolution.value=R.mapSize,h.uniforms.radius.value=R.radius,i.setRenderTarget(R.mapPass),i.clear(),i.renderBufferDirect(B,null,z,h,_,null),m.uniforms.shadow_pass.value=R.mapPass.texture,m.uniforms.resolution.value=R.mapSize,m.uniforms.radius.value=R.radius,i.setRenderTarget(R.map),i.clear(),i.renderBufferDirect(B,null,z,m,_,null)}function C(R,B,z,T){let O=null,U=z.isPointLight===!0?R.customDistanceMaterial:R.customDepthMaterial;if(U!==void 0)O=U;else if(O=z.isPointLight===!0?c:a,i.localClippingEnabled&&B.clipShadows===!0&&Array.isArray(B.clippingPlanes)&&B.clippingPlanes.length!==0||B.displacementMap&&B.displacementScale!==0||B.alphaMap&&B.alphaTest>0||B.map&&B.alphaTest>0||B.alphaToCoverage===!0){let X=O.uuid,ee=B.uuid,de=l[X];de===void 0&&(de={},l[X]=de);let se=de[ee];se===void 0&&(se=O.clone(),de[ee]=se,B.addEventListener("dispose",N)),O=se}if(O.visible=B.visible,O.wireframe=B.wireframe,T===wf?O.side=B.shadowSide!==null?B.shadowSide:B.side:O.side=B.shadowSide!==null?B.shadowSide:u[B.side],O.alphaMap=B.alphaMap,O.alphaTest=B.alphaToCoverage===!0?.5:B.alphaTest,O.map=B.map,O.clipShadows=B.clipShadows,O.clippingPlanes=B.clippingPlanes,O.clipIntersection=B.clipIntersection,O.displacementMap=B.displacementMap,O.displacementScale=B.displacementScale,O.displacementBias=B.displacementBias,O.wireframeLinewidth=B.wireframeLinewidth,O.linewidth=B.linewidth,z.isPointLight===!0&&O.isMeshDistanceMaterial===!0){let X=i.properties.get(O);X.light=z}return O}function E(R,B,z,T,O){if(R.visible===!1)return;if(R.layers.test(B.layers)&&(R.isMesh||R.isLine||R.isPoints)&&(R.castShadow||R.receiveShadow&&O===wf)&&(!R.frustumCulled||n.intersectsObject(R))){R.modelViewMatrix.multiplyMatrices(z.matrixWorldInverse,R.matrixWorld);let ee=t.update(R),de=R.material;if(Array.isArray(de)){let se=ee.groups;for(let ue=0,ae=se.length;ue<ae;ue++){let Ce=se[ue],Pe=de[Ce.materialIndex];if(Pe&&Pe.visible){let He=C(R,Pe,T,O);R.onBeforeShadow(i,R,B,z,ee,He,Ce),i.renderBufferDirect(z,null,ee,He,R,Ce),R.onAfterShadow(i,R,B,z,ee,He,Ce)}}}else if(de.visible){let se=C(R,de,T,O);R.onBeforeShadow(i,R,B,z,ee,se,null),i.renderBufferDirect(z,null,ee,se,R,null),R.onAfterShadow(i,R,B,z,ee,se,null)}}let X=R.children;for(let ee=0,de=X.length;ee<de;ee++)E(X[ee],B,z,T,O)}function N(R){R.target.removeEventListener("dispose",N);for(let z in l){let T=l[z],O=R.target.uuid;O in T&&(T[O].dispose(),delete T[O])}}}var rEe={[PC]:OC,[NC]:LC,[RC]:BC,[Oh]:FC,[OC]:PC,[LC]:NC,[BC]:RC,[FC]:Oh};function oEe(i,t){function e(){let Y=!1,nt=new Un,Ue=null,ct=new Un(0,0,0,0);return{setMask:function(Ae){Ue!==Ae&&!Y&&(i.colorMask(Ae,Ae,Ae,Ae),Ue=Ae)},setLocked:function(Ae){Y=Ae},setClear:function(Ae,Ee,We,ti,Mn){Mn===!0&&(Ae*=ti,Ee*=ti,We*=ti),nt.set(Ae,Ee,We,ti),ct.equals(nt)===!1&&(i.clearColor(Ae,Ee,We,ti),ct.copy(nt))},reset:function(){Y=!1,Ue=null,ct.set(-1,0,0,0)}}}function n(){let Y=!1,nt=!1,Ue=null,ct=null,Ae=null;return{setReversed:function(Ee){if(nt!==Ee){let We=t.get("EXT_clip_control");Ee?We.clipControlEXT(We.LOWER_LEFT_EXT,We.ZERO_TO_ONE_EXT):We.clipControlEXT(We.LOWER_LEFT_EXT,We.NEGATIVE_ONE_TO_ONE_EXT),nt=Ee;let ti=Ae;Ae=null,this.setClear(ti)}},getReversed:function(){return nt},setTest:function(Ee){Ee?De(i.DEPTH_TEST):ht(i.DEPTH_TEST)},setMask:function(Ee){Ue!==Ee&&!Y&&(i.depthMask(Ee),Ue=Ee)},setFunc:function(Ee){if(nt&&(Ee=rEe[Ee]),ct!==Ee){switch(Ee){case PC:i.depthFunc(i.NEVER);break;case OC:i.depthFunc(i.ALWAYS);break;case NC:i.depthFunc(i.LESS);break;case Oh:i.depthFunc(i.LEQUAL);break;case RC:i.depthFunc(i.EQUAL);break;case FC:i.depthFunc(i.GEQUAL);break;case LC:i.depthFunc(i.GREATER);break;case BC:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}ct=Ee}},setLocked:function(Ee){Y=Ee},setClear:function(Ee){Ae!==Ee&&(nt&&(Ee=1-Ee),i.clearDepth(Ee),Ae=Ee)},reset:function(){Y=!1,Ue=null,ct=null,Ae=null,nt=!1}}}function r(){let Y=!1,nt=null,Ue=null,ct=null,Ae=null,Ee=null,We=null,ti=null,Mn=null;return{setTest:function(Ji){Y||(Ji?De(i.STENCIL_TEST):ht(i.STENCIL_TEST))},setMask:function(Ji){nt!==Ji&&!Y&&(i.stencilMask(Ji),nt=Ji)},setFunc:function(Ji,Ra,Tc){(Ue!==Ji||ct!==Ra||Ae!==Tc)&&(i.stencilFunc(Ji,Ra,Tc),Ue=Ji,ct=Ra,Ae=Tc)},setOp:function(Ji,Ra,Tc){(Ee!==Ji||We!==Ra||ti!==Tc)&&(i.stencilOp(Ji,Ra,Tc),Ee=Ji,We=Ra,ti=Tc)},setLocked:function(Ji){Y=Ji},setClear:function(Ji){Mn!==Ji&&(i.clearStencil(Ji),Mn=Ji)},reset:function(){Y=!1,nt=null,Ue=null,ct=null,Ae=null,Ee=null,We=null,ti=null,Mn=null}}}let o=new e,s=new n,a=new r,c=new WeakMap,l=new WeakMap,d={},u={},h=new WeakMap,m=[],p=null,_=!1,f=null,g=null,S=null,C=null,E=null,N=null,R=null,B=new Ci(0,0,0),z=0,T=!1,O=null,U=null,X=null,ee=null,de=null,se=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS),ue=!1,ae=0,Ce=i.getParameter(i.VERSION);Ce.indexOf("WebGL")!==-1?(ae=parseFloat(/^WebGL (\d)/.exec(Ce)[1]),ue=ae>=1):Ce.indexOf("OpenGL ES")!==-1&&(ae=parseFloat(/^OpenGL ES (\d)/.exec(Ce)[1]),ue=ae>=2);let Pe=null,He={},tt=i.getParameter(i.SCISSOR_BOX),ai=i.getParameter(i.VIEWPORT),pi=new Un().fromArray(tt),xn=new Un().fromArray(ai);function In(Y,nt,Ue,ct){let Ae=new Uint8Array(4),Ee=i.createTexture();i.bindTexture(Y,Ee),i.texParameteri(Y,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(Y,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let We=0;We<Ue;We++)Y===i.TEXTURE_3D||Y===i.TEXTURE_2D_ARRAY?i.texImage3D(nt,0,i.RGBA,1,1,ct,0,i.RGBA,i.UNSIGNED_BYTE,Ae):i.texImage2D(nt+We,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,Ae);return Ee}let Se={};Se[i.TEXTURE_2D]=In(i.TEXTURE_2D,i.TEXTURE_2D,1),Se[i.TEXTURE_CUBE_MAP]=In(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),Se[i.TEXTURE_2D_ARRAY]=In(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),Se[i.TEXTURE_3D]=In(i.TEXTURE_3D,i.TEXTURE_3D,1,1),o.setClear(0,0,0,1),s.setClear(1),a.setClear(0),De(i.DEPTH_TEST),s.setFunc(Oh),xi(!1),ir(TL),De(i.CULL_FACE),Qi(xc);function De(Y){d[Y]!==!0&&(i.enable(Y),d[Y]=!0)}function ht(Y){d[Y]!==!1&&(i.disable(Y),d[Y]=!1)}function fi(Y,nt){return u[Y]!==nt?(i.bindFramebuffer(Y,nt),u[Y]=nt,Y===i.DRAW_FRAMEBUFFER&&(u[i.FRAMEBUFFER]=nt),Y===i.FRAMEBUFFER&&(u[i.DRAW_FRAMEBUFFER]=nt),!0):!1}function bt(Y,nt){let Ue=m,ct=!1;if(Y){Ue=h.get(nt),Ue===void 0&&(Ue=[],h.set(nt,Ue));let Ae=Y.textures;if(Ue.length!==Ae.length||Ue[0]!==i.COLOR_ATTACHMENT0){for(let Ee=0,We=Ae.length;Ee<We;Ee++)Ue[Ee]=i.COLOR_ATTACHMENT0+Ee;Ue.length=Ae.length,ct=!0}}else Ue[0]!==i.BACK&&(Ue[0]=i.BACK,ct=!0);ct&&i.drawBuffers(Ue)}function Vi(Y){return p!==Y?(i.useProgram(Y),p=Y,!0):!1}let Tr={[qd]:i.FUNC_ADD,[CY]:i.FUNC_SUBTRACT,[SY]:i.FUNC_REVERSE_SUBTRACT};Tr[EY]=i.MIN,Tr[TY]=i.MAX;let Li={[IY]:i.ZERO,[DY]:i.ONE,[kY]:i.SRC_COLOR,[sC]:i.SRC_ALPHA,[FY]:i.SRC_ALPHA_SATURATE,[NY]:i.DST_COLOR,[PY]:i.DST_ALPHA,[AY]:i.ONE_MINUS_SRC_COLOR,[aC]:i.ONE_MINUS_SRC_ALPHA,[RY]:i.ONE_MINUS_DST_COLOR,[OY]:i.ONE_MINUS_DST_ALPHA,[LY]:i.CONSTANT_COLOR,[BY]:i.ONE_MINUS_CONSTANT_COLOR,[VY]:i.CONSTANT_ALPHA,[UY]:i.ONE_MINUS_CONSTANT_ALPHA};function Qi(Y,nt,Ue,ct,Ae,Ee,We,ti,Mn,Ji){if(Y===xc){_===!0&&(ht(i.BLEND),_=!1);return}if(_===!1&&(De(i.BLEND),_=!0),Y!==MY){if(Y!==f||Ji!==T){if((g!==qd||E!==qd)&&(i.blendEquation(i.FUNC_ADD),g=qd,E=qd),Ji)switch(Y){case Ph:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case IL:i.blendFunc(i.ONE,i.ONE);break;case DL:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case kL:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:jt("WebGLState: Invalid blending: ",Y);break}else switch(Y){case Ph:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case IL:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case DL:jt("WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case kL:jt("WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:jt("WebGLState: Invalid blending: ",Y);break}S=null,C=null,N=null,R=null,B.set(0,0,0),z=0,f=Y,T=Ji}return}Ae=Ae||nt,Ee=Ee||Ue,We=We||ct,(nt!==g||Ae!==E)&&(i.blendEquationSeparate(Tr[nt],Tr[Ae]),g=nt,E=Ae),(Ue!==S||ct!==C||Ee!==N||We!==R)&&(i.blendFuncSeparate(Li[Ue],Li[ct],Li[Ee],Li[We]),S=Ue,C=ct,N=Ee,R=We),(ti.equals(B)===!1||Mn!==z)&&(i.blendColor(ti.r,ti.g,ti.b,Mn),B.copy(ti),z=Mn),f=Y,T=!1}function un(Y,nt){Y.side===po?ht(i.CULL_FACE):De(i.CULL_FACE);let Ue=Y.side===Ro;nt&&(Ue=!Ue),xi(Ue),Y.blending===Ph&&Y.transparent===!1?Qi(xc):Qi(Y.blending,Y.blendEquation,Y.blendSrc,Y.blendDst,Y.blendEquationAlpha,Y.blendSrcAlpha,Y.blendDstAlpha,Y.blendColor,Y.blendAlpha,Y.premultipliedAlpha),s.setFunc(Y.depthFunc),s.setTest(Y.depthTest),s.setMask(Y.depthWrite),o.setMask(Y.colorWrite);let ct=Y.stencilWrite;a.setTest(ct),ct&&(a.setMask(Y.stencilWriteMask),a.setFunc(Y.stencilFunc,Y.stencilRef,Y.stencilFuncMask),a.setOp(Y.stencilFail,Y.stencilZFail,Y.stencilZPass)),nr(Y.polygonOffset,Y.polygonOffsetFactor,Y.polygonOffsetUnits),Y.alphaToCoverage===!0?De(i.SAMPLE_ALPHA_TO_COVERAGE):ht(i.SAMPLE_ALPHA_TO_COVERAGE)}function xi(Y){O!==Y&&(Y?i.frontFace(i.CW):i.frontFace(i.CCW),O=Y)}function ir(Y){Y!==yY?(De(i.CULL_FACE),Y!==U&&(Y===TL?i.cullFace(i.BACK):Y===xY?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):ht(i.CULL_FACE),U=Y}function W(Y){Y!==X&&(ue&&i.lineWidth(Y),X=Y)}function nr(Y,nt,Ue){Y?(De(i.POLYGON_OFFSET_FILL),(ee!==nt||de!==Ue)&&(i.polygonOffset(nt,Ue),ee=nt,de=Ue)):ht(i.POLYGON_OFFSET_FILL)}function Xi(Y){Y?De(i.SCISSOR_TEST):ht(i.SCISSOR_TEST)}function wn(Y){Y===void 0&&(Y=i.TEXTURE0+se-1),Pe!==Y&&(i.activeTexture(Y),Pe=Y)}function yt(Y,nt,Ue){Ue===void 0&&(Pe===null?Ue=i.TEXTURE0+se-1:Ue=Pe);let ct=He[Ue];ct===void 0&&(ct={type:void 0,texture:void 0},He[Ue]=ct),(ct.type!==Y||ct.texture!==nt)&&(Pe!==Ue&&(i.activeTexture(Ue),Pe=Ue),i.bindTexture(Y,nt||Se[Y]),ct.type=Y,ct.texture=nt)}function V(){let Y=He[Pe];Y!==void 0&&Y.type!==void 0&&(i.bindTexture(Y.type,null),Y.type=void 0,Y.texture=void 0)}function k(){try{i.compressedTexImage2D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function K(){try{i.compressedTexImage3D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function xe(){try{i.texSubImage2D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function Te(){try{i.texSubImage3D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function be(){try{i.compressedTexSubImage2D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function Mt(){try{i.compressedTexSubImage3D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function Xe(){try{i.texStorage2D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function vt(){try{i.texStorage3D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function Xt(){try{i.texImage2D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function Oe(){try{i.texImage3D(...arguments)}catch(Y){jt("WebGLState:",Y)}}function Ze(Y){pi.equals(Y)===!1&&(i.scissor(Y.x,Y.y,Y.z,Y.w),pi.copy(Y))}function _t(Y){xn.equals(Y)===!1&&(i.viewport(Y.x,Y.y,Y.z,Y.w),xn.copy(Y))}function xt(Y,nt){let Ue=l.get(nt);Ue===void 0&&(Ue=new WeakMap,l.set(nt,Ue));let ct=Ue.get(Y);ct===void 0&&(ct=i.getUniformBlockIndex(nt,Y.name),Ue.set(Y,ct))}function Ye(Y,nt){let ct=l.get(nt).get(Y);c.get(nt)!==ct&&(i.uniformBlockBinding(nt,ct,Y.__bindingPointIndex),c.set(nt,ct))}function wi(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),s.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),d={},Pe=null,He={},u={},h=new WeakMap,m=[],p=null,_=!1,f=null,g=null,S=null,C=null,E=null,N=null,R=null,B=new Ci(0,0,0),z=0,T=!1,O=null,U=null,X=null,ee=null,de=null,pi.set(0,0,i.canvas.width,i.canvas.height),xn.set(0,0,i.canvas.width,i.canvas.height),o.reset(),s.reset(),a.reset()}return{buffers:{color:o,depth:s,stencil:a},enable:De,disable:ht,bindFramebuffer:fi,drawBuffers:bt,useProgram:Vi,setBlending:Qi,setMaterial:un,setFlipSided:xi,setCullFace:ir,setLineWidth:W,setPolygonOffset:nr,setScissorTest:Xi,activeTexture:wn,bindTexture:yt,unbindTexture:V,compressedTexImage2D:k,compressedTexImage3D:K,texImage2D:Xt,texImage3D:Oe,updateUBOMapping:xt,uniformBlockBinding:Ye,texStorage2D:Xe,texStorage3D:vt,texSubImage2D:xe,texSubImage3D:Te,compressedTexSubImage2D:be,compressedTexSubImage3D:Mt,scissor:Ze,viewport:_t,reset:wi}}function sEe(i,t,e,n,r,o,s){let a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),l=new Ht,d=new WeakMap,u,h=new WeakMap,m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function p(V,k){return m?new OffscreenCanvas(V,k):L0("canvas")}function _(V,k,K){let xe=1,Te=yt(V);if((Te.width>K||Te.height>K)&&(xe=K/Math.max(Te.width,Te.height)),xe<1)if(typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&V instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&V instanceof ImageBitmap||typeof VideoFrame<"u"&&V instanceof VideoFrame){let be=Math.floor(xe*Te.width),Mt=Math.floor(xe*Te.height);u===void 0&&(u=p(be,Mt));let Xe=k?p(be,Mt):u;return Xe.width=be,Xe.height=Mt,Xe.getContext("2d").drawImage(V,0,0,be,Mt),Ut("WebGLRenderer: Texture has been resized from ("+Te.width+"x"+Te.height+") to ("+be+"x"+Mt+")."),Xe}else return"data"in V&&Ut("WebGLRenderer: Image in DataTexture is too big ("+Te.width+"x"+Te.height+")."),V;return V}function f(V){return V.generateMipmaps}function g(V){i.generateMipmap(V)}function S(V){return V.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:V.isWebGL3DRenderTarget?i.TEXTURE_3D:V.isWebGLArrayRenderTarget||V.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function C(V,k,K,xe,Te=!1){if(V!==null){if(i[V]!==void 0)return i[V];Ut("WebGLRenderer: Attempt to use non-existing WebGL internal format '"+V+"'")}let be=k;if(k===i.RED&&(K===i.FLOAT&&(be=i.R32F),K===i.HALF_FLOAT&&(be=i.R16F),K===i.UNSIGNED_BYTE&&(be=i.R8)),k===i.RED_INTEGER&&(K===i.UNSIGNED_BYTE&&(be=i.R8UI),K===i.UNSIGNED_SHORT&&(be=i.R16UI),K===i.UNSIGNED_INT&&(be=i.R32UI),K===i.BYTE&&(be=i.R8I),K===i.SHORT&&(be=i.R16I),K===i.INT&&(be=i.R32I)),k===i.RG&&(K===i.FLOAT&&(be=i.RG32F),K===i.HALF_FLOAT&&(be=i.RG16F),K===i.UNSIGNED_BYTE&&(be=i.RG8)),k===i.RG_INTEGER&&(K===i.UNSIGNED_BYTE&&(be=i.RG8UI),K===i.UNSIGNED_SHORT&&(be=i.RG16UI),K===i.UNSIGNED_INT&&(be=i.RG32UI),K===i.BYTE&&(be=i.RG8I),K===i.SHORT&&(be=i.RG16I),K===i.INT&&(be=i.RG32I)),k===i.RGB_INTEGER&&(K===i.UNSIGNED_BYTE&&(be=i.RGB8UI),K===i.UNSIGNED_SHORT&&(be=i.RGB16UI),K===i.UNSIGNED_INT&&(be=i.RGB32UI),K===i.BYTE&&(be=i.RGB8I),K===i.SHORT&&(be=i.RGB16I),K===i.INT&&(be=i.RGB32I)),k===i.RGBA_INTEGER&&(K===i.UNSIGNED_BYTE&&(be=i.RGBA8UI),K===i.UNSIGNED_SHORT&&(be=i.RGBA16UI),K===i.UNSIGNED_INT&&(be=i.RGBA32UI),K===i.BYTE&&(be=i.RGBA8I),K===i.SHORT&&(be=i.RGBA16I),K===i.INT&&(be=i.RGBA32I)),k===i.RGB&&(K===i.UNSIGNED_INT_5_9_9_9_REV&&(be=i.RGB9_E5),K===i.UNSIGNED_INT_10F_11F_11F_REV&&(be=i.R11F_G11F_B10F)),k===i.RGBA){let Mt=Te?R0:Fi.getTransfer(xe);K===i.FLOAT&&(be=i.RGBA32F),K===i.HALF_FLOAT&&(be=i.RGBA16F),K===i.UNSIGNED_BYTE&&(be=Mt===Ki?i.SRGB8_ALPHA8:i.RGBA8),K===i.UNSIGNED_SHORT_4_4_4_4&&(be=i.RGBA4),K===i.UNSIGNED_SHORT_5_5_5_1&&(be=i.RGB5_A1)}return(be===i.R16F||be===i.R32F||be===i.RG16F||be===i.RG32F||be===i.RGBA16F||be===i.RGBA32F)&&t.get("EXT_color_buffer_float"),be}function E(V,k){let K;return V?k===null||k===Pa||k===Cf?K=i.DEPTH24_STENCIL8:k===Oa?K=i.DEPTH32F_STENCIL8:k===Mf&&(K=i.DEPTH24_STENCIL8,Ut("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):k===null||k===Pa||k===Cf?K=i.DEPTH_COMPONENT24:k===Oa?K=i.DEPTH_COMPONENT32F:k===Mf&&(K=i.DEPTH_COMPONENT16),K}function N(V,k){return f(V)===!0||V.isFramebufferTexture&&V.minFilter!==Br&&V.minFilter!==Yn?Math.log2(Math.max(k.width,k.height))+1:V.mipmaps!==void 0&&V.mipmaps.length>0?V.mipmaps.length:V.isCompressedTexture&&Array.isArray(V.image)?k.mipmaps.length:1}function R(V){let k=V.target;k.removeEventListener("dispose",R),z(k),k.isVideoTexture&&d.delete(k)}function B(V){let k=V.target;k.removeEventListener("dispose",B),O(k)}function z(V){let k=n.get(V);if(k.__webglInit===void 0)return;let K=V.source,xe=h.get(K);if(xe){let Te=xe[k.__cacheKey];Te.usedTimes--,Te.usedTimes===0&&T(V),Object.keys(xe).length===0&&h.delete(K)}n.remove(V)}function T(V){let k=n.get(V);i.deleteTexture(k.__webglTexture);let K=V.source,xe=h.get(K);delete xe[k.__cacheKey],s.memory.textures--}function O(V){let k=n.get(V);if(V.depthTexture&&(V.depthTexture.dispose(),n.remove(V.depthTexture)),V.isWebGLCubeRenderTarget)for(let xe=0;xe<6;xe++){if(Array.isArray(k.__webglFramebuffer[xe]))for(let Te=0;Te<k.__webglFramebuffer[xe].length;Te++)i.deleteFramebuffer(k.__webglFramebuffer[xe][Te]);else i.deleteFramebuffer(k.__webglFramebuffer[xe]);k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer[xe])}else{if(Array.isArray(k.__webglFramebuffer))for(let xe=0;xe<k.__webglFramebuffer.length;xe++)i.deleteFramebuffer(k.__webglFramebuffer[xe]);else i.deleteFramebuffer(k.__webglFramebuffer);if(k.__webglDepthbuffer&&i.deleteRenderbuffer(k.__webglDepthbuffer),k.__webglMultisampledFramebuffer&&i.deleteFramebuffer(k.__webglMultisampledFramebuffer),k.__webglColorRenderbuffer)for(let xe=0;xe<k.__webglColorRenderbuffer.length;xe++)k.__webglColorRenderbuffer[xe]&&i.deleteRenderbuffer(k.__webglColorRenderbuffer[xe]);k.__webglDepthRenderbuffer&&i.deleteRenderbuffer(k.__webglDepthRenderbuffer)}let K=V.textures;for(let xe=0,Te=K.length;xe<Te;xe++){let be=n.get(K[xe]);be.__webglTexture&&(i.deleteTexture(be.__webglTexture),s.memory.textures--),n.remove(K[xe])}n.remove(V)}let U=0;function X(){U=0}function ee(){let V=U;return V>=r.maxTextures&&Ut("WebGLTextures: Trying to use "+V+" texture units while this GPU supports only "+r.maxTextures),U+=1,V}function de(V){let k=[];return k.push(V.wrapS),k.push(V.wrapT),k.push(V.wrapR||0),k.push(V.magFilter),k.push(V.minFilter),k.push(V.anisotropy),k.push(V.internalFormat),k.push(V.format),k.push(V.type),k.push(V.generateMipmaps),k.push(V.premultiplyAlpha),k.push(V.flipY),k.push(V.unpackAlignment),k.push(V.colorSpace),k.join()}function se(V,k){let K=n.get(V);if(V.isVideoTexture&&Xi(V),V.isRenderTargetTexture===!1&&V.isExternalTexture!==!0&&V.version>0&&K.__version!==V.version){let xe=V.image;if(xe===null)Ut("WebGLRenderer: Texture marked for update but no image data found.");else if(xe.complete===!1)Ut("WebGLRenderer: Texture marked for update but image is incomplete");else{Se(K,V,k);return}}else V.isExternalTexture&&(K.__webglTexture=V.sourceTexture?V.sourceTexture:null);e.bindTexture(i.TEXTURE_2D,K.__webglTexture,i.TEXTURE0+k)}function ue(V,k){let K=n.get(V);if(V.isRenderTargetTexture===!1&&V.version>0&&K.__version!==V.version){Se(K,V,k);return}else V.isExternalTexture&&(K.__webglTexture=V.sourceTexture?V.sourceTexture:null);e.bindTexture(i.TEXTURE_2D_ARRAY,K.__webglTexture,i.TEXTURE0+k)}function ae(V,k){let K=n.get(V);if(V.isRenderTargetTexture===!1&&V.version>0&&K.__version!==V.version){Se(K,V,k);return}e.bindTexture(i.TEXTURE_3D,K.__webglTexture,i.TEXTURE0+k)}function Ce(V,k){let K=n.get(V);if(V.isCubeDepthTexture!==!0&&V.version>0&&K.__version!==V.version){De(K,V,k);return}e.bindTexture(i.TEXTURE_CUBE_MAP,K.__webglTexture,i.TEXTURE0+k)}let Pe={[cC]:i.REPEAT,[fc]:i.CLAMP_TO_EDGE,[lC]:i.MIRRORED_REPEAT},He={[Br]:i.NEAREST,[jY]:i.NEAREST_MIPMAP_NEAREST,[tb]:i.NEAREST_MIPMAP_LINEAR,[Yn]:i.LINEAR,[zC]:i.LINEAR_MIPMAP_NEAREST,[iu]:i.LINEAR_MIPMAP_LINEAR},tt={[WY]:i.NEVER,[KY]:i.ALWAYS,[qY]:i.LESS,[ES]:i.LEQUAL,[XY]:i.EQUAL,[TS]:i.GEQUAL,[YY]:i.GREATER,[ZY]:i.NOTEQUAL};function ai(V,k){if(k.type===Oa&&t.has("OES_texture_float_linear")===!1&&(k.magFilter===Yn||k.magFilter===zC||k.magFilter===tb||k.magFilter===iu||k.minFilter===Yn||k.minFilter===zC||k.minFilter===tb||k.minFilter===iu)&&Ut("WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(V,i.TEXTURE_WRAP_S,Pe[k.wrapS]),i.texParameteri(V,i.TEXTURE_WRAP_T,Pe[k.wrapT]),(V===i.TEXTURE_3D||V===i.TEXTURE_2D_ARRAY)&&i.texParameteri(V,i.TEXTURE_WRAP_R,Pe[k.wrapR]),i.texParameteri(V,i.TEXTURE_MAG_FILTER,He[k.magFilter]),i.texParameteri(V,i.TEXTURE_MIN_FILTER,He[k.minFilter]),k.compareFunction&&(i.texParameteri(V,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(V,i.TEXTURE_COMPARE_FUNC,tt[k.compareFunction])),t.has("EXT_texture_filter_anisotropic")===!0){if(k.magFilter===Br||k.minFilter!==tb&&k.minFilter!==iu||k.type===Oa&&t.has("OES_texture_float_linear")===!1)return;if(k.anisotropy>1||n.get(k).__currentAnisotropy){let K=t.get("EXT_texture_filter_anisotropic");i.texParameterf(V,K.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(k.anisotropy,r.getMaxAnisotropy())),n.get(k).__currentAnisotropy=k.anisotropy}}}function pi(V,k){let K=!1;V.__webglInit===void 0&&(V.__webglInit=!0,k.addEventListener("dispose",R));let xe=k.source,Te=h.get(xe);Te===void 0&&(Te={},h.set(xe,Te));let be=de(k);if(be!==V.__cacheKey){Te[be]===void 0&&(Te[be]={texture:i.createTexture(),usedTimes:0},s.memory.textures++,K=!0),Te[be].usedTimes++;let Mt=Te[V.__cacheKey];Mt!==void 0&&(Te[V.__cacheKey].usedTimes--,Mt.usedTimes===0&&T(k)),V.__cacheKey=be,V.__webglTexture=Te[be].texture}return K}function xn(V,k,K){return Math.floor(Math.floor(V/K)/k)}function In(V,k,K,xe){let be=V.updateRanges;if(be.length===0)e.texSubImage2D(i.TEXTURE_2D,0,0,0,k.width,k.height,K,xe,k.data);else{be.sort((Oe,Ze)=>Oe.start-Ze.start);let Mt=0;for(let Oe=1;Oe<be.length;Oe++){let Ze=be[Mt],_t=be[Oe],xt=Ze.start+Ze.count,Ye=xn(_t.start,k.width,4),wi=xn(Ze.start,k.width,4);_t.start<=xt+1&&Ye===wi&&xn(_t.start+_t.count-1,k.width,4)===Ye?Ze.count=Math.max(Ze.count,_t.start+_t.count-Ze.start):(++Mt,be[Mt]=_t)}be.length=Mt+1;let Xe=i.getParameter(i.UNPACK_ROW_LENGTH),vt=i.getParameter(i.UNPACK_SKIP_PIXELS),Xt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,k.width);for(let Oe=0,Ze=be.length;Oe<Ze;Oe++){let _t=be[Oe],xt=Math.floor(_t.start/4),Ye=Math.ceil(_t.count/4),wi=xt%k.width,Y=Math.floor(xt/k.width),nt=Ye,Ue=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,wi),i.pixelStorei(i.UNPACK_SKIP_ROWS,Y),e.texSubImage2D(i.TEXTURE_2D,0,wi,Y,nt,Ue,K,xe,k.data)}V.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,Xe),i.pixelStorei(i.UNPACK_SKIP_PIXELS,vt),i.pixelStorei(i.UNPACK_SKIP_ROWS,Xt)}}function Se(V,k,K){let xe=i.TEXTURE_2D;(k.isDataArrayTexture||k.isCompressedArrayTexture)&&(xe=i.TEXTURE_2D_ARRAY),k.isData3DTexture&&(xe=i.TEXTURE_3D);let Te=pi(V,k),be=k.source;e.bindTexture(xe,V.__webglTexture,i.TEXTURE0+K);let Mt=n.get(be);if(be.version!==Mt.__version||Te===!0){e.activeTexture(i.TEXTURE0+K);let Xe=Fi.getPrimaries(Fi.workingColorSpace),vt=k.colorSpace===Ol?null:Fi.getPrimaries(k.colorSpace),Xt=k.colorSpace===Ol||Xe===vt?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Xt);let Oe=_(k.image,!1,r.maxTextureSize);Oe=wn(k,Oe);let Ze=o.convert(k.format,k.colorSpace),_t=o.convert(k.type),xt=C(k.internalFormat,Ze,_t,k.colorSpace,k.isVideoTexture);ai(xe,k);let Ye,wi=k.mipmaps,Y=k.isVideoTexture!==!0,nt=Mt.__version===void 0||Te===!0,Ue=be.dataReady,ct=N(k,Oe);if(k.isDepthTexture)xt=E(k.format===nu,k.type),nt&&(Y?e.texStorage2D(i.TEXTURE_2D,1,xt,Oe.width,Oe.height):e.texImage2D(i.TEXTURE_2D,0,xt,Oe.width,Oe.height,0,Ze,_t,null));else if(k.isDataTexture)if(wi.length>0){Y&&nt&&e.texStorage2D(i.TEXTURE_2D,ct,xt,wi[0].width,wi[0].height);for(let Ae=0,Ee=wi.length;Ae<Ee;Ae++)Ye=wi[Ae],Y?Ue&&e.texSubImage2D(i.TEXTURE_2D,Ae,0,0,Ye.width,Ye.height,Ze,_t,Ye.data):e.texImage2D(i.TEXTURE_2D,Ae,xt,Ye.width,Ye.height,0,Ze,_t,Ye.data);k.generateMipmaps=!1}else Y?(nt&&e.texStorage2D(i.TEXTURE_2D,ct,xt,Oe.width,Oe.height),Ue&&In(k,Oe,Ze,_t)):e.texImage2D(i.TEXTURE_2D,0,xt,Oe.width,Oe.height,0,Ze,_t,Oe.data);else if(k.isCompressedTexture)if(k.isCompressedArrayTexture){Y&&nt&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ct,xt,wi[0].width,wi[0].height,Oe.depth);for(let Ae=0,Ee=wi.length;Ae<Ee;Ae++)if(Ye=wi[Ae],k.format!==Xs)if(Ze!==null)if(Y){if(Ue)if(k.layerUpdates.size>0){let We=t3(Ye.width,Ye.height,k.format,k.type);for(let ti of k.layerUpdates){let Mn=Ye.data.subarray(ti*We/Ye.data.BYTES_PER_ELEMENT,(ti+1)*We/Ye.data.BYTES_PER_ELEMENT);e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ae,0,0,ti,Ye.width,Ye.height,1,Ze,Mn)}k.clearLayerUpdates()}else e.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,Ae,0,0,0,Ye.width,Ye.height,Oe.depth,Ze,Ye.data)}else e.compressedTexImage3D(i.TEXTURE_2D_ARRAY,Ae,xt,Ye.width,Ye.height,Oe.depth,0,Ye.data,0,0);else Ut("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Y?Ue&&e.texSubImage3D(i.TEXTURE_2D_ARRAY,Ae,0,0,0,Ye.width,Ye.height,Oe.depth,Ze,_t,Ye.data):e.texImage3D(i.TEXTURE_2D_ARRAY,Ae,xt,Ye.width,Ye.height,Oe.depth,0,Ze,_t,Ye.data)}else{Y&&nt&&e.texStorage2D(i.TEXTURE_2D,ct,xt,wi[0].width,wi[0].height);for(let Ae=0,Ee=wi.length;Ae<Ee;Ae++)Ye=wi[Ae],k.format!==Xs?Ze!==null?Y?Ue&&e.compressedTexSubImage2D(i.TEXTURE_2D,Ae,0,0,Ye.width,Ye.height,Ze,Ye.data):e.compressedTexImage2D(i.TEXTURE_2D,Ae,xt,Ye.width,Ye.height,0,Ye.data):Ut("WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Y?Ue&&e.texSubImage2D(i.TEXTURE_2D,Ae,0,0,Ye.width,Ye.height,Ze,_t,Ye.data):e.texImage2D(i.TEXTURE_2D,Ae,xt,Ye.width,Ye.height,0,Ze,_t,Ye.data)}else if(k.isDataArrayTexture)if(Y){if(nt&&e.texStorage3D(i.TEXTURE_2D_ARRAY,ct,xt,Oe.width,Oe.height,Oe.depth),Ue)if(k.layerUpdates.size>0){let Ae=t3(Oe.width,Oe.height,k.format,k.type);for(let Ee of k.layerUpdates){let We=Oe.data.subarray(Ee*Ae/Oe.data.BYTES_PER_ELEMENT,(Ee+1)*Ae/Oe.data.BYTES_PER_ELEMENT);e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,Ee,Oe.width,Oe.height,1,Ze,_t,We)}k.clearLayerUpdates()}else e.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,Oe.width,Oe.height,Oe.depth,Ze,_t,Oe.data)}else e.texImage3D(i.TEXTURE_2D_ARRAY,0,xt,Oe.width,Oe.height,Oe.depth,0,Ze,_t,Oe.data);else if(k.isData3DTexture)Y?(nt&&e.texStorage3D(i.TEXTURE_3D,ct,xt,Oe.width,Oe.height,Oe.depth),Ue&&e.texSubImage3D(i.TEXTURE_3D,0,0,0,0,Oe.width,Oe.height,Oe.depth,Ze,_t,Oe.data)):e.texImage3D(i.TEXTURE_3D,0,xt,Oe.width,Oe.height,Oe.depth,0,Ze,_t,Oe.data);else if(k.isFramebufferTexture){if(nt)if(Y)e.texStorage2D(i.TEXTURE_2D,ct,xt,Oe.width,Oe.height);else{let Ae=Oe.width,Ee=Oe.height;for(let We=0;We<ct;We++)e.texImage2D(i.TEXTURE_2D,We,xt,Ae,Ee,0,Ze,_t,null),Ae>>=1,Ee>>=1}}else if(wi.length>0){if(Y&&nt){let Ae=yt(wi[0]);e.texStorage2D(i.TEXTURE_2D,ct,xt,Ae.width,Ae.height)}for(let Ae=0,Ee=wi.length;Ae<Ee;Ae++)Ye=wi[Ae],Y?Ue&&e.texSubImage2D(i.TEXTURE_2D,Ae,0,0,Ze,_t,Ye):e.texImage2D(i.TEXTURE_2D,Ae,xt,Ze,_t,Ye);k.generateMipmaps=!1}else if(Y){if(nt){let Ae=yt(Oe);e.texStorage2D(i.TEXTURE_2D,ct,xt,Ae.width,Ae.height)}Ue&&e.texSubImage2D(i.TEXTURE_2D,0,0,0,Ze,_t,Oe)}else e.texImage2D(i.TEXTURE_2D,0,xt,Ze,_t,Oe);f(k)&&g(xe),Mt.__version=be.version,k.onUpdate&&k.onUpdate(k)}V.__version=k.version}function De(V,k,K){if(k.image.length!==6)return;let xe=pi(V,k),Te=k.source;e.bindTexture(i.TEXTURE_CUBE_MAP,V.__webglTexture,i.TEXTURE0+K);let be=n.get(Te);if(Te.version!==be.__version||xe===!0){e.activeTexture(i.TEXTURE0+K);let Mt=Fi.getPrimaries(Fi.workingColorSpace),Xe=k.colorSpace===Ol?null:Fi.getPrimaries(k.colorSpace),vt=k.colorSpace===Ol||Mt===Xe?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,k.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,k.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,k.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,vt);let Xt=k.isCompressedTexture||k.image[0].isCompressedTexture,Oe=k.image[0]&&k.image[0].isDataTexture,Ze=[];for(let Ee=0;Ee<6;Ee++)!Xt&&!Oe?Ze[Ee]=_(k.image[Ee],!0,r.maxCubemapSize):Ze[Ee]=Oe?k.image[Ee].image:k.image[Ee],Ze[Ee]=wn(k,Ze[Ee]);let _t=Ze[0],xt=o.convert(k.format,k.colorSpace),Ye=o.convert(k.type),wi=C(k.internalFormat,xt,Ye,k.colorSpace),Y=k.isVideoTexture!==!0,nt=be.__version===void 0||xe===!0,Ue=Te.dataReady,ct=N(k,_t);ai(i.TEXTURE_CUBE_MAP,k);let Ae;if(Xt){Y&&nt&&e.texStorage2D(i.TEXTURE_CUBE_MAP,ct,wi,_t.width,_t.height);for(let Ee=0;Ee<6;Ee++){Ae=Ze[Ee].mipmaps;for(let We=0;We<Ae.length;We++){let ti=Ae[We];k.format!==Xs?xt!==null?Y?Ue&&e.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We,0,0,ti.width,ti.height,xt,ti.data):e.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We,wi,ti.width,ti.height,0,ti.data):Ut("WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Y?Ue&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We,0,0,ti.width,ti.height,xt,Ye,ti.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We,wi,ti.width,ti.height,0,xt,Ye,ti.data)}}}else{if(Ae=k.mipmaps,Y&&nt){Ae.length>0&&ct++;let Ee=yt(Ze[0]);e.texStorage2D(i.TEXTURE_CUBE_MAP,ct,wi,Ee.width,Ee.height)}for(let Ee=0;Ee<6;Ee++)if(Oe){Y?Ue&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,0,0,Ze[Ee].width,Ze[Ee].height,xt,Ye,Ze[Ee].data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,wi,Ze[Ee].width,Ze[Ee].height,0,xt,Ye,Ze[Ee].data);for(let We=0;We<Ae.length;We++){let Mn=Ae[We].image[Ee].image;Y?Ue&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We+1,0,0,Mn.width,Mn.height,xt,Ye,Mn.data):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We+1,wi,Mn.width,Mn.height,0,xt,Ye,Mn.data)}}else{Y?Ue&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,0,0,xt,Ye,Ze[Ee]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,0,wi,xt,Ye,Ze[Ee]);for(let We=0;We<Ae.length;We++){let ti=Ae[We];Y?Ue&&e.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We+1,0,0,xt,Ye,ti.image[Ee]):e.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+Ee,We+1,wi,xt,Ye,ti.image[Ee])}}}f(k)&&g(i.TEXTURE_CUBE_MAP),be.__version=Te.version,k.onUpdate&&k.onUpdate(k)}V.__version=k.version}function ht(V,k,K,xe,Te,be){let Mt=o.convert(K.format,K.colorSpace),Xe=o.convert(K.type),vt=C(K.internalFormat,Mt,Xe,K.colorSpace),Xt=n.get(k),Oe=n.get(K);if(Oe.__renderTarget=k,!Xt.__hasExternalTextures){let Ze=Math.max(1,k.width>>be),_t=Math.max(1,k.height>>be);Te===i.TEXTURE_3D||Te===i.TEXTURE_2D_ARRAY?e.texImage3D(Te,be,vt,Ze,_t,k.depth,0,Mt,Xe,null):e.texImage2D(Te,be,vt,Ze,_t,0,Mt,Xe,null)}e.bindFramebuffer(i.FRAMEBUFFER,V),nr(k)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,xe,Te,Oe.__webglTexture,0,W(k)):(Te===i.TEXTURE_2D||Te>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&Te<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,xe,Te,Oe.__webglTexture,be),e.bindFramebuffer(i.FRAMEBUFFER,null)}function fi(V,k,K){if(i.bindRenderbuffer(i.RENDERBUFFER,V),k.depthBuffer){let xe=k.depthTexture,Te=xe&&xe.isDepthTexture?xe.type:null,be=E(k.stencilBuffer,Te),Mt=k.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;nr(k)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,W(k),be,k.width,k.height):K?i.renderbufferStorageMultisample(i.RENDERBUFFER,W(k),be,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,be,k.width,k.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Mt,i.RENDERBUFFER,V)}else{let xe=k.textures;for(let Te=0;Te<xe.length;Te++){let be=xe[Te],Mt=o.convert(be.format,be.colorSpace),Xe=o.convert(be.type),vt=C(be.internalFormat,Mt,Xe,be.colorSpace);nr(k)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,W(k),vt,k.width,k.height):K?i.renderbufferStorageMultisample(i.RENDERBUFFER,W(k),vt,k.width,k.height):i.renderbufferStorage(i.RENDERBUFFER,vt,k.width,k.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function bt(V,k,K){let xe=k.isWebGLCubeRenderTarget===!0;if(e.bindFramebuffer(i.FRAMEBUFFER,V),!(k.depthTexture&&k.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");let Te=n.get(k.depthTexture);if(Te.__renderTarget=k,(!Te.__webglTexture||k.depthTexture.image.width!==k.width||k.depthTexture.image.height!==k.height)&&(k.depthTexture.image.width=k.width,k.depthTexture.image.height=k.height,k.depthTexture.needsUpdate=!0),xe){if(Te.__webglInit===void 0&&(Te.__webglInit=!0,k.depthTexture.addEventListener("dispose",R)),Te.__webglTexture===void 0){Te.__webglTexture=i.createTexture(),e.bindTexture(i.TEXTURE_CUBE_MAP,Te.__webglTexture),ai(i.TEXTURE_CUBE_MAP,k.depthTexture);let Xt=o.convert(k.depthTexture.format),Oe=o.convert(k.depthTexture.type),Ze;k.depthTexture.format===_c?Ze=i.DEPTH_COMPONENT24:k.depthTexture.format===nu&&(Ze=i.DEPTH24_STENCIL8);for(let _t=0;_t<6;_t++)i.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+_t,0,Ze,k.width,k.height,0,Xt,Oe,null)}}else se(k.depthTexture,0);let be=Te.__webglTexture,Mt=W(k),Xe=xe?i.TEXTURE_CUBE_MAP_POSITIVE_X+K:i.TEXTURE_2D,vt=k.depthTexture.format===nu?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;if(k.depthTexture.format===_c)nr(k)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,vt,Xe,be,0,Mt):i.framebufferTexture2D(i.FRAMEBUFFER,vt,Xe,be,0);else if(k.depthTexture.format===nu)nr(k)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,vt,Xe,be,0,Mt):i.framebufferTexture2D(i.FRAMEBUFFER,vt,Xe,be,0);else throw new Error("Unknown depthTexture format")}function Vi(V){let k=n.get(V),K=V.isWebGLCubeRenderTarget===!0;if(k.__boundDepthTexture!==V.depthTexture){let xe=V.depthTexture;if(k.__depthDisposeCallback&&k.__depthDisposeCallback(),xe){let Te=()=>{delete k.__boundDepthTexture,delete k.__depthDisposeCallback,xe.removeEventListener("dispose",Te)};xe.addEventListener("dispose",Te),k.__depthDisposeCallback=Te}k.__boundDepthTexture=xe}if(V.depthTexture&&!k.__autoAllocateDepthBuffer)if(K)for(let xe=0;xe<6;xe++)bt(k.__webglFramebuffer[xe],V,xe);else{let xe=V.texture.mipmaps;xe&&xe.length>0?bt(k.__webglFramebuffer[0],V,0):bt(k.__webglFramebuffer,V,0)}else if(K){k.__webglDepthbuffer=[];for(let xe=0;xe<6;xe++)if(e.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[xe]),k.__webglDepthbuffer[xe]===void 0)k.__webglDepthbuffer[xe]=i.createRenderbuffer(),fi(k.__webglDepthbuffer[xe],V,!1);else{let Te=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,be=k.__webglDepthbuffer[xe];i.bindRenderbuffer(i.RENDERBUFFER,be),i.framebufferRenderbuffer(i.FRAMEBUFFER,Te,i.RENDERBUFFER,be)}}else{let xe=V.texture.mipmaps;if(xe&&xe.length>0?e.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer[0]):e.bindFramebuffer(i.FRAMEBUFFER,k.__webglFramebuffer),k.__webglDepthbuffer===void 0)k.__webglDepthbuffer=i.createRenderbuffer(),fi(k.__webglDepthbuffer,V,!1);else{let Te=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,be=k.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,be),i.framebufferRenderbuffer(i.FRAMEBUFFER,Te,i.RENDERBUFFER,be)}}e.bindFramebuffer(i.FRAMEBUFFER,null)}function Tr(V,k,K){let xe=n.get(V);k!==void 0&&ht(xe.__webglFramebuffer,V,V.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),K!==void 0&&Vi(V)}function Li(V){let k=V.texture,K=n.get(V),xe=n.get(k);V.addEventListener("dispose",B);let Te=V.textures,be=V.isWebGLCubeRenderTarget===!0,Mt=Te.length>1;if(Mt||(xe.__webglTexture===void 0&&(xe.__webglTexture=i.createTexture()),xe.__version=k.version,s.memory.textures++),be){K.__webglFramebuffer=[];for(let Xe=0;Xe<6;Xe++)if(k.mipmaps&&k.mipmaps.length>0){K.__webglFramebuffer[Xe]=[];for(let vt=0;vt<k.mipmaps.length;vt++)K.__webglFramebuffer[Xe][vt]=i.createFramebuffer()}else K.__webglFramebuffer[Xe]=i.createFramebuffer()}else{if(k.mipmaps&&k.mipmaps.length>0){K.__webglFramebuffer=[];for(let Xe=0;Xe<k.mipmaps.length;Xe++)K.__webglFramebuffer[Xe]=i.createFramebuffer()}else K.__webglFramebuffer=i.createFramebuffer();if(Mt)for(let Xe=0,vt=Te.length;Xe<vt;Xe++){let Xt=n.get(Te[Xe]);Xt.__webglTexture===void 0&&(Xt.__webglTexture=i.createTexture(),s.memory.textures++)}if(V.samples>0&&nr(V)===!1){K.__webglMultisampledFramebuffer=i.createFramebuffer(),K.__webglColorRenderbuffer=[],e.bindFramebuffer(i.FRAMEBUFFER,K.__webglMultisampledFramebuffer);for(let Xe=0;Xe<Te.length;Xe++){let vt=Te[Xe];K.__webglColorRenderbuffer[Xe]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,K.__webglColorRenderbuffer[Xe]);let Xt=o.convert(vt.format,vt.colorSpace),Oe=o.convert(vt.type),Ze=C(vt.internalFormat,Xt,Oe,vt.colorSpace,V.isXRRenderTarget===!0),_t=W(V);i.renderbufferStorageMultisample(i.RENDERBUFFER,_t,Ze,V.width,V.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Xe,i.RENDERBUFFER,K.__webglColorRenderbuffer[Xe])}i.bindRenderbuffer(i.RENDERBUFFER,null),V.depthBuffer&&(K.__webglDepthRenderbuffer=i.createRenderbuffer(),fi(K.__webglDepthRenderbuffer,V,!0)),e.bindFramebuffer(i.FRAMEBUFFER,null)}}if(be){e.bindTexture(i.TEXTURE_CUBE_MAP,xe.__webglTexture),ai(i.TEXTURE_CUBE_MAP,k);for(let Xe=0;Xe<6;Xe++)if(k.mipmaps&&k.mipmaps.length>0)for(let vt=0;vt<k.mipmaps.length;vt++)ht(K.__webglFramebuffer[Xe][vt],V,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,vt);else ht(K.__webglFramebuffer[Xe],V,k,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+Xe,0);f(k)&&g(i.TEXTURE_CUBE_MAP),e.unbindTexture()}else if(Mt){for(let Xe=0,vt=Te.length;Xe<vt;Xe++){let Xt=Te[Xe],Oe=n.get(Xt),Ze=i.TEXTURE_2D;(V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Ze=V.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Ze,Oe.__webglTexture),ai(Ze,Xt),ht(K.__webglFramebuffer,V,Xt,i.COLOR_ATTACHMENT0+Xe,Ze,0),f(Xt)&&g(Ze)}e.unbindTexture()}else{let Xe=i.TEXTURE_2D;if((V.isWebGL3DRenderTarget||V.isWebGLArrayRenderTarget)&&(Xe=V.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),e.bindTexture(Xe,xe.__webglTexture),ai(Xe,k),k.mipmaps&&k.mipmaps.length>0)for(let vt=0;vt<k.mipmaps.length;vt++)ht(K.__webglFramebuffer[vt],V,k,i.COLOR_ATTACHMENT0,Xe,vt);else ht(K.__webglFramebuffer,V,k,i.COLOR_ATTACHMENT0,Xe,0);f(k)&&g(Xe),e.unbindTexture()}V.depthBuffer&&Vi(V)}function Qi(V){let k=V.textures;for(let K=0,xe=k.length;K<xe;K++){let Te=k[K];if(f(Te)){let be=S(V),Mt=n.get(Te).__webglTexture;e.bindTexture(be,Mt),g(be),e.unbindTexture()}}}let un=[],xi=[];function ir(V){if(V.samples>0){if(nr(V)===!1){let k=V.textures,K=V.width,xe=V.height,Te=i.COLOR_BUFFER_BIT,be=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Mt=n.get(V),Xe=k.length>1;if(Xe)for(let Xt=0;Xt<k.length;Xt++)e.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Xt,i.RENDERBUFFER,null),e.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Xt,i.TEXTURE_2D,null,0);e.bindFramebuffer(i.READ_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer);let vt=V.texture.mipmaps;vt&&vt.length>0?e.bindFramebuffer(i.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer[0]):e.bindFramebuffer(i.DRAW_FRAMEBUFFER,Mt.__webglFramebuffer);for(let Xt=0;Xt<k.length;Xt++){if(V.resolveDepthBuffer&&(V.depthBuffer&&(Te|=i.DEPTH_BUFFER_BIT),V.stencilBuffer&&V.resolveStencilBuffer&&(Te|=i.STENCIL_BUFFER_BIT)),Xe){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Mt.__webglColorRenderbuffer[Xt]);let Oe=n.get(k[Xt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,Oe,0)}i.blitFramebuffer(0,0,K,xe,0,0,K,xe,Te,i.NEAREST),c===!0&&(un.length=0,xi.length=0,un.push(i.COLOR_ATTACHMENT0+Xt),V.depthBuffer&&V.resolveDepthBuffer===!1&&(un.push(be),xi.push(be),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,xi)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,un))}if(e.bindFramebuffer(i.READ_FRAMEBUFFER,null),e.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),Xe)for(let Xt=0;Xt<k.length;Xt++){e.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Xt,i.RENDERBUFFER,Mt.__webglColorRenderbuffer[Xt]);let Oe=n.get(k[Xt]).__webglTexture;e.bindFramebuffer(i.FRAMEBUFFER,Mt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Xt,i.TEXTURE_2D,Oe,0)}e.bindFramebuffer(i.DRAW_FRAMEBUFFER,Mt.__webglMultisampledFramebuffer)}else if(V.depthBuffer&&V.resolveDepthBuffer===!1&&c){let k=V.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[k])}}}function W(V){return Math.min(r.maxSamples,V.samples)}function nr(V){let k=n.get(V);return V.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&k.__useRenderToTexture!==!1}function Xi(V){let k=s.render.frame;d.get(V)!==k&&(d.set(V,k),V.update())}function wn(V,k){let K=V.colorSpace,xe=V.format,Te=V.type;return V.isCompressedTexture===!0||V.isVideoTexture===!0||K!==Nh&&K!==Ol&&(Fi.getTransfer(K)===Ki?(xe!==Xs||Te!==ts)&&Ut("WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):jt("WebGLTextures: Unsupported texture color space:",K)),k}function yt(V){return typeof HTMLImageElement<"u"&&V instanceof HTMLImageElement?(l.width=V.naturalWidth||V.width,l.height=V.naturalHeight||V.height):typeof VideoFrame<"u"&&V instanceof VideoFrame?(l.width=V.displayWidth,l.height=V.displayHeight):(l.width=V.width,l.height=V.height),l}this.allocateTextureUnit=ee,this.resetTextureUnits=X,this.setTexture2D=se,this.setTexture2DArray=ue,this.setTexture3D=ae,this.setTextureCube=Ce,this.rebindTextures=Tr,this.setupRenderTarget=Li,this.updateRenderTargetMipmap=Qi,this.updateMultisampleRenderTarget=ir,this.setupDepthRenderbuffer=Vi,this.setupFrameBufferTexture=ht,this.useMultisampledRTT=nr,this.isReversedDepthBuffer=function(){return e.buffers.depth.getReversed()}}function aEe(i,t){function e(n,r=Ol){let o,s=Fi.getTransfer(r);if(n===ts)return i.UNSIGNED_BYTE;if(n===jC)return i.UNSIGNED_SHORT_4_4_4_4;if(n===$C)return i.UNSIGNED_SHORT_5_5_5_1;if(n===zL)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===HL)return i.UNSIGNED_INT_10F_11F_11F_REV;if(n===VL)return i.BYTE;if(n===UL)return i.SHORT;if(n===Mf)return i.UNSIGNED_SHORT;if(n===HC)return i.INT;if(n===Pa)return i.UNSIGNED_INT;if(n===Oa)return i.FLOAT;if(n===wc)return i.HALF_FLOAT;if(n===jL)return i.ALPHA;if(n===$L)return i.RGB;if(n===Xs)return i.RGBA;if(n===_c)return i.DEPTH_COMPONENT;if(n===nu)return i.DEPTH_STENCIL;if(n===GL)return i.RED;if(n===GC)return i.RED_INTEGER;if(n===zh)return i.RG;if(n===WC)return i.RG_INTEGER;if(n===qC)return i.RGBA_INTEGER;if(n===ib||n===nb||n===rb||n===ob)if(s===Ki)if(o=t.get("WEBGL_compressed_texture_s3tc_srgb"),o!==null){if(n===ib)return o.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===nb)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===rb)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===ob)return o.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(o=t.get("WEBGL_compressed_texture_s3tc"),o!==null){if(n===ib)return o.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===nb)return o.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===rb)return o.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===ob)return o.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===XC||n===YC||n===ZC||n===KC)if(o=t.get("WEBGL_compressed_texture_pvrtc"),o!==null){if(n===XC)return o.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===YC)return o.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===ZC)return o.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===KC)return o.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===QC||n===JC||n===eS||n===tS||n===iS||n===nS||n===rS)if(o=t.get("WEBGL_compressed_texture_etc"),o!==null){if(n===QC||n===JC)return s===Ki?o.COMPRESSED_SRGB8_ETC2:o.COMPRESSED_RGB8_ETC2;if(n===eS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:o.COMPRESSED_RGBA8_ETC2_EAC;if(n===tS)return o.COMPRESSED_R11_EAC;if(n===iS)return o.COMPRESSED_SIGNED_R11_EAC;if(n===nS)return o.COMPRESSED_RG11_EAC;if(n===rS)return o.COMPRESSED_SIGNED_RG11_EAC}else return null;if(n===oS||n===sS||n===aS||n===cS||n===lS||n===dS||n===uS||n===hS||n===mS||n===pS||n===fS||n===gS||n===_S||n===bS)if(o=t.get("WEBGL_compressed_texture_astc"),o!==null){if(n===oS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:o.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===sS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:o.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===aS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:o.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===cS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:o.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===lS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:o.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===dS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:o.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===uS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:o.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===hS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:o.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===mS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:o.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===pS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:o.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===fS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:o.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===gS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:o.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===_S)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:o.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===bS)return s===Ki?o.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:o.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===vS||n===yS||n===xS)if(o=t.get("EXT_texture_compression_bptc"),o!==null){if(n===vS)return s===Ki?o.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:o.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===yS)return o.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===xS)return o.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===wS||n===MS||n===CS||n===SS)if(o=t.get("EXT_texture_compression_rgtc"),o!==null){if(n===wS)return o.COMPRESSED_RED_RGTC1_EXT;if(n===MS)return o.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===CS)return o.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===SS)return o.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Cf?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:e}}var cEe=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,lEe=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`,f3=class{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e){if(this.texture===null){let n=new G0(t.texture);(t.depthNear!==e.depthNear||t.depthFar!==e.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=n}}getMesh(t){if(this.texture!==null&&this.mesh===null){let e=t.cameras[0].viewport,n=new xs({vertexShader:cEe,fragmentShader:lEe,uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new ze(new Ms(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}},g3=class extends bc{constructor(t,e){super();let n=this,r=null,o=1,s=null,a="local-floor",c=1,l=null,d=null,u=null,h=null,m=null,p=null,_=typeof XRWebGLBinding<"u",f=new f3,g={},S=e.getContextAttributes(),C=null,E=null,N=[],R=[],B=new Ht,z=null,T=new mo;T.viewport=new Un;let O=new mo;O.viewport=new Un;let U=[T,O],X=new kC,ee=null,de=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Se){let De=N[Se];return De===void 0&&(De=new _f,N[Se]=De),De.getTargetRaySpace()},this.getControllerGrip=function(Se){let De=N[Se];return De===void 0&&(De=new _f,N[Se]=De),De.getGripSpace()},this.getHand=function(Se){let De=N[Se];return De===void 0&&(De=new _f,N[Se]=De),De.getHandSpace()};function se(Se){let De=R.indexOf(Se.inputSource);if(De===-1)return;let ht=N[De];ht!==void 0&&(ht.update(Se.inputSource,Se.frame,l||s),ht.dispatchEvent({type:Se.type,data:Se.inputSource}))}function ue(){r.removeEventListener("select",se),r.removeEventListener("selectstart",se),r.removeEventListener("selectend",se),r.removeEventListener("squeeze",se),r.removeEventListener("squeezestart",se),r.removeEventListener("squeezeend",se),r.removeEventListener("end",ue),r.removeEventListener("inputsourceschange",ae);for(let Se=0;Se<N.length;Se++){let De=R[Se];De!==null&&(R[Se]=null,N[Se].disconnect(De))}ee=null,de=null,f.reset();for(let Se in g)delete g[Se];t.setRenderTarget(C),m=null,h=null,u=null,r=null,E=null,In.stop(),n.isPresenting=!1,t.setPixelRatio(z),t.setSize(B.width,B.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Se){o=Se,n.isPresenting===!0&&Ut("WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Se){a=Se,n.isPresenting===!0&&Ut("WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||s},this.setReferenceSpace=function(Se){l=Se},this.getBaseLayer=function(){return h!==null?h:m},this.getBinding=function(){return u===null&&_&&(u=new XRWebGLBinding(r,e)),u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=function(Se){return oe(this,null,function*(){if(r=Se,r!==null){if(C=t.getRenderTarget(),r.addEventListener("select",se),r.addEventListener("selectstart",se),r.addEventListener("selectend",se),r.addEventListener("squeeze",se),r.addEventListener("squeezestart",se),r.addEventListener("squeezeend",se),r.addEventListener("end",ue),r.addEventListener("inputsourceschange",ae),S.xrCompatible!==!0&&(yield e.makeXRCompatible()),z=t.getPixelRatio(),t.getSize(B),_&&"createProjectionLayer"in XRWebGLBinding.prototype){let ht=null,fi=null,bt=null;S.depth&&(bt=S.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,ht=S.stencil?nu:_c,fi=S.stencil?Cf:Pa);let Vi={colorFormat:e.RGBA8,depthFormat:bt,scaleFactor:o};u=this.getBinding(),h=u.createProjectionLayer(Vi),r.updateRenderState({layers:[h]}),t.setPixelRatio(1),t.setSize(h.textureWidth,h.textureHeight,!1),E=new ys(h.textureWidth,h.textureHeight,{format:Xs,type:ts,depthTexture:new Yd(h.textureWidth,h.textureHeight,fi,void 0,void 0,void 0,void 0,void 0,void 0,ht),stencilBuffer:S.stencil,colorSpace:t.outputColorSpace,samples:S.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1,resolveStencilBuffer:h.ignoreDepthValues===!1})}else{let ht={antialias:S.antialias,alpha:!0,depth:S.depth,stencil:S.stencil,framebufferScaleFactor:o};m=new XRWebGLLayer(r,e,ht),r.updateRenderState({baseLayer:m}),t.setPixelRatio(1),t.setSize(m.framebufferWidth,m.framebufferHeight,!1),E=new ys(m.framebufferWidth,m.framebufferHeight,{format:Xs,type:ts,colorSpace:t.outputColorSpace,stencilBuffer:S.stencil,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}E.isXRRenderTarget=!0,this.setFoveation(c),l=null,s=yield r.requestReferenceSpace(a),In.setContext(r),In.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}})},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return f.getDepthTexture()};function ae(Se){for(let De=0;De<Se.removed.length;De++){let ht=Se.removed[De],fi=R.indexOf(ht);fi>=0&&(R[fi]=null,N[fi].disconnect(ht))}for(let De=0;De<Se.added.length;De++){let ht=Se.added[De],fi=R.indexOf(ht);if(fi===-1){for(let Vi=0;Vi<N.length;Vi++)if(Vi>=R.length){R.push(ht),fi=Vi;break}else if(R[Vi]===null){R[Vi]=ht,fi=Vi;break}if(fi===-1)break}let bt=N[fi];bt&&bt.connect(ht)}}let Ce=new j,Pe=new j;function He(Se,De,ht){Ce.setFromMatrixPosition(De.matrixWorld),Pe.setFromMatrixPosition(ht.matrixWorld);let fi=Ce.distanceTo(Pe),bt=De.projectionMatrix.elements,Vi=ht.projectionMatrix.elements,Tr=bt[14]/(bt[10]-1),Li=bt[14]/(bt[10]+1),Qi=(bt[9]+1)/bt[5],un=(bt[9]-1)/bt[5],xi=(bt[8]-1)/bt[0],ir=(Vi[8]+1)/Vi[0],W=Tr*xi,nr=Tr*ir,Xi=fi/(-xi+ir),wn=Xi*-xi;if(De.matrixWorld.decompose(Se.position,Se.quaternion,Se.scale),Se.translateX(wn),Se.translateZ(Xi),Se.matrixWorld.compose(Se.position,Se.quaternion,Se.scale),Se.matrixWorldInverse.copy(Se.matrixWorld).invert(),bt[10]===-1)Se.projectionMatrix.copy(De.projectionMatrix),Se.projectionMatrixInverse.copy(De.projectionMatrixInverse);else{let yt=Tr+Xi,V=Li+Xi,k=W-wn,K=nr+(fi-wn),xe=Qi*Li/V*yt,Te=un*Li/V*yt;Se.projectionMatrix.makePerspective(k,K,xe,Te,yt,V),Se.projectionMatrixInverse.copy(Se.projectionMatrix).invert()}}function tt(Se,De){De===null?Se.matrixWorld.copy(Se.matrix):Se.matrixWorld.multiplyMatrices(De.matrixWorld,Se.matrix),Se.matrixWorldInverse.copy(Se.matrixWorld).invert()}this.updateCamera=function(Se){if(r===null)return;let De=Se.near,ht=Se.far;f.texture!==null&&(f.depthNear>0&&(De=f.depthNear),f.depthFar>0&&(ht=f.depthFar)),X.near=O.near=T.near=De,X.far=O.far=T.far=ht,(ee!==X.near||de!==X.far)&&(r.updateRenderState({depthNear:X.near,depthFar:X.far}),ee=X.near,de=X.far),X.layers.mask=Se.layers.mask|6,T.layers.mask=X.layers.mask&3,O.layers.mask=X.layers.mask&5;let fi=Se.parent,bt=X.cameras;tt(X,fi);for(let Vi=0;Vi<bt.length;Vi++)tt(bt[Vi],fi);bt.length===2?He(X,T,O):X.projectionMatrix.copy(T.projectionMatrix),ai(Se,X,fi)};function ai(Se,De,ht){ht===null?Se.matrix.copy(De.matrixWorld):(Se.matrix.copy(ht.matrixWorld),Se.matrix.invert(),Se.matrix.multiply(De.matrixWorld)),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),Se.updateMatrixWorld(!0),Se.projectionMatrix.copy(De.projectionMatrix),Se.projectionMatrixInverse.copy(De.projectionMatrixInverse),Se.isPerspectiveCamera&&(Se.fov=pf*2*Math.atan(1/Se.projectionMatrix.elements[5]),Se.zoom=1)}this.getCamera=function(){return X},this.getFoveation=function(){if(!(h===null&&m===null))return c},this.setFoveation=function(Se){c=Se,h!==null&&(h.fixedFoveation=Se),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Se)},this.hasDepthSensing=function(){return f.texture!==null},this.getDepthSensingMesh=function(){return f.getMesh(X)},this.getCameraTexture=function(Se){return g[Se]};let pi=null;function xn(Se,De){if(d=De.getViewerPose(l||s),p=De,d!==null){let ht=d.views;m!==null&&(t.setRenderTargetFramebuffer(E,m.framebuffer),t.setRenderTarget(E));let fi=!1;ht.length!==X.cameras.length&&(X.cameras.length=0,fi=!0);for(let Li=0;Li<ht.length;Li++){let Qi=ht[Li],un=null;if(m!==null)un=m.getViewport(Qi);else{let ir=u.getViewSubImage(h,Qi);un=ir.viewport,Li===0&&(t.setRenderTargetTextures(E,ir.colorTexture,ir.depthStencilTexture),t.setRenderTarget(E))}let xi=U[Li];xi===void 0&&(xi=new mo,xi.layers.enable(Li),xi.viewport=new Un,U[Li]=xi),xi.matrix.fromArray(Qi.transform.matrix),xi.matrix.decompose(xi.position,xi.quaternion,xi.scale),xi.projectionMatrix.fromArray(Qi.projectionMatrix),xi.projectionMatrixInverse.copy(xi.projectionMatrix).invert(),xi.viewport.set(un.x,un.y,un.width,un.height),Li===0&&(X.matrix.copy(xi.matrix),X.matrix.decompose(X.position,X.quaternion,X.scale)),fi===!0&&X.cameras.push(xi)}let bt=r.enabledFeatures;if(bt&&bt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&_){u=n.getBinding();let Li=u.getDepthInformation(ht[0]);Li&&Li.isValid&&Li.texture&&f.init(Li,r.renderState)}if(bt&&bt.includes("camera-access")&&_){t.state.unbindTexture(),u=n.getBinding();for(let Li=0;Li<ht.length;Li++){let Qi=ht[Li].camera;if(Qi){let un=g[Qi];un||(un=new G0,g[Qi]=un);let xi=u.getCameraImage(Qi);un.sourceTexture=xi}}}}for(let ht=0;ht<N.length;ht++){let fi=R[ht],bt=N[ht];fi!==null&&bt!==void 0&&bt.update(fi,De,l||s)}pi&&pi(Se,De),De.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:De}),p=null}let In=new CZ;In.setAnimationLoop(xn),this.setAnimationLoop=function(Se){pi=Se},this.dispose=function(){}}},$h=new yc,dEe=new vn;function uEe(i,t){function e(f,g){f.matrixAutoUpdate===!0&&f.updateMatrix(),g.value.copy(f.matrix)}function n(f,g){g.color.getRGB(f.fogColor.value,QL(i)),g.isFog?(f.fogNear.value=g.near,f.fogFar.value=g.far):g.isFogExp2&&(f.fogDensity.value=g.density)}function r(f,g,S,C,E){g.isMeshBasicMaterial||g.isMeshLambertMaterial?o(f,g):g.isMeshToonMaterial?(o(f,g),u(f,g)):g.isMeshPhongMaterial?(o(f,g),d(f,g)):g.isMeshStandardMaterial?(o(f,g),h(f,g),g.isMeshPhysicalMaterial&&m(f,g,E)):g.isMeshMatcapMaterial?(o(f,g),p(f,g)):g.isMeshDepthMaterial?o(f,g):g.isMeshDistanceMaterial?(o(f,g),_(f,g)):g.isMeshNormalMaterial?o(f,g):g.isLineBasicMaterial?(s(f,g),g.isLineDashedMaterial&&a(f,g)):g.isPointsMaterial?c(f,g,S,C):g.isSpriteMaterial?l(f,g):g.isShadowMaterial?(f.color.value.copy(g.color),f.opacity.value=g.opacity):g.isShaderMaterial&&(g.uniformsNeedUpdate=!1)}function o(f,g){f.opacity.value=g.opacity,g.color&&f.diffuse.value.copy(g.color),g.emissive&&f.emissive.value.copy(g.emissive).multiplyScalar(g.emissiveIntensity),g.map&&(f.map.value=g.map,e(g.map,f.mapTransform)),g.alphaMap&&(f.alphaMap.value=g.alphaMap,e(g.alphaMap,f.alphaMapTransform)),g.bumpMap&&(f.bumpMap.value=g.bumpMap,e(g.bumpMap,f.bumpMapTransform),f.bumpScale.value=g.bumpScale,g.side===Ro&&(f.bumpScale.value*=-1)),g.normalMap&&(f.normalMap.value=g.normalMap,e(g.normalMap,f.normalMapTransform),f.normalScale.value.copy(g.normalScale),g.side===Ro&&f.normalScale.value.negate()),g.displacementMap&&(f.displacementMap.value=g.displacementMap,e(g.displacementMap,f.displacementMapTransform),f.displacementScale.value=g.displacementScale,f.displacementBias.value=g.displacementBias),g.emissiveMap&&(f.emissiveMap.value=g.emissiveMap,e(g.emissiveMap,f.emissiveMapTransform)),g.specularMap&&(f.specularMap.value=g.specularMap,e(g.specularMap,f.specularMapTransform)),g.alphaTest>0&&(f.alphaTest.value=g.alphaTest);let S=t.get(g),C=S.envMap,E=S.envMapRotation;C&&(f.envMap.value=C,$h.copy(E),$h.x*=-1,$h.y*=-1,$h.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&($h.y*=-1,$h.z*=-1),f.envMapRotation.value.setFromMatrix4(dEe.makeRotationFromEuler($h)),f.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,f.reflectivity.value=g.reflectivity,f.ior.value=g.ior,f.refractionRatio.value=g.refractionRatio),g.lightMap&&(f.lightMap.value=g.lightMap,f.lightMapIntensity.value=g.lightMapIntensity,e(g.lightMap,f.lightMapTransform)),g.aoMap&&(f.aoMap.value=g.aoMap,f.aoMapIntensity.value=g.aoMapIntensity,e(g.aoMap,f.aoMapTransform))}function s(f,g){f.diffuse.value.copy(g.color),f.opacity.value=g.opacity,g.map&&(f.map.value=g.map,e(g.map,f.mapTransform))}function a(f,g){f.dashSize.value=g.dashSize,f.totalSize.value=g.dashSize+g.gapSize,f.scale.value=g.scale}function c(f,g,S,C){f.diffuse.value.copy(g.color),f.opacity.value=g.opacity,f.size.value=g.size*S,f.scale.value=C*.5,g.map&&(f.map.value=g.map,e(g.map,f.uvTransform)),g.alphaMap&&(f.alphaMap.value=g.alphaMap,e(g.alphaMap,f.alphaMapTransform)),g.alphaTest>0&&(f.alphaTest.value=g.alphaTest)}function l(f,g){f.diffuse.value.copy(g.color),f.opacity.value=g.opacity,f.rotation.value=g.rotation,g.map&&(f.map.value=g.map,e(g.map,f.mapTransform)),g.alphaMap&&(f.alphaMap.value=g.alphaMap,e(g.alphaMap,f.alphaMapTransform)),g.alphaTest>0&&(f.alphaTest.value=g.alphaTest)}function d(f,g){f.specular.value.copy(g.specular),f.shininess.value=Math.max(g.shininess,1e-4)}function u(f,g){g.gradientMap&&(f.gradientMap.value=g.gradientMap)}function h(f,g){f.metalness.value=g.metalness,g.metalnessMap&&(f.metalnessMap.value=g.metalnessMap,e(g.metalnessMap,f.metalnessMapTransform)),f.roughness.value=g.roughness,g.roughnessMap&&(f.roughnessMap.value=g.roughnessMap,e(g.roughnessMap,f.roughnessMapTransform)),g.envMap&&(f.envMapIntensity.value=g.envMapIntensity)}function m(f,g,S){f.ior.value=g.ior,g.sheen>0&&(f.sheenColor.value.copy(g.sheenColor).multiplyScalar(g.sheen),f.sheenRoughness.value=g.sheenRoughness,g.sheenColorMap&&(f.sheenColorMap.value=g.sheenColorMap,e(g.sheenColorMap,f.sheenColorMapTransform)),g.sheenRoughnessMap&&(f.sheenRoughnessMap.value=g.sheenRoughnessMap,e(g.sheenRoughnessMap,f.sheenRoughnessMapTransform))),g.clearcoat>0&&(f.clearcoat.value=g.clearcoat,f.clearcoatRoughness.value=g.clearcoatRoughness,g.clearcoatMap&&(f.clearcoatMap.value=g.clearcoatMap,e(g.clearcoatMap,f.clearcoatMapTransform)),g.clearcoatRoughnessMap&&(f.clearcoatRoughnessMap.value=g.clearcoatRoughnessMap,e(g.clearcoatRoughnessMap,f.clearcoatRoughnessMapTransform)),g.clearcoatNormalMap&&(f.clearcoatNormalMap.value=g.clearcoatNormalMap,e(g.clearcoatNormalMap,f.clearcoatNormalMapTransform),f.clearcoatNormalScale.value.copy(g.clearcoatNormalScale),g.side===Ro&&f.clearcoatNormalScale.value.negate())),g.dispersion>0&&(f.dispersion.value=g.dispersion),g.iridescence>0&&(f.iridescence.value=g.iridescence,f.iridescenceIOR.value=g.iridescenceIOR,f.iridescenceThicknessMinimum.value=g.iridescenceThicknessRange[0],f.iridescenceThicknessMaximum.value=g.iridescenceThicknessRange[1],g.iridescenceMap&&(f.iridescenceMap.value=g.iridescenceMap,e(g.iridescenceMap,f.iridescenceMapTransform)),g.iridescenceThicknessMap&&(f.iridescenceThicknessMap.value=g.iridescenceThicknessMap,e(g.iridescenceThicknessMap,f.iridescenceThicknessMapTransform))),g.transmission>0&&(f.transmission.value=g.transmission,f.transmissionSamplerMap.value=S.texture,f.transmissionSamplerSize.value.set(S.width,S.height),g.transmissionMap&&(f.transmissionMap.value=g.transmissionMap,e(g.transmissionMap,f.transmissionMapTransform)),f.thickness.value=g.thickness,g.thicknessMap&&(f.thicknessMap.value=g.thicknessMap,e(g.thicknessMap,f.thicknessMapTransform)),f.attenuationDistance.value=g.attenuationDistance,f.attenuationColor.value.copy(g.attenuationColor)),g.anisotropy>0&&(f.anisotropyVector.value.set(g.anisotropy*Math.cos(g.anisotropyRotation),g.anisotropy*Math.sin(g.anisotropyRotation)),g.anisotropyMap&&(f.anisotropyMap.value=g.anisotropyMap,e(g.anisotropyMap,f.anisotropyMapTransform))),f.specularIntensity.value=g.specularIntensity,f.specularColor.value.copy(g.specularColor),g.specularColorMap&&(f.specularColorMap.value=g.specularColorMap,e(g.specularColorMap,f.specularColorMapTransform)),g.specularIntensityMap&&(f.specularIntensityMap.value=g.specularIntensityMap,e(g.specularIntensityMap,f.specularIntensityMapTransform))}function p(f,g){g.matcap&&(f.matcap.value=g.matcap)}function _(f,g){let S=t.get(g).light;f.referencePosition.value.setFromMatrixPosition(S.matrixWorld),f.nearDistance.value=S.shadow.camera.near,f.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function hEe(i,t,e,n){let r={},o={},s=[],a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function c(S,C){let E=C.program;n.uniformBlockBinding(S,E)}function l(S,C){let E=r[S.id];E===void 0&&(p(S),E=d(S),r[S.id]=E,S.addEventListener("dispose",f));let N=C.program;n.updateUBOMapping(S,N);let R=t.render.frame;o[S.id]!==R&&(h(S),o[S.id]=R)}function d(S){let C=u();S.__bindingPointIndex=C;let E=i.createBuffer(),N=S.__size,R=S.usage;return i.bindBuffer(i.UNIFORM_BUFFER,E),i.bufferData(i.UNIFORM_BUFFER,N,R),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,C,E),E}function u(){for(let S=0;S<a;S++)if(s.indexOf(S)===-1)return s.push(S),S;return jt("WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(S){let C=r[S.id],E=S.uniforms,N=S.__cache;i.bindBuffer(i.UNIFORM_BUFFER,C);for(let R=0,B=E.length;R<B;R++){let z=Array.isArray(E[R])?E[R]:[E[R]];for(let T=0,O=z.length;T<O;T++){let U=z[T];if(m(U,R,T,N)===!0){let X=U.__offset,ee=Array.isArray(U.value)?U.value:[U.value],de=0;for(let se=0;se<ee.length;se++){let ue=ee[se],ae=_(ue);typeof ue=="number"||typeof ue=="boolean"?(U.__data[0]=ue,i.bufferSubData(i.UNIFORM_BUFFER,X+de,U.__data)):ue.isMatrix3?(U.__data[0]=ue.elements[0],U.__data[1]=ue.elements[1],U.__data[2]=ue.elements[2],U.__data[3]=0,U.__data[4]=ue.elements[3],U.__data[5]=ue.elements[4],U.__data[6]=ue.elements[5],U.__data[7]=0,U.__data[8]=ue.elements[6],U.__data[9]=ue.elements[7],U.__data[10]=ue.elements[8],U.__data[11]=0):(ue.toArray(U.__data,de),de+=ae.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,X,U.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function m(S,C,E,N){let R=S.value,B=C+"_"+E;if(N[B]===void 0)return typeof R=="number"||typeof R=="boolean"?N[B]=R:N[B]=R.clone(),!0;{let z=N[B];if(typeof R=="number"||typeof R=="boolean"){if(z!==R)return N[B]=R,!0}else if(z.equals(R)===!1)return z.copy(R),!0}return!1}function p(S){let C=S.uniforms,E=0,N=16;for(let B=0,z=C.length;B<z;B++){let T=Array.isArray(C[B])?C[B]:[C[B]];for(let O=0,U=T.length;O<U;O++){let X=T[O],ee=Array.isArray(X.value)?X.value:[X.value];for(let de=0,se=ee.length;de<se;de++){let ue=ee[de],ae=_(ue),Ce=E%N,Pe=Ce%ae.boundary,He=Ce+Pe;E+=Pe,He!==0&&N-He<ae.storage&&(E+=N-He),X.__data=new Float32Array(ae.storage/Float32Array.BYTES_PER_ELEMENT),X.__offset=E,E+=ae.storage}}}let R=E%N;return R>0&&(E+=N-R),S.__size=E,S.__cache={},this}function _(S){let C={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(C.boundary=4,C.storage=4):S.isVector2?(C.boundary=8,C.storage=8):S.isVector3||S.isColor?(C.boundary=16,C.storage=12):S.isVector4?(C.boundary=16,C.storage=16):S.isMatrix3?(C.boundary=48,C.storage=48):S.isMatrix4?(C.boundary=64,C.storage=64):S.isTexture?Ut("WebGLRenderer: Texture samplers can not be part of an uniforms group."):Ut("WebGLRenderer: Unsupported uniform value type.",S),C}function f(S){let C=S.target;C.removeEventListener("dispose",f);let E=s.indexOf(C.__bindingPointIndex);s.splice(E,1),i.deleteBuffer(r[C.id]),delete r[C.id],delete o[C.id]}function g(){for(let S in r)i.deleteBuffer(r[S]);s=[],r={},o={}}return{bind:c,update:l,dispose:g}}var mEe=new Uint16Array([12469,15057,12620,14925,13266,14620,13807,14376,14323,13990,14545,13625,14713,13328,14840,12882,14931,12528,14996,12233,15039,11829,15066,11525,15080,11295,15085,10976,15082,10705,15073,10495,13880,14564,13898,14542,13977,14430,14158,14124,14393,13732,14556,13410,14702,12996,14814,12596,14891,12291,14937,11834,14957,11489,14958,11194,14943,10803,14921,10506,14893,10278,14858,9960,14484,14039,14487,14025,14499,13941,14524,13740,14574,13468,14654,13106,14743,12678,14818,12344,14867,11893,14889,11509,14893,11180,14881,10751,14852,10428,14812,10128,14765,9754,14712,9466,14764,13480,14764,13475,14766,13440,14766,13347,14769,13070,14786,12713,14816,12387,14844,11957,14860,11549,14868,11215,14855,10751,14825,10403,14782,10044,14729,9651,14666,9352,14599,9029,14967,12835,14966,12831,14963,12804,14954,12723,14936,12564,14917,12347,14900,11958,14886,11569,14878,11247,14859,10765,14828,10401,14784,10011,14727,9600,14660,9289,14586,8893,14508,8533,15111,12234,15110,12234,15104,12216,15092,12156,15067,12010,15028,11776,14981,11500,14942,11205,14902,10752,14861,10393,14812,9991,14752,9570,14682,9252,14603,8808,14519,8445,14431,8145,15209,11449,15208,11451,15202,11451,15190,11438,15163,11384,15117,11274,15055,10979,14994,10648,14932,10343,14871,9936,14803,9532,14729,9218,14645,8742,14556,8381,14461,8020,14365,7603,15273,10603,15272,10607,15267,10619,15256,10631,15231,10614,15182,10535,15118,10389,15042,10167,14963,9787,14883,9447,14800,9115,14710,8665,14615,8318,14514,7911,14411,7507,14279,7198,15314,9675,15313,9683,15309,9712,15298,9759,15277,9797,15229,9773,15166,9668,15084,9487,14995,9274,14898,8910,14800,8539,14697,8234,14590,7790,14479,7409,14367,7067,14178,6621,15337,8619,15337,8631,15333,8677,15325,8769,15305,8871,15264,8940,15202,8909,15119,8775,15022,8565,14916,8328,14804,8009,14688,7614,14569,7287,14448,6888,14321,6483,14088,6171,15350,7402,15350,7419,15347,7480,15340,7613,15322,7804,15287,7973,15229,8057,15148,8012,15046,7846,14933,7611,14810,7357,14682,7069,14552,6656,14421,6316,14251,5948,14007,5528,15356,5942,15356,5977,15353,6119,15348,6294,15332,6551,15302,6824,15249,7044,15171,7122,15070,7050,14949,6861,14818,6611,14679,6349,14538,6067,14398,5651,14189,5311,13935,4958,15359,4123,15359,4153,15356,4296,15353,4646,15338,5160,15311,5508,15263,5829,15188,6042,15088,6094,14966,6001,14826,5796,14678,5543,14527,5287,14377,4985,14133,4586,13869,4257,15360,1563,15360,1642,15358,2076,15354,2636,15341,3350,15317,4019,15273,4429,15203,4732,15105,4911,14981,4932,14836,4818,14679,4621,14517,4386,14359,4156,14083,3795,13808,3437,15360,122,15360,137,15358,285,15355,636,15344,1274,15322,2177,15281,2765,15215,3223,15120,3451,14995,3569,14846,3567,14681,3466,14511,3305,14344,3121,14037,2800,13753,2467,15360,0,15360,1,15359,21,15355,89,15346,253,15325,479,15287,796,15225,1148,15133,1492,15008,1749,14856,1882,14685,1886,14506,1783,14324,1608,13996,1398,13702,1183]),Cc=null;function pEe(){return Cc===null&&(Cc=new fC(mEe,16,16,zh,wc),Cc.name="DFG_LUT",Cc.minFilter=Yn,Cc.magFilter=Yn,Cc.wrapS=fc,Cc.wrapT=fc,Cc.generateMipmaps=!1,Cc.needsUpdate=!0),Cc}var AS=class{constructor(t={}){let{canvas:e=QY(),context:n=null,depth:r=!0,stencil:o=!1,alpha:s=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:d="default",failIfMajorPerformanceCaveat:u=!1,reversedDepthBuffer:h=!1,outputBufferType:m=ts}=t;this.isWebGLRenderer=!0;let p;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=n.getContextAttributes().alpha}else p=s;let _=m,f=new Set([qC,WC,GC]),g=new Set([ts,Pa,Mf,Cf,jC,$C]),S=new Uint32Array(4),C=new Int32Array(4),E=null,N=null,R=[],B=[],z=null;this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Aa,this.toneMappingExposure=1,this.transmissionResolutionScale=1;let T=this,O=!1;this._outputColorSpace=bs;let U=0,X=0,ee=null,de=-1,se=null,ue=new Un,ae=new Un,Ce=null,Pe=new Ci(0),He=0,tt=e.width,ai=e.height,pi=1,xn=null,In=null,Se=new Un(0,0,tt,ai),De=new Un(0,0,tt,ai),ht=!1,fi=new bf,bt=!1,Vi=!1,Tr=new vn,Li=new j,Qi=new Un,un={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0},xi=!1;function ir(){return ee===null?pi:1}let W=n;function nr(L,te){return e.getContext(L,te)}try{let L={alpha:!0,depth:r,stencil:o,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:d,failIfMajorPerformanceCaveat:u};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${AC}`),e.addEventListener("webglcontextlost",ti,!1),e.addEventListener("webglcontextrestored",Mn,!1),e.addEventListener("webglcontextcreationerror",Ji,!1),W===null){let te="webgl2";if(W=nr(te,L),W===null)throw nr(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(L){throw jt("WebGLRenderer: "+L.message),L}let Xi,wn,yt,V,k,K,xe,Te,be,Mt,Xe,vt,Xt,Oe,Ze,_t,xt,Ye,wi,Y,nt,Ue,ct,Ae;function Ee(){Xi=new xSe(W),Xi.init(),Ue=new aEe(W,Xi),wn=new hSe(W,Xi,t,Ue),yt=new oEe(W,Xi),wn.reversedDepthBuffer&&h&&yt.buffers.depth.setReversed(!0),V=new CSe(W),k=new $1e,K=new sEe(W,Xi,yt,k,wn,Ue,V),xe=new pSe(T),Te=new ySe(T),be=new Iwe(W),ct=new dSe(W,be),Mt=new wSe(W,be,V,ct),Xe=new ESe(W,Mt,be,V),wi=new SSe(W,wn,K),_t=new mSe(k),vt=new j1e(T,xe,Te,Xi,wn,ct,_t),Xt=new uEe(T,k),Oe=new W1e,Ze=new Q1e(Xi),Ye=new lSe(T,xe,Te,yt,Xe,p,c),xt=new nEe(T,Xe,wn),Ae=new hEe(W,V,wn,yt),Y=new uSe(W,Xi,V),nt=new MSe(W,Xi,V),V.programs=vt.programs,T.capabilities=wn,T.extensions=Xi,T.properties=k,T.renderLists=Oe,T.shadowMap=xt,T.state=yt,T.info=V}Ee(),_!==ts&&(z=new ISe(_,e.width,e.height,r,o));let We=new g3(T,W);this.xr=We,this.getContext=function(){return W},this.getContextAttributes=function(){return W.getContextAttributes()},this.forceContextLoss=function(){let L=Xi.get("WEBGL_lose_context");L&&L.loseContext()},this.forceContextRestore=function(){let L=Xi.get("WEBGL_lose_context");L&&L.restoreContext()},this.getPixelRatio=function(){return pi},this.setPixelRatio=function(L){L!==void 0&&(pi=L,this.setSize(tt,ai,!1))},this.getSize=function(L){return L.set(tt,ai)},this.setSize=function(L,te,me=!0){if(We.isPresenting){Ut("WebGLRenderer: Can't change size while VR device is presenting.");return}tt=L,ai=te,e.width=Math.floor(L*pi),e.height=Math.floor(te*pi),me===!0&&(e.style.width=L+"px",e.style.height=te+"px"),z!==null&&z.setSize(e.width,e.height),this.setViewport(0,0,L,te)},this.getDrawingBufferSize=function(L){return L.set(tt*pi,ai*pi).floor()},this.setDrawingBufferSize=function(L,te,me){tt=L,ai=te,pi=me,e.width=Math.floor(L*me),e.height=Math.floor(te*me),this.setViewport(0,0,L,te)},this.setEffects=function(L){if(_===ts){console.error("THREE.WebGLRenderer: setEffects() requires outputBufferType set to HalfFloatType or FloatType.");return}if(L){for(let te=0;te<L.length;te++)if(L[te].isOutputPass===!0){console.warn("THREE.WebGLRenderer: OutputPass is not needed in setEffects(). Tone mapping and color space conversion are applied automatically.");break}}z.setEffects(L||[])},this.getCurrentViewport=function(L){return L.copy(ue)},this.getViewport=function(L){return L.copy(Se)},this.setViewport=function(L,te,me,he){L.isVector4?Se.set(L.x,L.y,L.z,L.w):Se.set(L,te,me,he),yt.viewport(ue.copy(Se).multiplyScalar(pi).round())},this.getScissor=function(L){return L.copy(De)},this.setScissor=function(L,te,me,he){L.isVector4?De.set(L.x,L.y,L.z,L.w):De.set(L,te,me,he),yt.scissor(ae.copy(De).multiplyScalar(pi).round())},this.getScissorTest=function(){return ht},this.setScissorTest=function(L){yt.setScissorTest(ht=L)},this.setOpaqueSort=function(L){xn=L},this.setTransparentSort=function(L){In=L},this.getClearColor=function(L){return L.copy(Ye.getClearColor())},this.setClearColor=function(){Ye.setClearColor(...arguments)},this.getClearAlpha=function(){return Ye.getClearAlpha()},this.setClearAlpha=function(){Ye.setClearAlpha(...arguments)},this.clear=function(L=!0,te=!0,me=!0){let he=0;if(L){let le=!1;if(ee!==null){let Ke=ee.texture.format;le=f.has(Ke)}if(le){let Ke=ee.texture.type,lt=g.has(Ke),it=Ye.getClearColor(),mt=Ye.getClearAlpha(),St=it.r,$t=it.g,Pt=it.b;lt?(S[0]=St,S[1]=$t,S[2]=Pt,S[3]=mt,W.clearBufferuiv(W.COLOR,0,S)):(C[0]=St,C[1]=$t,C[2]=Pt,C[3]=mt,W.clearBufferiv(W.COLOR,0,C))}else he|=W.COLOR_BUFFER_BIT}te&&(he|=W.DEPTH_BUFFER_BIT),me&&(he|=W.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),W.clear(he)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ti,!1),e.removeEventListener("webglcontextrestored",Mn,!1),e.removeEventListener("webglcontextcreationerror",Ji,!1),Ye.dispose(),Oe.dispose(),Ze.dispose(),k.dispose(),xe.dispose(),Te.dispose(),Xe.dispose(),ct.dispose(),Ae.dispose(),vt.dispose(),We.dispose(),We.removeEventListener("sessionstart",W3),We.removeEventListener("sessionend",q3),su.stop()};function ti(L){L.preventDefault(),YL("WebGLRenderer: Context Lost."),O=!0}function Mn(){YL("WebGLRenderer: Context Restored."),O=!1;let L=V.autoReset,te=xt.enabled,me=xt.autoUpdate,he=xt.needsUpdate,le=xt.type;Ee(),V.autoReset=L,xt.enabled=te,xt.autoUpdate=me,xt.needsUpdate=he,xt.type=le}function Ji(L){jt("WebGLRenderer: A WebGL context could not be created. Reason: ",L.statusMessage)}function Ra(L){let te=L.target;te.removeEventListener("dispose",Ra),Tc(te)}function Tc(L){TK(L),k.remove(L)}function TK(L){let te=k.get(L).programs;te!==void 0&&(te.forEach(function(me){vt.releaseProgram(me)}),L.isShaderMaterial&&vt.releaseShaderCache(L))}this.renderBufferDirect=function(L,te,me,he,le,Ke){te===null&&(te=un);let lt=le.isMesh&&le.matrixWorld.determinant()<0,it=DK(L,te,me,he,le);yt.setMaterial(he,lt);let mt=me.index,St=1;if(he.wireframe===!0){if(mt=Mt.getWireframeAttribute(me),mt===void 0)return;St=2}let $t=me.drawRange,Pt=me.attributes.position,Si=$t.start*St,an=($t.start+$t.count)*St;Ke!==null&&(Si=Math.max(Si,Ke.start*St),an=Math.min(an,(Ke.start+Ke.count)*St)),mt!==null?(Si=Math.max(Si,0),an=Math.min(an,mt.count)):Pt!=null&&(Si=Math.max(Si,0),an=Math.min(an,Pt.count));let zn=an-Si;if(zn<0||zn===1/0)return;ct.setup(le,he,it,me,mt);let Hn,hn=Y;if(mt!==null&&(Hn=be.get(mt),hn=nt,hn.setIndex(Hn)),le.isMesh)he.wireframe===!0?(yt.setLineWidth(he.wireframeLinewidth*ir()),hn.setMode(W.LINES)):hn.setMode(W.TRIANGLES);else if(le.isLine){let Ot=he.linewidth;Ot===void 0&&(Ot=1),yt.setLineWidth(Ot*ir()),le.isLineSegments?hn.setMode(W.LINES):le.isLineLoop?hn.setMode(W.LINE_LOOP):hn.setMode(W.LINE_STRIP)}else le.isPoints?hn.setMode(W.POINTS):le.isSprite&&hn.setMode(W.TRIANGLES);if(le.isBatchedMesh)if(le._multiDrawInstances!==null)mf("WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),hn.renderMultiDrawInstances(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount,le._multiDrawInstances);else if(Xi.get("WEBGL_multi_draw"))hn.renderMultiDraw(le._multiDrawStarts,le._multiDrawCounts,le._multiDrawCount);else{let Ot=le._multiDrawStarts,en=le._multiDrawCounts,Ui=le._multiDrawCount,ns=mt?be.get(mt).bytesPerElement:1,Zh=k.get(he).currentProgram.getUniforms();for(let rs=0;rs<Ui;rs++)Zh.setValue(W,"_gl_DrawID",rs),hn.render(Ot[rs]/ns,en[rs])}else if(le.isInstancedMesh)hn.renderInstances(Si,zn,le.count);else if(me.isInstancedBufferGeometry){let Ot=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,en=Math.min(me.instanceCount,Ot);hn.renderInstances(Si,zn,en)}else hn.render(Si,zn)};function G3(L,te,me){L.transparent===!0&&L.side===po&&L.forceSinglePass===!1?(L.side=Ro,L.needsUpdate=!0,gb(L,te,me),L.side=Dl,L.needsUpdate=!0,gb(L,te,me),L.side=po):gb(L,te,me)}this.compile=function(L,te,me=null){me===null&&(me=L),N=Ze.get(me),N.init(te),B.push(N),me.traverseVisible(function(le){le.isLight&&le.layers.test(te.layers)&&(N.pushLight(le),le.castShadow&&N.pushShadow(le))}),L!==me&&L.traverseVisible(function(le){le.isLight&&le.layers.test(te.layers)&&(N.pushLight(le),le.castShadow&&N.pushShadow(le))}),N.setupLights();let he=new Set;return L.traverse(function(le){if(!(le.isMesh||le.isPoints||le.isLine||le.isSprite))return;let Ke=le.material;if(Ke)if(Array.isArray(Ke))for(let lt=0;lt<Ke.length;lt++){let it=Ke[lt];G3(it,me,le),he.add(it)}else G3(Ke,me,le),he.add(Ke)}),N=B.pop(),he},this.compileAsync=function(L,te,me=null){let he=this.compile(L,te,me);return new Promise(le=>{function Ke(){if(he.forEach(function(lt){k.get(lt).currentProgram.isReady()&&he.delete(lt)}),he.size===0){le(L);return}setTimeout(Ke,10)}Xi.get("KHR_parallel_shader_compile")!==null?Ke():setTimeout(Ke,10)})};let h1=null;function IK(L){h1&&h1(L)}function W3(){su.stop()}function q3(){su.start()}let su=new CZ;su.setAnimationLoop(IK),typeof self<"u"&&su.setContext(self),this.setAnimationLoop=function(L){h1=L,We.setAnimationLoop(L),L===null?su.stop():su.start()},We.addEventListener("sessionstart",W3),We.addEventListener("sessionend",q3),this.render=function(L,te){if(te!==void 0&&te.isCamera!==!0){jt("WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;let me=We.enabled===!0&&We.isPresenting===!0,he=z!==null&&(ee===null||me)&&z.begin(T,ee);if(L.matrixWorldAutoUpdate===!0&&L.updateMatrixWorld(),te.parent===null&&te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),We.enabled===!0&&We.isPresenting===!0&&(z===null||z.isCompositing()===!1)&&(We.cameraAutoUpdate===!0&&We.updateCamera(te),te=We.getCamera()),L.isScene===!0&&L.onBeforeRender(T,L,te,ee),N=Ze.get(L,B.length),N.init(te),B.push(N),Tr.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),fi.setFromProjectionMatrix(Tr,Da,te.reversedDepth),Vi=this.localClippingEnabled,bt=_t.init(this.clippingPlanes,Vi),E=Oe.get(L,R.length),E.init(),R.push(E),We.enabled===!0&&We.isPresenting===!0){let lt=T.xr.getDepthSensingMesh();lt!==null&&m1(lt,te,-1/0,T.sortObjects)}m1(L,te,0,T.sortObjects),E.finish(),T.sortObjects===!0&&E.sort(xn,In),xi=We.enabled===!1||We.isPresenting===!1||We.hasDepthSensing()===!1,xi&&Ye.addToRenderList(E,L),this.info.render.frame++,bt===!0&&_t.beginShadows();let le=N.state.shadowsArray;if(xt.render(le,L,te),bt===!0&&_t.endShadows(),this.info.autoReset===!0&&this.info.reset(),(he&&z.hasRenderPass())===!1){let lt=E.opaque,it=E.transmissive;if(N.setupLights(),te.isArrayCamera){let mt=te.cameras;if(it.length>0)for(let St=0,$t=mt.length;St<$t;St++){let Pt=mt[St];Y3(lt,it,L,Pt)}xi&&Ye.render(L);for(let St=0,$t=mt.length;St<$t;St++){let Pt=mt[St];X3(E,L,Pt,Pt.viewport)}}else it.length>0&&Y3(lt,it,L,te),xi&&Ye.render(L),X3(E,L,te)}ee!==null&&X===0&&(K.updateMultisampleRenderTarget(ee),K.updateRenderTargetMipmap(ee)),he&&z.end(T),L.isScene===!0&&L.onAfterRender(T,L,te),ct.resetDefaultState(),de=-1,se=null,B.pop(),B.length>0?(N=B[B.length-1],bt===!0&&_t.setGlobalState(T.clippingPlanes,N.state.camera)):N=null,R.pop(),R.length>0?E=R[R.length-1]:E=null};function m1(L,te,me,he){if(L.visible===!1)return;if(L.layers.test(te.layers)){if(L.isGroup)me=L.renderOrder;else if(L.isLOD)L.autoUpdate===!0&&L.update(te);else if(L.isLight)N.pushLight(L),L.castShadow&&N.pushShadow(L);else if(L.isSprite){if(!L.frustumCulled||fi.intersectsSprite(L)){he&&Qi.setFromMatrixPosition(L.matrixWorld).applyMatrix4(Tr);let lt=Xe.update(L),it=L.material;it.visible&&E.push(L,lt,it,me,Qi.z,null)}}else if((L.isMesh||L.isLine||L.isPoints)&&(!L.frustumCulled||fi.intersectsObject(L))){let lt=Xe.update(L),it=L.material;if(he&&(L.boundingSphere!==void 0?(L.boundingSphere===null&&L.computeBoundingSphere(),Qi.copy(L.boundingSphere.center)):(lt.boundingSphere===null&&lt.computeBoundingSphere(),Qi.copy(lt.boundingSphere.center)),Qi.applyMatrix4(L.matrixWorld).applyMatrix4(Tr)),Array.isArray(it)){let mt=lt.groups;for(let St=0,$t=mt.length;St<$t;St++){let Pt=mt[St],Si=it[Pt.materialIndex];Si&&Si.visible&&E.push(L,lt,Si,me,Qi.z,Pt)}}else it.visible&&E.push(L,lt,it,me,Qi.z,null)}}let Ke=L.children;for(let lt=0,it=Ke.length;lt<it;lt++)m1(Ke[lt],te,me,he)}function X3(L,te,me,he){let{opaque:le,transmissive:Ke,transparent:lt}=L;N.setupLightsView(me),bt===!0&&_t.setGlobalState(T.clippingPlanes,me),he&&yt.viewport(ue.copy(he)),le.length>0&&fb(le,te,me),Ke.length>0&&fb(Ke,te,me),lt.length>0&&fb(lt,te,me),yt.buffers.depth.setTest(!0),yt.buffers.depth.setMask(!0),yt.buffers.color.setMask(!0),yt.setPolygonOffset(!1)}function Y3(L,te,me,he){if((me.isScene===!0?me.overrideMaterial:null)!==null)return;if(N.state.transmissionRenderTarget[he.id]===void 0){let Si=Xi.has("EXT_color_buffer_half_float")||Xi.has("EXT_color_buffer_float");N.state.transmissionRenderTarget[he.id]=new ys(1,1,{generateMipmaps:!0,type:Si?wc:ts,minFilter:iu,samples:wn.samples,stencilBuffer:o,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Fi.workingColorSpace})}let Ke=N.state.transmissionRenderTarget[he.id],lt=he.viewport||ue;Ke.setSize(lt.z*T.transmissionResolutionScale,lt.w*T.transmissionResolutionScale);let it=T.getRenderTarget(),mt=T.getActiveCubeFace(),St=T.getActiveMipmapLevel();T.setRenderTarget(Ke),T.getClearColor(Pe),He=T.getClearAlpha(),He<1&&T.setClearColor(16777215,.5),T.clear(),xi&&Ye.render(me);let $t=T.toneMapping;T.toneMapping=Aa;let Pt=he.viewport;if(he.viewport!==void 0&&(he.viewport=void 0),N.setupLightsView(he),bt===!0&&_t.setGlobalState(T.clippingPlanes,he),fb(L,me,he),K.updateMultisampleRenderTarget(Ke),K.updateRenderTargetMipmap(Ke),Xi.has("WEBGL_multisampled_render_to_texture")===!1){let Si=!1;for(let an=0,zn=te.length;an<zn;an++){let Hn=te[an],{object:hn,geometry:Ot,material:en,group:Ui}=Hn;if(en.side===po&&hn.layers.test(he.layers)){let ns=en.side;en.side=Ro,en.needsUpdate=!0,Z3(hn,me,he,Ot,en,Ui),en.side=ns,en.needsUpdate=!0,Si=!0}}Si===!0&&(K.updateMultisampleRenderTarget(Ke),K.updateRenderTargetMipmap(Ke))}T.setRenderTarget(it,mt,St),T.setClearColor(Pe,He),Pt!==void 0&&(he.viewport=Pt),T.toneMapping=$t}function fb(L,te,me){let he=te.isScene===!0?te.overrideMaterial:null;for(let le=0,Ke=L.length;le<Ke;le++){let lt=L[le],{object:it,geometry:mt,group:St}=lt,$t=lt.material;$t.allowOverride===!0&&he!==null&&($t=he),it.layers.test(me.layers)&&Z3(it,te,me,mt,$t,St)}}function Z3(L,te,me,he,le,Ke){L.onBeforeRender(T,te,me,he,le,Ke),L.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,L.matrixWorld),L.normalMatrix.getNormalMatrix(L.modelViewMatrix),le.onBeforeRender(T,te,me,he,L,Ke),le.transparent===!0&&le.side===po&&le.forceSinglePass===!1?(le.side=Ro,le.needsUpdate=!0,T.renderBufferDirect(me,te,he,le,L,Ke),le.side=Dl,le.needsUpdate=!0,T.renderBufferDirect(me,te,he,le,L,Ke),le.side=po):T.renderBufferDirect(me,te,he,le,L,Ke),L.onAfterRender(T,te,me,he,le,Ke)}function gb(L,te,me){te.isScene!==!0&&(te=un);let he=k.get(L),le=N.state.lights,Ke=N.state.shadowsArray,lt=le.state.version,it=vt.getParameters(L,le.state,Ke,te,me),mt=vt.getProgramCacheKey(it),St=he.programs;he.environment=L.isMeshStandardMaterial?te.environment:null,he.fog=te.fog,he.envMap=(L.isMeshStandardMaterial?Te:xe).get(L.envMap||he.environment),he.envMapRotation=he.environment!==null&&L.envMap===null?te.environmentRotation:L.envMapRotation,St===void 0&&(L.addEventListener("dispose",Ra),St=new Map,he.programs=St);let $t=St.get(mt);if($t!==void 0){if(he.currentProgram===$t&&he.lightsStateVersion===lt)return Q3(L,it),$t}else it.uniforms=vt.getUniforms(L),L.onBeforeCompile(it,T),$t=vt.acquireProgram(it,mt),St.set(mt,$t),he.uniforms=it.uniforms;let Pt=he.uniforms;return(!L.isShaderMaterial&&!L.isRawShaderMaterial||L.clipping===!0)&&(Pt.clippingPlanes=_t.uniform),Q3(L,it),he.needsLights=AK(L),he.lightsStateVersion=lt,he.needsLights&&(Pt.ambientLightColor.value=le.state.ambient,Pt.lightProbe.value=le.state.probe,Pt.directionalLights.value=le.state.directional,Pt.directionalLightShadows.value=le.state.directionalShadow,Pt.spotLights.value=le.state.spot,Pt.spotLightShadows.value=le.state.spotShadow,Pt.rectAreaLights.value=le.state.rectArea,Pt.ltc_1.value=le.state.rectAreaLTC1,Pt.ltc_2.value=le.state.rectAreaLTC2,Pt.pointLights.value=le.state.point,Pt.pointLightShadows.value=le.state.pointShadow,Pt.hemisphereLights.value=le.state.hemi,Pt.directionalShadowMap.value=le.state.directionalShadowMap,Pt.directionalShadowMatrix.value=le.state.directionalShadowMatrix,Pt.spotShadowMap.value=le.state.spotShadowMap,Pt.spotLightMatrix.value=le.state.spotLightMatrix,Pt.spotLightMap.value=le.state.spotLightMap,Pt.pointShadowMap.value=le.state.pointShadowMap,Pt.pointShadowMatrix.value=le.state.pointShadowMatrix),he.currentProgram=$t,he.uniformsList=null,$t}function K3(L){if(L.uniformsList===null){let te=L.currentProgram.getUniforms();L.uniformsList=Tf.seqWithValue(te.seq,L.uniforms)}return L.uniformsList}function Q3(L,te){let me=k.get(L);me.outputColorSpace=te.outputColorSpace,me.batching=te.batching,me.batchingColor=te.batchingColor,me.instancing=te.instancing,me.instancingColor=te.instancingColor,me.instancingMorph=te.instancingMorph,me.skinning=te.skinning,me.morphTargets=te.morphTargets,me.morphNormals=te.morphNormals,me.morphColors=te.morphColors,me.morphTargetsCount=te.morphTargetsCount,me.numClippingPlanes=te.numClippingPlanes,me.numIntersection=te.numClipIntersection,me.vertexAlphas=te.vertexAlphas,me.vertexTangents=te.vertexTangents,me.toneMapping=te.toneMapping}function DK(L,te,me,he,le){te.isScene!==!0&&(te=un),K.resetTextureUnits();let Ke=te.fog,lt=he.isMeshStandardMaterial?te.environment:null,it=ee===null?T.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:Nh,mt=(he.isMeshStandardMaterial?Te:xe).get(he.envMap||lt),St=he.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,$t=!!me.attributes.tangent&&(!!he.normalMap||he.anisotropy>0),Pt=!!me.morphAttributes.position,Si=!!me.morphAttributes.normal,an=!!me.morphAttributes.color,zn=Aa;he.toneMapped&&(ee===null||ee.isXRRenderTarget===!0)&&(zn=T.toneMapping);let Hn=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,hn=Hn!==void 0?Hn.length:0,Ot=k.get(he),en=N.state.lights;if(bt===!0&&(Vi===!0||L!==se)){let _o=L===se&&he.id===de;_t.setState(he,L,_o)}let Ui=!1;he.version===Ot.__version?(Ot.needsLights&&Ot.lightsStateVersion!==en.state.version||Ot.outputColorSpace!==it||le.isBatchedMesh&&Ot.batching===!1||!le.isBatchedMesh&&Ot.batching===!0||le.isBatchedMesh&&Ot.batchingColor===!0&&le.colorTexture===null||le.isBatchedMesh&&Ot.batchingColor===!1&&le.colorTexture!==null||le.isInstancedMesh&&Ot.instancing===!1||!le.isInstancedMesh&&Ot.instancing===!0||le.isSkinnedMesh&&Ot.skinning===!1||!le.isSkinnedMesh&&Ot.skinning===!0||le.isInstancedMesh&&Ot.instancingColor===!0&&le.instanceColor===null||le.isInstancedMesh&&Ot.instancingColor===!1&&le.instanceColor!==null||le.isInstancedMesh&&Ot.instancingMorph===!0&&le.morphTexture===null||le.isInstancedMesh&&Ot.instancingMorph===!1&&le.morphTexture!==null||Ot.envMap!==mt||he.fog===!0&&Ot.fog!==Ke||Ot.numClippingPlanes!==void 0&&(Ot.numClippingPlanes!==_t.numPlanes||Ot.numIntersection!==_t.numIntersection)||Ot.vertexAlphas!==St||Ot.vertexTangents!==$t||Ot.morphTargets!==Pt||Ot.morphNormals!==Si||Ot.morphColors!==an||Ot.toneMapping!==zn||Ot.morphTargetsCount!==hn)&&(Ui=!0):(Ui=!0,Ot.__version=he.version);let ns=Ot.currentProgram;Ui===!0&&(ns=gb(he,te,le));let Zh=!1,rs=!1,Af=!1,Cn=ns.getUniforms(),Fo=Ot.uniforms;if(yt.useProgram(ns.program)&&(Zh=!0,rs=!0,Af=!0),he.id!==de&&(de=he.id,rs=!0),Zh||se!==L){yt.buffers.depth.getReversed()&&L.reversedDepth!==!0&&(L._reversedDepth=!0,L.updateProjectionMatrix()),Cn.setValue(W,"projectionMatrix",L.projectionMatrix),Cn.setValue(W,"viewMatrix",L.matrixWorldInverse);let Lo=Cn.map.cameraPosition;Lo!==void 0&&Lo.setValue(W,Li.setFromMatrixPosition(L.matrixWorld)),wn.logarithmicDepthBuffer&&Cn.setValue(W,"logDepthBufFC",2/(Math.log(L.far+1)/Math.LN2)),(he.isMeshPhongMaterial||he.isMeshToonMaterial||he.isMeshLambertMaterial||he.isMeshBasicMaterial||he.isMeshStandardMaterial||he.isShaderMaterial)&&Cn.setValue(W,"isOrthographic",L.isOrthographicCamera===!0),se!==L&&(se=L,rs=!0,Af=!0)}if(Ot.needsLights&&(en.state.directionalShadowMap.length>0&&Cn.setValue(W,"directionalShadowMap",en.state.directionalShadowMap,K),en.state.spotShadowMap.length>0&&Cn.setValue(W,"spotShadowMap",en.state.spotShadowMap,K),en.state.pointShadowMap.length>0&&Cn.setValue(W,"pointShadowMap",en.state.pointShadowMap,K)),le.isSkinnedMesh){Cn.setOptional(W,le,"bindMatrix"),Cn.setOptional(W,le,"bindMatrixInverse");let _o=le.skeleton;_o&&(_o.boneTexture===null&&_o.computeBoneTexture(),Cn.setValue(W,"boneTexture",_o.boneTexture,K))}le.isBatchedMesh&&(Cn.setOptional(W,le,"batchingTexture"),Cn.setValue(W,"batchingTexture",le._matricesTexture,K),Cn.setOptional(W,le,"batchingIdTexture"),Cn.setValue(W,"batchingIdTexture",le._indirectTexture,K),Cn.setOptional(W,le,"batchingColorTexture"),le._colorsTexture!==null&&Cn.setValue(W,"batchingColorTexture",le._colorsTexture,K));let Ss=me.morphAttributes;if((Ss.position!==void 0||Ss.normal!==void 0||Ss.color!==void 0)&&wi.update(le,me,ns),(rs||Ot.receiveShadow!==le.receiveShadow)&&(Ot.receiveShadow=le.receiveShadow,Cn.setValue(W,"receiveShadow",le.receiveShadow)),he.isMeshGouraudMaterial&&he.envMap!==null&&(Fo.envMap.value=mt,Fo.flipEnvMap.value=mt.isCubeTexture&&mt.isRenderTargetTexture===!1?-1:1),he.isMeshStandardMaterial&&he.envMap===null&&te.environment!==null&&(Fo.envMapIntensity.value=te.environmentIntensity),Fo.dfgLUT!==void 0&&(Fo.dfgLUT.value=pEe()),rs&&(Cn.setValue(W,"toneMappingExposure",T.toneMappingExposure),Ot.needsLights&&kK(Fo,Af),Ke&&he.fog===!0&&Xt.refreshFogUniforms(Fo,Ke),Xt.refreshMaterialUniforms(Fo,he,pi,ai,N.state.transmissionRenderTarget[L.id]),Tf.upload(W,K3(Ot),Fo,K)),he.isShaderMaterial&&he.uniformsNeedUpdate===!0&&(Tf.upload(W,K3(Ot),Fo,K),he.uniformsNeedUpdate=!1),he.isSpriteMaterial&&Cn.setValue(W,"center",le.center),Cn.setValue(W,"modelViewMatrix",le.modelViewMatrix),Cn.setValue(W,"normalMatrix",le.normalMatrix),Cn.setValue(W,"modelMatrix",le.matrixWorld),he.isShaderMaterial||he.isRawShaderMaterial){let _o=he.uniformsGroups;for(let Lo=0,p1=_o.length;Lo<p1;Lo++){let au=_o[Lo];Ae.update(au,ns),Ae.bind(au,ns)}}return ns}function kK(L,te){L.ambientLightColor.needsUpdate=te,L.lightProbe.needsUpdate=te,L.directionalLights.needsUpdate=te,L.directionalLightShadows.needsUpdate=te,L.pointLights.needsUpdate=te,L.pointLightShadows.needsUpdate=te,L.spotLights.needsUpdate=te,L.spotLightShadows.needsUpdate=te,L.rectAreaLights.needsUpdate=te,L.hemisphereLights.needsUpdate=te}function AK(L){return L.isMeshLambertMaterial||L.isMeshToonMaterial||L.isMeshPhongMaterial||L.isMeshStandardMaterial||L.isShadowMaterial||L.isShaderMaterial&&L.lights===!0}this.getActiveCubeFace=function(){return U},this.getActiveMipmapLevel=function(){return X},this.getRenderTarget=function(){return ee},this.setRenderTargetTextures=function(L,te,me){let he=k.get(L);he.__autoAllocateDepthBuffer=L.resolveDepthBuffer===!1,he.__autoAllocateDepthBuffer===!1&&(he.__useRenderToTexture=!1),k.get(L.texture).__webglTexture=te,k.get(L.depthTexture).__webglTexture=he.__autoAllocateDepthBuffer?void 0:me,he.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(L,te){let me=k.get(L);me.__webglFramebuffer=te,me.__useDefaultFramebuffer=te===void 0};let PK=W.createFramebuffer();this.setRenderTarget=function(L,te=0,me=0){ee=L,U=te,X=me;let he=null,le=!1,Ke=!1;if(L){let it=k.get(L);if(it.__useDefaultFramebuffer!==void 0){yt.bindFramebuffer(W.FRAMEBUFFER,it.__webglFramebuffer),ue.copy(L.viewport),ae.copy(L.scissor),Ce=L.scissorTest,yt.viewport(ue),yt.scissor(ae),yt.setScissorTest(Ce),de=-1;return}else if(it.__webglFramebuffer===void 0)K.setupRenderTarget(L);else if(it.__hasExternalTextures)K.rebindTextures(L,k.get(L.texture).__webglTexture,k.get(L.depthTexture).__webglTexture);else if(L.depthBuffer){let $t=L.depthTexture;if(it.__boundDepthTexture!==$t){if($t!==null&&k.has($t)&&(L.width!==$t.image.width||L.height!==$t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");K.setupDepthRenderbuffer(L)}}let mt=L.texture;(mt.isData3DTexture||mt.isDataArrayTexture||mt.isCompressedArrayTexture)&&(Ke=!0);let St=k.get(L).__webglFramebuffer;L.isWebGLCubeRenderTarget?(Array.isArray(St[te])?he=St[te][me]:he=St[te],le=!0):L.samples>0&&K.useMultisampledRTT(L)===!1?he=k.get(L).__webglMultisampledFramebuffer:Array.isArray(St)?he=St[me]:he=St,ue.copy(L.viewport),ae.copy(L.scissor),Ce=L.scissorTest}else ue.copy(Se).multiplyScalar(pi).floor(),ae.copy(De).multiplyScalar(pi).floor(),Ce=ht;if(me!==0&&(he=PK),yt.bindFramebuffer(W.FRAMEBUFFER,he)&&yt.drawBuffers(L,he),yt.viewport(ue),yt.scissor(ae),yt.setScissorTest(Ce),le){let it=k.get(L.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_CUBE_MAP_POSITIVE_X+te,it.__webglTexture,me)}else if(Ke){let it=te;for(let mt=0;mt<L.textures.length;mt++){let St=k.get(L.textures[mt]);W.framebufferTextureLayer(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0+mt,St.__webglTexture,me,it)}}else if(L!==null&&me!==0){let it=k.get(L.texture);W.framebufferTexture2D(W.FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,it.__webglTexture,me)}de=-1},this.readRenderTargetPixels=function(L,te,me,he,le,Ke,lt,it=0){if(!(L&&L.isWebGLRenderTarget)){jt("WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let mt=k.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&lt!==void 0&&(mt=mt[lt]),mt){yt.bindFramebuffer(W.FRAMEBUFFER,mt);try{let St=L.textures[it],$t=St.format,Pt=St.type;if(!wn.textureFormatReadable($t)){jt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!wn.textureTypeReadable(Pt)){jt("WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te>=0&&te<=L.width-he&&me>=0&&me<=L.height-le&&(L.textures.length>1&&W.readBuffer(W.COLOR_ATTACHMENT0+it),W.readPixels(te,me,he,le,Ue.convert($t),Ue.convert(Pt),Ke))}finally{let St=ee!==null?k.get(ee).__webglFramebuffer:null;yt.bindFramebuffer(W.FRAMEBUFFER,St)}}},this.readRenderTargetPixelsAsync=function(L,te,me,he,le,Ke,lt,it=0){return oe(this,null,function*(){if(!(L&&L.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let mt=k.get(L).__webglFramebuffer;if(L.isWebGLCubeRenderTarget&&lt!==void 0&&(mt=mt[lt]),mt)if(te>=0&&te<=L.width-he&&me>=0&&me<=L.height-le){yt.bindFramebuffer(W.FRAMEBUFFER,mt);let St=L.textures[it],$t=St.format,Pt=St.type;if(!wn.textureFormatReadable($t))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!wn.textureTypeReadable(Pt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");let Si=W.createBuffer();W.bindBuffer(W.PIXEL_PACK_BUFFER,Si),W.bufferData(W.PIXEL_PACK_BUFFER,Ke.byteLength,W.STREAM_READ),L.textures.length>1&&W.readBuffer(W.COLOR_ATTACHMENT0+it),W.readPixels(te,me,he,le,Ue.convert($t),Ue.convert(Pt),0);let an=ee!==null?k.get(ee).__webglFramebuffer:null;yt.bindFramebuffer(W.FRAMEBUFFER,an);let zn=W.fenceSync(W.SYNC_GPU_COMMANDS_COMPLETE,0);return W.flush(),yield JY(W,zn,4),W.bindBuffer(W.PIXEL_PACK_BUFFER,Si),W.getBufferSubData(W.PIXEL_PACK_BUFFER,0,Ke),W.deleteBuffer(Si),W.deleteSync(zn),Ke}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")})},this.copyFramebufferToTexture=function(L,te=null,me=0){let he=Math.pow(2,-me),le=Math.floor(L.image.width*he),Ke=Math.floor(L.image.height*he),lt=te!==null?te.x:0,it=te!==null?te.y:0;K.setTexture2D(L,0),W.copyTexSubImage2D(W.TEXTURE_2D,me,0,0,lt,it,le,Ke),yt.unbindTexture()};let OK=W.createFramebuffer(),NK=W.createFramebuffer();this.copyTextureToTexture=function(L,te,me=null,he=null,le=0,Ke=null){Ke===null&&(le!==0?(mf("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ke=le,le=0):Ke=0);let lt,it,mt,St,$t,Pt,Si,an,zn,Hn=L.isCompressedTexture?L.mipmaps[Ke]:L.image;if(me!==null)lt=me.max.x-me.min.x,it=me.max.y-me.min.y,mt=me.isBox3?me.max.z-me.min.z:1,St=me.min.x,$t=me.min.y,Pt=me.isBox3?me.min.z:0;else{let Ss=Math.pow(2,-le);lt=Math.floor(Hn.width*Ss),it=Math.floor(Hn.height*Ss),L.isDataArrayTexture?mt=Hn.depth:L.isData3DTexture?mt=Math.floor(Hn.depth*Ss):mt=1,St=0,$t=0,Pt=0}he!==null?(Si=he.x,an=he.y,zn=he.z):(Si=0,an=0,zn=0);let hn=Ue.convert(te.format),Ot=Ue.convert(te.type),en;te.isData3DTexture?(K.setTexture3D(te,0),en=W.TEXTURE_3D):te.isDataArrayTexture||te.isCompressedArrayTexture?(K.setTexture2DArray(te,0),en=W.TEXTURE_2D_ARRAY):(K.setTexture2D(te,0),en=W.TEXTURE_2D),W.pixelStorei(W.UNPACK_FLIP_Y_WEBGL,te.flipY),W.pixelStorei(W.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),W.pixelStorei(W.UNPACK_ALIGNMENT,te.unpackAlignment);let Ui=W.getParameter(W.UNPACK_ROW_LENGTH),ns=W.getParameter(W.UNPACK_IMAGE_HEIGHT),Zh=W.getParameter(W.UNPACK_SKIP_PIXELS),rs=W.getParameter(W.UNPACK_SKIP_ROWS),Af=W.getParameter(W.UNPACK_SKIP_IMAGES);W.pixelStorei(W.UNPACK_ROW_LENGTH,Hn.width),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,Hn.height),W.pixelStorei(W.UNPACK_SKIP_PIXELS,St),W.pixelStorei(W.UNPACK_SKIP_ROWS,$t),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Pt);let Cn=L.isDataArrayTexture||L.isData3DTexture,Fo=te.isDataArrayTexture||te.isData3DTexture;if(L.isDepthTexture){let Ss=k.get(L),_o=k.get(te),Lo=k.get(Ss.__renderTarget),p1=k.get(_o.__renderTarget);yt.bindFramebuffer(W.READ_FRAMEBUFFER,Lo.__webglFramebuffer),yt.bindFramebuffer(W.DRAW_FRAMEBUFFER,p1.__webglFramebuffer);for(let au=0;au<mt;au++)Cn&&(W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,k.get(L).__webglTexture,le,Pt+au),W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,k.get(te).__webglTexture,Ke,zn+au)),W.blitFramebuffer(St,$t,lt,it,Si,an,lt,it,W.DEPTH_BUFFER_BIT,W.NEAREST);yt.bindFramebuffer(W.READ_FRAMEBUFFER,null),yt.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else if(le!==0||L.isRenderTargetTexture||k.has(L)){let Ss=k.get(L),_o=k.get(te);yt.bindFramebuffer(W.READ_FRAMEBUFFER,OK),yt.bindFramebuffer(W.DRAW_FRAMEBUFFER,NK);for(let Lo=0;Lo<mt;Lo++)Cn?W.framebufferTextureLayer(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,Ss.__webglTexture,le,Pt+Lo):W.framebufferTexture2D(W.READ_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,Ss.__webglTexture,le),Fo?W.framebufferTextureLayer(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,_o.__webglTexture,Ke,zn+Lo):W.framebufferTexture2D(W.DRAW_FRAMEBUFFER,W.COLOR_ATTACHMENT0,W.TEXTURE_2D,_o.__webglTexture,Ke),le!==0?W.blitFramebuffer(St,$t,lt,it,Si,an,lt,it,W.COLOR_BUFFER_BIT,W.NEAREST):Fo?W.copyTexSubImage3D(en,Ke,Si,an,zn+Lo,St,$t,lt,it):W.copyTexSubImage2D(en,Ke,Si,an,St,$t,lt,it);yt.bindFramebuffer(W.READ_FRAMEBUFFER,null),yt.bindFramebuffer(W.DRAW_FRAMEBUFFER,null)}else Fo?L.isDataTexture||L.isData3DTexture?W.texSubImage3D(en,Ke,Si,an,zn,lt,it,mt,hn,Ot,Hn.data):te.isCompressedArrayTexture?W.compressedTexSubImage3D(en,Ke,Si,an,zn,lt,it,mt,hn,Hn.data):W.texSubImage3D(en,Ke,Si,an,zn,lt,it,mt,hn,Ot,Hn):L.isDataTexture?W.texSubImage2D(W.TEXTURE_2D,Ke,Si,an,lt,it,hn,Ot,Hn.data):L.isCompressedTexture?W.compressedTexSubImage2D(W.TEXTURE_2D,Ke,Si,an,Hn.width,Hn.height,hn,Hn.data):W.texSubImage2D(W.TEXTURE_2D,Ke,Si,an,lt,it,hn,Ot,Hn);W.pixelStorei(W.UNPACK_ROW_LENGTH,Ui),W.pixelStorei(W.UNPACK_IMAGE_HEIGHT,ns),W.pixelStorei(W.UNPACK_SKIP_PIXELS,Zh),W.pixelStorei(W.UNPACK_SKIP_ROWS,rs),W.pixelStorei(W.UNPACK_SKIP_IMAGES,Af),Ke===0&&te.generateMipmaps&&W.generateMipmap(en),yt.unbindTexture()},this.initRenderTarget=function(L){k.get(L).__webglFramebuffer===void 0&&K.setupRenderTarget(L)},this.initTexture=function(L){L.isCubeTexture?K.setTextureCube(L,0):L.isData3DTexture?K.setTexture3D(L,0):L.isDataArrayTexture||L.isCompressedArrayTexture?K.setTexture2DArray(L,0):K.setTexture2D(L,0),yt.unbindTexture()},this.resetState=function(){U=0,X=0,ee=null,yt.reset(),ct.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Da}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;let e=this.getContext();e.drawingBufferColorSpace=Fi._getDrawingBufferColorSpace(t),e.unpackColorSpace=Fi._getUnpackColorSpace()}};var DZ={type:"change"},b3={type:"start"},AZ={type:"end"},NS=new Xd,kZ=new Ws,gEe=Math.cos(70*KL.DEG2RAD),Er=new j,is=2*Math.PI,dn={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},_3=1e-6,RS=class extends Vh{constructor(t,e=null){super(t,e),this.state=dn.NONE,this.target=new j,this.cursor=new j,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.keyRotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:Jd.ROTATE,MIDDLE:Jd.DOLLY,RIGHT:Jd.PAN},this.touches={ONE:eu.ROTATE,TWO:eu.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this._lastPosition=new j,this._lastQuaternion=new Vn,this._lastTargetPosition=new j,this._quat=new Vn().setFromUnitVectors(t.up,new j(0,1,0)),this._quatInverse=this._quat.clone().invert(),this._spherical=new xf,this._sphericalDelta=new xf,this._scale=1,this._panOffset=new j,this._rotateStart=new Ht,this._rotateEnd=new Ht,this._rotateDelta=new Ht,this._panStart=new Ht,this._panEnd=new Ht,this._panDelta=new Ht,this._dollyStart=new Ht,this._dollyEnd=new Ht,this._dollyDelta=new Ht,this._dollyDirection=new j,this._mouse=new Ht,this._performCursorZoom=!1,this._pointers=[],this._pointerPositions={},this._controlActive=!1,this._onPointerMove=bEe.bind(this),this._onPointerDown=_Ee.bind(this),this._onPointerUp=vEe.bind(this),this._onContextMenu=EEe.bind(this),this._onMouseWheel=wEe.bind(this),this._onKeyDown=MEe.bind(this),this._onTouchStart=CEe.bind(this),this._onTouchMove=SEe.bind(this),this._onMouseDown=yEe.bind(this),this._onMouseMove=xEe.bind(this),this._interceptControlDown=TEe.bind(this),this._interceptControlUp=IEe.bind(this),this.domElement!==null&&this.connect(this.domElement),this.update()}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointercancel",this._onPointerUp),this.domElement.addEventListener("contextmenu",this._onContextMenu),this.domElement.addEventListener("wheel",this._onMouseWheel,{passive:!1}),this.domElement.getRootNode().addEventListener("keydown",this._interceptControlDown,{passive:!0,capture:!0}),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.domElement.removeEventListener("pointercancel",this._onPointerUp),this.domElement.removeEventListener("wheel",this._onMouseWheel),this.domElement.removeEventListener("contextmenu",this._onContextMenu),this.stopListenToKeyEvents(),this.domElement.getRootNode().removeEventListener("keydown",this._interceptControlDown,{capture:!0}),this.domElement.style.touchAction="auto"}dispose(){this.disconnect()}getPolarAngle(){return this._spherical.phi}getAzimuthalAngle(){return this._spherical.theta}getDistance(){return this.object.position.distanceTo(this.target)}listenToKeyEvents(t){t.addEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=t}stopListenToKeyEvents(){this._domElementKeyEvents!==null&&(this._domElementKeyEvents.removeEventListener("keydown",this._onKeyDown),this._domElementKeyEvents=null)}saveState(){this.target0.copy(this.target),this.position0.copy(this.object.position),this.zoom0=this.object.zoom}reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(DZ),this.update(),this.state=dn.NONE}update(t=null){let e=this.object.position;Er.copy(e).sub(this.target),Er.applyQuaternion(this._quat),this._spherical.setFromVector3(Er),this.autoRotate&&this.state===dn.NONE&&this._rotateLeft(this._getAutoRotationAngle(t)),this.enableDamping?(this._spherical.theta+=this._sphericalDelta.theta*this.dampingFactor,this._spherical.phi+=this._sphericalDelta.phi*this.dampingFactor):(this._spherical.theta+=this._sphericalDelta.theta,this._spherical.phi+=this._sphericalDelta.phi);let n=this.minAzimuthAngle,r=this.maxAzimuthAngle;isFinite(n)&&isFinite(r)&&(n<-Math.PI?n+=is:n>Math.PI&&(n-=is),r<-Math.PI?r+=is:r>Math.PI&&(r-=is),n<=r?this._spherical.theta=Math.max(n,Math.min(r,this._spherical.theta)):this._spherical.theta=this._spherical.theta>(n+r)/2?Math.max(n,this._spherical.theta):Math.min(r,this._spherical.theta)),this._spherical.phi=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,this._spherical.phi)),this._spherical.makeSafe(),this.enableDamping===!0?this.target.addScaledVector(this._panOffset,this.dampingFactor):this.target.add(this._panOffset),this.target.sub(this.cursor),this.target.clampLength(this.minTargetRadius,this.maxTargetRadius),this.target.add(this.cursor);let o=!1;if(this.zoomToCursor&&this._performCursorZoom||this.object.isOrthographicCamera)this._spherical.radius=this._clampDistance(this._spherical.radius);else{let s=this._spherical.radius;this._spherical.radius=this._clampDistance(this._spherical.radius*this._scale),o=s!=this._spherical.radius}if(Er.setFromSpherical(this._spherical),Er.applyQuaternion(this._quatInverse),e.copy(this.target).add(Er),this.object.lookAt(this.target),this.enableDamping===!0?(this._sphericalDelta.theta*=1-this.dampingFactor,this._sphericalDelta.phi*=1-this.dampingFactor,this._panOffset.multiplyScalar(1-this.dampingFactor)):(this._sphericalDelta.set(0,0,0),this._panOffset.set(0,0,0)),this.zoomToCursor&&this._performCursorZoom){let s=null;if(this.object.isPerspectiveCamera){let a=Er.length();s=this._clampDistance(a*this._scale);let c=a-s;this.object.position.addScaledVector(this._dollyDirection,c),this.object.updateMatrixWorld(),o=!!c}else if(this.object.isOrthographicCamera){let a=new j(this._mouse.x,this._mouse.y,0);a.unproject(this.object);let c=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),this.object.updateProjectionMatrix(),o=c!==this.object.zoom;let l=new j(this._mouse.x,this._mouse.y,0);l.unproject(this.object),this.object.position.sub(l).add(a),this.object.updateMatrixWorld(),s=Er.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),this.zoomToCursor=!1;s!==null&&(this.screenSpacePanning?this.target.set(0,0,-1).transformDirection(this.object.matrix).multiplyScalar(s).add(this.object.position):(NS.origin.copy(this.object.position),NS.direction.set(0,0,-1).transformDirection(this.object.matrix),Math.abs(this.object.up.dot(NS.direction))<gEe?this.object.lookAt(this.target):(kZ.setFromNormalAndCoplanarPoint(this.object.up,this.target),NS.intersectPlane(kZ,this.target))))}else if(this.object.isOrthographicCamera){let s=this.object.zoom;this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/this._scale)),s!==this.object.zoom&&(this.object.updateProjectionMatrix(),o=!0)}return this._scale=1,this._performCursorZoom=!1,o||this._lastPosition.distanceToSquared(this.object.position)>_3||8*(1-this._lastQuaternion.dot(this.object.quaternion))>_3||this._lastTargetPosition.distanceToSquared(this.target)>_3?(this.dispatchEvent(DZ),this._lastPosition.copy(this.object.position),this._lastQuaternion.copy(this.object.quaternion),this._lastTargetPosition.copy(this.target),!0):!1}_getAutoRotationAngle(t){return t!==null?is/60*this.autoRotateSpeed*t:is/60/60*this.autoRotateSpeed}_getZoomScale(t){let e=Math.abs(t*.01);return Math.pow(.95,this.zoomSpeed*e)}_rotateLeft(t){this._sphericalDelta.theta-=t}_rotateUp(t){this._sphericalDelta.phi-=t}_panLeft(t,e){Er.setFromMatrixColumn(e,0),Er.multiplyScalar(-t),this._panOffset.add(Er)}_panUp(t,e){this.screenSpacePanning===!0?Er.setFromMatrixColumn(e,1):(Er.setFromMatrixColumn(e,0),Er.crossVectors(this.object.up,Er)),Er.multiplyScalar(t),this._panOffset.add(Er)}_pan(t,e){let n=this.domElement;if(this.object.isPerspectiveCamera){let r=this.object.position;Er.copy(r).sub(this.target);let o=Er.length();o*=Math.tan(this.object.fov/2*Math.PI/180),this._panLeft(2*t*o/n.clientHeight,this.object.matrix),this._panUp(2*e*o/n.clientHeight,this.object.matrix)}else this.object.isOrthographicCamera?(this._panLeft(t*(this.object.right-this.object.left)/this.object.zoom/n.clientWidth,this.object.matrix),this._panUp(e*(this.object.top-this.object.bottom)/this.object.zoom/n.clientHeight,this.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),this.enablePan=!1)}_dollyOut(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale/=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_dollyIn(t){this.object.isPerspectiveCamera||this.object.isOrthographicCamera?this._scale*=t:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),this.enableZoom=!1)}_updateZoomParameters(t,e){if(!this.zoomToCursor)return;this._performCursorZoom=!0;let n=this.domElement.getBoundingClientRect(),r=t-n.left,o=e-n.top,s=n.width,a=n.height;this._mouse.x=r/s*2-1,this._mouse.y=-(o/a)*2+1,this._dollyDirection.set(this._mouse.x,this._mouse.y,1).unproject(this.object).sub(this.object.position).normalize()}_clampDistance(t){return Math.max(this.minDistance,Math.min(this.maxDistance,t))}_handleMouseDownRotate(t){this._rotateStart.set(t.clientX,t.clientY)}_handleMouseDownDolly(t){this._updateZoomParameters(t.clientX,t.clientX),this._dollyStart.set(t.clientX,t.clientY)}_handleMouseDownPan(t){this._panStart.set(t.clientX,t.clientY)}_handleMouseMoveRotate(t){this._rotateEnd.set(t.clientX,t.clientY),this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(is*this._rotateDelta.x/e.clientHeight),this._rotateUp(is*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd),this.update()}_handleMouseMoveDolly(t){this._dollyEnd.set(t.clientX,t.clientY),this._dollyDelta.subVectors(this._dollyEnd,this._dollyStart),this._dollyDelta.y>0?this._dollyOut(this._getZoomScale(this._dollyDelta.y)):this._dollyDelta.y<0&&this._dollyIn(this._getZoomScale(this._dollyDelta.y)),this._dollyStart.copy(this._dollyEnd),this.update()}_handleMouseMovePan(t){this._panEnd.set(t.clientX,t.clientY),this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd),this.update()}_handleMouseWheel(t){this._updateZoomParameters(t.clientX,t.clientY),t.deltaY<0?this._dollyIn(this._getZoomScale(t.deltaY)):t.deltaY>0&&this._dollyOut(this._getZoomScale(t.deltaY)),this.update()}_handleKeyDown(t){let e=!1;switch(t.code){case this.keys.UP:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(is*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,this.keyPanSpeed),e=!0;break;case this.keys.BOTTOM:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateUp(-is*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(0,-this.keyPanSpeed),e=!0;break;case this.keys.LEFT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(is*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(this.keyPanSpeed,0),e=!0;break;case this.keys.RIGHT:t.ctrlKey||t.metaKey||t.shiftKey?this.enableRotate&&this._rotateLeft(-is*this.keyRotateSpeed/this.domElement.clientHeight):this.enablePan&&this._pan(-this.keyPanSpeed,0),e=!0;break}e&&(t.preventDefault(),this.update())}_handleTouchStartRotate(t){if(this._pointers.length===1)this._rotateStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._rotateStart.set(n,r)}}_handleTouchStartPan(t){if(this._pointers.length===1)this._panStart.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panStart.set(n,r)}}_handleTouchStartDolly(t){let e=this._getSecondPointerPosition(t),n=t.pageX-e.x,r=t.pageY-e.y,o=Math.sqrt(n*n+r*r);this._dollyStart.set(0,o)}_handleTouchStartDollyPan(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enablePan&&this._handleTouchStartPan(t)}_handleTouchStartDollyRotate(t){this.enableZoom&&this._handleTouchStartDolly(t),this.enableRotate&&this._handleTouchStartRotate(t)}_handleTouchMoveRotate(t){if(this._pointers.length==1)this._rotateEnd.set(t.pageX,t.pageY);else{let n=this._getSecondPointerPosition(t),r=.5*(t.pageX+n.x),o=.5*(t.pageY+n.y);this._rotateEnd.set(r,o)}this._rotateDelta.subVectors(this._rotateEnd,this._rotateStart).multiplyScalar(this.rotateSpeed);let e=this.domElement;this._rotateLeft(is*this._rotateDelta.x/e.clientHeight),this._rotateUp(is*this._rotateDelta.y/e.clientHeight),this._rotateStart.copy(this._rotateEnd)}_handleTouchMovePan(t){if(this._pointers.length===1)this._panEnd.set(t.pageX,t.pageY);else{let e=this._getSecondPointerPosition(t),n=.5*(t.pageX+e.x),r=.5*(t.pageY+e.y);this._panEnd.set(n,r)}this._panDelta.subVectors(this._panEnd,this._panStart).multiplyScalar(this.panSpeed),this._pan(this._panDelta.x,this._panDelta.y),this._panStart.copy(this._panEnd)}_handleTouchMoveDolly(t){let e=this._getSecondPointerPosition(t),n=t.pageX-e.x,r=t.pageY-e.y,o=Math.sqrt(n*n+r*r);this._dollyEnd.set(0,o),this._dollyDelta.set(0,Math.pow(this._dollyEnd.y/this._dollyStart.y,this.zoomSpeed)),this._dollyOut(this._dollyDelta.y),this._dollyStart.copy(this._dollyEnd);let s=(t.pageX+e.x)*.5,a=(t.pageY+e.y)*.5;this._updateZoomParameters(s,a)}_handleTouchMoveDollyPan(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enablePan&&this._handleTouchMovePan(t)}_handleTouchMoveDollyRotate(t){this.enableZoom&&this._handleTouchMoveDolly(t),this.enableRotate&&this._handleTouchMoveRotate(t)}_addPointer(t){this._pointers.push(t.pointerId)}_removePointer(t){delete this._pointerPositions[t.pointerId];for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId){this._pointers.splice(e,1);return}}_isTrackingPointer(t){for(let e=0;e<this._pointers.length;e++)if(this._pointers[e]==t.pointerId)return!0;return!1}_trackPointer(t){let e=this._pointerPositions[t.pointerId];e===void 0&&(e=new Ht,this._pointerPositions[t.pointerId]=e),e.set(t.pageX,t.pageY)}_getSecondPointerPosition(t){let e=t.pointerId===this._pointers[0]?this._pointers[1]:this._pointers[0];return this._pointerPositions[e]}_customWheelEvent(t){let e=t.deltaMode,n={clientX:t.clientX,clientY:t.clientY,deltaY:t.deltaY};switch(e){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100;break}return t.ctrlKey&&!this._controlActive&&(n.deltaY*=10),n}};function _Ee(i){this.enabled!==!1&&(this._pointers.length===0&&(this.domElement.setPointerCapture(i.pointerId),this.domElement.ownerDocument.addEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this._onPointerUp)),!this._isTrackingPointer(i)&&(this._addPointer(i),i.pointerType==="touch"?this._onTouchStart(i):this._onMouseDown(i)))}function bEe(i){this.enabled!==!1&&(i.pointerType==="touch"?this._onTouchMove(i):this._onMouseMove(i))}function vEe(i){switch(this._removePointer(i),this._pointers.length){case 0:this.domElement.releasePointerCapture(i.pointerId),this.domElement.ownerDocument.removeEventListener("pointermove",this._onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this._onPointerUp),this.dispatchEvent(AZ),this.state=dn.NONE;break;case 1:let t=this._pointers[0],e=this._pointerPositions[t];this._onTouchStart({pointerId:t,pageX:e.x,pageY:e.y});break}}function yEe(i){let t;switch(i.button){case 0:t=this.mouseButtons.LEFT;break;case 1:t=this.mouseButtons.MIDDLE;break;case 2:t=this.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Jd.DOLLY:if(this.enableZoom===!1)return;this._handleMouseDownDolly(i),this.state=dn.DOLLY;break;case Jd.ROTATE:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=dn.PAN}else{if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=dn.ROTATE}break;case Jd.PAN:if(i.ctrlKey||i.metaKey||i.shiftKey){if(this.enableRotate===!1)return;this._handleMouseDownRotate(i),this.state=dn.ROTATE}else{if(this.enablePan===!1)return;this._handleMouseDownPan(i),this.state=dn.PAN}break;default:this.state=dn.NONE}this.state!==dn.NONE&&this.dispatchEvent(b3)}function xEe(i){switch(this.state){case dn.ROTATE:if(this.enableRotate===!1)return;this._handleMouseMoveRotate(i);break;case dn.DOLLY:if(this.enableZoom===!1)return;this._handleMouseMoveDolly(i);break;case dn.PAN:if(this.enablePan===!1)return;this._handleMouseMovePan(i);break}}function wEe(i){this.enabled===!1||this.enableZoom===!1||this.state!==dn.NONE||(i.preventDefault(),this.dispatchEvent(b3),this._handleMouseWheel(this._customWheelEvent(i)),this.dispatchEvent(AZ))}function MEe(i){this.enabled!==!1&&this._handleKeyDown(i)}function CEe(i){switch(this._trackPointer(i),this._pointers.length){case 1:switch(this.touches.ONE){case eu.ROTATE:if(this.enableRotate===!1)return;this._handleTouchStartRotate(i),this.state=dn.TOUCH_ROTATE;break;case eu.PAN:if(this.enablePan===!1)return;this._handleTouchStartPan(i),this.state=dn.TOUCH_PAN;break;default:this.state=dn.NONE}break;case 2:switch(this.touches.TWO){case eu.DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchStartDollyPan(i),this.state=dn.TOUCH_DOLLY_PAN;break;case eu.DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchStartDollyRotate(i),this.state=dn.TOUCH_DOLLY_ROTATE;break;default:this.state=dn.NONE}break;default:this.state=dn.NONE}this.state!==dn.NONE&&this.dispatchEvent(b3)}function SEe(i){switch(this._trackPointer(i),this.state){case dn.TOUCH_ROTATE:if(this.enableRotate===!1)return;this._handleTouchMoveRotate(i),this.update();break;case dn.TOUCH_PAN:if(this.enablePan===!1)return;this._handleTouchMovePan(i),this.update();break;case dn.TOUCH_DOLLY_PAN:if(this.enableZoom===!1&&this.enablePan===!1)return;this._handleTouchMoveDollyPan(i),this.update();break;case dn.TOUCH_DOLLY_ROTATE:if(this.enableZoom===!1&&this.enableRotate===!1)return;this._handleTouchMoveDollyRotate(i),this.update();break;default:this.state=dn.NONE}}function EEe(i){this.enabled!==!1&&i.preventDefault()}function TEe(i){i.key==="Control"&&(this._controlActive=!0,this.domElement.getRootNode().addEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}function IEe(i){i.key==="Control"&&(this._controlActive=!1,this.domElement.getRootNode().removeEventListener("keyup",this._interceptControlUp,{passive:!0,capture:!0}))}var Wh=new Bh,go=new j,ou=new j,Fn=new Vn,PZ={X:new j(1,0,0),Y:new j(0,1,0),Z:new j(0,0,1)},v3={type:"change"},OZ={type:"mouseDown",mode:null},NZ={type:"mouseUp",mode:null},RZ={type:"objectChange"},US=class extends Vh{constructor(t,e=null){super(void 0,e);let n=new x3(this);this._root=n;let r=new w3;this._gizmo=r,n.add(r);let o=new M3;this._plane=o,n.add(o);let s=this;function a(C,E){let N=E;Object.defineProperty(s,C,{get:function(){return N!==void 0?N:E},set:function(R){N!==R&&(N=R,o[C]=R,r[C]=R,s.dispatchEvent({type:C+"-changed",value:R}),s.dispatchEvent(v3))}}),s[C]=E,o[C]=E,r[C]=E}a("camera",t),a("object",void 0),a("enabled",!0),a("axis",null),a("mode","translate"),a("translationSnap",null),a("rotationSnap",null),a("scaleSnap",null),a("space","world"),a("size",1),a("dragging",!1),a("showX",!0),a("showY",!0),a("showZ",!0),a("minX",-1/0),a("maxX",1/0),a("minY",-1/0),a("maxY",1/0),a("minZ",-1/0),a("maxZ",1/0);let c=new j,l=new j,d=new Vn,u=new Vn,h=new j,m=new Vn,p=new j,_=new j,f=new j,g=0,S=new j;a("worldPosition",c),a("worldPositionStart",l),a("worldQuaternion",d),a("worldQuaternionStart",u),a("cameraPosition",h),a("cameraQuaternion",m),a("pointStart",p),a("pointEnd",_),a("rotationAxis",f),a("rotationAngle",g),a("eye",S),this._offset=new j,this._startNorm=new j,this._endNorm=new j,this._cameraScale=new j,this._parentPosition=new j,this._parentQuaternion=new Vn,this._parentQuaternionInv=new Vn,this._parentScale=new j,this._worldScaleStart=new j,this._worldQuaternionInv=new Vn,this._worldScale=new j,this._positionStart=new j,this._quaternionStart=new Vn,this._scaleStart=new j,this._getPointer=DEe.bind(this),this._onPointerDown=AEe.bind(this),this._onPointerHover=kEe.bind(this),this._onPointerMove=PEe.bind(this),this._onPointerUp=OEe.bind(this),e!==null&&this.connect(e)}connect(t){super.connect(t),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="none"}disconnect(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.domElement.style.touchAction="auto"}getHelper(){return this._root}pointerHover(t){if(this.object===void 0||this.dragging===!0)return;t!==null&&Wh.setFromCamera(t,this.camera);let e=y3(this._gizmo.picker[this.mode],Wh);e?this.axis=e.object.name:this.axis=null}pointerDown(t){if(!(this.object===void 0||this.dragging===!0||t!=null&&t.button!==0)&&this.axis!==null){t!==null&&Wh.setFromCamera(t,this.camera);let e=y3(this._plane,Wh,!0);e&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(e.point).sub(this.worldPositionStart)),this.dragging=!0,OZ.mode=this.mode,this.dispatchEvent(OZ)}}pointerMove(t){let e=this.axis,n=this.mode,r=this.object,o=this.space;if(n==="scale"?o="local":(e==="E"||e==="XYZE"||e==="XYZ")&&(o="world"),r===void 0||e===null||this.dragging===!1||t!==null&&t.button!==-1)return;t!==null&&Wh.setFromCamera(t,this.camera);let s=y3(this._plane,Wh,!0);if(s){if(this.pointEnd.copy(s.point).sub(this.worldPositionStart),n==="translate")this._offset.copy(this.pointEnd).sub(this.pointStart),o==="local"&&e!=="XYZ"&&this._offset.applyQuaternion(this._worldQuaternionInv),e.indexOf("X")===-1&&(this._offset.x=0),e.indexOf("Y")===-1&&(this._offset.y=0),e.indexOf("Z")===-1&&(this._offset.z=0),o==="local"&&e!=="XYZ"?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&(o==="local"&&(r.position.applyQuaternion(Fn.copy(this._quaternionStart).invert()),e.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),e.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),e.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),o==="world"&&(r.parent&&r.position.add(go.setFromMatrixPosition(r.parent.matrixWorld)),e.search("X")!==-1&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),e.search("Y")!==-1&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),e.search("Z")!==-1&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(go.setFromMatrixPosition(r.parent.matrixWorld)))),r.position.x=Math.max(this.minX,Math.min(this.maxX,r.position.x)),r.position.y=Math.max(this.minY,Math.min(this.maxY,r.position.y)),r.position.z=Math.max(this.minZ,Math.min(this.maxZ,r.position.z));else if(n==="scale"){if(e.search("XYZ")!==-1){let a=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(a*=-1),ou.set(a,a,a)}else go.copy(this.pointStart),ou.copy(this.pointEnd),go.applyQuaternion(this._worldQuaternionInv),ou.applyQuaternion(this._worldQuaternionInv),ou.divide(go),e.search("X")===-1&&(ou.x=1),e.search("Y")===-1&&(ou.y=1),e.search("Z")===-1&&(ou.z=1);r.scale.copy(this._scaleStart).multiply(ou),this.scaleSnap&&(e.search("X")!==-1&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),e.search("Y")!==-1&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),e.search("Z")!==-1&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if(n==="rotate"){this._offset.copy(this.pointEnd).sub(this.pointStart);let a=20/this.worldPosition.distanceTo(go.setFromMatrixPosition(this.camera.matrixWorld)),c=!1;e==="XYZE"?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(go.copy(this.rotationAxis).cross(this.eye))*a):(e==="X"||e==="Y"||e==="Z")&&(this.rotationAxis.copy(PZ[e]),go.copy(PZ[e]),o==="local"&&go.applyQuaternion(this.worldQuaternion),go.cross(this.eye),go.length()===0?c=!0:this.rotationAngle=this._offset.dot(go.normalize())*a),(e==="E"||c)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),o==="local"&&e!=="E"&&e!=="XYZE"?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(Fn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(Fn.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(v3),this.dispatchEvent(RZ)}}pointerUp(t){t!==null&&t.button!==0||(this.dragging&&this.axis!==null&&(NZ.mode=this.mode,this.dispatchEvent(NZ)),this.dragging=!1,this.axis=null)}dispose(){this.disconnect(),this._root.dispose()}attach(t){return this.object=t,this._root.visible=!0,this}detach(){return this.object=void 0,this.axis=null,this._root.visible=!1,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(v3),this.dispatchEvent(RZ),this.pointStart.copy(this.pointEnd))}getRaycaster(){return Wh}getMode(){return this.mode}setMode(t){this.mode=t}setTranslationSnap(t){this.translationSnap=t}setRotationSnap(t){this.rotationSnap=t}setScaleSnap(t){this.scaleSnap=t}setSize(t){this.size=t}setSpace(t){this.space=t}setColors(t,e,n,r){let o=this._gizmo.materialLib;o.xAxis.color.set(t),o.yAxis.color.set(e),o.zAxis.color.set(n),o.active.color.set(r),o.xAxisTransparent.color.set(t),o.yAxisTransparent.color.set(e),o.zAxisTransparent.color.set(n),o.activeTransparent.color.set(r),o.xAxis._color&&o.xAxis._color.set(t),o.yAxis._color&&o.yAxis._color.set(e),o.zAxis._color&&o.zAxis._color.set(n),o.active._color&&o.active._color.set(r),o.xAxisTransparent._color&&o.xAxisTransparent._color.set(t),o.yAxisTransparent._color&&o.yAxisTransparent._color.set(e),o.zAxisTransparent._color&&o.zAxisTransparent._color.set(n),o.activeTransparent._color&&o.activeTransparent._color.set(r)}};function DEe(i){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:i.button};{let t=this.domElement.getBoundingClientRect();return{x:(i.clientX-t.left)/t.width*2-1,y:-(i.clientY-t.top)/t.height*2+1,button:i.button}}}function kEe(i){if(this.enabled)switch(i.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(i));break}}function AEe(i){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(i.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(i)),this.pointerDown(this._getPointer(i)))}function PEe(i){this.enabled&&this.pointerMove(this._getPointer(i))}function OEe(i){this.enabled&&(this.domElement.releasePointerCapture(i.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(i)))}function y3(i,t,e){let n=t.intersectObject(i,!0);for(let r=0;r<n.length;r++)if(n[r].object.visible||e)return n[r];return!1}var FS=new yc,yn=new j(0,1,0),FZ=new j(0,0,0),LZ=new vn,LS=new Vn,VS=new Vn,Ec=new j,BZ=new vn,ub=new j(1,0,0),qh=new j(0,1,0),hb=new j(0,0,1),BS=new j,lb=new j,db=new j,x3=class extends No{constructor(t){super(),this.isTransformControlsRoot=!0,this.controls=t,this.visible=!1}updateMatrixWorld(t){let e=this.controls;e.object!==void 0&&(e.object.updateMatrixWorld(),e.object.parent===null?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):e.object.parent.matrixWorld.decompose(e._parentPosition,e._parentQuaternion,e._parentScale),e.object.matrixWorld.decompose(e.worldPosition,e.worldQuaternion,e._worldScale),e._parentQuaternionInv.copy(e._parentQuaternion).invert(),e._worldQuaternionInv.copy(e.worldQuaternion).invert()),e.camera.updateMatrixWorld(),e.camera.matrixWorld.decompose(e.cameraPosition,e.cameraQuaternion,e._cameraScale),e.camera.isOrthographicCamera?e.camera.getWorldDirection(e.eye).negate():e.eye.copy(e.cameraPosition).sub(e.worldPosition).normalize(),super.updateMatrixWorld(t)}dispose(){this.traverse(function(t){t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()})}},w3=class extends No{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";let t=new qs({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),e=new Al({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=t.clone();n.opacity=.15;let r=e.clone();r.opacity=.5;let o=t.clone();o.color.setHex(16711680);let s=t.clone();s.color.setHex(65280);let a=t.clone();a.color.setHex(255);let c=t.clone();c.color.setHex(16711680),c.opacity=.5;let l=t.clone();l.color.setHex(65280),l.opacity=.5;let d=t.clone();d.color.setHex(255),d.opacity=.5;let u=t.clone();u.opacity=.25;let h=t.clone();h.color.setHex(16776960),h.opacity=.25;let m=t.clone();m.color.setHex(16776960);let p=t.clone();p.color.setHex(7895160),this.materialLib={xAxis:o,yAxis:s,zAxis:a,active:m,xAxisTransparent:c,yAxisTransparent:l,zAxisTransparent:d,activeTransparent:h};let _=new _r(0,.04,.1,12);_.translate(0,.05,0);let f=new qi(.08,.08,.08);f.translate(0,.04,0);let g=new gr;g.setAttribute("position",new Hi([0,0,0,1,0,0],3));let S=new _r(.0075,.0075,.5,3);S.translate(0,.25,0);function C(se,ue){let ae=new Pl(se,.0075,3,64,ue*Math.PI*2);return ae.rotateY(Math.PI/2),ae.rotateX(Math.PI/2),ae}function E(){let se=new gr;return se.setAttribute("position",new Hi([0,0,0,1,1,1],3)),se}let N={X:[[new ze(_,o),[.5,0,0],[0,0,-Math.PI/2]],[new ze(_,o),[-.5,0,0],[0,0,Math.PI/2]],[new ze(S,o),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new ze(_,s),[0,.5,0]],[new ze(_,s),[0,-.5,0],[Math.PI,0,0]],[new ze(S,s)]],Z:[[new ze(_,a),[0,0,.5],[Math.PI/2,0,0]],[new ze(_,a),[0,0,-.5],[-Math.PI/2,0,0]],[new ze(S,a),null,[Math.PI/2,0,0]]],XYZ:[[new ze(new Zd(.1,0),u),[0,0,0]]],XY:[[new ze(new qi(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new ze(new qi(.15,.15,.01),c),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ze(new qi(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]]},R={X:[[new ze(new _r(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new ze(new _r(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ze(new _r(.2,0,.6,4),n),[0,.3,0]],[new ze(new _r(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ze(new _r(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new ze(new _r(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new ze(new Zd(.2,0),n)]],XY:[[new ze(new qi(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new ze(new qi(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ze(new qi(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},B={START:[[new ze(new Zd(.01,2),r),null,null,null,"helper"]],END:[[new ze(new Zd(.01,2),r),null,null,null,"helper"]],DELTA:[[new ws(E(),r),null,null,null,"helper"]],X:[[new ws(g,r),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ws(g,r),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ws(g,r),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},z={XYZE:[[new ze(C(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new ze(C(.5,.5),o)]],Y:[[new ze(C(.5,.5),s),null,[0,0,-Math.PI/2]]],Z:[[new ze(C(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new ze(C(.75,1),h),null,[0,Math.PI/2,0]]]},T={AXIS:[[new ws(g,r),[-1e3,0,0],null,[1e6,1,1],"helper"]]},O={XYZE:[[new ze(new q0(.25,10,8),n)]],X:[[new ze(new Pl(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new ze(new Pl(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new ze(new Pl(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new ze(new Pl(.75,.1,2,24),n)]]},U={X:[[new ze(f,o),[.5,0,0],[0,0,-Math.PI/2]],[new ze(S,o),[0,0,0],[0,0,-Math.PI/2]],[new ze(f,o),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new ze(f,s),[0,.5,0]],[new ze(S,s)],[new ze(f,s),[0,-.5,0],[0,0,Math.PI]]],Z:[[new ze(f,a),[0,0,.5],[Math.PI/2,0,0]],[new ze(S,a),[0,0,0],[Math.PI/2,0,0]],[new ze(f,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new ze(new qi(.15,.15,.01),d),[.15,.15,0]]],YZ:[[new ze(new qi(.15,.15,.01),c),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ze(new qi(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ze(new qi(.1,.1,.1),u)]]},X={X:[[new ze(new _r(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new ze(new _r(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new ze(new _r(.2,0,.6,4),n),[0,.3,0]],[new ze(new _r(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new ze(new _r(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new ze(new _r(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new ze(new qi(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new ze(new qi(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new ze(new qi(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new ze(new qi(.2,.2,.2),n),[0,0,0]]]},ee={X:[[new ws(g,r),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new ws(g,r),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new ws(g,r),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function de(se){let ue=new No;for(let ae in se)for(let Ce=se[ae].length;Ce--;){let Pe=se[ae][Ce][0].clone(),He=se[ae][Ce][1],tt=se[ae][Ce][2],ai=se[ae][Ce][3],pi=se[ae][Ce][4];Pe.name=ae,Pe.tag=pi,He&&Pe.position.set(He[0],He[1],He[2]),tt&&Pe.rotation.set(tt[0],tt[1],tt[2]),ai&&Pe.scale.set(ai[0],ai[1],ai[2]),Pe.updateMatrix();let xn=Pe.geometry.clone();xn.applyMatrix4(Pe.matrix),Pe.geometry=xn,Pe.renderOrder=1/0,Pe.position.set(0,0,0),Pe.rotation.set(0,0,0),Pe.scale.set(1,1,1),ue.add(Pe)}return ue}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=de(N)),this.add(this.gizmo.rotate=de(z)),this.add(this.gizmo.scale=de(U)),this.add(this.picker.translate=de(R)),this.add(this.picker.rotate=de(O)),this.add(this.picker.scale=de(X)),this.add(this.helper.translate=de(B)),this.add(this.helper.rotate=de(T)),this.add(this.helper.scale=de(ee)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(t){let n=(this.mode==="scale"?"local":this.space)==="local"?this.worldQuaternion:VS;this.gizmo.translate.visible=this.mode==="translate",this.gizmo.rotate.visible=this.mode==="rotate",this.gizmo.scale.visible=this.mode==="scale",this.helper.translate.visible=this.mode==="translate",this.helper.rotate.visible=this.mode==="rotate",this.helper.scale.visible=this.mode==="scale";let r=[];r=r.concat(this.picker[this.mode].children),r=r.concat(this.gizmo[this.mode].children),r=r.concat(this.helper[this.mode].children);for(let o=0;o<r.length;o++){let s=r[o];s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition);let a;if(this.camera.isOrthographicCamera?a=(this.camera.top-this.camera.bottom)/this.camera.zoom:a=this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(a*this.size/4),s.tag==="helper"){s.visible=!1,s.name==="AXIS"?(s.visible=!!this.axis,this.axis==="X"&&(Fn.setFromEuler(FS.set(0,0,0)),s.quaternion.copy(n).multiply(Fn),Math.abs(yn.copy(ub).applyQuaternion(n).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Y"&&(Fn.setFromEuler(FS.set(0,0,Math.PI/2)),s.quaternion.copy(n).multiply(Fn),Math.abs(yn.copy(qh).applyQuaternion(n).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="Z"&&(Fn.setFromEuler(FS.set(0,Math.PI/2,0)),s.quaternion.copy(n).multiply(Fn),Math.abs(yn.copy(hb).applyQuaternion(n).dot(this.eye))>.9&&(s.visible=!1)),this.axis==="XYZE"&&(Fn.setFromEuler(FS.set(0,Math.PI/2,0)),yn.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(LZ.lookAt(FZ,yn,qh)),s.quaternion.multiply(Fn),s.visible=this.dragging),this.axis==="E"&&(s.visible=!1)):s.name==="START"?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):s.name==="END"?(s.position.copy(this.worldPosition),s.visible=this.dragging):s.name==="DELTA"?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),go.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),go.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(go),s.visible=this.dragging):(s.quaternion.copy(n),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=this.axis.search(s.name)!==-1));continue}s.quaternion.copy(n),this.mode==="translate"||this.mode==="scale"?(s.name==="X"&&Math.abs(yn.copy(ub).applyQuaternion(n).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Y"&&Math.abs(yn.copy(qh).applyQuaternion(n).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="Z"&&Math.abs(yn.copy(hb).applyQuaternion(n).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XY"&&Math.abs(yn.copy(hb).applyQuaternion(n).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="YZ"&&Math.abs(yn.copy(ub).applyQuaternion(n).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),s.name==="XZ"&&Math.abs(yn.copy(qh).applyQuaternion(n).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1)):this.mode==="rotate"&&(LS.copy(n),yn.copy(this.eye).applyQuaternion(Fn.copy(n).invert()),s.name.search("E")!==-1&&s.quaternion.setFromRotationMatrix(LZ.lookAt(this.eye,FZ,qh)),s.name==="X"&&(Fn.setFromAxisAngle(ub,Math.atan2(-yn.y,yn.z)),Fn.multiplyQuaternions(LS,Fn),s.quaternion.copy(Fn)),s.name==="Y"&&(Fn.setFromAxisAngle(qh,Math.atan2(yn.x,yn.z)),Fn.multiplyQuaternions(LS,Fn),s.quaternion.copy(Fn)),s.name==="Z"&&(Fn.setFromAxisAngle(hb,Math.atan2(yn.y,yn.x)),Fn.multiplyQuaternions(LS,Fn),s.quaternion.copy(Fn))),s.visible=s.visible&&(s.name.indexOf("X")===-1||this.showX),s.visible=s.visible&&(s.name.indexOf("Y")===-1||this.showY),s.visible=s.visible&&(s.name.indexOf("Z")===-1||this.showZ),s.visible=s.visible&&(s.name.indexOf("E")===-1||this.showX&&this.showY&&this.showZ),s.material._color=s.material._color||s.material.color.clone(),s.material._opacity=s.material._opacity||s.material.opacity,s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled&&this.axis&&(s.name===this.axis?(s.material.color.copy(this.materialLib.active.color),s.material.opacity=1):this.axis.split("").some(function(c){return s.name===c})&&(s.material.color.copy(this.materialLib.active.color),s.material.opacity=1))}super.updateMatrixWorld(t)}},M3=class extends ze{constructor(){super(new Ms(1e5,1e5,2,2),new qs({visible:!1,wireframe:!0,side:po,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(t){let e=this.space;switch(this.position.copy(this.worldPosition),this.mode==="scale"&&(e="local"),BS.copy(ub).applyQuaternion(e==="local"?this.worldQuaternion:VS),lb.copy(qh).applyQuaternion(e==="local"?this.worldQuaternion:VS),db.copy(hb).applyQuaternion(e==="local"?this.worldQuaternion:VS),yn.copy(lb),this.mode){case"translate":case"scale":switch(this.axis){case"X":yn.copy(this.eye).cross(BS),Ec.copy(BS).cross(yn);break;case"Y":yn.copy(this.eye).cross(lb),Ec.copy(lb).cross(yn);break;case"Z":yn.copy(this.eye).cross(db),Ec.copy(db).cross(yn);break;case"XY":Ec.copy(db);break;case"YZ":Ec.copy(BS);break;case"XZ":yn.copy(db),Ec.copy(lb);break;case"XYZ":case"E":Ec.set(0,0,0);break}break;case"rotate":default:Ec.set(0,0,0)}Ec.length()===0?this.quaternion.copy(this.cameraQuaternion):(BZ.lookAt(go.set(0,0,0),Ec,yn),this.quaternion.setFromRotationMatrix(BZ)),super.updateMatrixWorld(t)}};function NEe(i,t){if(i&1){let e=ot();b(0,"div",1)(1,"button",2),ne("click",function(){Q(e);let r=G();return J(r.action())}),M(2),v()()}if(i&2){let e=G();P(2),gt(" ",e.data.action," ")}}var REe=["label"];function FEe(i,t){}var LEe=Math.pow(2,31)-1,mb=class{constructor(t,e){this._overlayRef=e,this._afterDismissed=new Le,this._afterOpened=new Le,this._onAction=new Le,this._dismissedByAction=!1,this.containerInstance=t,t._onExit.subscribe(()=>this._finishDismiss())}dismiss(){this._afterDismissed.closed||this.containerInstance.exit(),clearTimeout(this._durationTimeoutId)}dismissWithAction(){this._onAction.closed||(this._dismissedByAction=!0,this._onAction.next(),this._onAction.complete(),this.dismiss()),clearTimeout(this._durationTimeoutId)}closeWithAction(){this.dismissWithAction()}_dismissAfter(t){this._durationTimeoutId=setTimeout(()=>this.dismiss(),Math.min(t,LEe))}_open(){this._afterOpened.closed||(this._afterOpened.next(),this._afterOpened.complete())}_finishDismiss(){this._overlayRef.dispose(),this._onAction.closed||this._onAction.complete(),this._afterDismissed.next({dismissedByAction:this._dismissedByAction}),this._afterDismissed.complete(),this._dismissedByAction=!1}afterDismissed(){return this._afterDismissed}afterOpened(){return this.containerInstance._onEnter}onAction(){return this._onAction}},VZ=new _e("MatSnackBarData"),Df=class{constructor(){this.politeness="assertive",this.announcementMessage="",this.duration=0,this.data=null,this.horizontalPosition="center",this.verticalPosition="bottom"}},BEe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["","matSnackBarLabel",""]],hostAttrs:[1,"mat-mdc-snack-bar-label","mdc-snackbar__label"],standalone:!0})}}return i})(),VEe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["","matSnackBarActions",""]],hostAttrs:[1,"mat-mdc-snack-bar-actions","mdc-snackbar__actions"],standalone:!0})}}return i})(),UEe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["","matSnackBarAction",""]],hostAttrs:[1,"mat-mdc-snack-bar-action","mdc-snackbar__action"],standalone:!0})}}return i})(),UZ=(()=>{class i{constructor(e,n){this.snackBarRef=e,this.data=n}action(){this.snackBarRef.dismissWithAction()}get hasAction(){return!!this.data.action}static{this.\u0275fac=function(n){return new(n||i)(F(mb),F(VZ))}}static{this.\u0275cmp=rt({type:i,selectors:[["simple-snack-bar"]],hostAttrs:[1,"mat-mdc-simple-snack-bar"],exportAs:["matSnackBar"],standalone:!0,features:[Dt],decls:3,vars:2,consts:[["matSnackBarLabel",""],["matSnackBarActions",""],["mat-button","","matSnackBarAction","",3,"click"]],template:function(n,r){n&1&&(b(0,"div",0),M(1),v(),ve(2,NEe,3,1,"div",1)),n&2&&(P(),gt(" ",r.data.message,`
`),P(),Zt(2,r.hasAction?2:-1))},dependencies:[pc,BEe,VEe,UEe],styles:[".mat-mdc-simple-snack-bar{display:flex}"],encapsulation:2,changeDetection:0})}}return i})(),zEe={snackBarState:Bs("state",[eo("void, hidden",Wn({transform:"scale(0.8)",opacity:0})),eo("visible",Wn({transform:"scale(1)",opacity:1})),to("* => visible",Io("150ms cubic-bezier(0, 0, 0.2, 1)")),to("* => void, * => hidden",Io("75ms cubic-bezier(0.4, 0.0, 1, 1)",Wn({opacity:0})))])},HEe=0,jEe=(()=>{class i extends tp{constructor(e,n,r,o,s){super(),this._ngZone=e,this._elementRef=n,this._changeDetectorRef=r,this._platform=o,this.snackBarConfig=s,this._document=ye(kt),this._trackedModals=new Set,this._announceDelay=150,this._destroyed=!1,this._onAnnounce=new Le,this._onExit=new Le,this._onEnter=new Le,this._animationState="void",this._liveElementId=`mat-snack-bar-container-live-${HEe++}`,this.attachDomPortal=a=>{this._assertNotAttached();let c=this._portalOutlet.attachDomPortal(a);return this._afterPortalAttached(),c},s.politeness==="assertive"&&!s.announcementMessage?this._live="assertive":s.politeness==="off"?this._live="off":this._live="polite",this._platform.FIREFOX&&(this._live==="polite"&&(this._role="status"),this._live==="assertive"&&(this._role="alert"))}attachComponentPortal(e){this._assertNotAttached();let n=this._portalOutlet.attachComponentPortal(e);return this._afterPortalAttached(),n}attachTemplatePortal(e){this._assertNotAttached();let n=this._portalOutlet.attachTemplatePortal(e);return this._afterPortalAttached(),n}onAnimationEnd(e){let{fromState:n,toState:r}=e;if((r==="void"&&n!=="void"||r==="hidden")&&this._completeExit(),r==="visible"){let o=this._onEnter;this._ngZone.run(()=>{o.next(),o.complete()})}}enter(){this._destroyed||(this._animationState="visible",this._changeDetectorRef.markForCheck(),this._changeDetectorRef.detectChanges(),this._screenReaderAnnounce())}exit(){return this._ngZone.run(()=>{this._animationState="hidden",this._changeDetectorRef.markForCheck(),this._elementRef.nativeElement.setAttribute("mat-exit",""),clearTimeout(this._announceTimeoutId)}),this._onExit}ngOnDestroy(){this._destroyed=!0,this._clearFromModals(),this._completeExit()}_completeExit(){queueMicrotask(()=>{this._onExit.next(),this._onExit.complete()})}_afterPortalAttached(){let e=this._elementRef.nativeElement,n=this.snackBarConfig.panelClass;n&&(Array.isArray(n)?n.forEach(s=>e.classList.add(s)):e.classList.add(n)),this._exposeToModals();let r=this._label.nativeElement,o="mdc-snackbar__label";r.classList.toggle(o,!r.querySelector(`.${o}`))}_exposeToModals(){let e=this._liveElementId,n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let o=n[r],s=o.getAttribute("aria-owns");this._trackedModals.add(o),s?s.indexOf(e)===-1&&o.setAttribute("aria-owns",s+" "+e):o.setAttribute("aria-owns",e)}}_clearFromModals(){this._trackedModals.forEach(e=>{let n=e.getAttribute("aria-owns");if(n){let r=n.replace(this._liveElementId,"").trim();r.length>0?e.setAttribute("aria-owns",r):e.removeAttribute("aria-owns")}}),this._trackedModals.clear()}_assertNotAttached(){this._portalOutlet.hasAttached()}_screenReaderAnnounce(){this._announceTimeoutId||this._ngZone.runOutsideAngular(()=>{this._announceTimeoutId=setTimeout(()=>{let e=this._elementRef.nativeElement.querySelector("[aria-hidden]"),n=this._elementRef.nativeElement.querySelector("[aria-live]");if(e&&n){let r=null;this._platform.isBrowser&&document.activeElement instanceof HTMLElement&&e.contains(document.activeElement)&&(r=document.activeElement),e.removeAttribute("aria-hidden"),n.appendChild(e),r?.focus(),this._onAnnounce.next(),this._onAnnounce.complete()}},this._announceDelay)})}static{this.\u0275fac=function(n){return new(n||i)(F(Ne),F(Re),F(ci),F(li),F(Df))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-snack-bar-container"]],viewQuery:function(n,r){if(n&1&&(Lt(Qc,7),Lt(REe,7)),n&2){let o;Be(o=Ve())&&(r._portalOutlet=o.first),Be(o=Ve())&&(r._label=o.first)}},hostAttrs:[1,"mdc-snackbar","mat-mdc-snack-bar-container","mdc-snackbar--open"],hostVars:1,hostBindings:function(n,r){n&1&&YT("@state.done",function(s){return r.onAnimationEnd(s)}),n&2&&XT("@state",r._animationState)},standalone:!0,features:[It,Dt],decls:6,vars:3,consts:[["label",""],[1,"mdc-snackbar__surface"],[1,"mat-mdc-snack-bar-label"],["aria-hidden","true"],["cdkPortalOutlet",""]],template:function(n,r){n&1&&(b(0,"div",1)(1,"div",2,0)(3,"div",3),ve(4,FEe,0,0,"ng-template",4),v(),Fe(5,"div"),v()()),n&2&&(P(5),Tt("aria-live",r._live)("role",r._role)("id",r._liveElementId))},dependencies:[Qc],styles:['.mdc-snackbar{display:none;position:fixed;right:0;bottom:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;pointer-events:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mdc-snackbar--opening,.mdc-snackbar--open,.mdc-snackbar--closing{display:flex}.mdc-snackbar--open .mdc-snackbar__label,.mdc-snackbar--open .mdc-snackbar__actions{visibility:visible}.mdc-snackbar__surface{padding-left:0;padding-right:8px;display:flex;align-items:center;justify-content:flex-start;box-sizing:border-box;transform:scale(0.8);opacity:0}.mdc-snackbar__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-snackbar__surface::before{border-color:CanvasText}}[dir=rtl] .mdc-snackbar__surface,.mdc-snackbar__surface[dir=rtl]{padding-left:8px;padding-right:0}.mdc-snackbar--open .mdc-snackbar__surface{transform:scale(1);opacity:1;pointer-events:auto}.mdc-snackbar--closing .mdc-snackbar__surface{transform:scale(1)}.mdc-snackbar__label{padding-left:16px;padding-right:8px;width:100%;flex-grow:1;box-sizing:border-box;margin:0;visibility:hidden;padding-top:14px;padding-bottom:14px}[dir=rtl] .mdc-snackbar__label,.mdc-snackbar__label[dir=rtl]{padding-left:8px;padding-right:16px}.mdc-snackbar__label::before{display:inline;content:attr(data-mdc-snackbar-label-text)}.mdc-snackbar__actions{display:flex;flex-shrink:0;align-items:center;box-sizing:border-box;visibility:hidden}.mdc-snackbar__action+.mdc-snackbar__dismiss{margin-left:8px;margin-right:0}[dir=rtl] .mdc-snackbar__action+.mdc-snackbar__dismiss,.mdc-snackbar__action+.mdc-snackbar__dismiss[dir=rtl]{margin-left:0;margin-right:8px}.mat-mdc-snack-bar-container{margin:8px;position:static}.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:344px}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container .mdc-snackbar__surface{min-width:100%}}@media(max-width: 480px),(max-width: 344px){.mat-mdc-snack-bar-container{width:100vw}}.mat-mdc-snack-bar-container .mdc-snackbar__surface{max-width:672px}.mat-mdc-snack-bar-container .mdc-snackbar__surface{box-shadow:0px 3px 5px -1px rgba(0, 0, 0, 0.2), 0px 6px 10px 0px rgba(0, 0, 0, 0.14), 0px 1px 18px 0px rgba(0, 0, 0, 0.12)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{background-color:var(--mdc-snackbar-container-color)}.mat-mdc-snack-bar-container .mdc-snackbar__surface{border-radius:var(--mdc-snackbar-container-shape)}.mat-mdc-snack-bar-container .mdc-snackbar__label{color:var(--mdc-snackbar-supporting-text-color)}.mat-mdc-snack-bar-container .mdc-snackbar__label{font-size:var(--mdc-snackbar-supporting-text-size);font-family:var(--mdc-snackbar-supporting-text-font);font-weight:var(--mdc-snackbar-supporting-text-weight);line-height:var(--mdc-snackbar-supporting-text-line-height)}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled){color:var(--mat-snack-bar-button-color);--mat-text-button-state-layer-color:currentColor;--mat-text-button-ripple-color:currentColor}.mat-mdc-snack-bar-container .mat-mdc-button.mat-mdc-snack-bar-action:not(:disabled) .mat-ripple-element{opacity:.1}.mat-mdc-snack-bar-container .mdc-snackbar__label::before{display:none}.mat-mdc-snack-bar-handset,.mat-mdc-snack-bar-container,.mat-mdc-snack-bar-label{flex:1 1 auto}.mat-mdc-snack-bar-handset .mdc-snackbar__surface{width:100%}'],encapsulation:2,data:{animation:[zEe.snackBarState]}})}}return i})();function $Ee(){return new Df}var GEe=new _e("mat-snack-bar-default-options",{providedIn:"root",factory:$Ee}),Xh=(()=>{class i{get _openedSnackBarRef(){let e=this._parentSnackBar;return e?e._openedSnackBarRef:this._snackBarRefAtThisLevel}set _openedSnackBarRef(e){this._parentSnackBar?this._parentSnackBar._openedSnackBarRef=e:this._snackBarRefAtThisLevel=e}constructor(e,n,r,o,s,a){this._overlay=e,this._live=n,this._injector=r,this._breakpointObserver=o,this._parentSnackBar=s,this._defaultConfig=a,this._snackBarRefAtThisLevel=null,this.simpleSnackBarComponent=UZ,this.snackBarContainerComponent=jEe,this.handsetCssClass="mat-mdc-snack-bar-handset"}openFromComponent(e,n){return this._attach(e,n)}openFromTemplate(e,n){return this._attach(e,n)}open(e,n="",r){let o=ge(ge({},this._defaultConfig),r);return o.data={message:e,action:n},o.announcementMessage===e&&(o.announcementMessage=void 0),this.openFromComponent(this.simpleSnackBarComponent,o)}dismiss(){this._openedSnackBarRef&&this._openedSnackBarRef.dismiss()}ngOnDestroy(){this._snackBarRefAtThisLevel&&this._snackBarRefAtThisLevel.dismiss()}_attachSnackBarContainer(e,n){let r=n&&n.viewContainerRef&&n.viewContainerRef.injector,o=Jn.create({parent:r||this._injector,providers:[{provide:Df,useValue:n}]}),s=new hd(this.snackBarContainerComponent,n.viewContainerRef,o),a=e.attach(s);return a.instance.snackBarConfig=n,a.instance}_attach(e,n){let r=ge(ge(ge({},new Df),this._defaultConfig),n),o=this._createOverlay(r),s=this._attachSnackBarContainer(o,r),a=new mb(s,o);if(e instanceof ji){let c=new Ls(e,null,{$implicit:r.data,snackBarRef:a});a.instance=s.attachTemplatePortal(c)}else{let c=this._createInjector(r,a),l=new hd(e,void 0,c),d=s.attachComponentPortal(l);a.instance=d.instance}return this._breakpointObserver.observe(SH.HandsetPortrait).pipe(Rt(o.detachments())).subscribe(c=>{o.overlayElement.classList.toggle(this.handsetCssClass,c.matches)}),r.announcementMessage&&s._onAnnounce.subscribe(()=>{this._live.announce(r.announcementMessage,r.politeness)}),this._animateSnackBar(a,r),this._openedSnackBarRef=a,this._openedSnackBarRef}_animateSnackBar(e,n){e.afterDismissed().subscribe(()=>{this._openedSnackBarRef==e&&(this._openedSnackBarRef=null),n.announcementMessage&&this._live.clear()}),this._openedSnackBarRef?(this._openedSnackBarRef.afterDismissed().subscribe(()=>{e.containerInstance.enter()}),this._openedSnackBarRef.dismiss()):e.containerInstance.enter(),n.duration&&n.duration>0&&e.afterOpened().subscribe(()=>e._dismissAfter(n.duration))}_createOverlay(e){let n=new qp;n.direction=e.direction;let r=this._overlay.position().global(),o=e.direction==="rtl",s=e.horizontalPosition==="left"||e.horizontalPosition==="start"&&!o||e.horizontalPosition==="end"&&o,a=!s&&e.horizontalPosition!=="center";return s?r.left("0"):a?r.right("0"):r.centerHorizontally(),e.verticalPosition==="top"?r.top("0"):r.bottom("0"),n.positionStrategy=r,this._overlay.create(n)}_createInjector(e,n){let r=e&&e.viewContainerRef&&e.viewContainerRef.injector;return Jn.create({parent:r||this._injector,providers:[{provide:mb,useValue:n},{provide:VZ,useValue:e.data}]})}static{this.\u0275fac=function(n){return new(n||i)(pe(es),pe(xx),pe(Jn),pe(ux),pe(i,12),pe(GEe))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var zZ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({providers:[Xh],imports:[Xp,ip,Bd,Vt,UZ,Vt]})}}return i})();var WEe=["sceneCanvas"];function qEe(i,t){if(i&1){let e=ot();b(0,"input",29),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.wallColor,r)||(o.wallColor=r),J(r)}),v()}if(i&2){let e=G();ui("ngModel",e.wallColor)}}function XEe(i,t){if(i&1){let e=ot();b(0,"input",29),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.shelfColor,r)||(o.shelfColor=r),J(r)}),v()}if(i&2){let e=G();ui("ngModel",e.shelfColor)}}function YEe(i,t){if(i&1){let e=ot();b(0,"input",29),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.boxColor,r)||(o.boxColor=r),J(r)}),v()}if(i&2){let e=G();ui("ngModel",e.boxColor)}}function ZEe(i,t){if(i&1&&(b(0,"option",30),M(1),v()),i&2){let e=t.$implicit;q("value",e.id),P(),ft(e.name)}}function KEe(i,t){if(i&1){let e=ot();b(0,"div",31),ne("click",function(r){return Q(e),J(r.stopPropagation())}),b(1,"button",32),ne("click",function(){Q(e);let r=G();return J(r.renameSelectedBox())}),M(2,"Rename"),v(),b(3,"button",32),ne("click",function(){Q(e);let r=G();return J(r.addMedicineToSelectedBox())}),M(4,"Add Medicine"),v(),b(5,"button",32),ne("click",function(){Q(e);let r=G();return J(r.withdrawMedicineFromSelectedBox())}),M(6,"Withdraw Medicine"),v(),b(7,"button",32),ne("click",function(){Q(e);let r=G();return J(r.setCapacityForSelectedBox())}),M(8,"Set Capacity"),v(),b(9,"button",32),ne("click",function(){Q(e);let r=G();return J(r.viewMedicinesInSelectedBox())}),M(10,"View Medicines"),v()()}if(i&2){let e=G();$n("left",e.contextMenu.x,"px")("top",e.contextMenu.y,"px")}}function QEe(i,t){if(i&1){let e=ot();b(0,"div",33),ne("click",function(){Q(e);let r=G();return J(r.closeMedicinePopup())}),v()}}function JEe(i,t){if(i&1&&(b(0,"span",53),M(1),v()),i&2){let e=G(2);P(),gt(" Capacity ",e.medicinePopup.capacity," ")}}function eTe(i,t){if(i&1&&(b(0,"span",58),M(1),v()),i&2){let e=G().$implicit;P(),gt("short ",-e.qty,"")}}function tTe(i,t){if(i&1){let e=ot();b(0,"div",54),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.selectMedicine(r.name))}),b(1,"span",55),M(2),v(),b(3,"span",56),M(4),v(),ve(5,eTe,2,1,"span",57),v()}if(i&2){let e=t.$implicit,n=G(2);qe("active",n.medicineForm.medicineName===e.name),P(2),ft(e.name),P(),qe("negative",e.qty<0),P(),ft(e.qty),P(),q("ngIf",e.qty<0)}}function iTe(i,t){if(i&1){let e=ot();b(0,"div",34)(1,"div",35)(2,"div",36),M(3),ve(4,JEe,2,1,"span",37),v(),b(5,"button",38),ne("click",function(){Q(e);let r=G();return J(r.cancelMedicinePopup())}),M(6,"Cancel"),v()(),b(7,"div",39)(8,"label"),M(9," Box Name "),b(10,"input",40),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.medicineForm.name,r)||(o.medicineForm.name=r),J(r)}),v()(),b(11,"label"),M(12," Tag "),b(13,"input",40),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.medicineForm.tag,r)||(o.medicineForm.tag=r),J(r)}),v()(),b(14,"label"),M(15," Capacity "),b(16,"input",41),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.medicineForm.capacity,r)||(o.medicineForm.capacity=r),J(r)}),v()(),b(17,"label"),M(18," Min Stock "),b(19,"input",41),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.medicineForm.minStock,r)||(o.medicineForm.minStock=r),J(r)}),v()(),b(20,"label"),M(21," Max Stock "),b(22,"input",41),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.medicineForm.maxStock,r)||(o.medicineForm.maxStock=r),J(r)}),v()(),b(23,"div",42)(24,"label",43),M(25," Medicine "),b(26,"input",40),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.medicineForm.medicineName,r)||(o.medicineForm.medicineName=r),J(r)}),v()(),b(27,"label",44),M(28," Qty "),b(29,"div",45)(30,"div",46)(31,"button",32),ne("click",function(){Q(e);let r=G();return J(r.updateQuantity(-1))}),M(32,"-"),v(),b(33,"input",47),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.medicineForm.quantity,r)||(o.medicineForm.quantity=r),J(r)}),v(),b(34,"button",32),ne("click",function(){Q(e);let r=G();return J(r.updateQuantity(1))}),M(35,"+"),v()(),b(36,"div",48)(37,"button",32),ne("click",function(){Q(e);let r=G();return J(r.medicineForm.mode="deposit")}),M(38,"Deposit"),v(),b(39,"button",32),ne("click",function(){Q(e);let r=G();return J(r.medicineForm.mode="withdraw")}),M(40,"Withdraw"),v()()()()()(),b(41,"div",49)(42,"button",32),ne("click",function(){Q(e);let r=G();return J(r.cancelMedicinePopup())}),M(43,"Cancel"),v(),b(44,"button",50),ne("click",function(){Q(e);let r=G();return J(r.saveMedicinePopup())}),M(45,"Save"),v()(),b(46,"div",51),ve(47,tTe,6,7,"div",52),v()()}if(i&2){let e=G();P(3),gt(" ",e.medicinePopup.boxName," Medicines "),P(),q("ngIf",e.medicinePopup.capacity>0),P(6),ui("ngModel",e.medicineForm.name),P(3),ui("ngModel",e.medicineForm.tag),P(3),ui("ngModel",e.medicineForm.capacity),P(3),ui("ngModel",e.medicineForm.minStock),P(3),ui("ngModel",e.medicineForm.maxStock),P(4),ui("ngModel",e.medicineForm.medicineName),P(7),ui("ngModel",e.medicineForm.quantity),P(4),qe("active",e.medicineForm.mode==="deposit"),P(2),qe("active",e.medicineForm.mode==="withdraw"),P(8),q("ngForOf",e.medicinePopup.medicines)}}function nTe(i,t){if(i&1){let e=ot();b(0,"div",75)(1,"div",76)(2,"div",77),M(3),v(),b(4,"div",78),M(5),v()(),b(6,"input",79),ne("ngModelChange",function(r){let o=Q(e).$implicit,s=G(2);return J(s.setPickQty(o.id,r))}),v(),b(7,"button",80),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.addToPicklist(r))}),M(8,"Add"),v()()}if(i&2){let e=t.$implicit,n=G(2);P(3),ft(e.name),P(2),Dr("",e.category," \xB7 stock ",e.quantity,""),P(),q("ngModel",n.getPickQty(e.id))}}function rTe(i,t){i&1&&(b(0,"div",81),M(1," No products found. "),v())}function oTe(i,t){if(i&1){let e=ot();b(0,"div",82),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.focusPickItem(r))}),b(1,"div",83)(2,"div",84),M(3),v(),b(4,"div",85),M(5),v()(),b(6,"button",86),ne("click",function(r){let o=Q(e).$implicit;return G(2).togglePicked(o),J(r.stopPropagation())}),M(7),v()()}if(i&2){let e=t.$implicit,n=G(2);qe("active",e.id===n.picklistCurrentId)("picked",e.status==="picked"),P(3),ft(e.name),P(2),Dr("",e.tag||"General"," \xB7 qty ",e.qty,""),P(2),gt(" ",e.status==="picked"?"Undo":"Picked"," ")}}function sTe(i,t){i&1&&(b(0,"div",81),M(1," No items yet. Add products on the left. "),v())}function aTe(i,t){if(i&1){let e=ot();b(0,"div",59)(1,"div",60)(2,"div")(3,"div",61),M(4,"Picklist"),v(),b(5,"div",62),M(6,"Select products and guide picking"),v()(),b(7,"button",38),ne("click",function(){Q(e);let r=G();return J(r.closePicklist())}),M(8,"Close"),v()(),b(9,"div",63)(10,"div",64)(11,"label",65),M(12," Search "),b(13,"input",66),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.picklistSearch,r)||(o.picklistSearch=r),J(r)}),v()(),b(14,"div",67),ve(15,nTe,9,4,"div",68)(16,rTe,2,0,"div",69),v()(),b(17,"div",70)(18,"div",71)(19,"button",72),ne("click",function(){Q(e);let r=G();return J(r.startPicklist())}),M(20," Start Picking "),v(),b(21,"button",73),ne("click",function(){Q(e);let r=G();return J(r.clearPicklist())}),M(22,"Clear"),v()(),ve(23,oTe,8,8,"div",74)(24,sTe,2,0,"div",69),v()()()}if(i&2){let e=G();P(13),ui("ngModel",e.picklistSearch),P(2),q("ngForOf",e.filteredCatalog),P(),q("ngIf",e.filteredCatalog.length===0),P(3),q("disabled",e.picklistItems.length===0),P(2),q("disabled",e.picklistItems.length===0),P(2),q("ngForOf",e.picklistItems),P(),q("ngIf",e.picklistItems.length===0)}}function cTe(i,t){if(i&1&&(b(0,"div",101)(1,"span"),M(2),v(),b(3,"span"),M(4),v(),b(5,"span"),M(6),v()()),i&2){let e=G(2);P(2),gt("Matched ",e.auditSummary.matched,""),P(2),gt("Missing ",e.auditSummary.missing,""),P(2),gt("Extra ",e.auditSummary.extra,"")}}function lTe(i,t){if(i&1&&(b(0,"div",102)(1,"div",103),M(2),v(),b(3,"div",104)(4,"span"),M(5),v(),b(6,"span"),M(7),v(),b(8,"span"),M(9),v()()()),i&2){let e=t.$implicit;qe("missing",e.status==="missing")("extra",e.status==="extra"),P(2),ft(e.name),P(3),gt("Expected ",e.expected,""),P(2),gt("Scanned ",e.scanned,""),P(2),gt("Diff ",e.diff,"")}}function dTe(i,t){i&1&&(b(0,"div",105),M(1," No audit results yet. "),v())}function uTe(i,t){if(i&1){let e=ot();b(0,"div",87)(1,"div",88)(2,"div")(3,"div",89),M(4,"Stock Audit"),v(),b(5,"div",90),M(6),v()(),b(7,"button",38),ne("click",function(){Q(e);let r=G();return J(r.closeAudit())}),M(8,"Close"),v()(),b(9,"div",91)(10,"p",92),M(11," Click a shelf or box in the scene to set the audit target, then paste scanned counts. "),v(),b(12,"label",93),M(13,' Scanned list (one per line, e.g. "Paracetamol, 12") '),b(14,"textarea",94),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.auditInput,r)||(o.auditInput=r),J(r)}),v()(),b(15,"div",95)(16,"button",32),ne("click",function(){Q(e);let r=G();return J(r.clearAuditInput())}),M(17,"Clear"),v(),b(18,"button",96),ne("click",function(){Q(e);let r=G();return J(r.runAudit())}),M(19,"Compare"),v()(),b(20,"div",95)(21,"button",73),ne("click",function(){Q(e);let r=G();return J(r.copyAuditReport())}),M(22,"Copy Report"),v(),b(23,"button",73),ne("click",function(){Q(e);let r=G();return J(r.downloadAuditReport())}),M(24,"Download Report"),v()(),ve(25,cTe,7,3,"div",97),b(26,"div",98),ve(27,lTe,10,8,"div",99)(28,dTe,2,0,"div",100),v()()()}if(i&2){let e=G();P(6),ft(e.auditTargetName),P(8),ui("ngModel",e.auditInput),P(4),q("disabled",e.auditTargetIds.length===0),P(3),q("disabled",e.auditResults.length===0),P(2),q("disabled",e.auditResults.length===0),P(2),q("ngIf",e.auditResults.length>0),P(2),q("ngForOf",e.auditResults),P(),q("ngIf",e.auditResults.length===0)}}function hTe(i,t){i&1&&(b(0,"div",106)(1,"span"),Fe(2,"i",107),M(3,"Empty"),v(),b(4,"span"),Fe(5,"i",108),M(6,"Low"),v(),b(7,"span"),Fe(8,"i",109),M(9,"Mid"),v(),b(10,"span"),Fe(11,"i",110),M(12,"High"),v(),b(13,"span"),Fe(14,"i",111),M(15,"Over"),v()())}var zS=(()=>{class i{constructor(e){this.snackBar=e,this.mode="select",this.transformMode="translate",this.raycaster=new Bh,this.pointer=new Ht,this.floorMesh=null,this.gridHelper=null,this.previewMesh=null,this.drawStart=new j,this.drawActive=!1,this.drawTarget=null,this.wallDrawStartY=0,this.wallDrawHeight=0,this.layoutItems=[],this.layoutMap=new Map,this.wallMeshes=new Map,this.shelfMeshes=new Map,this.boxMeshes=new Map,this.boxLabels=new Map,this.tagFlags=new Map,this.selectedMesh=null,this.contextMenu={visible:!1,x:0,y:0,boxId:""},this.medicinePopup={visible:!1,boxName:"",medicines:[],capacity:0,boxId:""},this.medicineForm={name:"",capacity:0,minStock:0,maxStock:0,tag:"",medicineName:"",quantity:1,mode:"deposit"},this.picklistOpen=!1,this.picklistSearch="",this.picklistItems=[],this.picklistActive=!1,this.picklistCurrentId=null,this.pickQtyMap={},this.productCatalog=[],this.auditOpen=!1,this.auditTargetName="No shelf selected",this.auditTargetIds=[],this.auditInput="",this.auditResults=[],this.auditSummary={matched:0,missing:0,extra:0},this.auditReport="",this.heatmapEnabled=!1,this.animationFrameId=null,this.storageKey="buildaq_pharmacy_layout_v2",this.productStorageKey="buildaq_pharmacy_products",this.picklistStorageKey="buildaq_pharmacy_picklist",this.wallHeight=3,this.wallThickness=.1,this.shelfDepth=.5,this.boxDepth=.2,this.wallColor="#6b7280",this.shelfColor="#475569",this.boxColor="#1f2937",this.presets=[],this.selectedPresetId="",this.medicineCatalog=null,this.layoutUpdatedHandler=()=>this.reloadLayoutFromStorage(),this.productsUpdatedHandler=()=>this.reloadLayoutFromStorage(),this.onPointerDown=n=>{if(this.updatePointer(n),this.raycaster.setFromCamera(this.pointer,this.camera),this.mode==="select"||this.mode==="delete"){if(n.button===2){this.openContextMenu(n);return}let r=this.raycaster.intersectObjects(this.collectMeshes(),!0);if(!r.length){this.detachTransform();return}let o=r[0].object,s=this.getLayoutIdFromObject(o);if(s&&this.auditOpen){this.setAuditTargetFromId(s);return}if(s&&this.boxMeshes.has(s)&&this.mode==="select"){this.selectMesh(this.boxMeshes.get(s)),this.openBoxManager(s);return}if(this.mode==="delete"){this.deleteMesh(o);return}this.selectMesh(o);return}if(this.mode==="drawWall"){let r=this.raycaster.intersectObject(this.floorMesh)[0];if(!r)return;this.drawActive=!0,this.controls.enabled=!1,this.drawStart.copy(r.point),this.wallDrawStartY=n.clientY,this.wallDrawHeight=.6,this.createPreviewWall();return}if(this.mode==="drawShelf"){let r=this.raycaster.intersectObjects([...this.wallMeshes.values()])[0];if(!r)return;this.drawActive=!0,this.controls.enabled=!1,this.drawTarget={mesh:r.object,type:"shelf"},this.drawStart.copy(r.point),this.createPreviewShelf();return}if(this.mode==="drawBox"){let r=this.raycaster.intersectObjects([...this.shelfMeshes.values()])[0];if(!r)return;this.drawActive=!0,this.controls.enabled=!1,this.drawTarget={mesh:r.object,type:"box"},this.drawStart.copy(r.point),this.createPreviewBox()}},this.onPointerMove=n=>{if(!(!this.drawActive||!this.previewMesh)){if(this.updatePointer(n),this.raycaster.setFromCamera(this.pointer,this.camera),this.mode==="drawWall"){let r=this.raycaster.intersectObject(this.floorMesh)[0];if(!r)return;this.updatePreviewWall(r.point,n);return}if(this.mode==="drawShelf"&&this.drawTarget){let r=this.raycaster.intersectObject(this.drawTarget.mesh)[0];if(!r)return;this.updatePreviewShelf(r.point);return}if(this.mode==="drawBox"&&this.drawTarget){let r=this.raycaster.intersectObject(this.drawTarget.mesh)[0];if(!r)return;this.updatePreviewBox(r.point)}}},this.onPointerUp=()=>{if(!(!this.drawActive||!this.previewMesh)){if(this.drawActive=!1,this.controls.enabled=!0,this.mode==="drawWall"){this.commitPreview("wall");return}if(this.mode==="drawShelf"){this.commitPreview("shelf");return}this.mode==="drawBox"&&this.commitPreview("box")}},this.onContextMenu=n=>{n.preventDefault(),this.openContextMenu(n)},this.onResize=()=>{if(!this.renderer||!this.camera)return;let n=this.renderer.domElement,r=n.clientWidth||800,o=n.clientHeight||600;this.camera.aspect=r/o,this.camera.updateProjectionMatrix(),this.renderer.setSize(r,o)},this.onKeyDownHandler=n=>{if(this.selectedMesh){if(n.key==="Delete"||n.key==="Backspace"){this.deleteMesh(this.selectedMesh),this.detachTransform();return}if(n.key==="n"||n.key==="N"){let r=this.selectedMesh.userData?.layoutId;if(!r)return;let o=this.layoutMap.get(r);if(!o||o.type!=="box")return;let s=window.prompt("Rename box",o.name||"Box")||"";if(!s.trim())return;o.name=s.trim();let a=this.boxLabels.get(r);if(a){a.parent?.remove(a);let c=this.createBoxLabel(this.getBoxDisplayName(o),o.size,this.getStockStatus(o),this.getLabelSide(o));this.selectedMesh.add(c),this.boxLabels.set(r,c)}this.saveLayout()}}},this.onWindowClick=()=>{this.contextMenu.visible&&(this.contextMenu.visible=!1)}}ngOnInit(){this.presets=this.buildPresets(),this.loadLayout(),window.addEventListener("buildaq-layout-updated",this.layoutUpdatedHandler),window.addEventListener("buildaq-products-updated",this.productsUpdatedHandler)}ngAfterViewInit(){this.initThree(),this.animate(),setTimeout(()=>this.onResize(),0)}ngOnDestroy(){this.animationFrameId!==null&&cancelAnimationFrame(this.animationFrameId),this.renderer?.dispose(),this.controls?.dispose(),this.transformControls?.dispose(),window.removeEventListener("resize",this.onResize),window.removeEventListener("keydown",this.onKeyDownHandler),window.removeEventListener("click",this.onWindowClick),window.removeEventListener("buildaq-layout-updated",this.layoutUpdatedHandler),window.removeEventListener("buildaq-products-updated",this.productsUpdatedHandler)}setMode(e){this.mode=e,this.detachTransform()}setTransformMode(e){this.transformMode=e,this.transformControls?.setMode(e)}clearLayout(){this.layoutItems=[],this.layoutMap.clear(),this.wallMeshes.forEach(e=>this.disposeMesh(e)),this.shelfMeshes.forEach(e=>this.disposeMesh(e)),this.boxMeshes.forEach(e=>this.disposeMesh(e)),this.boxLabels.forEach(e=>this.disposeObject(e)),this.tagFlags.forEach(e=>this.disposeObject(e)),this.wallMeshes.clear(),this.shelfMeshes.clear(),this.boxMeshes.clear(),this.boxLabels.clear(),this.tagFlags.clear(),this.saveLayout(),this.snackBar.open("Layout cleared","Close",{duration:2e3})}get filteredCatalog(){let e=this.picklistSearch.trim().toLowerCase();return e?this.productCatalog.filter(n=>n.name.toLowerCase().includes(e)||n.category.toLowerCase().includes(e)):this.productCatalog}applyPreset(){return oe(this,null,function*(){if(!this.selectedPresetId)return;if(this.selectedPresetId==="stocked-india-demo"){this.clearLayout();let n=yield this.buildStockedDemoLayout();this.layoutItems=n.map(r=>Nt(ge({},r),{id:this.generateId()})),this.layoutMap=new Map(this.layoutItems.map(r=>[r.id,r])),this.rebuildFromLayout(),this.saveLayout(),this.snackBar.open("Loaded preset: India Demo (Stocked)","Close",{duration:2500});return}let e=this.presets.find(n=>n.id===this.selectedPresetId);e&&(this.clearLayout(),this.layoutItems=e.items.map(n=>Nt(ge({},n),{id:this.generateId()})),this.layoutMap=new Map(this.layoutItems.map(n=>[n.id,n])),this.rebuildFromLayout(),this.saveLayout(),this.snackBar.open(`Loaded preset: ${e.name}`,"Close",{duration:2500}))})}initThree(){let e=this.sceneCanvasRef.nativeElement;this.scene=new $0,this.scene.background=new Ci("#f3f4f6");let n=e.clientWidth||800,r=e.clientHeight||600;this.camera=new mo(45,n/r,.1,200),this.camera.position.set(6,6,6),this.renderer=new AS({canvas:e,antialias:!0}),this.renderer.setSize(n,r),this.renderer.setPixelRatio(window.devicePixelRatio||1),this.controls=new RS(this.camera,this.renderer.domElement),this.controls.enableDamping=!0;let o=new K0(16777215,.8),s=new Z0(16777215,.6);s.position.set(5,10,5),this.scene.add(o,s),this.transformControls=new US(this.camera,this.renderer.domElement),this.transformControls.setMode(this.transformMode),this.transformControls.addEventListener("dragging-changed",c=>{this.controls.enabled=!c.value}),this.transformControls.addEventListener("objectChange",()=>{this.syncSelectedMesh()});let a=this.transformControls;if(a?.isObject3D)this.scene.add(this.transformControls);else{let c=a?.getHelper?.();c&&c.isObject3D&&this.scene.add(c)}this.renderer.domElement.addEventListener("pointerdown",this.onPointerDown),this.renderer.domElement.addEventListener("pointermove",this.onPointerMove),this.renderer.domElement.addEventListener("pointerup",this.onPointerUp),this.renderer.domElement.addEventListener("contextmenu",this.onContextMenu),window.addEventListener("resize",this.onResize),window.addEventListener("keydown",this.onKeyDownHandler),window.addEventListener("click",this.onWindowClick),this.updateFloor(),this.rebuildFromLayout()}updateFloor(){this.floorMesh&&(this.scene.remove(this.floorMesh),this.floorMesh.geometry.dispose()),this.gridHelper&&this.scene.remove(this.gridHelper);let e=new Ms(12,10),n=new ka({color:"#ffffff",side:po});this.floorMesh=new ze(e,n),this.floorMesh.rotation.x=-Math.PI/2,this.scene.add(this.floorMesh),this.gridHelper=new Q0(12,24,"#c7c7c7","#e2e2e2"),this.scene.add(this.gridHelper)}createPreviewWall(){let e=new qi(.1,this.wallDrawHeight||this.wallHeight,this.wallThickness),n=new ka({color:this.getActiveColor(),opacity:.6,transparent:!0});this.previewMesh=new ze(e,n);let r=this.wallDrawHeight||this.wallHeight;this.previewMesh.position.set(this.drawStart.x,r/2,this.drawStart.z),this.scene.add(this.previewMesh)}updatePreviewWall(e,n){let r=this.drawStart.distanceTo(e);if(r<.2)return;let o=this.wallDrawStartY-n.clientY,s=Math.min(6,Math.max(.4,Math.abs(o)*.02));this.wallDrawHeight=s;let a=new j().addVectors(this.drawStart,e).multiplyScalar(.5),c=Math.atan2(e.z-this.drawStart.z,e.x-this.drawStart.x);this.previewMesh.geometry.dispose(),this.previewMesh.geometry=new qi(r,s,this.wallThickness),this.previewMesh.position.set(a.x,s/2,a.z),this.previewMesh.rotation.set(0,-c,0)}getHitNormal(e,n){let r=e.worldToLocal(n.clone()),a=e.geometry.parameters.depth/2,c=new j(0,0,1);return Math.abs(r.z)>a*.5&&c.set(0,0,r.z>0?1:-1),c.applyEuler(e.rotation)}createPreviewShelf(){let e=new qi(.4,.4,this.shelfDepth),n=new ka({color:this.getActiveColor(),opacity:.6,transparent:!0});this.previewMesh=new ze(e,n),this.scene.add(this.previewMesh)}updatePreviewShelf(e){let n=this.drawTarget.mesh,r=n.worldToLocal(this.drawStart.clone()),o=n.worldToLocal(e.clone()),s=Math.abs(o.x-r.x),a=Math.abs(o.y-r.y);if(s<.3||a<.3)return;let c=this.drawTarget?.mesh?this.getHitNormal(this.drawTarget.mesh,e):new j(0,0,1),u=(new j().subVectors(this.camera.position,n.getWorldPosition(new j)).dot(c)>=0?1:-1)*this.shelfDepth/2,h=new j((r.x+o.x)/2,(r.y+o.y)/2,u),m=n.localToWorld(h.clone());this.previewMesh.geometry.dispose(),this.previewMesh.geometry=new qi(s,a,this.shelfDepth),this.previewMesh.position.copy(m),this.previewMesh.rotation.copy(n.rotation)}createPreviewBox(){let e=new qi(.2,.2,this.boxDepth),n=new ka({color:this.getActiveColor(),opacity:.7,transparent:!0});this.previewMesh=new ze(e,n),this.scene.add(this.previewMesh)}updatePreviewBox(e){let n=this.drawTarget.mesh,r=n.worldToLocal(this.drawStart.clone()),o=n.worldToLocal(e.clone()),s=Math.abs(o.x-r.x),a=Math.abs(o.y-r.y);if(s<.05||a<.05)return;let c=new j((r.x+o.x)/2,(r.y+o.y)/2,n.userData?.depth?n.userData.depth/2-this.boxDepth/2:this.boxDepth/2),l=n.localToWorld(c.clone());this.previewMesh.geometry.dispose(),this.previewMesh.geometry=new qi(s,a,this.boxDepth),this.previewMesh.position.copy(l),this.previewMesh.rotation.copy(n.rotation)}commitPreview(e){if(!this.previewMesh)return;let n=this.previewMesh;this.previewMesh=null,this.drawTarget=null;let r=this.generateId(),o=this.getActiveColor(e),s=e==="box"?this.promptBoxName():void 0;if(n.material=new ka({color:o}),n.userData={layoutId:r,layoutType:e,depth:e==="shelf"?this.shelfDepth:this.boxDepth},e==="wall"&&this.wallMeshes.set(r,n),e==="shelf"&&this.shelfMeshes.set(r,n),e==="box"&&this.boxMeshes.set(r,n),this.layoutItems.push({id:r,type:e,color:o,name:s,medicines:e==="box"?[]:void 0,minStock:e==="box"?0:void 0,maxStock:e==="box"?0:void 0,tag:e==="box"?"":void 0,position:{x:n.position.x,y:n.position.y,z:n.position.z},rotation:{x:n.rotation.x,y:n.rotation.y,z:n.rotation.z},size:this.extractSize(n)}),this.layoutMap.set(r,this.layoutItems[this.layoutItems.length-1]),e==="box"){let a=this.layoutItems[this.layoutItems.length-1].size,c=this.createBoxLabel(s||"Box",a,null,this.getLabelSide(this.layoutItems[this.layoutItems.length-1]));n.add(c),this.boxLabels.set(r,c)}this.saveLayout(),this.scene.add(n)}selectMesh(e){this.selectedMesh=e,this.transformControls.attach(e)}detachTransform(){this.transformControls.detach(),this.selectedMesh=null}deleteMesh(e){let n=e.userData?.layoutId;if(!n)return;this.disposeMesh(e),this.wallMeshes.delete(n),this.shelfMeshes.delete(n),this.boxMeshes.delete(n);let r=this.boxLabels.get(n);r&&(this.disposeObject(r),this.boxLabels.delete(n)),this.layoutItems=this.layoutItems.filter(o=>o.id!==n),this.layoutMap.delete(n),this.saveLayout()}collectMeshes(){return[...this.wallMeshes.values(),...this.shelfMeshes.values(),...this.boxMeshes.values()]}syncSelectedMesh(){if(!this.selectedMesh)return;let e=this.selectedMesh.userData?.layoutId;if(!e)return;let n=this.layoutMap.get(e);n&&(n.position={x:this.selectedMesh.position.x,y:this.selectedMesh.position.y,z:this.selectedMesh.position.z},n.rotation={x:this.selectedMesh.rotation.x,y:this.selectedMesh.rotation.y,z:this.selectedMesh.rotation.z},n.size=this.extractSize(this.selectedMesh),this.saveLayout())}openContextMenu(e){this.updatePointer(e),this.raycaster.setFromCamera(this.pointer,this.camera);let n=this.raycaster.intersectObjects([...this.boxMeshes.values()],!0);if(!n.length){this.contextMenu.visible=!1;return}let r=this.getLayoutIdFromObject(n[0].object);r&&(this.contextMenu={visible:!0,x:e.clientX,y:e.clientY,boxId:r})}renameSelectedBox(){if(!this.contextMenu.boxId)return;let e=this.layoutMap.get(this.contextMenu.boxId);if(!e||e.type!=="box")return;let n=window.prompt("Rename box",e.name||"Box")||"";n.trim()&&(e.name=n.trim(),this.updateBoxLabel(e.id),this.saveLayout(),this.contextMenu.visible=!1)}addMedicineToSelectedBox(){if(!this.contextMenu.boxId)return;let e=this.layoutMap.get(this.contextMenu.boxId);!e||e.type!=="box"||this.depositMedicineToSelectedBox()}depositMedicineToSelectedBox(){if(!this.contextMenu.boxId)return;let e=this.layoutMap.get(this.contextMenu.boxId);if(!e||e.type!=="box")return;let n=window.prompt("Medicine name?")||"";if(!n.trim())return;let r=window.prompt("Deposit quantity?","1")||"",o=Number(r);if(!Number.isFinite(o)||o<=0)return;e.medicines||(e.medicines=[]);let s=e.medicines.find(l=>l.name.toLowerCase()===n.trim().toLowerCase());s?s.qty+=o:e.medicines.push({name:n.trim(),qty:o});let a=e.capacity??0,c=this.getTotalQty(e);a>0&&c>a&&this.snackBar.open(`Over capacity by ${c-a}`,"Close",{duration:3e3}),this.updateBoxLabel(e.id),this.saveLayout(),this.contextMenu.visible=!1}withdrawMedicineFromSelectedBox(){if(!this.contextMenu.boxId)return;let e=this.layoutMap.get(this.contextMenu.boxId);if(!e||e.type!=="box")return;let n=window.prompt("Medicine name?")||"";if(!n.trim())return;let r=window.prompt("Withdraw quantity?","1")||"",o=Number(r);if(!Number.isFinite(o)||o<=0)return;e.medicines||(e.medicines=[]);let s=e.medicines.find(a=>a.name.toLowerCase()===n.trim().toLowerCase());s?s.qty-=o:e.medicines.push({name:n.trim(),qty:-o}),this.updateBoxLabel(e.id),this.saveLayout(),this.contextMenu.visible=!1}setCapacityForSelectedBox(){if(!this.contextMenu.boxId)return;let e=this.layoutMap.get(this.contextMenu.boxId);if(!e||e.type!=="box")return;let n=window.prompt("Set box capacity (total qty)?",String(e.capacity??""))||"",r=Number(n);!Number.isFinite(r)||r<0||(e.capacity=r,this.updateBoxLabel(e.id),this.saveLayout(),this.contextMenu.visible=!1)}viewMedicinesInSelectedBox(){if(!this.contextMenu.boxId)return;let e=this.layoutMap.get(this.contextMenu.boxId);if(!e||e.type!=="box")return;let n=e.medicines||[];if(n.length===0){this.snackBar.open("No medicines in this box yet","Close",{duration:2e3}),this.contextMenu.visible=!1;return}this.medicinePopup={visible:!0,boxName:e.name||"Box",medicines:n,capacity:e.capacity||0,boxId:e.id},this.contextMenu.visible=!1}closeMedicinePopup(){this.medicinePopup.visible=!1}openPicklist(){this.picklistOpen=!0,this.picklistActive=!1,this.picklistCurrentId=null,this.loadProductCatalog(),this.loadPicklist(),this.applyPicklistHighlights()}closePicklist(){this.picklistOpen=!1,this.picklistActive=!1,this.picklistCurrentId=null,this.clearPickHighlights()}setPickQty(e,n){let r=Number(n),o=this.pickQtyMap[e]||1;if(n==null||n===""||Number.isNaN(r)){this.pickQtyMap[e]=o;return}this.pickQtyMap[e]=Number.isFinite(r)&&r>0?r:1,this.picklistOpen&&this.applyPicklistHighlights()}getPickQty(e){return this.pickQtyMap[e]||1}addToPicklist(e){let n=this.getPickQty(e.id),r=this.picklistItems.find(o=>o.name.toLowerCase()===e.name.toLowerCase());r?(r.qty+=n,r.status="pending"):this.picklistItems.push({id:this.generateId(),name:e.name,qty:n,status:"pending",boxIds:[]}),this.updatePicklistMappings(),this.savePicklist(),this.applyPicklistHighlights()}startPicklist(){this.picklistItems.length&&(this.picklistActive=!0,this.picklistItems=this.picklistItems.map(e=>Nt(ge({},e),{status:e.status||"pending"})).sort((e,n)=>(e.tag||"").localeCompare(n.tag||"")||e.name.localeCompare(n.name)),this.picklistCurrentId=this.picklistItems.find(e=>e.status==="pending")?.id||null,this.applyPicklistHighlights())}focusPickItem(e){if(!e.boxIds.length)return;let n=e.boxIds.map(o=>this.boxMeshes.get(o)).filter(Boolean);if(!n.length)return;let r=n.reduce((o,s)=>o.add(s.position),new j).divideScalar(n.length);this.controls.target.copy(r),this.camera.position.set(r.x+3,r.y+3,r.z+3),this.controls.update()}togglePicked(e){let n=e.status==="picked"?"pending":"picked";n==="picked"&&!e.applied?(this.applyPicklistAdjustment(e,-e.qty),e.applied=!0):n==="pending"&&e.applied&&(this.applyPicklistAdjustment(e,e.qty),e.applied=!1),e.status=n,this.picklistCurrentId===e.id&&e.status==="picked"&&(this.picklistCurrentId=this.picklistItems.find(r=>r.status==="pending")?.id||null),this.savePicklist(),this.applyPicklistHighlights()}applyPicklistAdjustment(e,n){if(!e.boxIds.length||!Number.isFinite(n)||n===0)return;let r=e.name.trim().toLowerCase();if(!r)return;let o=Math.abs(n),s=n<0,a=e.boxIds.map(c=>this.layoutMap.get(c)).filter(c=>c!==void 0&&c.type==="box");if(s){if(a.forEach(c=>{if(!c.medicines||o<=0)return;let l=c.medicines.find(u=>u.name.toLowerCase()===r);if(!l||l.qty<=0)return;let d=Math.min(l.qty,o);l.qty-=d,o-=d}),o>0){let c=a[0];if(c){c.medicines||(c.medicines=[]);let l=c.medicines.find(d=>d.name.toLowerCase()===r);l?l.qty-=o:c.medicines.push({name:e.name,qty:-o})}}}else{let c=a[0];if(!c)return;c.medicines||(c.medicines=[]);let l=c.medicines.find(d=>d.name.toLowerCase()===r);l?l.qty+=o:c.medicines.push({name:e.name,qty:o})}a.forEach(c=>this.updateBoxLabel(c.id)),this.saveLayout()}clearPicklist(){this.picklistItems=[],this.picklistCurrentId=null,this.picklistActive=!1,this.savePicklist(),this.clearPickHighlights()}openAudit(){if(this.auditOpen=!0,this.auditResults=[],this.auditSummary={matched:0,missing:0,extra:0},this.selectedMesh){let e=this.getLayoutIdFromObject(this.selectedMesh);e&&this.setAuditTargetFromId(e)}}closeAudit(){this.auditOpen=!1}toggleHeatmap(){if(this.heatmapEnabled=!this.heatmapEnabled,this.heatmapEnabled){this.applyHeatmap();return}this.clearHeatmap()}clearAuditInput(){this.auditInput="",this.auditResults=[],this.auditSummary={matched:0,missing:0,extra:0},this.auditReport=""}openBoxManager(e){let n=this.layoutMap.get(e);!n||n.type!=="box"||(this.medicinePopup={visible:!0,boxName:n.name||"Box",medicines:n.medicines||[],capacity:n.capacity||0,boxId:e},this.medicineForm={name:n.name||"Box",capacity:n.capacity||0,minStock:n.minStock||0,maxStock:n.maxStock||0,tag:n.tag||"",medicineName:"",quantity:1,mode:"deposit"})}selectMedicine(e){this.medicineForm.medicineName=e}saveMedicinePopup(){let e=this.medicinePopup.boxId;if(!e)return;let n=this.layoutMap.get(e);if(!n||n.type!=="box")return;let r=this.medicineForm.name.trim();r&&(n.name=r);let o=Number(this.medicineForm.capacity);Number.isFinite(o)&&o>=0&&(n.capacity=o);let s=Number(this.medicineForm.minStock);Number.isFinite(s)&&s>=0&&(n.minStock=s);let a=Number(this.medicineForm.maxStock);Number.isFinite(a)&&a>=0&&(n.maxStock=a);let c=this.medicineForm.tag.trim();n.tag=c;let l=this.medicineForm.medicineName.trim(),d=Number(this.medicineForm.quantity);if(l&&Number.isFinite(d)&&d>0){n.medicines||(n.medicines=[]);let u=n.medicines.find(m=>m.name.toLowerCase()===l.toLowerCase()),h=this.medicineForm.mode==="deposit"?d:-d;u?u.qty+=h:n.medicines.push({name:l,qty:h})}this.updateBoxLabel(e),this.openBoxManager(e),this.saveLayout()}cancelMedicinePopup(){this.closeMedicinePopup()}updateQuantity(e){let n=Math.max(1,(Number(this.medicineForm.quantity)||1)+e);this.medicineForm.quantity=n}renameBoxAtEvent(e){this.updatePointer(e),this.raycaster.setFromCamera(this.pointer,this.camera);let n=this.raycaster.intersectObjects([...this.boxMeshes.values()],!0);if(!n.length)return;let r=n[0].object,o=this.getLayoutIdFromObject(r);if(!o)return;let s=this.layoutMap.get(o);if(!s||s.type!=="box")return;let a=window.prompt("Rename box",s.name||"Box")||"";a.trim()&&(s.name=a.trim(),this.updateBoxLabel(o),this.saveLayout())}getLayoutIdFromObject(e){let n=e;for(;n;){let r=n.userData?.layoutId;if(r)return r;n=n.parent}return null}updateBoxLabel(e){let n=this.layoutMap.get(e),r=this.boxMeshes.get(e);if(!n||!r)return;let o=this.boxLabels.get(e);o&&o.parent?.remove(o);let s=this.createBoxLabel(this.getBoxDisplayName(n),n.size,this.getStockStatus(n),this.getLabelSide(n));r.add(s),this.boxLabels.set(e,s)}getBoxDisplayName(e){let n=e.name||"Box",r=this.getTotalQty(e),o=e.capacity||0,s=(e.medicines||[]).some(a=>a.qty<0);return o>0?s?`${n} (${r}/${o})!`:`${n} (${r}/${o})`:r>0?`${n} (${r})${s?"!":""}`:n}getTotalQty(e){return(e.medicines||[]).reduce((n,r)=>n+r.qty,0)}getLabelSide(e){if(e.type!=="box")return"front";let n=e.position.x>.1,r=Math.abs((e.rotation.y||0)-Math.PI/2)<.2;return n&&r?"back":"front"}setAuditTargetFromId(e){let n=this.layoutMap.get(e);if(n){if(n.type==="box"){this.auditTargetIds=[e],this.auditTargetName=n.name||"Selected Box",this.computeAuditResults();return}if(n.type==="shelf"){let r=this.layoutItems.filter(c=>c.type==="box"),o={x:n.size.x/2+.6,y:n.size.y/2+.6,z:n.size.z/2+1.2},s=n.position,a=r.filter(c=>Math.abs(c.position.x-s.x)<=o.x&&Math.abs(c.position.y-s.y)<=o.y&&Math.abs(c.position.z-s.z)<=o.z);this.auditTargetIds=a.map(c=>c.id),this.auditTargetName=n.name||"Selected Shelf",this.computeAuditResults();return}this.auditTargetIds=[],this.auditTargetName="Select a shelf or box",this.auditResults=[]}}applyHeatmap(){this.clearHeatmap(),this.layoutItems.forEach(e=>{if(e.type!=="box")return;let n=this.boxMeshes.get(e.id);if(!n)return;let r=this.getCapacityRatio(e),o=this.getHeatmapColor(r),s=n.material;n.userData?.origColor||(n.userData.origColor=s.color.clone()),s.color.set(o)})}clearHeatmap(){this.boxMeshes.forEach(e=>{let n=e.material,r=e.userData?.origColor;r&&n.color.copy(r)})}getCapacityRatio(e){let n=e.capacity??0,r=this.getTotalQty(e);return n?Math.max(0,Math.min(1.5,r/n)):0}getHeatmapColor(e){return e<=.2?"#3b82f6":e<=.5?"#10b981":e<=.8?"#f59e0b":e<=1?"#ef4444":"#b91c1c"}runAudit(){this.computeAuditResults()}copyAuditReport(){this.auditReport||this.generateAuditReport(),this.auditReport&&navigator.clipboard?.writeText(this.auditReport).catch(()=>{})}downloadAuditReport(){if(this.auditReport||this.generateAuditReport(),!this.auditReport)return;let e=new Blob([this.auditReport],{type:"text/plain"}),n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=`audit-report-${new Date().toISOString().slice(0,10)}.txt`,n.click(),URL.revokeObjectURL(n.href)}generateAuditReport(){if(!this.auditResults.length){this.auditReport="";return}let e=[`Audit Report: ${new Date().toLocaleString()}`,`Target: ${this.auditTargetName}`,`Matched: ${this.auditSummary.matched}, Missing: ${this.auditSummary.missing}, Extra: ${this.auditSummary.extra}`,"","Name | Expected | Scanned | Diff | Status"];this.auditResults.forEach(n=>{e.push(`${n.name} | ${n.expected} | ${n.scanned} | ${n.diff} | ${n.status}`)}),this.auditReport=e.join(`
`)}computeAuditResults(){let e=new Map;this.auditTargetIds.forEach(d=>{let u=this.layoutMap.get(d);!u||u.type!=="box"||!u.medicines||u.medicines.forEach(h=>{let m=h.name.trim();m&&e.set(m,(e.get(m)||0)+h.qty)})});let n=new Map;this.auditInput.split(`
`).map(d=>d.trim()).filter(Boolean).forEach(d=>{let u=d.split(/[,|\t]/).map(p=>p.trim()).filter(Boolean);if(u.length===0)return;let h=u[0],m=1;if(u.length>1){let p=Number(u[1]);m=Number.isFinite(p)?p:1}else{let p=d.match(/(.+)\s+(\d+)$/);p&&(h=p[1].trim(),m=Number(p[2]))}n.set(h,(n.get(h)||0)+m)});let o=new Set([...e.keys(),...n.keys()]),s=[],a=0,c=0,l=0;o.forEach(d=>{let u=e.get(d)||0,h=n.get(d)||0,m=h-u,p="match";m<0&&(p="missing"),m>0&&(p="extra"),p==="match"&&(a+=1),p==="missing"&&(c+=1),p==="extra"&&(l+=1),s.push({name:d,expected:u,scanned:h,diff:m,status:p})}),this.auditResults=s.sort((d,u)=>d.name.localeCompare(u.name)),this.auditSummary={matched:a,missing:c,extra:l},this.generateAuditReport()}getStockStatus(e){let n=this.getTotalQty(e),r=e.minStock??0,o=e.maxStock??0;return r>0&&n<r?"low":o>0&&n>o?"high":null}extractSize(e){let r=e.geometry.parameters;if(r?.width&&r?.height&&r?.depth)return{x:r.width*e.scale.x,y:r.height*e.scale.y,z:r.depth*e.scale.z};let o=new vc().setFromObject(e),s=new j;return o.getSize(s),{x:s.x,y:s.y,z:s.z}}saveLayout(){localStorage.setItem(this.storageKey,JSON.stringify(this.layoutItems)),window.dispatchEvent(new Event("buildaq-layout-updated")),this.scene&&this.updateTagFlags()}savePicklist(){localStorage.setItem(this.picklistStorageKey,JSON.stringify(this.picklistItems))}loadPicklist(){let e=localStorage.getItem(this.picklistStorageKey);if(!e){this.picklistItems=[];return}try{let n=JSON.parse(e);this.picklistItems=n.map(r=>Nt(ge({},r),{status:r.status||"pending",applied:r.applied??r.status==="picked",boxIds:r.boxIds||[]}))}catch(n){console.warn("Failed to parse picklist",n),this.picklistItems=[]}this.updatePicklistMappings()}loadProductCatalog(){let e=localStorage.getItem(this.productStorageKey);if(!e){this.productCatalog=[];return}try{this.productCatalog=JSON.parse(e)}catch(n){console.warn("Failed to parse product catalog",n),this.productCatalog=[]}}loadLayout(){let e=localStorage.getItem(this.storageKey);if(e)try{let n=JSON.parse(e);this.layoutItems=n.map(r=>{if(r.type==="box"&&(r.minStock=Number.isFinite(r.minStock)?r.minStock:0,r.maxStock=Number.isFinite(r.maxStock)?r.maxStock:0,r.tag=typeof r.tag=="string"?r.tag:""),r.medicines&&r.medicines.length>0&&typeof r.medicines[0]=="string"){let o=r.medicines;return Nt(ge({},r),{medicines:o.map(s=>({name:s,qty:1}))})}return r}),this.layoutMap=new Map(n.map(r=>[r.id,r]))}catch(n){console.warn("Failed to parse saved layout",n)}}rebuildFromLayout(){this.layoutItems.forEach(e=>{let n=new qi(e.size.x,e.size.y,e.size.z),r=new ka({color:e.color||(e.type==="wall"?this.wallColor:e.type==="shelf"?this.shelfColor:this.boxColor)}),o=new ze(n,r);if(o.position.set(e.position.x,e.position.y,e.position.z),o.rotation.set(e.rotation.x,e.rotation.y,e.rotation.z),o.userData={layoutId:e.id,layoutType:e.type,depth:e.size.z},e.type==="wall"&&this.wallMeshes.set(e.id,o),e.type==="shelf"&&this.shelfMeshes.set(e.id,o),e.type==="box"&&this.boxMeshes.set(e.id,o),this.scene.add(o),e.type==="box"){let s=this.createBoxLabel(this.getBoxDisplayName(e),e.size,this.getStockStatus(e),this.getLabelSide(e));o.add(s),this.boxLabels.set(e.id,s)}}),this.updateTagFlags(),this.applyPicklistHighlights()}reloadLayoutFromStorage(){this.layoutItems=[],this.layoutMap.clear(),this.wallMeshes.forEach(e=>this.disposeMesh(e)),this.shelfMeshes.forEach(e=>this.disposeMesh(e)),this.boxMeshes.forEach(e=>this.disposeMesh(e)),this.boxLabels.forEach(e=>this.disposeObject(e)),this.tagFlags.forEach(e=>this.disposeObject(e)),this.wallMeshes.clear(),this.shelfMeshes.clear(),this.boxMeshes.clear(),this.boxLabels.clear(),this.tagFlags.clear(),this.loadLayout(),this.scene&&this.rebuildFromLayout(),this.applyPicklistHighlights(),this.heatmapEnabled&&this.applyHeatmap()}updatePicklistMappings(){this.picklistItems=this.picklistItems.map(e=>{let n=this.findBoxesForProduct(e.name),r=n.length?this.layoutMap.get(n[0])?.tag:void 0;return Nt(ge({},e),{boxIds:n,tag:r})})}findBoxesForProduct(e){let n=e.trim().toLowerCase(),r=[];return this.layoutItems.forEach(o=>{o.type!=="box"||!o.medicines||o.medicines.some(s=>s.name.toLowerCase()===n)&&r.push(o.id)}),r}applyPicklistHighlights(){this.clearPickHighlights(),!(!this.picklistOpen||!this.picklistItems.length)&&this.picklistItems.forEach(e=>{let n=e.status==="picked"?"#94a3b8":"#38bdf8";if(this.picklistCurrentId===e.id){this.highlightBoxes(e.boxIds,"#f59e0b",1.6,"PICK");return}this.highlightBoxes(e.boxIds,n,e.status==="picked"?.6:1.1,e.status==="picked"?"DONE":"PICK")})}clearPickHighlights(){this.boxMeshes.forEach(e=>{let n=e.material;if(!n?.emissive)return;let r=e.userData?.origEmissive,o=e.userData?.origEmissiveIntensity;r?(n.emissive.copy(r),n.emissiveIntensity=o??0):(n.emissive.set("#000000"),n.emissiveIntensity=0);let s=e.userData?.pickOutline;if(s){e.remove(s),s.geometry.dispose();let c=s.material;Array.isArray(c)?c.forEach(l=>l.dispose()):c.dispose(),delete e.userData.pickOutline}let a=e.userData?.pickBadge;if(a){e.remove(a),a.geometry.dispose();let c=a.material;Array.isArray(c)?c.forEach(l=>l.dispose()):c.dispose(),delete e.userData.pickBadge}})}highlightBoxes(e,n,r,o="PICK"){e.forEach(s=>{let a=this.boxMeshes.get(s);if(!a)return;let c=a.material;if(!c)return;a.userData?.origEmissive||(a.userData.origEmissive=c.emissive.clone(),a.userData.origEmissiveIntensity=c.emissiveIntensity),c.emissive.set(n),c.emissiveIntensity=r;let l=this.layoutMap.get(s);if(!l)return;let d=a.userData?.pickOutline;if(d)d.material.color.set(n);else{let h=this.createPickOutline(l.size,n);a.add(h),a.userData.pickOutline=h}let u=a.userData?.pickBadge;if(u){let h=u.material;h.map&&h.map.dispose();let m=this.createPickBadge(l.size,this.getLabelSide(l),o,n);h.map=m.material.map||null,h.needsUpdate=!0;let{position:p,rotation:_,scale:f}=m;u.position.copy(p),u.rotation.copy(_),u.scale.copy(f),m.geometry.dispose(),m.material.dispose()}else{let h=this.getLabelSide(l),m=this.createPickBadge(l.size,h,o,n);a.add(m),a.userData.pickBadge=m}})}createPickOutline(e,n){let r=new W0(new qi(e.x,e.y,e.z)),o=new Al({color:n,transparent:!0,opacity:.9}),s=new vf(r,o);return s.renderOrder=12,s.scale.set(1.03,1.03,1.03),s}createPickBadge(e,n,r,o){let s=document.createElement("canvas");s.width=256,s.height=128;let a=s.getContext("2d");a&&(a.fillStyle=o,a.fillRect(0,0,s.width,s.height),a.strokeStyle="#ffffff",a.lineWidth=6,a.strokeRect(6,6,s.width-12,s.height-12),a.fillStyle="#0f172a",a.font="bold 54px Arial",a.textAlign="center",a.textBaseline="middle",a.fillText(r,s.width/2,s.height/2+4));let c=new Fh(s),l=new qs({map:c,transparent:!0,depthTest:!0}),d=Math.min(e.x*.5,.7),u=Math.min(e.y*.22,.25),h=new Ms(d,u),m=new ze(h,l),p=e.z/2+.015,_=e.y/2-u/2-.05,f=-e.x/2+d/2+.06;return m.position.set(f,_,n==="front"?p:-p),m.rotation.y=n==="front"?0:Math.PI,m.renderOrder=13,m}updatePointer(e){let n=this.renderer.domElement.getBoundingClientRect();this.pointer.x=(e.clientX-n.left)/n.width*2-1,this.pointer.y=-((e.clientY-n.top)/n.height)*2+1}animate(){this.animationFrameId=requestAnimationFrame(()=>this.animate()),this.controls?.update(),this.renderer?.render(this.scene,this.camera)}disposeMesh(e){this.scene.remove(e),e.geometry.dispose();let n=e.material;Array.isArray(n)?n.forEach(r=>r.dispose()):n.dispose()}disposeObject(e){e.traverse(n=>{let r=n;r.geometry&&r.geometry.dispose(),r.material&&(Array.isArray(r.material)?r.material.forEach(o=>o.dispose()):r.material.dispose())})}generateId(){return"_"+Math.random().toString(36).slice(2,10)}buildPresets(){return[{id:"stocked-india-demo",name:"India Demo (Stocked)",items:[]},{id:"compact-pharmacy",name:"Compact Pharmacy",items:this.buildPharmacyLayout({roomWidth:10,roomDepth:8,shelfHeight:1.3,shelfDepth:.5,boxRows:2,boxCols:8,deskFacing:0})},{id:"wide-pharmacy",name:"Wide Pharmacy",items:this.buildPharmacyLayout({roomWidth:12,roomDepth:9,shelfHeight:1.4,shelfDepth:.55,boxRows:2,boxCols:10,deskFacing:Math.PI})},{id:"corner-pharmacy",name:"Corner Pharmacy",items:this.buildPharmacyLayout({roomWidth:9,roomDepth:7,shelfHeight:1.2,shelfDepth:.5,boxRows:2,boxCols:7,deskFacing:Math.PI/2})},{id:"front-desk-east",name:"Front Desk East",items:this.buildPharmacyLayout({roomWidth:11,roomDepth:8,shelfHeight:1.3,shelfDepth:.5,boxRows:2,boxCols:9,deskFacing:-Math.PI/2})},{id:"central-desk-north",name:"Central Desk North",items:this.buildPharmacyLayout({roomWidth:10,roomDepth:9,shelfHeight:1.35,shelfDepth:.55,boxRows:2,boxCols:8,deskFacing:0,deskPosition:{x:.8,z:.6}})},{id:"desk-west-ne",name:"Desk West - NE",items:this.buildPharmacyLayout({roomWidth:10,roomDepth:8,shelfHeight:1.3,shelfDepth:.5,boxRows:2,boxCols:8,deskFacing:Math.PI,deskPosition:{x:2,z:-2}})},{id:"desk-west-se",name:"Desk West - SE",items:this.buildPharmacyLayout({roomWidth:10,roomDepth:8,shelfHeight:1.3,shelfDepth:.5,boxRows:2,boxCols:8,deskFacing:Math.PI,deskPosition:{x:2,z:2}})},{id:"desk-south-east",name:"Desk South - East Corner",items:this.buildPharmacyLayout({roomWidth:10,roomDepth:8,shelfHeight:1.3,shelfDepth:.5,boxRows:2,boxCols:8,deskFacing:Math.PI/2,deskPosition:{x:2.6,z:3}})},{id:"desk-south-west",name:"Desk South - West Corner",items:this.buildPharmacyLayout({roomWidth:10,roomDepth:8,shelfHeight:1.3,shelfDepth:.5,boxRows:2,boxCols:8,deskFacing:-Math.PI/2,deskPosition:{x:-2.6,z:3}})},{id:"desk-south-center",name:"Desk South - Center",items:this.buildPharmacyLayout({roomWidth:10,roomDepth:8,shelfHeight:1.3,shelfDepth:.5,boxRows:2,boxCols:8,deskFacing:Math.PI,deskPosition:{x:0,z:3}})}]}buildPharmacyLayout(e){let o="#6b7280",s="#475569",a="#111827",c=e.roomWidth/2,l=e.roomDepth/2,d={id:this.generateId(),type:"wall",color:o,position:{x:0,y:3/2,z:-l},rotation:{x:0,y:0,z:0},size:{x:e.roomWidth,y:3,z:.1}},u={id:this.generateId(),type:"wall",color:o,position:{x:-c,y:3/2,z:0},rotation:{x:0,y:Math.PI/2,z:0},size:{x:e.roomDepth,y:3,z:.1}},h={id:this.generateId(),type:"wall",color:o,position:{x:c,y:3/2,z:0},rotation:{x:0,y:Math.PI/2,z:0},size:{x:e.roomDepth,y:3,z:.1}},m={id:this.generateId(),type:"shelf",color:s,name:"Back Shelf",position:{x:0,y:e.shelfHeight/2+.4,z:-l+e.shelfDepth/2+.05},rotation:{x:0,y:0,z:0},size:{x:e.roomWidth-1,y:e.shelfHeight,z:e.shelfDepth}},p={id:this.generateId(),type:"shelf",color:s,name:"Left Shelf",position:{x:-c+e.shelfDepth/2+.05,y:e.shelfHeight/2+.4,z:0},rotation:{x:0,y:Math.PI/2,z:0},size:{x:e.roomDepth-1,y:e.shelfHeight,z:e.shelfDepth}},_={id:this.generateId(),type:"shelf",color:s,name:"Right Shelf",position:{x:c-e.shelfDepth/2-.05,y:e.shelfHeight/2+.4,z:0},rotation:{x:0,y:Math.PI/2,z:0},size:{x:e.roomDepth-1,y:e.shelfHeight,z:e.shelfDepth}},f=[d,u,h,m,p,_],g=(S,C,E)=>{let N=S.size.x,R=S.size.y,B=S.size.z,z=N/e.boxCols,T=R/e.boxRows,O=.22;for(let U=0;U<e.boxRows;U+=1)for(let X=0;X<e.boxCols;X+=1){let ee=`${String.fromCharCode(65+U)}${X+1}`,de=-N/2+z/2+X*z,se=-R/2+T/2+U*T,ue={x:S.position.x,y:S.position.y+se,z:S.position.z};C==="north"?ue={x:S.position.x+de,y:S.position.y+se,z:S.position.z+B/2+O/2}:C==="west"?ue={x:S.position.x+B/2+O/2,y:S.position.y+se,z:S.position.z+de}:ue={x:S.position.x-B/2-O/2,y:S.position.y+se,z:S.position.z+de},f.push({id:this.generateId(),type:"box",color:a,name:`${E}-${ee}`,position:ue,rotation:{x:0,y:S.rotation.y,z:0},size:{x:z*.9,y:T*.85,z:O}})}};return g(m,"north","B"),g(p,"west","L"),g(_,"east","R"),f.push({id:this.generateId(),type:"box",color:"#0f172a",name:"Fridge",position:{x:c-.8,y:1.1,z:l-1.2},rotation:{x:0,y:Math.PI,z:0},size:{x:.8,y:2.2,z:.7}},{id:this.generateId(),type:"box",color:"#7c3e1d",name:"Counter",position:{x:0,y:.5,z:-l+2.2},rotation:{x:0,y:0,z:0},size:{x:2.8,y:1,z:.9}},{id:this.generateId(),type:"box",color:"#8b5e3c",name:"Desk",position:{x:e.deskPosition?.x??-1.2,y:.38,z:e.deskPosition?.z??.8},rotation:{x:0,y:e.deskFacing,z:0},size:{x:1.4,y:.75,z:.7}},{id:this.generateId(),type:"box",color:"#1f2937",name:"Chair Seat",position:{x:(e.deskPosition?.x??-1.2)+Math.sin(e.deskFacing)*.6,y:.42,z:(e.deskPosition?.z??.8)+Math.cos(e.deskFacing)*.6},rotation:{x:0,y:e.deskFacing,z:0},size:{x:.55,y:.12,z:.55}},{id:this.generateId(),type:"box",color:"#111827",name:"Chair Back",position:{x:(e.deskPosition?.x??-1.2)+Math.sin(e.deskFacing)*.75,y:.75,z:(e.deskPosition?.z??.8)+Math.cos(e.deskFacing)*.75},rotation:{x:0,y:e.deskFacing,z:0},size:{x:.55,y:.6,z:.12}},{id:this.generateId(),type:"box",color:"#0f172a",name:"Chair Base",position:{x:(e.deskPosition?.x??-1.2)+Math.sin(e.deskFacing)*.6,y:.2,z:(e.deskPosition?.z??.8)+Math.cos(e.deskFacing)*.6},rotation:{x:0,y:e.deskFacing,z:0},size:{x:.45,y:.08,z:.45}}),f}buildStockedDemoLayout(){return oe(this,null,function*(){let e=this.buildPharmacyLayout({roomWidth:12,roomDepth:9,shelfHeight:1.35,shelfDepth:.55,boxRows:2,boxCols:10,deskFacing:Math.PI,deskPosition:{x:-2.2,z:2.8}}),n=yield this.loadMedicineCatalog();if(n.length===0)return e;this.ensureProductCatalogSeeded(n);let r=e.filter(o=>o.type==="box"&&o.name&&(o.name.startsWith("B-")||o.name.startsWith("L-")||o.name.startsWith("R-")));return this.seedBoxMedicines(r,n),e})}seedBoxMedicines(e,n){let r=e.sort((c,l)=>(c.name||"").localeCompare(l.name||"")),o=0,s=6,a=6;r.forEach((c,l)=>{let d=l<s,u=l>=r.length-a,h=d?8:u?2:5,m=[],p=new Map;for(let g=0;g<h&&o<n.length;g+=1,o+=1){let S=n[o],C=this.seedMedicineQty(d,u,g,o);if(m.push({name:S.name,qty:C}),S.category){let E=this.normalizeTag(S.category);p.set(E,(p.get(E)||0)+1)}}c.medicines=m,c.tag=this.pickDominantTag(p,l);let _=d?70:u?30:40,f=d?140:u?80:120;c.minStock=_,c.maxStock=f,c.capacity=f})}pickDominantTag(e,n){if(e.size>0)return[...e.entries()].sort((o,s)=>s[1]-o[1])[0][0];let r=["General","Pain Relief","Gastro","Antibiotics","Respiratory","Vitamins","Dermatology"];return r[n%r.length]}normalizeTag(e){let n=e.toLowerCase();return n.includes("pain")||n.includes("analges")?"Pain Relief":n.includes("antibiotic")?"Antibiotics":n.includes("gastro")||n.includes("ulcer")||n.includes("acidity")?"Gastro":n.includes("respir")||n.includes("cough")||n.includes("cold")||n.includes("asthma")?"Respiratory":n.includes("cardiac")||n.includes("heart")||n.includes("hypertension")?"Cardiac":n.includes("diabet")?"Diabetes":n.includes("derma")||n.includes("skin")?"Dermatology":n.includes("vitamin")||n.includes("supplement")||n.includes("nutrition")?"Vitamins":n.includes("women")||n.includes("pregnan")||n.includes("gyn")?"Women's Health":n.includes("baby")||n.includes("pediatric")?"Baby Care":n.includes("ent")||n.includes("ophthal")||n.includes("eye")||n.includes("ear")?"ENT/Ophthalmic":n.includes("dental")?"Dental":n.includes("wound")||n.includes("antiseptic")?"Wound Care":n.includes("ayur")?"Ayurveda":n.includes("homeo")?"Homeopathy":n.includes("disposable")||n.includes("syringe")?"Disposables":"General"}seedMedicineQty(e,n,r,o){return e?18+r%4*6:n?4+r%2*3:8+o%6*2}loadMedicineCatalog(){return oe(this,null,function*(){if(this.medicineCatalog)return this.medicineCatalog;try{let e=yield fetch("/assets/data/medicine-catalog-300.json"),n=e.ok?e:yield fetch("assets/data/medicine-catalog-300.json");if(!n.ok)throw new Error("Failed to load medicine catalog");let r=yield n.json();return this.medicineCatalog=r.filter(o=>o?.name),this.medicineCatalog}catch(e){return console.warn("Unable to load medicine catalog",e),this.medicineCatalog=[],this.medicineCatalog}})}ensureProductCatalogSeeded(e){let n=localStorage.getItem(this.productStorageKey);if(n)try{let o=JSON.parse(n);if(Array.isArray(o)&&o.length>0)return}catch{}let r=e.map((o,s)=>({id:s+1,name:o.name,category:o.category||"Medicine",quantity:50}));localStorage.setItem(this.productStorageKey,JSON.stringify(r)),window.dispatchEvent(new Event("buildaq-products-updated"))}promptBoxName(){return"Box"}createBoxLabel(e,n,r,o="front"){let s=document.createElement("canvas");s.width=512,s.height=512;let a=s.getContext("2d");if(a){let p=r==="low"?"#ef4444":r==="high"?"#22c55e":"#ffffff";if(a.fillStyle="rgba(0, 0, 0, 0.92)",a.fillRect(0,0,s.width,s.height),a.strokeStyle=p,a.lineWidth=6,a.strokeRect(8,8,s.width-16,s.height-16),r){a.fillStyle=p,a.fillRect(8,8,s.width-16,22),a.beginPath();let f=28,g=s.width-36,S=19;r==="low"?(a.moveTo(g,S+f/2),a.lineTo(g-f/2,S-f/2),a.lineTo(g+f/2,S-f/2)):(a.moveTo(g,S-f/2),a.lineTo(g-f/2,S+f/2),a.lineTo(g+f/2,S+f/2)),a.closePath(),a.fillStyle="#0f172a",a.fill()}a.fillStyle="#ffffff";let _=140;for(a.font=`bold ${_}px Arial`,a.textAlign="center",a.textBaseline="middle";a.measureText(e).width>s.width-40&&_>40;)_-=8,a.font=`bold ${_}px Arial`;a.fillText(e,s.width/2,s.height/2)}let c=new Fh(s);c.minFilter=Yn,c.magFilter=Yn;let l=new qs({map:c,transparent:!0});l.side=po;let d=Math.max(.1,n.x*.98),u=Math.max(.1,n.y*.98),h=new gc,m=new ze(new Ms(d,u),l);if(m.position.set(0,0,(o==="front"?1:-1)*(n.z/2+.01)),o==="back"&&(m.rotation.y=Math.PI),h.add(m),e.toLowerCase().includes("desk")){let p=new ze(new Ms(d,u),l);p.position.set(0,0,-n.z/2-.01),p.rotation.y=Math.PI,h.add(p)}return h}updateTagFlags(){this.tagFlags.forEach(r=>this.disposeObject(r)),this.tagFlags.clear();let e=this.layoutItems.filter(r=>r.type==="box"&&r.tag&&r.tag.trim());if(e.length===0)return;let n=new Map;e.forEach(r=>{let o=r.tag.trim();n.has(o)||n.set(o,[]),n.get(o).push(r)}),n.forEach((r,o)=>{let s=r.reduce((m,p)=>(m.x+=p.position.x,m.z+=p.position.z,m.y=Math.max(m.y,p.position.y+p.size.y/2),m),{x:0,y:0,z:0}),a=r.length||1,c=s.x/a,l=s.z/a,d=s.y+.6,u=this.createTagFlag(o);u.position.set(c,d,l);let h=Math.atan2(0-c,0-l);u.rotation.y=h,this.scene.add(u),this.tagFlags.set(o,u)})}createTagFlag(e){let n=document.createElement("canvas");n.width=512,n.height=256;let r=n.getContext("2d");if(r){r.fillStyle="#0f172a",r.fillRect(0,0,n.width,n.height),r.strokeStyle="#38bdf8",r.lineWidth=8,r.strokeRect(8,8,n.width-16,n.height-16),r.fillStyle="#f8fafc";let u=96;for(r.font=`bold ${u}px Arial`,r.textAlign="center",r.textBaseline="middle";r.measureText(e).width>n.width-40&&u>32;)u-=6,r.font=`bold ${u}px Arial`;r.fillText(e,n.width/2,n.height/2)}let o=new Fh(n);o.minFilter=Yn,o.magFilter=Yn;let s=new qs({map:o,side:po}),a=new ze(new Ms(1.2,.45),s);a.position.set(0,.45,.05);let c=new ka({color:"#475569"}),l=new ze(new _r(.03,.03,.6,16),c);l.position.set(-.55,.2,0);let d=new gc;return d.add(l,a),d}getActiveColor(e){let n=e||(this.mode==="drawWall"?"wall":this.mode==="drawShelf"?"shelf":"box");return n==="wall"?this.wallColor:n==="shelf"?this.shelfColor:this.boxColor}static{this.\u0275fac=function(n){return new(n||i)(F(Xh))}}static{this.\u0275cmp=rt({type:i,selectors:[["app-visual-space-mapper"]],viewQuery:function(n,r){if(n&1&&Lt(WEe,5),n&2){let o;Be(o=Ve())&&(r.sceneCanvasRef=o.first)}},decls:73,vars:21,consts:[["sceneCanvas",""],[1,"visual-mapper"],[1,"toolbar"],[1,"tool-group"],["type","button","mat-stroked-button","",3,"click","color"],[1,"tool-group","color-picker"],["type","color",3,"ngModel","ngModelChange",4,"ngIf"],["type","button","mat-stroked-button","","color","warn",3,"click"],["type","button","mat-stroked-button","","color","primary",3,"click"],[1,"preset-label"],[3,"ngModelChange","ngModel"],["value",""],[3,"value",4,"ngFor","ngForOf"],["type","button","mat-stroked-button","",3,"click","disabled"],[1,"viewport"],[1,"scene-canvas"],[1,"hint"],["class","context-menu",3,"left","top","click",4,"ngIf"],["class","modal-backdrop",3,"click",4,"ngIf"],["class","medicine-modal",4,"ngIf"],["class","picklist-drawer",4,"ngIf"],["class","audit-drawer",4,"ngIf"],["aria-label","Direction compass",1,"direction-compass"],[1,"compass-ring"],[1,"compass-label","north"],[1,"compass-label","east"],[1,"compass-label","south"],[1,"compass-label","west"],["class","heatmap-legend",4,"ngIf"],["type","color",3,"ngModelChange","ngModel"],[3,"value"],[1,"context-menu",3,"click"],["type","button",3,"click"],[1,"modal-backdrop",3,"click"],[1,"medicine-modal"],[1,"medicine-modal-header"],[1,"medicine-modal-title"],["class","capacity-tag",4,"ngIf"],["type","button",1,"close-btn",3,"click"],[1,"medicine-modal-actions"],["type","text",3,"ngModelChange","ngModel"],["type","number","min","0",3,"ngModelChange","ngModel"],[1,"medicine-qty-group"],[1,"medicine-field"],[1,"qty-field"],[1,"qty-row"],[1,"qty-input"],["type","number","min","1",3,"ngModelChange","ngModel"],[1,"mode-toggle"],[1,"action-row"],["type","button",1,"save-btn",3,"click"],[1,"medicine-modal-body"],["class","medicine-row",3,"active","click",4,"ngFor","ngForOf"],[1,"capacity-tag"],[1,"medicine-row",3,"click"],[1,"medicine-name"],[1,"medicine-qty"],["class","medicine-alert",4,"ngIf"],[1,"medicine-alert"],[1,"picklist-drawer"],[1,"picklist-header"],[1,"picklist-title"],[1,"picklist-subtitle"],[1,"picklist-body"],[1,"picklist-catalog"],[1,"picklist-search"],["type","text","placeholder","Search products",3,"ngModelChange","ngModel"],[1,"picklist-catalog-list"],["class","picklist-row",4,"ngFor","ngForOf"],["class","picklist-empty",4,"ngIf"],[1,"picklist-items"],[1,"picklist-actions"],["type","button",1,"picklist-start",3,"click","disabled"],["type","button",3,"click","disabled"],["class","picklist-item",3,"active","picked","click",4,"ngFor","ngForOf"],[1,"picklist-row"],[1,"picklist-info"],[1,"picklist-name"],[1,"picklist-meta"],["type","number","min","1",1,"picklist-qty",3,"ngModelChange","ngModel"],["type","button",1,"picklist-add",3,"click"],[1,"picklist-empty"],[1,"picklist-item",3,"click"],[1,"picklist-item-info"],[1,"picklist-item-name"],[1,"picklist-item-meta"],["type","button",1,"picklist-toggle",3,"click"],[1,"audit-drawer"],[1,"audit-header"],[1,"audit-title"],[1,"audit-subtitle"],[1,"audit-body"],[1,"audit-hint"],[1,"audit-label"],["rows","6","placeholder","Medicine Name, qty",3,"ngModelChange","ngModel"],[1,"audit-actions"],["type","button",1,"audit-run",3,"click","disabled"],["class","audit-summary",4,"ngIf"],[1,"audit-results"],["class","audit-row",3,"missing","extra",4,"ngFor","ngForOf"],["class","audit-empty",4,"ngIf"],[1,"audit-summary"],[1,"audit-row"],[1,"audit-name"],[1,"audit-values"],[1,"audit-empty"],[1,"heatmap-legend"],[1,"heatmap-swatch",2,"background","#3b82f6"],[1,"heatmap-swatch",2,"background","#10b981"],[1,"heatmap-swatch",2,"background","#f59e0b"],[1,"heatmap-swatch",2,"background","#ef4444"],[1,"heatmap-swatch",2,"background","#b91c1c"]],template:function(n,r){if(n&1){let o=ot();b(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),ne("click",function(){return Q(o),J(r.setMode("drawWall"))}),M(4," Draw Wall "),v(),b(5,"button",4),ne("click",function(){return Q(o),J(r.setMode("drawShelf"))}),M(6," Draw Shelf "),v(),b(7,"button",4),ne("click",function(){return Q(o),J(r.setMode("drawBox"))}),M(8," Draw Box "),v(),b(9,"button",4),ne("click",function(){return Q(o),J(r.setMode("select"))}),M(10," Select "),v(),b(11,"button",4),ne("click",function(){return Q(o),J(r.setMode("delete"))}),M(12," Delete "),v()(),b(13,"div",5)(14,"label"),M(15," Color "),ve(16,qEe,1,1,"input",6)(17,XEe,1,1,"input",6)(18,YEe,1,1,"input",6),v()(),b(19,"div",3)(20,"button",4),ne("click",function(){return Q(o),J(r.setTransformMode("translate"))}),M(21," Move "),v(),b(22,"button",4),ne("click",function(){return Q(o),J(r.setTransformMode("rotate"))}),M(23," Rotate "),v(),b(24,"button",4),ne("click",function(){return Q(o),J(r.setTransformMode("scale"))}),M(25," Scale "),v()(),b(26,"div",3)(27,"button",7),ne("click",function(){return Q(o),J(r.clearLayout())}),M(28," Clear Layout "),v()(),b(29,"div",3)(30,"button",8),ne("click",function(){return Q(o),J(r.openPicklist())}),M(31," Picklist "),v()(),b(32,"div",3)(33,"button",4),ne("click",function(){return Q(o),J(r.toggleHeatmap())}),M(34," Heatmap "),v()(),b(35,"div",3)(36,"button",8),ne("click",function(){return Q(o),J(r.openAudit())}),M(37," Audit "),v()(),b(38,"div",3)(39,"label",9),M(40," Preset "),b(41,"select",10),hi("ngModelChange",function(a){return Q(o),gi(r.selectedPresetId,a)||(r.selectedPresetId=a),J(a)}),b(42,"option",11),M(43,"Choose..."),v(),ve(44,ZEe,2,2,"option",12),v()(),b(45,"button",13),ne("click",function(){return Q(o),J(r.applyPreset())}),M(46," Import "),v()()(),b(47,"div",14),Fe(48,"canvas",15,0),b(50,"div",16)(51,"div"),M(52,"Wall: click-drag on floor"),v(),b(53,"div"),M(54,"Shelf: click-drag on a wall"),v(),b(55,"div"),M(56,"Box: click-drag on a shelf"),v()(),ve(57,KEe,11,4,"div",17)(58,QEe,1,0,"div",18)(59,iTe,48,14,"div",19)(60,aTe,25,7,"div",20)(61,uTe,29,8,"div",21),b(62,"div",22),Fe(63,"div",23),b(64,"div",24),M(65,"N"),v(),b(66,"div",25),M(67,"E"),v(),b(68,"div",26),M(69,"S"),v(),b(70,"div",27),M(71,"W"),v()(),ve(72,hTe,16,0,"div",28),v()()}n&2&&(P(3),q("color",r.mode==="drawWall"?"primary":""),P(2),q("color",r.mode==="drawShelf"?"primary":""),P(2),q("color",r.mode==="drawBox"?"primary":""),P(2),q("color",r.mode==="select"?"primary":""),P(2),q("color",r.mode==="delete"?"warn":""),P(5),q("ngIf",r.mode==="drawWall"),P(),q("ngIf",r.mode==="drawShelf"),P(),q("ngIf",r.mode==="drawBox"),P(2),q("color",r.transformMode==="translate"?"accent":""),P(2),q("color",r.transformMode==="rotate"?"accent":""),P(2),q("color",r.transformMode==="scale"?"accent":""),P(9),q("color",r.heatmapEnabled?"accent":""),P(8),ui("ngModel",r.selectedPresetId),P(3),q("ngForOf",r.presets),P(),q("disabled",!r.selectedPresetId),P(12),q("ngIf",r.contextMenu.visible),P(),q("ngIf",r.medicinePopup.visible),P(),q("ngIf",r.medicinePopup.visible),P(),q("ngIf",r.picklistOpen),P(),q("ngIf",r.auditOpen),P(11),q("ngIf",r.heatmapEnabled))},dependencies:[Ya,As,d5,h5,Ps,sa,Ly,Za,Wc,Gc,pc],styles:[".visual-mapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px;background:#f3f4f6}.toolbar[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:12px;align-items:center;background:#fff;border-radius:12px;padding:12px;box-shadow:0 8px 24px #0f172a14}.tool-group[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:center}.color-picker[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#1f2937}.color-picker[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{width:36px;height:32px;border:none;padding:0;background:transparent;cursor:pointer}.preset-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:13px;color:#1f2937}.preset-label[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{height:32px;border-radius:6px;border:1px solid #d1d5db;padding:0 8px;background:#fff}.viewport[_ngcontent-%COMP%]{position:relative;width:100%;height:70vh;border-radius:16px;overflow:hidden;background:radial-gradient(circle at top,#fff,#e5e7eb);box-shadow:0 16px 30px #0f172a1f}.scene-canvas[_ngcontent-%COMP%]{width:100%;height:100%;display:block}.hint[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:16px;background:#0f172ad9;color:#f8fafc;padding:10px 12px;border-radius:10px;font-size:12px;line-height:1.4;text-transform:uppercase;letter-spacing:.04em}.direction-compass[_ngcontent-%COMP%]{position:absolute;right:16px;bottom:90px;width:64px;height:64px;border-radius:50%;background:#0f172ae6;color:#f8fafc;display:grid;place-items:center;font-weight:700;font-size:12px;text-transform:uppercase}.compass-ring[_ngcontent-%COMP%]{position:absolute;inset:6px;border:2px solid rgba(248,250,252,.5);border-radius:50%}.compass-label[_ngcontent-%COMP%]{position:absolute}.compass-label.north[_ngcontent-%COMP%]{top:6px}.compass-label.south[_ngcontent-%COMP%]{bottom:6px}.compass-label.east[_ngcontent-%COMP%]{right:6px}.compass-label.west[_ngcontent-%COMP%]{left:6px}.context-menu[_ngcontent-%COMP%]{position:absolute;min-width:160px;background:#0f172a;color:#f8fafc;border-radius:10px;padding:6px;box-shadow:0 12px 30px #0f172a4d;z-index:10}.context-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background:transparent;border:none;color:inherit;text-align:left;padding:8px 10px;border-radius:8px;cursor:pointer}.context-menu[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f8fafc1f}.modal-backdrop[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0f172a73;z-index:9}.medicine-modal[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;transform:translate(-50%,-50%);width:min(520px,92%);background:#0f172a;color:#f8fafc;border-radius:16px;padding:16px;box-shadow:0 18px 40px #0f172a66;z-index:10}.picklist-drawer[_ngcontent-%COMP%]{position:absolute;right:16px;top:16px;bottom:16px;width:min(420px,92vw);max-height:calc(100% - 32px);overflow:hidden;background:#0f172a;color:#f8fafc;border-radius:18px;padding:18px;box-shadow:0 18px 40px #0f172a66;z-index:11}.audit-drawer[_ngcontent-%COMP%]{position:absolute;left:16px;top:16px;bottom:16px;width:min(420px,92vw);max-height:calc(100% - 32px);overflow:hidden;background:#0f172a;color:#f8fafc;border-radius:18px;padding:18px;box-shadow:0 18px 40px #0f172a66;z-index:11}.audit-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.audit-title[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.audit-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#f8fafcb3}.audit-body[_ngcontent-%COMP%]{display:grid;gap:12px;max-height:calc(100% - 60px);overflow:auto}.audit-hint[_ngcontent-%COMP%]{font-size:12px;color:#f8fafcb3;margin:0}.audit-label[_ngcontent-%COMP%]{display:grid;gap:6px;font-size:12px}.audit-label[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{border-radius:10px;border:1px solid rgba(248,250,252,.2);padding:8px 10px;background:#0f172a99;color:#f8fafc;resize:vertical}.audit-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}.audit-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid rgba(248,250,252,.3);background:#f8fafc14;color:#f8fafc;padding:6px 12px;border-radius:8px;cursor:pointer}.audit-run[_ngcontent-%COMP%]{background:#38bdf8;color:#0f172a;border-color:transparent}.audit-summary[_ngcontent-%COMP%]{display:flex;gap:12px;font-size:12px;color:#f8fafc}.audit-results[_ngcontent-%COMP%]{display:grid;gap:8px}.audit-row[_ngcontent-%COMP%]{background:#f8fafc14;padding:8px 10px;border-radius:10px;display:grid;gap:6px}.audit-row.missing[_ngcontent-%COMP%]{background:#ef444433}.audit-row.extra[_ngcontent-%COMP%]{background:#22c55e33}.audit-name[_ngcontent-%COMP%]{font-weight:600;font-size:13px}.audit-values[_ngcontent-%COMP%]{display:flex;gap:10px;font-size:12px;color:#f8fafcbf}.audit-empty[_ngcontent-%COMP%]{font-size:12px;color:#f8fafc99}.heatmap-legend[_ngcontent-%COMP%]{position:absolute;left:16px;bottom:16px;background:#0f172ae6;color:#f8fafc;padding:8px 10px;border-radius:10px;font-size:11px;display:grid;gap:6px}.heatmap-legend[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.heatmap-swatch[_ngcontent-%COMP%]{width:14px;height:14px;border-radius:4px;display:inline-block}.picklist-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.picklist-title[_ngcontent-%COMP%]{font-weight:700;font-size:18px}.picklist-subtitle[_ngcontent-%COMP%]{font-size:12px;color:#f8fafcb3}.picklist-body[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr;gap:16px;max-height:calc(100% - 120px)}.picklist-catalog[_ngcontent-%COMP%], .picklist-items[_ngcontent-%COMP%]{background:#0f172a8c;border-radius:14px;padding:12px;display:flex;flex-direction:column;gap:10px;overflow:hidden}@media (min-width: 1100px){.picklist-drawer[_ngcontent-%COMP%]{width:min(520px,46vw)}.picklist-body[_ngcontent-%COMP%]{grid-template-columns:minmax(220px,1fr) minmax(220px,1fr)}}.picklist-search[_ngcontent-%COMP%]{display:grid;gap:6px;font-size:12px}.picklist-search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;border:1px solid rgba(248,250,252,.2);padding:6px 8px;background:#0f172a99;color:#f8fafc;width:100%;box-sizing:border-box}.picklist-catalog-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;overflow:auto}.picklist-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 70px auto;gap:8px;align-items:center;background:#f8fafc14;padding:8px 10px;border-radius:10px}.picklist-info[_ngcontent-%COMP%]{display:grid;gap:2px}.picklist-name[_ngcontent-%COMP%]{font-weight:600;font-size:13px}.picklist-meta[_ngcontent-%COMP%]{font-size:11px;color:#f8fafcb3}.picklist-qty[_ngcontent-%COMP%]{border-radius:8px;border:1px solid rgba(248,250,252,.2);padding:4px 6px;background:#0f172a99;color:#f8fafc;text-align:center}.picklist-add[_ngcontent-%COMP%]{border:1px solid rgba(248,250,252,.3);background:#38bdf833;color:#f8fafc;padding:6px 10px;border-radius:8px;cursor:pointer}.picklist-items[_ngcontent-%COMP%]{overflow:hidden}.picklist-actions[_ngcontent-%COMP%]{display:flex;gap:8px;justify-content:flex-end}.picklist-start[_ngcontent-%COMP%]{border:1px solid rgba(248,250,252,.3);background:#22c55e40;color:#f8fafc;padding:6px 12px;border-radius:8px;cursor:pointer}.picklist-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:12px;align-items:center;background:#f8fafc14;padding:10px 12px;border-radius:12px;cursor:pointer;transition:background .2s ease}.picklist-item.active[_ngcontent-%COMP%]{background:#22c55e33;outline:1px solid rgba(34,197,94,.5)}.picklist-item.picked[_ngcontent-%COMP%]{background:#94a3b833}.picklist-item-info[_ngcontent-%COMP%]{display:grid;gap:4px}.picklist-item-name[_ngcontent-%COMP%]{font-weight:600;font-size:14px}.picklist-item-meta[_ngcontent-%COMP%]{font-size:11px;color:#f8fafcb3}.picklist-toggle[_ngcontent-%COMP%]{border:1px solid rgba(248,250,252,.3);background:#f8fafc14;color:#f8fafc;padding:6px 12px;border-radius:8px;cursor:pointer}.picklist-empty[_ngcontent-%COMP%]{padding:12px;font-size:12px;color:#f8fafc99}.medicine-modal-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.medicine-modal-title[_ngcontent-%COMP%]{font-weight:700;font-size:16px}.capacity-tag[_ngcontent-%COMP%]{margin-left:8px;font-size:12px;font-weight:600;padding:2px 8px;border-radius:999px;background:#f8fafc26}.close-btn[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(248,250,252,.3);color:#f8fafc;padding:4px 10px;border-radius:8px;cursor:pointer}.medicine-modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.medicine-modal-actions[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-bottom:12px}.medicine-modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid rgba(248,250,252,.3);background:#f8fafc14;color:#f8fafc;padding:6px 10px;border-radius:8px;cursor:pointer}.medicine-modal-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f8fafc2e}.medicine-modal-actions[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:grid;gap:4px;font-size:12px}.medicine-qty-group[_ngcontent-%COMP%]{grid-column:1/-1;display:grid;grid-template-columns:minmax(220px,1.4fr) minmax(260px,1fr);gap:12px;align-items:start}.medicine-field[_ngcontent-%COMP%], .qty-field[_ngcontent-%COMP%]{width:100%}.medicine-modal-actions[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-radius:8px;border:1px solid rgba(248,250,252,.2);padding:6px 8px;background:#0f172a99;color:#f8fafc;width:100%;box-sizing:border-box}.qty-input[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr auto;gap:6px;align-items:center}.qty-row[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:flex-end;flex-wrap:wrap}.qty-input[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:28px;height:28px}.qty-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{text-align:center}.mode-toggle[_ngcontent-%COMP%]{display:flex;gap:8px;align-items:flex-end}.mode-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:86px}.mode-toggle[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background:#f8fafc40}.action-row[_ngcontent-%COMP%]{display:flex;gap:10px;align-items:center;justify-content:flex-end;margin-top:10px}.action-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:1px solid rgba(248,250,252,.3);background:#f8fafc14;color:#f8fafc;padding:6px 12px;border-radius:8px;cursor:pointer}.action-row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#f8fafc2e}.save-btn[_ngcontent-%COMP%]{background:#38bdf8;color:#0f172a;border-color:transparent}.medicine-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto auto;gap:8px;align-items:center;background:#f8fafc14;padding:8px 10px;border-radius:10px;font-size:13px;cursor:pointer;transition:background .2s ease}.medicine-qty[_ngcontent-%COMP%]{font-weight:700}.medicine-qty.negative[_ngcontent-%COMP%]{color:#f87171}.medicine-alert[_ngcontent-%COMP%]{font-size:12px;color:#f87171}.medicine-row.active[_ngcontent-%COMP%]{background:#38bdf833;outline:1px solid rgba(56,189,248,.4)}"]})}}return i})();var HS=(()=>{class i{constructor(){this.visualSpaces=new Ri([]),this.currentVisualSpace=new Ri(null),this.currentShelf=new Ri(null),this.loadFromLocalStorage()}createVisualSpace(e,n,r){let o={id:this.generateId(),name:e,location:n,imageUrl:r||"",shelves:[],createdDate:new Date,lastUpdated:new Date},s=this.visualSpaces.getValue();return s.push(o),this.visualSpaces.next(s),this.currentVisualSpace.next(o),this.saveToLocalStorage(),o}createVisualSpace3D(e,n,r,o,s,a,c){let l={id:this.generateId(),name:e,location:n,unit:r,roomWidth:o,roomDepth:s,roomHeight:a,locationPoint:c,deskPosition:{x:0,y:0,z:2,rotY:0},chairPosition:{x:0,y:0,z:1,rotY:Math.PI},buildaqBoxes:[],shelves:[],createdDate:new Date,lastUpdated:new Date},d=this.visualSpaces.getValue();return d.push(l),this.visualSpaces.next(d),this.currentVisualSpace.next(l),this.saveToLocalStorage(),l}createShelf(e,n,r,o){let s=this.visualSpaces.getValue(),a=s.find(l=>l.id===e);if(!a)throw new Error("Visual space not found");let c={id:this.generateId(),name:n,location:a.location,width:r,height:o,medicines:[]};return a.shelves.push(c),a.lastUpdated=new Date,this.visualSpaces.next(s),this.currentShelf.next(c),this.saveToLocalStorage(),c}createShelf3D(e,n,r,o,s,a,c){let l=this.visualSpaces.getValue(),d=l.find(h=>h.id===e);if(!d)throw new Error("Visual space not found");let u={id:this.generateId(),name:n,location:d.location,width:r,height:s,depth:o,position:a,rotation:c,medicines:[]};return d.shelves.push(u),d.lastUpdated=new Date,this.visualSpaces.next(l),this.currentShelf.next(u),this.saveToLocalStorage(),u}updateShelfGeometry(e,n){let r=this.visualSpaces.getValue();r.forEach(o=>{let s=o.shelves.find(a=>a.id===e);s&&(Object.assign(s,n),o.lastUpdated=new Date)}),this.visualSpaces.next(r),this.saveToLocalStorage()}updateVisualSpace3D(e,n){let r=this.visualSpaces.getValue(),o=r.find(s=>s.id===e);o&&(Object.assign(o,n),o.lastUpdated=new Date,this.visualSpaces.next(r),this.currentVisualSpace.next(o),this.saveToLocalStorage())}addMedicineToShelf(e,n){let r=this.visualSpaces.getValue(),o=!1;r.forEach(s=>{let a=s.shelves.find(c=>c.id===e);a&&(n.shelfId=e,a.medicines.push(n),s.lastUpdated=new Date,o=!0)}),o&&(this.visualSpaces.next(r),this.saveToLocalStorage())}updateMedicineOnShelf(e,n,r){let o=this.visualSpaces.getValue(),s=!1;o.forEach(a=>{let c=a.shelves.find(l=>l.id===e);if(c){let l=c.medicines.find(d=>d.id===n);l&&(Object.assign(l,r),a.lastUpdated=new Date,s=!0)}}),s&&(this.visualSpaces.next(o),this.saveToLocalStorage())}updateMedicineLocation(e,n,r,o){let s=this.visualSpaces.getValue();s.forEach(a=>{let c=a.shelves.find(l=>l.id===e);if(c){let l=c.medicines.find(d=>d.id===n);l&&(l.x=r,l.y=o,a.lastUpdated=new Date)}}),this.visualSpaces.next(s),this.saveToLocalStorage()}removeMedicineFromShelf(e,n){let r=this.visualSpaces.getValue();r.forEach(o=>{let s=o.shelves.find(a=>a.id===e);s&&(s.medicines=s.medicines.filter(a=>a.id!==n),o.lastUpdated=new Date)}),this.visualSpaces.next(r),this.saveToLocalStorage()}deleteShelf(e,n){let r=this.visualSpaces.getValue(),o=r.find(s=>s.id===e);o&&(o.shelves=o.shelves.filter(s=>s.id!==n),o.lastUpdated=new Date,this.visualSpaces.next(r),this.saveToLocalStorage())}deleteVisualSpace(e){let n=this.visualSpaces.getValue().filter(r=>r.id!==e);this.visualSpaces.next(n),this.saveToLocalStorage()}getVisualSpaces(){return this.visualSpaces.asObservable()}getCurrentVisualSpace(){return this.currentVisualSpace.asObservable()}getCurrentShelf(){return this.currentShelf.asObservable()}setCurrentVisualSpace(e){let r=this.visualSpaces.getValue().find(o=>o.id===e)||null;this.currentVisualSpace.next(r)}setCurrentShelf(e){let n=this.visualSpaces.getValue(),r=null;n.forEach(o=>{let s=o.shelves.find(a=>a.id===e);s&&(r=s)}),this.currentShelf.next(r)}getMedicinesByShelf(e){let n=this.visualSpaces.getValue(),r=[];return n.forEach(o=>{let s=o.shelves.find(a=>a.id===e);s&&(r=s.medicines)}),r}generateId(){return"_"+Math.random().toString(36).substr(2,9)}saveToLocalStorage(){let e=this.visualSpaces.getValue();localStorage.setItem("visual_spaces",JSON.stringify(e))}loadFromLocalStorage(){let e=localStorage.getItem("visual_spaces");if(e)try{let n=JSON.parse(e);n.forEach(r=>{r.deskPosition||(r.deskPosition={x:0,y:0,z:2,rotY:0}),r.chairPosition||(r.chairPosition={x:0,y:0,z:1,rotY:Math.PI}),r.buildaqBoxes||(r.buildaqBoxes=[]),r.shelves.forEach(o=>{o.depth||(o.depth=o.width),o.position||(o.position={x:0,y:0,z:0}),o.rotation||(o.rotation={x:0,y:0,z:0})})}),this.visualSpaces.next(n)}catch(n){console.error("Error loading visual spaces from storage:",n)}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function pTe(i,t){i&1&&Fe(0,"div",2)}var fTe=new _e("MAT_PROGRESS_BAR_DEFAULT_OPTIONS");var jS=(()=>{class i{constructor(e,n,r,o,s){this._elementRef=e,this._ngZone=n,this._changeDetectorRef=r,this._animationMode=o,this._isNoopAnimation=!1,this._defaultColor="primary",this._value=0,this._bufferValue=0,this.animationEnd=new Qe,this._mode="determinate",this._transitionendHandler=a=>{this.animationEnd.observers.length===0||!a.target||!a.target.classList.contains("mdc-linear-progress__primary-bar")||(this.mode==="determinate"||this.mode==="buffer")&&this._ngZone.run(()=>this.animationEnd.next({value:this.value}))},this._isNoopAnimation=o==="NoopAnimations",s&&(s.color&&(this.color=this._defaultColor=s.color),this.mode=s.mode||this.mode)}get color(){return this._color||this._defaultColor}set color(e){this._color=e}get value(){return this._value}set value(e){this._value=jZ(e||0),this._changeDetectorRef.markForCheck()}get bufferValue(){return this._bufferValue||0}set bufferValue(e){this._bufferValue=jZ(e||0),this._changeDetectorRef.markForCheck()}get mode(){return this._mode}set mode(e){this._mode=e,this._changeDetectorRef.markForCheck()}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{this._elementRef.nativeElement.addEventListener("transitionend",this._transitionendHandler)})}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._transitionendHandler)}_getPrimaryBarTransform(){return`scaleX(${this._isIndeterminate()?1:this.value/100})`}_getBufferBarFlexBasis(){return`${this.mode==="buffer"?this.bufferValue:100}%`}_isIndeterminate(){return this.mode==="indeterminate"||this.mode==="query"}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Ne),F(ci),F($i,8),F(fTe,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-progress-bar"]],hostAttrs:["role","progressbar","aria-valuemin","0","aria-valuemax","100","tabindex","-1",1,"mat-mdc-progress-bar","mdc-linear-progress"],hostVars:10,hostBindings:function(n,r){n&2&&(Tt("aria-valuenow",r._isIndeterminate()?null:r.value)("mode",r.mode),Hr("mat-"+r.color),qe("_mat-animation-noopable",r._isNoopAnimation)("mdc-linear-progress--animation-ready",!r._isNoopAnimation)("mdc-linear-progress--indeterminate",r._isIndeterminate()))},inputs:{color:"color",value:[ie.HasDecoratorInputTransform,"value","value",on],bufferValue:[ie.HasDecoratorInputTransform,"bufferValue","bufferValue",on],mode:"mode"},outputs:{animationEnd:"animationEnd"},exportAs:["matProgressBar"],standalone:!0,features:[zt,Dt],decls:7,vars:5,consts:[["aria-hidden","true",1,"mdc-linear-progress__buffer"],[1,"mdc-linear-progress__buffer-bar"],[1,"mdc-linear-progress__buffer-dots"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__primary-bar"],[1,"mdc-linear-progress__bar-inner"],["aria-hidden","true",1,"mdc-linear-progress__bar","mdc-linear-progress__secondary-bar"]],template:function(n,r){n&1&&(b(0,"div",0),Fe(1,"div",1),ve(2,pTe,1,0,"div",2),v(),b(3,"div",3),Fe(4,"span",4),v(),b(5,"div",5),Fe(6,"span",4),v()),n&2&&(P(),$n("flex-basis",r._getBufferBarFlexBasis()),P(),Zt(2,r.mode==="buffer"?2:-1),P(),$n("transform",r._getPrimaryBarTransform()))},styles:[`@keyframes mdc-linear-progress-primary-indeterminate-translate{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half))}100%{transform:translateX(var(--mdc-linear-progress-primary-full))}}@keyframes mdc-linear-progress-primary-indeterminate-scale{0%{transform:scaleX(0.08)}36.65%{animation-timing-function:cubic-bezier(0.334731, 0.12482, 0.785844, 1);transform:scaleX(0.08)}69.15%{animation-timing-function:cubic-bezier(0.06, 0.11, 0.6, 1);transform:scaleX(0.661479)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-secondary-indeterminate-translate{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full))}}@keyframes mdc-linear-progress-secondary-indeterminate-scale{0%{animation-timing-function:cubic-bezier(0.205028, 0.057051, 0.57661, 0.453971);transform:scaleX(0.08)}19.15%{animation-timing-function:cubic-bezier(0.152313, 0.196432, 0.648374, 1.004315);transform:scaleX(0.457104)}44.15%{animation-timing-function:cubic-bezier(0.257759, -0.003163, 0.211762, 1.38179);transform:scaleX(0.72796)}100%{transform:scaleX(0.08)}}@keyframes mdc-linear-progress-primary-indeterminate-translate-reverse{0%{transform:translateX(0)}20%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(0)}59.15%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(var(--mdc-linear-progress-primary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-primary-full-neg))}}@keyframes mdc-linear-progress-secondary-indeterminate-translate-reverse{0%{animation-timing-function:cubic-bezier(0.15, 0, 0.515058, 0.409685);transform:translateX(0)}25%{animation-timing-function:cubic-bezier(0.31033, 0.284058, 0.8, 0.733712);transform:translateX(var(--mdc-linear-progress-secondary-quarter-neg))}48.35%{animation-timing-function:cubic-bezier(0.4, 0.627035, 0.6, 0.902026);transform:translateX(var(--mdc-linear-progress-secondary-half-neg))}100%{transform:translateX(var(--mdc-linear-progress-secondary-full-neg))}}@keyframes mdc-linear-progress-buffering-reverse{from{transform:translateX(-10px)}}.mdc-linear-progress{position:relative;width:100%;transform:translateZ(0);outline:1px solid rgba(0,0,0,0);overflow-x:hidden;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}@media screen and (forced-colors: active){.mdc-linear-progress{outline-color:CanvasText}}.mdc-linear-progress__bar{position:absolute;top:0;bottom:0;margin:auto 0;width:100%;animation:none;transform-origin:top left;transition:transform 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__bar-inner{display:inline-block;position:absolute;width:100%;animation:none;border-top-style:solid}.mdc-linear-progress__buffer{display:flex;position:absolute;top:0;bottom:0;margin:auto 0;width:100%;overflow:hidden}.mdc-linear-progress__buffer-dots{background-repeat:repeat-x;flex:auto;transform:rotate(180deg);-webkit-mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");mask-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='xMinYMin slice'%3E%3Ccircle cx='1' cy='1' r='1'/%3E%3C/svg%3E");animation:mdc-linear-progress-buffering 250ms infinite linear}.mdc-linear-progress__buffer-bar{flex:0 1 100%;transition:flex-basis 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-linear-progress__primary-bar{transform:scaleX(0)}.mdc-linear-progress__secondary-bar{display:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__bar{transition:none}.mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{left:-145.166611%}.mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{left:-54.888891%;display:block}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation:mdc-linear-progress-primary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-primary-indeterminate-scale 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation:mdc-linear-progress-secondary-indeterminate-translate 2s infinite linear}.mdc-linear-progress--indeterminate.mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar>.mdc-linear-progress__bar-inner{animation:mdc-linear-progress-secondary-indeterminate-scale 2s infinite linear}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__bar{right:0;-webkit-transform-origin:center right;transform-origin:center right}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__primary-bar{animation-name:mdc-linear-progress-primary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--animation-ready .mdc-linear-progress__secondary-bar{animation-name:mdc-linear-progress-secondary-indeterminate-translate-reverse}[dir=rtl] .mdc-linear-progress:not([dir=ltr]) .mdc-linear-progress__buffer-dots,.mdc-linear-progress[dir=rtl]:not([dir=ltr]) .mdc-linear-progress__buffer-dots{animation:mdc-linear-progress-buffering-reverse 250ms infinite linear;transform:rotate(0)}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__primary-bar{right:-145.166611%;left:auto}[dir=rtl] .mdc-linear-progress:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar,.mdc-linear-progress[dir=rtl]:not([dir=ltr]).mdc-linear-progress--indeterminate .mdc-linear-progress__secondary-bar{right:-54.888891%;left:auto}.mdc-linear-progress--closed{opacity:0}.mdc-linear-progress--closed-animation-off .mdc-linear-progress__buffer-dots{animation:none}.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar,.mdc-linear-progress--closed-animation-off.mdc-linear-progress--indeterminate .mdc-linear-progress__bar .mdc-linear-progress__bar-inner{animation:none}@keyframes mdc-linear-progress-buffering{from{transform:rotate(180deg) translateX(calc(var(--mdc-linear-progress-track-height) * -2.5))}}.mdc-linear-progress__bar-inner{border-color:var(--mdc-linear-progress-active-indicator-color)}.mdc-linear-progress__buffer-dots{background-color:var(--mdc-linear-progress-track-color)}@media(forced-colors: active){.mdc-linear-progress__buffer-dots{background-color:ButtonBorder}}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-color:rgba(0,0,0,0);background-image:url("data:image/svg+xml,%3Csvg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' x='0px' y='0px' enable-background='new 0 0 5 2' xml:space='preserve' viewBox='0 0 5 2' preserveAspectRatio='none slice'%3E%3Ccircle cx='1' cy='1' r='1' fill='rgba(244, 67, 54, 0.25)'/%3E%3C/svg%3E")}}.mdc-linear-progress__buffer-bar{background-color:var(--mdc-linear-progress-track-color)}.mdc-linear-progress{height:max(var(--mdc-linear-progress-track-height), var(--mdc-linear-progress-active-indicator-height))}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress{height:4px}}.mdc-linear-progress__bar{height:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__bar-inner{border-top-width:var(--mdc-linear-progress-active-indicator-height)}.mdc-linear-progress__buffer{height:var(--mdc-linear-progress-track-height)}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.mdc-linear-progress__buffer-dots{background-size:10px var(--mdc-linear-progress-track-height)}}.mdc-linear-progress__buffer{border-radius:var(--mdc-linear-progress-track-shape)}.mat-mdc-progress-bar{display:block;text-align:start;--mdc-linear-progress-primary-half: 83.67142%;--mdc-linear-progress-primary-full: 200.611057%;--mdc-linear-progress-secondary-quarter: 37.651913%;--mdc-linear-progress-secondary-half: 84.386165%;--mdc-linear-progress-secondary-full: 160.277782%;--mdc-linear-progress-primary-half-neg: -83.67142%;--mdc-linear-progress-primary-full-neg: -200.611057%;--mdc-linear-progress-secondary-quarter-neg: -37.651913%;--mdc-linear-progress-secondary-half-neg: -84.386165%;--mdc-linear-progress-secondary-full-neg: -160.277782%}.mat-mdc-progress-bar[mode=query]{transform:scaleX(-1)}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-dots,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__secondary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__bar-inner.mdc-linear-progress__bar-inner{animation:none}.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__primary-bar,.mat-mdc-progress-bar._mat-animation-noopable .mdc-linear-progress__buffer-bar{transition:transform 1ms}`],encapsulation:2,changeDetection:0})}}return i})();function jZ(i,t=0,e=100){return Math.max(t,Math.min(e,i))}var $Z=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt]})}}return i})();var gTe=["*",[["mat-chip-avatar"],["","matChipAvatar",""]],[["mat-chip-trailing-icon"],["","matChipRemove",""],["","matChipTrailingIcon",""]]],_Te=["*","mat-chip-avatar, [matChipAvatar]","mat-chip-trailing-icon,[matChipRemove],[matChipTrailingIcon]"];function bTe(i,t){i&1&&(b(0,"span",3),dt(1,1),v())}function vTe(i,t){i&1&&(b(0,"span",6),dt(1,2),v())}var yTe=["*"];var xTe=new _e("mat-chips-default-options",{providedIn:"root",factory:()=>({separatorKeyCodes:[13]})}),WZ=new _e("MatChipAvatar"),qZ=new _e("MatChipTrailingIcon"),XZ=new _e("MatChipRemove"),ZZ=new _e("MatChip"),YZ=(()=>{class i{get disabled(){return this._disabled||this._parentChip.disabled}set disabled(e){this._disabled=e}_getDisabledAttribute(){return this.disabled&&!this._allowFocusWhenDisabled?"":null}_getTabindex(){return this.disabled&&!this._allowFocusWhenDisabled||!this.isInteractive?null:this.tabIndex.toString()}constructor(e,n){this._elementRef=e,this._parentChip=n,this.isInteractive=!0,this._isPrimary=!0,this._disabled=!1,this.tabIndex=-1,this._allowFocusWhenDisabled=!1,e.nativeElement.nodeName==="BUTTON"&&e.nativeElement.setAttribute("type","button")}focus(){this._elementRef.nativeElement.focus()}_handleClick(e){!this.disabled&&this.isInteractive&&this._isPrimary&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!this.disabled&&this.isInteractive&&this._isPrimary&&!this._parentChip._isEditing&&(e.preventDefault(),this._parentChip._handlePrimaryActionInteraction())}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(ZZ))}}static{this.\u0275dir=Me({type:i,selectors:[["","matChipAction",""]],hostAttrs:[1,"mdc-evolution-chip__action","mat-mdc-chip-action"],hostVars:9,hostBindings:function(n,r){n&1&&ne("click",function(s){return r._handleClick(s)})("keydown",function(s){return r._handleKeydown(s)}),n&2&&(Tt("tabindex",r._getTabindex())("disabled",r._getDisabledAttribute())("aria-disabled",r.disabled),qe("mdc-evolution-chip__action--primary",r._isPrimary)("mdc-evolution-chip__action--presentational",!r.isInteractive)("mdc-evolution-chip__action--trailing",!r._isPrimary))},inputs:{isInteractive:"isInteractive",disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je],tabIndex:[ie.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?-1:on(e)],_allowFocusWhenDisabled:"_allowFocusWhenDisabled"},standalone:!0,features:[zt]})}}return i})();var wTe=0,S3=(()=>{class i{_hasFocus(){return this._hasFocusInternal}get value(){return this._value!==void 0?this._value:this._textElement.textContent.trim()}set value(e){this._value=e}get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}constructor(e,n,r,o,s,a,c,l){this._changeDetectorRef=e,this._elementRef=n,this._ngZone=r,this._focusMonitor=o,this._globalRippleOptions=c,this._onFocus=new Le,this._onBlur=new Le,this.role=null,this._hasFocusInternal=!1,this.id=`mat-mdc-chip-${wTe++}`,this.ariaLabel=null,this.ariaDescription=null,this._ariaDescriptionId=`${this.id}-aria-description`,this.removable=!0,this.highlighted=!1,this.disableRipple=!1,this.disabled=!1,this.tabIndex=-1,this.removed=new Qe,this.destroyed=new Qe,this.basicChipAttrName="mat-basic-chip",this._rippleLoader=ye(Cx),this._document=s,this._animationsDisabled=a==="NoopAnimations",l!=null&&(this.tabIndex=parseInt(l)??-1),this._monitorFocus(),this._rippleLoader?.configureRipple(this._elementRef.nativeElement,{className:"mat-mdc-chip-ripple",disabled:this._isRippleDisabled()})}ngOnInit(){let e=this._elementRef.nativeElement;this._isBasicChip=e.hasAttribute(this.basicChipAttrName)||e.tagName.toLowerCase()===this.basicChipAttrName}ngAfterViewInit(){this._textElement=this._elementRef.nativeElement.querySelector(".mat-mdc-chip-action-label"),this._pendingFocus&&(this._pendingFocus=!1,this.focus())}ngAfterContentInit(){this._actionChanges=rr(this._allLeadingIcons.changes,this._allTrailingIcons.changes,this._allRemoveIcons.changes).subscribe(()=>this._changeDetectorRef.markForCheck())}ngDoCheck(){this._rippleLoader.setDisabled(this._elementRef.nativeElement,this._isRippleDisabled())}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement),this._actionChanges?.unsubscribe(),this.destroyed.emit({chip:this}),this.destroyed.complete()}remove(){this.removable&&this.removed.emit({chip:this})}_isRippleDisabled(){return this.disabled||this.disableRipple||this._animationsDisabled||this._isBasicChip||!!this._globalRippleOptions?.disabled}_hasTrailingIcon(){return!!(this.trailingIcon||this.removeIcon)}_handleKeydown(e){(e.keyCode===8&&!e.repeat||e.keyCode===46)&&(e.preventDefault(),this.remove())}focus(){this.disabled||(this.primaryAction?this.primaryAction.focus():this._pendingFocus=!0)}_getSourceAction(e){return this._getActions().find(n=>{let r=n._elementRef.nativeElement;return r===e||r.contains(e)})}_getActions(){let e=[];return this.primaryAction&&e.push(this.primaryAction),this.removeIcon&&e.push(this.removeIcon),this.trailingIcon&&e.push(this.trailingIcon),e}_handlePrimaryActionInteraction(){}_getTabIndex(){return this.role?this.disabled?-1:this.tabIndex:null}_monitorFocus(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{let n=e!==null;n!==this._hasFocusInternal&&(this._hasFocusInternal=n,n?this._onFocus.next({chip:this}):this._ngZone.onStable.pipe(nn(1)).subscribe(()=>this._ngZone.run(()=>this._onBlur.next({chip:this}))))})}static{this.\u0275fac=function(n){return new(n||i)(F(ci),F(Re),F(Ne),F(Yc),F(kt),F($i,8),F(ld,8),zr("tabindex"))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-basic-chip"],["","mat-basic-chip",""],["mat-chip"],["","mat-chip",""]],contentQueries:function(n,r,o){if(n&1&&(ri(o,WZ,5),ri(o,qZ,5),ri(o,XZ,5),ri(o,WZ,5),ri(o,qZ,5),ri(o,XZ,5)),n&2){let s;Be(s=Ve())&&(r.leadingIcon=s.first),Be(s=Ve())&&(r.trailingIcon=s.first),Be(s=Ve())&&(r.removeIcon=s.first),Be(s=Ve())&&(r._allLeadingIcons=s),Be(s=Ve())&&(r._allTrailingIcons=s),Be(s=Ve())&&(r._allRemoveIcons=s)}},viewQuery:function(n,r){if(n&1&&Lt(YZ,5),n&2){let o;Be(o=Ve())&&(r.primaryAction=o.first)}},hostAttrs:[1,"mat-mdc-chip"],hostVars:32,hostBindings:function(n,r){n&1&&ne("keydown",function(s){return r._handleKeydown(s)}),n&2&&(Ds("id",r.id),Tt("role",r.role)("tabindex",r._getTabIndex())("aria-label",r.ariaLabel),Hr("mat-"+(r.color||"primary")),qe("mdc-evolution-chip",!r._isBasicChip)("mdc-evolution-chip--disabled",r.disabled)("mdc-evolution-chip--with-trailing-action",r._hasTrailingIcon())("mdc-evolution-chip--with-primary-graphic",r.leadingIcon)("mdc-evolution-chip--with-primary-icon",r.leadingIcon)("mdc-evolution-chip--with-avatar",r.leadingIcon)("mat-mdc-chip-with-avatar",r.leadingIcon)("mat-mdc-chip-highlighted",r.highlighted)("mat-mdc-chip-disabled",r.disabled)("mat-mdc-basic-chip",r._isBasicChip)("mat-mdc-standard-chip",!r._isBasicChip)("mat-mdc-chip-with-trailing-icon",r._hasTrailingIcon())("_mat-animation-noopable",r._animationsDisabled))},inputs:{role:"role",id:"id",ariaLabel:[ie.None,"aria-label","ariaLabel"],ariaDescription:[ie.None,"aria-description","ariaDescription"],value:"value",color:"color",removable:[ie.HasDecoratorInputTransform,"removable","removable",Je],highlighted:[ie.HasDecoratorInputTransform,"highlighted","highlighted",Je],disableRipple:[ie.HasDecoratorInputTransform,"disableRipple","disableRipple",Je],disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je],tabIndex:[ie.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?void 0:on(e)]},outputs:{removed:"removed",destroyed:"destroyed"},exportAs:["matChip"],standalone:!0,features:[Bt([{provide:ZZ,useExisting:i}]),zt,Dt],ngContentSelectors:_Te,decls:8,vars:3,consts:[[1,"mat-mdc-chip-focus-overlay"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--primary"],["matChipAction","",3,"isInteractive"],[1,"mdc-evolution-chip__graphic","mat-mdc-chip-graphic"],[1,"mdc-evolution-chip__text-label","mat-mdc-chip-action-label"],[1,"mat-mdc-chip-primary-focus-indicator","mat-mdc-focus-indicator"],[1,"mdc-evolution-chip__cell","mdc-evolution-chip__cell--trailing"]],template:function(n,r){n&1&&(Oi(gTe),Fe(0,"span",0),b(1,"span",1)(2,"span",2),ve(3,bTe,2,0,"span",3),b(4,"span",4),dt(5),Fe(6,"span",5),v()()(),ve(7,vTe,2,0,"span",6)),n&2&&(P(2),q("isInteractive",!1),P(),Zt(3,r.leadingIcon?3:-1),P(4),Zt(7,r._hasTrailingIcon()?7:-1))},dependencies:[YZ],styles:['.mdc-evolution-chip,.mdc-evolution-chip__cell,.mdc-evolution-chip__action{display:inline-flex;align-items:center}.mdc-evolution-chip{position:relative;max-width:100%}.mdc-evolution-chip .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-evolution-chip__cell,.mdc-evolution-chip__action{height:100%}.mdc-evolution-chip__cell--primary{overflow-x:hidden}.mdc-evolution-chip__cell--trailing{flex:1 0 auto}.mdc-evolution-chip__action{align-items:center;background:none;border:none;box-sizing:content-box;cursor:pointer;display:inline-flex;justify-content:center;outline:none;padding:0;text-decoration:none;color:inherit}.mdc-evolution-chip__action--presentational{cursor:auto}.mdc-evolution-chip--disabled,.mdc-evolution-chip__action:disabled{pointer-events:none}.mdc-evolution-chip__action--primary{overflow-x:hidden}.mdc-evolution-chip__action--trailing{position:relative;overflow:visible}.mdc-evolution-chip__action--primary:before{box-sizing:border-box;content:"";height:100%;left:0;position:absolute;pointer-events:none;top:0;width:100%;z-index:1}.mdc-evolution-chip--touch{margin-top:8px;margin-bottom:8px}.mdc-evolution-chip__action-touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-evolution-chip__text-label{white-space:nowrap;user-select:none;text-overflow:ellipsis;overflow:hidden}.mdc-evolution-chip__graphic{align-items:center;display:inline-flex;justify-content:center;overflow:hidden;pointer-events:none;position:relative;flex:1 0 auto}.mdc-evolution-chip__checkmark{position:absolute;opacity:0;top:50%;left:50%}.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--selected):not(.mdc-evolution-chip--with-primary-icon) .mdc-evolution-chip__graphic{width:0}.mdc-evolution-chip__checkmark-background{opacity:0}.mdc-evolution-chip__checkmark-svg{display:block}.mdc-evolution-chip__checkmark-path{stroke-width:2px;stroke-dasharray:29.7833385;stroke-dashoffset:29.7833385;stroke:currentColor}.mdc-evolution-chip--selecting .mdc-evolution-chip__graphic{transition:width 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark{transition:transform 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--selecting .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__graphic{transition:width 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark{transition:opacity 50ms 0ms linear,transform 100ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-75%, -50%)}.mdc-evolution-chip--deselecting .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--selecting-with-primary-icon .mdc-evolution-chip__checkmark-path{transition:stroke-dashoffset 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__icon--primary{transition:opacity 150ms 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark{transition:opacity 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);transform:translate(-50%, -50%)}.mdc-evolution-chip--deselecting-with-primary-icon .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}.mdc-evolution-chip--selected .mdc-evolution-chip__icon--primary{opacity:0}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{transform:translate(-50%, -50%);opacity:1}.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark-path{stroke-dashoffset:0}@keyframes mdc-evolution-chip-enter{from{transform:scale(0.8);opacity:.4}to{transform:scale(1);opacity:1}}.mdc-evolution-chip--enter{animation:mdc-evolution-chip-enter 100ms 0ms cubic-bezier(0, 0, 0.2, 1)}@keyframes mdc-evolution-chip-exit{from{opacity:1}to{opacity:0}}.mdc-evolution-chip--exit{animation:mdc-evolution-chip-exit 75ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-evolution-chip--hidden{opacity:0;pointer-events:none;transition:width 150ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-standard-chip{border-radius:var(--mdc-chip-container-shape-radius);height:var(--mdc-chip-container-height)}.mat-mdc-standard-chip .mdc-evolution-chip__ripple{border-radius:var(--mdc-chip-container-shape-radius)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-radius:var(--mdc-chip-container-shape-radius)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{border-radius:var(--mdc-chip-with-avatar-avatar-shape-radius)}.mat-mdc-standard-chip.mdc-evolution-chip--selectable:not(.mdc-evolution-chip--with-primary-icon){--mdc-chip-graphic-selected-width:var(--mdc-chip-with-avatar-avatar-size)}.mat-mdc-standard-chip .mdc-evolution-chip__graphic{height:var(--mdc-chip-with-avatar-avatar-size);width:var(--mdc-chip-with-avatar-avatar-size);font-size:var(--mdc-chip-with-avatar-avatar-size)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__action--primary:before{border-color:var(--mdc-chip-outline-color)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational).mdc-ripple-upgraded--background-focused:before,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:not(.mdc-evolution-chip__action--presentational):not(.mdc-ripple-upgraded):focus:before{border-color:var(--mdc-chip-focus-outline-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__action--primary:before{border-color:var(--mdc-chip-disabled-outline-color)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-outline-width)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary:before{border-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled){background-color:var(--mdc-chip-elevated-selected-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-elevated-disabled-container-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled{background-color:var(--mdc-chip-flat-disabled-selected-container-color)}.mat-mdc-standard-chip .mdc-evolution-chip__text-label{font-family:var(--mdc-chip-label-text-font);line-height:var(--mdc-chip-label-text-line-height);font-size:var(--mdc-chip-label-text-size);font-weight:var(--mdc-chip-label-text-weight);letter-spacing:var(--mdc-chip-label-text-tracking)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__text-label{color:var(--mdc-chip-selected-label-text-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__text-label{color:var(--mdc-chip-disabled-label-text-color)}.mat-mdc-standard-chip .mdc-evolution-chip__icon--primary{height:var(--mdc-chip-with-icon-icon-size);width:var(--mdc-chip-with-icon-icon-size);font-size:var(--mdc-chip-with-icon-icon-size)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--primary{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-selected-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__checkmark{color:var(--mdc-chip-with-icon-disabled-icon-color)}.mat-mdc-standard-chip:not(.mdc-evolution-chip--disabled) .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-color)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary .mdc-evolution-chip__ripple::before,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary .mdc-evolution-chip__ripple::after{background-color:var(--mdc-chip-hover-state-layer-color)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:hover .mdc-evolution-chip__ripple::before,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary.mdc-ripple-surface--hover .mdc-evolution-chip__ripple::before{opacity:var(--mdc-chip-hover-state-layer-opacity)}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary.mdc-ripple-upgraded--background-focused .mdc-evolution-chip__ripple::before,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:not(.mdc-ripple-upgraded):focus .mdc-evolution-chip__ripple::before{transition-duration:75ms;opacity:var(--mdc-chip-focus-state-layer-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary .mdc-evolution-chip__ripple::before,.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary .mdc-evolution-chip__ripple::after{background-color:var(--mdc-chip-selected-hover-state-layer-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary:hover .mdc-evolution-chip__ripple::before,.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary.mdc-ripple-surface--hover .mdc-evolution-chip__ripple::before{opacity:var(--mdc-chip-selected-hover-state-layer-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary.mdc-ripple-upgraded--background-focused .mdc-evolution-chip__ripple::before,.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__action--primary:not(.mdc-ripple-upgraded):focus .mdc-evolution-chip__ripple::before{transition-duration:75ms;opacity:var(--mdc-chip-selected-focus-state-layer-opacity)}.mat-mdc-chip-highlighted{--mdc-chip-with-icon-icon-color:var(--mdc-chip-with-icon-selected-icon-color);--mdc-chip-elevated-container-color:var(--mdc-chip-elevated-selected-container-color);--mdc-chip-label-text-color:var(--mdc-chip-selected-label-text-color);--mdc-chip-outline-width:var(--mdc-chip-flat-selected-outline-width)}.mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color)}.mat-mdc-chip-selected .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color)}.mat-mdc-chip:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-hover-state-layer-color);opacity:var(--mdc-chip-hover-state-layer-opacity)}.mat-mdc-chip-focus-overlay .mat-mdc-chip-selected:hover,.mat-mdc-chip-highlighted:hover .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-hover-state-layer-color);opacity:var(--mdc-chip-selected-hover-state-layer-opacity)}.mat-mdc-chip.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-focus-state-layer-color);opacity:var(--mdc-chip-focus-state-layer-opacity)}.mat-mdc-chip-selected.cdk-focused .mat-mdc-chip-focus-overlay,.mat-mdc-chip-highlighted.cdk-focused .mat-mdc-chip-focus-overlay{background:var(--mdc-chip-selected-focus-state-layer-color);opacity:var(--mdc-chip-selected-focus-state-layer-opacity)}.mdc-evolution-chip--disabled:not(.mdc-evolution-chip--selected) .mat-mdc-chip-avatar{opacity:var(--mdc-chip-with-avatar-disabled-avatar-opacity)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{opacity:var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity)}.mdc-evolution-chip--disabled.mdc-evolution-chip--selected .mdc-evolution-chip__checkmark{opacity:var(--mdc-chip-with-icon-disabled-icon-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--disabled{opacity:var(--mat-chip-disabled-container-opacity)}.mat-mdc-standard-chip.mdc-evolution-chip--selected .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-trailing-icon-color)}.mat-mdc-standard-chip.mdc-evolution-chip--selected.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing,.mat-mdc-standard-chip.mat-mdc-chip-highlighted.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing{color:var(--mat-chip-selected-disabled-trailing-icon-color)}.mat-mdc-chip-remove{opacity:var(--mat-chip-trailing-action-opacity)}.mat-mdc-chip-remove:focus{opacity:var(--mat-chip-trailing-action-focus-opacity)}.mat-mdc-chip-remove::after{background:var(--mat-chip-trailing-action-state-layer-color)}.mat-mdc-chip-remove:hover::after{opacity:var(--mat-chip-trailing-action-hover-state-layer-opacity)}.mat-mdc-chip-remove:focus::after{opacity:var(--mat-chip-trailing-action-focus-state-layer-opacity)}.mat-mdc-chip-selected .mat-mdc-chip-remove::after,.mat-mdc-chip-highlighted .mat-mdc-chip-remove::after{background:var(--mat-chip-selected-trailing-action-state-layer-color)}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove{opacity:calc(var(--mat-chip-trailing-action-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mdc-evolution-chip--disabled .mdc-evolution-chip__icon--trailing.mat-mdc-chip-remove:focus{opacity:calc(var(--mat-chip-trailing-action-focus-opacity)*var(--mdc-chip-with-trailing-icon-disabled-trailing-icon-opacity))}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary:before{border-style:solid}.mat-mdc-standard-chip .mdc-evolution-chip__checkmark{height:20px;width:20px}.mat-mdc-standard-chip .mdc-evolution-chip__icon--trailing{height:18px;width:18px;font-size:18px}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:12px;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:12px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:6px;padding-right:6px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:6px;padding-right:6px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary{padding-left:0;padding-right:12px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:12px;padding-right:0}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic{padding-left:4px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__graphic[dir=rtl]{padding-left:8px;padding-right:4px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing{padding-left:8px;padding-right:8px}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--trailing[dir=rtl]{padding-left:8px;padding-right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing{left:8px;right:initial}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__ripple--trailing[dir=rtl]{left:initial;right:8px}.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary{padding-left:0;padding-right:0}[dir=rtl] .mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary,.mdc-evolution-chip--with-avatar.mdc-evolution-chip--with-primary-graphic.mdc-evolution-chip--with-trailing-action .mdc-evolution-chip__action--primary[dir=rtl]{padding-left:0;padding-right:0}.mat-mdc-standard-chip{-webkit-tap-highlight-color:rgba(0,0,0,0)}.cdk-high-contrast-active .mat-mdc-standard-chip{outline:solid 1px}.cdk-high-contrast-active .mat-mdc-standard-chip .mdc-evolution-chip__checkmark-path{stroke:CanvasText !important}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary,.mat-mdc-standard-chip .mdc-evolution-chip__action--primary,.mat-mdc-standard-chip .mat-mdc-chip-action-label{overflow:visible}.mat-mdc-standard-chip .mdc-evolution-chip__cell--primary{flex-basis:100%}.mat-mdc-standard-chip .mdc-evolution-chip__action--primary{font:inherit;letter-spacing:inherit;white-space:inherit}.mat-mdc-standard-chip .mat-mdc-chip-graphic,.mat-mdc-standard-chip .mat-mdc-chip-trailing-icon{box-sizing:content-box}.mat-mdc-standard-chip._mat-animation-noopable,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__graphic,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark,.mat-mdc-standard-chip._mat-animation-noopable .mdc-evolution-chip__checkmark-path{transition-duration:1ms;animation-duration:1ms}.mat-mdc-basic-chip .mdc-evolution-chip__action--primary{font:inherit}.mat-mdc-chip-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;opacity:0;border-radius:inherit;transition:opacity 150ms linear}._mat-animation-noopable .mat-mdc-chip-focus-overlay{transition:none}.mat-mdc-basic-chip .mat-mdc-chip-focus-overlay{display:none}.mat-mdc-chip .mat-ripple.mat-mdc-chip-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-chip-avatar{text-align:center;line-height:1;color:var(--mdc-chip-with-icon-icon-color, currentColor)}.mat-mdc-chip{position:relative;z-index:0}.mat-mdc-chip-action-label{text-align:left;z-index:1}[dir=rtl] .mat-mdc-chip-action-label{text-align:right}.mat-mdc-chip.mdc-evolution-chip--with-trailing-action .mat-mdc-chip-action-label{position:relative}.mat-mdc-chip-action-label .mat-mdc-chip-primary-focus-indicator{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none}.mat-mdc-chip-action-label .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-chip-remove::before{margin:calc(var(--mat-mdc-focus-indicator-border-width, 3px)*-1);left:8px;right:8px}.mat-mdc-chip-remove::after{content:"";display:block;opacity:0;position:absolute;top:-2px;bottom:-2px;left:6px;right:6px;border-radius:50%}.mat-mdc-chip-remove .mat-icon{width:18px;height:18px;font-size:18px;box-sizing:content-box}.mat-chip-edit-input{cursor:text;display:inline-block;color:inherit;outline:0}.cdk-high-contrast-active .mat-mdc-chip-selected:not(.mat-mdc-chip-multiple){outline-width:3px}.mat-mdc-chip-action:focus .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return i})();var KZ=(()=>{class i{get chipFocusChanges(){return this._getChipStream(e=>e._onFocus)}get chipDestroyedChanges(){return this._getChipStream(e=>e.destroyed)}get chipRemovedChanges(){return this._getChipStream(e=>e.removed)}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._syncChipsState()}get empty(){return!this._chips||this._chips.length===0}get role(){return this._explicitRole?this._explicitRole:this.empty?null:this._defaultRole}set role(e){this._explicitRole=e}get focused(){return this._hasFocusedChip()}constructor(e,n,r){this._elementRef=e,this._changeDetectorRef=n,this._dir=r,this._lastDestroyedFocusedChipIndex=null,this._destroyed=new Le,this._defaultRole="presentation",this._disabled=!1,this.tabIndex=0,this._explicitRole=null,this._chipActions=new Ts}ngAfterViewInit(){this._setUpFocusManagement(),this._trackChipSetChanges(),this._trackDestroyedFocusedChip()}ngOnDestroy(){this._keyManager?.destroy(),this._chipActions.destroy(),this._destroyed.next(),this._destroyed.complete()}_hasFocusedChip(){return this._chips&&this._chips.some(e=>e._hasFocus())}_syncChipsState(){this._chips&&this._chips.forEach(e=>{e.disabled=this._disabled,e._changeDetectorRef.markForCheck()})}focus(){}_handleKeydown(e){this._originatesFromChip(e)&&this._keyManager.onKeydown(e)}_isValidIndex(e){return e>=0&&e<this._chips.length}_allowFocusEscape(){if(this.tabIndex!==-1){let e=this.tabIndex;this.tabIndex=-1,setTimeout(()=>this.tabIndex=e)}}_getChipStream(e){return this._chips.changes.pipe(or(null),Kn(()=>rr(...this._chips.map(e))))}_originatesFromChip(e){let n=e.target;for(;n&&n!==this._elementRef.nativeElement;){if(n.classList.contains("mat-mdc-chip"))return!0;n=n.parentElement}return!1}_setUpFocusManagement(){this._chips.changes.pipe(or(this._chips)).subscribe(e=>{let n=[];e.forEach(r=>r._getActions().forEach(o=>n.push(o))),this._chipActions.reset(n),this._chipActions.notifyOnChanges()}),this._keyManager=new sd(this._chipActions).withVerticalOrientation().withHorizontalOrientation(this._dir?this._dir.value:"ltr").withHomeAndEnd().skipPredicate(e=>this._skipPredicate(e)),this.chipFocusChanges.pipe(Rt(this._destroyed)).subscribe(({chip:e})=>{let n=e._getSourceAction(document.activeElement);n&&this._keyManager.updateActiveItem(n)}),this._dir?.change.pipe(Rt(this._destroyed)).subscribe(e=>this._keyManager.withHorizontalOrientation(e))}_skipPredicate(e){return!e.isInteractive||e.disabled}_trackChipSetChanges(){this._chips.changes.pipe(or(null),Rt(this._destroyed)).subscribe(()=>{this.disabled&&Promise.resolve().then(()=>this._syncChipsState()),this._redirectDestroyedChipFocus()})}_trackDestroyedFocusedChip(){this.chipDestroyedChanges.pipe(Rt(this._destroyed)).subscribe(e=>{let r=this._chips.toArray().indexOf(e.chip);this._isValidIndex(r)&&e.chip._hasFocus()&&(this._lastDestroyedFocusedChipIndex=r)})}_redirectDestroyedChipFocus(){if(this._lastDestroyedFocusedChipIndex!=null){if(this._chips.length){let e=Math.min(this._lastDestroyedFocusedChipIndex,this._chips.length-1),n=this._chips.toArray()[e];n.disabled?this._chips.length===1?this.focus():this._keyManager.setPreviousItemActive():n.focus()}else this.focus();this._lastDestroyedFocusedChipIndex=null}}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(ci),F(yr,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-chip-set"]],contentQueries:function(n,r,o){if(n&1&&ri(o,S3,5),n&2){let s;Be(s=Ve())&&(r._chips=s)}},hostAttrs:[1,"mat-mdc-chip-set","mdc-evolution-chip-set"],hostVars:1,hostBindings:function(n,r){n&1&&ne("keydown",function(s){return r._handleKeydown(s)}),n&2&&Tt("role",r.role)},inputs:{disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je],role:"role",tabIndex:[ie.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?0:on(e)]},standalone:!0,features:[zt,Dt],ngContentSelectors:yTe,decls:2,vars:0,consts:[["role","presentation",1,"mdc-evolution-chip-set__chips"]],template:function(n,r){n&1&&(Oi(),b(0,"div",0),dt(1),v())},styles:[".mdc-evolution-chip-set{display:flex}.mdc-evolution-chip-set:focus{outline:none}.mdc-evolution-chip-set__chips{display:flex;flex-flow:wrap;min-width:0}.mdc-evolution-chip-set--overflow .mdc-evolution-chip-set__chips{flex-flow:nowrap}.mdc-evolution-chip-set .mdc-evolution-chip-set__chips{margin-left:-8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip-set__chips,.mdc-evolution-chip-set .mdc-evolution-chip-set__chips[dir=rtl]{margin-left:0;margin-right:-8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-left:8px;margin-right:0}[dir=rtl] .mdc-evolution-chip-set .mdc-evolution-chip,.mdc-evolution-chip-set .mdc-evolution-chip[dir=rtl]{margin-left:0;margin-right:8px}.mdc-evolution-chip-set .mdc-evolution-chip{margin-top:4px;margin-bottom:4px}.mat-mdc-chip-set .mdc-evolution-chip-set__chips{min-width:100%}.mat-mdc-chip-set-stacked{flex-direction:column;align-items:flex-start}.mat-mdc-chip-set-stacked .mat-mdc-chip{width:100%}.mat-mdc-chip-set-stacked .mdc-evolution-chip__graphic{flex-grow:0}.mat-mdc-chip-set-stacked .mdc-evolution-chip__action--primary{flex-basis:100%;justify-content:start}input.mat-mdc-chip-input{flex:1 0 150px;margin-left:8px}[dir=rtl] input.mat-mdc-chip-input{margin-left:0;margin-right:8px}"],encapsulation:2,changeDetection:0})}}return i})();var QZ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({providers:[Zm,{provide:xTe,useValue:{separatorKeyCodes:[13]}}],imports:[Vt,Hu,Vt]})}}return i})();var CTe=0,E3=new _e("CdkAccordion"),JZ=(()=>{class i{constructor(){this._stateChanges=new Le,this._openCloseAllActions=new Le,this.id=`cdk-accordion-${CTe++}`,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[ie.HasDecoratorInputTransform,"multi","multi",Je]},exportAs:["cdkAccordion"],standalone:!0,features:[Bt([{provide:E3,useExisting:i}]),zt,zi]})}}return i})(),STe=0,eK=(()=>{class i{get expanded(){return this._expanded}set expanded(e){if(this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();let n=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,n)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(e,n,r){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=Yt.EMPTY,this.closed=new Qe,this.opened=new Qe,this.destroyed=new Qe,this.expandedChange=new Qe,this.id=`cdk-accordion-child-${STe++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((o,s)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===s&&this.id!==o&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}static{this.\u0275fac=function(n){return new(n||i)(F(E3,12),F(ci),F(Nx))}}static{this.\u0275dir=Me({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[ie.HasDecoratorInputTransform,"expanded","expanded",Je],disabled:[ie.HasDecoratorInputTransform,"disabled","disabled",Je]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[Bt([{provide:E3,useValue:void 0}]),zt]})}}return i})(),tK=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({})}}return i})();var ETe=["body"],TTe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],ITe=["mat-expansion-panel-header","*","mat-action-row"];function DTe(i,t){}var kTe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],ATe=["mat-panel-title","mat-panel-description","*"];function PTe(i,t){if(i&1&&(b(0,"span",1),Kr(),b(1,"svg",2),Fe(2,"path",3),v()()),i&2){let e=G();q("@indicatorRotate",e._getExpandedState())}}var T3=new _e("MAT_ACCORDION"),iK="225ms cubic-bezier(0.4,0.0,0.2,1)",rK={indicatorRotate:Bs("indicatorRotate",[eo("collapsed, void",Wn({transform:"rotate(0deg)"})),eo("expanded",Wn({transform:"rotate(180deg)"})),to("expanded <=> collapsed, void => collapsed",Io(iK))]),bodyExpansion:Bs("bodyExpansion",[eo("collapsed, void",Wn({height:"0px",visibility:"hidden"})),eo("expanded",Wn({height:"*",visibility:""})),to("expanded <=> collapsed, void => collapsed",Io(iK))])},oK=new _e("MAT_EXPANSION_PANEL"),OTe=(()=>{class i{constructor(e,n){this._template=e,this._expansionPanel=n}static{this.\u0275fac=function(n){return new(n||i)(F(ji),F(oK,8))}}static{this.\u0275dir=Me({type:i,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}}return i})(),NTe=0,sK=new _e("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),I3=(()=>{class i extends eK{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=e}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,n,r,o,s,a,c){super(e,n,r),this._viewContainerRef=o,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new Qe,this.afterCollapse=new Qe,this._inputChanges=new Le,this._headerId=`mat-expansion-panel-header-${NTe++}`,this.accordion=e,this._document=s,this._animationsDisabled=a==="NoopAnimations",c&&(this.hideToggle=c.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(or(null),Pi(()=>this.expanded&&!this._portal),nn(1)).subscribe(()=>{this._portal=new Ls(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}_animationStarted(e){!nK(e)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(e){nK(e)||(e.toState==="expanded"?this.afterExpand.emit():e.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static{this.\u0275fac=function(n){return new(n||i)(F(T3,12),F(ci),F(Nx),F(rn),F(kt),F($i,8),F(sK,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(n,r,o){if(n&1&&ri(o,OTe,5),n&2){let s;Be(s=Ve())&&(r._lazyContent=s.first)}},viewQuery:function(n,r){if(n&1&&Lt(ETe,5),n&2){let o;Be(o=Ve())&&(r._body=o.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(n,r){n&2&&qe("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[ie.HasDecoratorInputTransform,"hideToggle","hideToggle",Je],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[Bt([{provide:T3,useValue:void 0},{provide:oK,useExisting:i}]),zt,It,zi,Dt],ngContentSelectors:ITe,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(n,r){if(n&1){let o=ot();Oi(TTe),dt(0),b(1,"div",1,0),ne("@bodyExpansion.start",function(a){return Q(o),J(r._animationStarted(a))})("@bodyExpansion.done",function(a){return Q(o),J(r._animationDone(a))}),b(3,"div",2),dt(4,1),ve(5,DTe,0,0,"ng-template",3),v(),dt(6,2),v()}n&2&&(P(),q("@bodyExpansion",r._getExpandedState())("id",r.id),Tt("aria-labelledby",r._headerId),P(4),q("cdkPortalOutlet",r._portal))},dependencies:[Qc],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[rK.bodyExpansion]},changeDetection:0})}}return i})();function nK(i){return i.fromState==="void"}var D3=(()=>{class i{constructor(e,n,r,o,s,a,c){this.panel=e,this._element=n,this._focusMonitor=r,this._changeDetectorRef=o,this._animationMode=a,this._parentChangeSubscription=Yt.EMPTY,this.tabIndex=0;let l=e.accordion?e.accordion._stateChanges.pipe(Pi(d=>!!(d.hideToggle||d.togglePosition))):Zn;this.tabIndex=parseInt(c||"")||0,this._parentChangeSubscription=rr(e.opened,e.closed,l,e._inputChanges.pipe(Pi(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Pi(()=>e._containsFocus())).subscribe(()=>r.focusVia(n,"program")),s&&(this.expandedHeight=s.expandedHeight,this.collapsedHeight=s.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:To(e)||(e.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e);return}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static{this.\u0275fac=function(n){return new(n||i)(F(I3,1),F(Re),F(Yc),F(ci),F(sK,8),F($i,8),zr("tabindex"))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(n,r){n&1&&ne("click",function(){return r._toggle()})("keydown",function(s){return r._keydown(s)}),n&2&&(Tt("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),$n("height",r._getHeaderHeight()),qe("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after",r._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",r._getTogglePosition()==="before")("_mat-animation-noopable",r._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[ie.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?0:on(e)]},standalone:!0,features:[zt,Dt],ngContentSelectors:ATe,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(n,r){n&1&&(Oi(kTe),b(0,"span",0),dt(1),dt(2,1),dt(3,2),v(),ve(4,PTe,3,1,"span",1)),n&2&&(qe("mat-content-hide-toggle",!r._showToggle()),P(4),Zt(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color);display:inline-block;display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color);display:none;display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[rK.indicatorRotate]},changeDetection:0})}}return i})();var aK=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0})}}return i})(),cK=(()=>{class i extends JZ{constructor(){super(...arguments),this._ownHeaders=new Ts,this.hideToggle=!1,this.displayMode="default",this.togglePosition="after"}ngAfterContentInit(){this._headers.changes.pipe(or(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(n=>n.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new sd(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["mat-accordion"]],contentQueries:function(n,r,o){if(n&1&&ri(o,D3,5),n&2){let s;Be(s=Ve())&&(r._headers=s)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(n,r){n&2&&qe("mat-accordion-multi",r.multi)},inputs:{hideToggle:[ie.HasDecoratorInputTransform,"hideToggle","hideToggle",Je],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],standalone:!0,features:[Bt([{provide:T3,useExisting:i}]),zt,It]})}}return i})(),lK=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,tK,ip]})}}return i})();var LTe=[[["caption"]],[["colgroup"],["col"]],"*"],BTe=["caption","colgroup, col","*"];function VTe(i,t){i&1&&dt(0,2)}function UTe(i,t){i&1&&(b(0,"thead",0),vr(1,1),v(),b(2,"tbody",0),vr(3,2)(4,3),v(),b(5,"tfoot",0),vr(6,4),v())}function zTe(i,t){i&1&&vr(0,1)(1,2)(2,3)(3,4)}var Na=new _e("CDK_TABLE");var YS=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(F(ji))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkCellDef",""]],standalone:!0})}}return i})(),ZS=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(F(ji))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkHeaderCellDef",""]],standalone:!0})}}return i})(),hK=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(F(ji))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkFooterCellDef",""]],standalone:!0})}}return i})(),kf=(()=>{class i{get name(){return this._name}set name(e){this._setNameInput(e)}get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}constructor(e){this._table=e,this._hasStickyChanged=!1,this._sticky=!1,this._stickyEnd=!1}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static{this.\u0275fac=function(n){return new(n||i)(F(Na,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkColumnDef",""]],contentQueries:function(n,r,o){if(n&1&&(ri(o,YS,5),ri(o,ZS,5),ri(o,hK,5)),n&2){let s;Be(s=Ve())&&(r.cell=s.first),Be(s=Ve())&&(r.headerCell=s.first),Be(s=Ve())&&(r.footerCell=s.first)}},inputs:{name:[ie.None,"cdkColumnDef","name"],sticky:[ie.HasDecoratorInputTransform,"sticky","sticky",Je],stickyEnd:[ie.HasDecoratorInputTransform,"stickyEnd","stickyEnd",Je]},standalone:!0,features:[Bt([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),zt]})}}return i})(),GS=class{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}},mK=(()=>{class i extends GS{constructor(e,n){super(e,n)}static{this.\u0275fac=function(n){return new(n||i)(F(kf),F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[It]})}}return i})();var pK=(()=>{class i extends GS{constructor(e,n){super(e,n);let r=e._table?._getCellRole();r&&n.nativeElement.setAttribute("role",r)}static{this.\u0275fac=function(n){return new(n||i)(F(kf),F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[It]})}}return i})(),WS=class{constructor(){this.tasks=[],this.endTasks=[]}},qS=new _e("_COALESCED_STYLE_SCHEDULER"),A3=(()=>{class i{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new Le}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new WS,this._getScheduleObservable().pipe(Rt(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let e=this._currentSchedule;this._currentSchedule=new WS;for(let n of e.tasks)n();for(let n of e.endTasks)n()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?cn(Promise.resolve(void 0)):this._ngZone.onStable.pipe(nn(1))}static{this.\u0275fac=function(n){return new(n||i)(pe(Ne))}}static{this.\u0275prov=we({token:i,factory:i.\u0275fac})}}return i})();var P3=(()=>{class i{constructor(e,n){this.template=e,this._differs=n}ngOnChanges(e){if(!this._columnsDiffer){let n=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(n).create(),this._columnsDiffer.diff(n)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof pb?e.headerCell.template:this instanceof O3?e.footerCell.template:e.cell.template}static{this.\u0275fac=function(n){return new(n||i)(F(ji),F(qa))}}static{this.\u0275dir=Me({type:i,features:[zi]})}}return i})(),pb=(()=>{class i extends P3{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,n,r){super(e,n),this._table=r,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static{this.\u0275fac=function(n){return new(n||i)(F(ji),F(qa),F(Na,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[ie.None,"cdkHeaderRowDef","columns"],sticky:[ie.HasDecoratorInputTransform,"cdkHeaderRowDefSticky","sticky",Je]},standalone:!0,features:[zt,It,zi]})}}return i})(),O3=(()=>{class i extends P3{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,n,r){super(e,n),this._table=r,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static{this.\u0275fac=function(n){return new(n||i)(F(ji),F(qa),F(Na,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[ie.None,"cdkFooterRowDef","columns"],sticky:[ie.HasDecoratorInputTransform,"cdkFooterRowDefSticky","sticky",Je]},standalone:!0,features:[zt,It,zi]})}}return i})(),KS=(()=>{class i extends P3{constructor(e,n,r){super(e,n),this._table=r}static{this.\u0275fac=function(n){return new(n||i)(F(ji),F(qa),F(Na,8))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkRowDef",""]],inputs:{columns:[ie.None,"cdkRowDefColumns","columns"],when:[ie.None,"cdkRowDefWhen","when"]},standalone:!0,features:[It]})}}return i})(),Yh=(()=>{class i{static{this.mostRecentCellOutlet=null}constructor(e){this._viewContainer=e,i.mostRecentCellOutlet=this}ngOnDestroy(){i.mostRecentCellOutlet===this&&(i.mostRecentCellOutlet=null)}static{this.\u0275fac=function(n){return new(n||i)(F(rn))}}static{this.\u0275dir=Me({type:i,selectors:[["","cdkCellOutlet",""]],standalone:!0})}}return i})(),N3=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=rt({type:i,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[Dt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){n&1&&vr(0,0)},dependencies:[Yh],encapsulation:2})}}return i})();var R3=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=rt({type:i,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[Dt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){n&1&&vr(0,0)},dependencies:[Yh],encapsulation:2})}}return i})(),fK=(()=>{class i{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}static{this.\u0275fac=function(n){return new(n||i)(F(ji))}}static{this.\u0275dir=Me({type:i,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0})}}return i})(),dK=["top","bottom","left","right"],k3=class{constructor(t,e,n,r,o=!0,s=!0,a){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=r,this._isBrowser=o,this._needsPositionStickyOnElement=s,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){let n=[];for(let r of t)if(r.nodeType===r.ELEMENT_NODE){n.push(r);for(let o=0;o<r.children.length;o++)n.push(r.children[o])}this._coalescedStyleScheduler.schedule(()=>{for(let r of n)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,n,r=!0){if(!t.length||!this._isBrowser||!(e.some(o=>o)||n.some(o=>o))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let o=t[0],s=o.children.length,a=this._getCellWidths(o,r),c=this._getStickyStartColumnPositions(a,e),l=this._getStickyEndColumnPositions(a,n),d=e.lastIndexOf(!0),u=n.indexOf(!0),h=this.direction==="rtl",m=h?"right":"left",p=h?"left":"right";for(let _ of t)for(let f=0;f<s;f++){let g=_.children[f];e[f]&&this._addStickyStyle(g,m,c[f],f===d),n[f]&&this._addStickyStyle(g,p,l[f],f===u)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:d===-1?[]:a.slice(0,d+1).map((_,f)=>e[f]?_:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:u===-1?[]:a.slice(u).map((_,f)=>n[f+u]?_:null).reverse()}))})}stickRows(t,e,n){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let r=n==="bottom"?t.slice().reverse():t,o=n==="bottom"?e.slice().reverse():e,s=[],a=[],c=[];for(let d=0,u=0;d<r.length;d++){if(!o[d])continue;s[d]=u;let h=r[d];c[d]=this._isNativeHtmlTable?Array.from(h.children):[h];let m=h.getBoundingClientRect().height;u+=m,a[d]=m}let l=o.lastIndexOf(!0);for(let d=0;d<r.length;d++){if(!o[d])continue;let u=s[d],h=d===l;for(let m of c[d])this._addStickyStyle(m,n,u,h)}n==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:s,elements:c}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:s,elements:c})})}updateStickyFooterContainer(t,e){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let n=t.querySelector("tfoot");n&&(e.some(r=>!r)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1))})}_removeStickyStyle(t,e){for(let r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);dK.some(r=>e.indexOf(r)===-1&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,n,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${n}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){let e={top:100,bottom:10,left:1,right:1},n=0;for(let r of dK)t.style[r]&&(n+=e[r]);return n?`${n}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let n=[],r=t.children;for(let o=0;o<r.length;o++){let s=r[o];n.push(s.getBoundingClientRect().width)}return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(t,e){let n=[],r=0;for(let o=0;o<t.length;o++)e[o]&&(n[o]=r,r+=t[o]);return n}_getStickyEndColumnPositions(t,e){let n=[],r=0;for(let o=t.length;o>0;o--)e[o]&&(n[o]=r,r+=t[o]);return n}};var XS=new _e("CDK_SPL");var F3=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n;let r=ye(Na);r._rowOutlet=this,r._outletAssigned()}static{this.\u0275fac=function(n){return new(n||i)(F(rn),F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["","rowOutlet",""]],standalone:!0})}}return i})(),L3=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n;let r=ye(Na);r._headerRowOutlet=this,r._outletAssigned()}static{this.\u0275fac=function(n){return new(n||i)(F(rn),F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["","headerRowOutlet",""]],standalone:!0})}}return i})(),B3=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n;let r=ye(Na);r._footerRowOutlet=this,r._outletAssigned()}static{this.\u0275fac=function(n){return new(n||i)(F(rn),F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["","footerRowOutlet",""]],standalone:!0})}}return i})(),V3=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n;let r=ye(Na);r._noDataRowOutlet=this,r._outletAssigned()}static{this.\u0275fac=function(n){return new(n||i)(F(rn),F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["","noDataRowOutlet",""]],standalone:!0})}}return i})();var U3=(()=>{class i{_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role"),n=e==="grid"||e==="treegrid"?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&n==="cell"?null:n}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,n,r,o,s,a,c,l,d,u,h,m){this._differs=e,this._changeDetectorRef=n,this._elementRef=r,this._dir=s,this._platform=c,this._viewRepeater=l,this._coalescedStyleScheduler=d,this._viewportRuler=u,this._stickyPositioningListener=h,this._ngZone=m,this._onDestroy=new Le,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasAllOutlets=!1,this._hasInitialized=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new Qe,this.viewChange=new Ri({start:0,end:Number.MAX_VALUE}),o||r.nativeElement.setAttribute("role","table"),this._document=a,this._isServer=!c.isBrowser,this._isNativeHtmlTable=r.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((e,n)=>this.trackBy?this.trackBy(n.dataIndex,n.data):n),this._viewportRuler.change().pipe(Rt(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),Ox(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let n=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,n,(r,o,s)=>this._getEmbeddedViewArgs(r.item,s),r=>r.item.data,r=>{r.operation===np.INSERTED&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{let o=n.get(r.currentIndex);o.context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&Ne.isInAngularZone()?this._ngZone.onStable.pipe(nn(1),Rt(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let r=uK(this._headerRowOutlet,"thead");r&&(r.style.display=e.length?"":"none")}let n=this._headerRowDefs.map(r=>r.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,n,"top"),this._headerRowDefs.forEach(r=>r.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let r=uK(this._footerRowOutlet,"tfoot");r&&(r.style.display=e.length?"":"none")}let n=this._footerRowDefs.map(r=>r.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach(r=>r.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),n=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...n,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((o,s)=>{this._addStickyColumnStyles([o],this._headerRowDefs[s])}),this._rowDefs.forEach(o=>{let s=[];for(let a=0;a<n.length;a++)this._renderRows[a].rowDef===o&&s.push(n[a]);this._addStickyColumnStyles(s,o)}),r.forEach((o,s)=>{this._addStickyColumnStyles([o],this._footerRowDefs[s])}),Array.from(this._columnDefsByName.values()).forEach(o=>o.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let n=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||n,this._forceRecalculateCellWidths=n,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],n=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let o=this._data[r],s=this._getRenderRowsForData(o,r,n.get(o));this._cachedRenderRowsMap.has(o)||this._cachedRenderRowsMap.set(o,new WeakMap);for(let a=0;a<s.length;a++){let c=s[a],l=this._cachedRenderRowsMap.get(c.data);l.has(c.rowDef)?l.get(c.rowDef).push(c):l.set(c.rowDef,[c]),e.push(c)}}return e}_getRenderRowsForData(e,n,r){return this._getRowDefs(e,n).map(s=>{let a=r&&r.has(s)?r.get(s):[];if(a.length){let c=a.shift();return c.dataIndex=n,c}else return{data:e,rowDef:s,dataIndex:n}})}_cacheColumnDefs(){this._columnDefsByName.clear(),$S(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(n=>{this._columnDefsByName.has(n.name),this._columnDefsByName.set(n.name,n)})}_cacheRowDefs(){this._headerRowDefs=$S(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=$S(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=$S(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(n=>!n.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(s,a)=>s||!!a.getColumnsDiff(),n=this._rowDefs.reduce(e,!1);n&&this._forceRenderDataRows();let r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();let o=this._footerRowDefs.reduce(e,!1);return o&&this._forceRenderFooterRows(),n||r||o}_switchDataSource(e){this._data=[],Ox(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;Ox(this.dataSource)?e=this.dataSource.connect(this):mu(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=ut(this.dataSource)),this._renderChangeSubscription=e.pipe(Rt(this._onDestroy)).subscribe(n=>{this._data=n||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,n)=>this._renderRow(this._headerRowOutlet,e,n)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,n)=>this._renderRow(this._footerRowOutlet,e,n)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,n){let r=Array.from(n.columns||[]).map(a=>{let c=this._columnDefsByName.get(a);return c}),o=r.map(a=>a.sticky),s=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,o,s,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let n=[];for(let r=0;r<e.viewContainer.length;r++){let o=e.viewContainer.get(r);n.push(o.rootNodes[0])}return n}_getRowDefs(e,n){if(this._rowDefs.length==1)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(o=>!o.when||o.when(n,e));else{let o=this._rowDefs.find(s=>s.when&&s.when(n,e))||this._defaultRowDef;o&&r.push(o)}return r.length,r}_getEmbeddedViewArgs(e,n){let r=e.rowDef,o={$implicit:e.data};return{templateRef:r.template,context:o,index:n}}_renderRow(e,n,r,o={}){let s=e.viewContainer.createEmbeddedView(n.template,o,r);return this._renderCellTemplateForItem(n,o),s}_renderCellTemplateForItem(e,n){for(let r of this._getCellTemplates(e))Yh.mostRecentCellOutlet&&Yh.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,n);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let n=0,r=e.length;n<r;n++){let s=e.get(n).context;s.count=r,s.first=n===0,s.last=n===r-1,s.even=n%2===0,s.odd=!s.even,this.multiTemplateDataRows?(s.dataIndex=this._renderRows[n].dataIndex,s.renderIndex=n):s.index=this._renderRows[n].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,n=>{let r=this._columnDefsByName.get(n);return e.extractCellTemplate(r)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(n,r)=>n||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new k3(this._isNativeHtmlTable,this.stickyCssClass,e,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:ut()).pipe(Rt(this._onDestroy)).subscribe(n=>{this._stickyStyler.direction=n,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(n=>!n._table||n._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let n=this._rowOutlet.viewContainer.length===0;if(n===this._isShowingNoDataRow)return;let r=this._noDataRowOutlet.viewContainer;if(n){let o=r.createEmbeddedView(e.templateRef),s=o.rootNodes[0];o.rootNodes.length===1&&s?.nodeType===this._document.ELEMENT_NODE&&(s.setAttribute("role","row"),s.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=n,this._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(n){return new(n||i)(F(qa),F(ci),F(Re),zr("role"),F(yr,8),F(kt),F(li),F(i_),F(qS),F(la),F(XS,12),F(Ne,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(n,r,o){if(n&1&&(ri(o,fK,5),ri(o,kf,5),ri(o,KS,5),ri(o,pb,5),ri(o,O3,5)),n&2){let s;Be(s=Ve())&&(r._noDataRow=s.first),Be(s=Ve())&&(r._contentColumnDefs=s),Be(s=Ve())&&(r._contentRowDefs=s),Be(s=Ve())&&(r._contentHeaderRowDefs=s),Be(s=Ve())&&(r._contentFooterRowDefs=s)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(n,r){n&2&&qe("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[ie.HasDecoratorInputTransform,"multiTemplateDataRows","multiTemplateDataRows",Je],fixedLayout:[ie.HasDecoratorInputTransform,"fixedLayout","fixedLayout",Je]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[Bt([{provide:Na,useExisting:i},{provide:i_,useClass:rp},{provide:qS,useClass:A3},{provide:XS,useValue:null}]),zt,Dt],ngContentSelectors:BTe,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,r){n&1&&(Oi(LTe),dt(0),dt(1,1),ve(2,VTe,1,0)(3,UTe,7,0)(4,zTe,4,0)),n&2&&(P(2),Zt(2,r._isServer?2:-1),P(),Zt(3,r._isNativeHtmlTable?3:4))},dependencies:[L3,F3,V3,B3],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}}return i})();function $S(i,t){return i.concat(Array.from(t))}function uK(i,t){let e=t.toUpperCase(),n=i.viewContainer.element.nativeElement;for(;n;){let r=n.nodeType===1?n.nodeName:null;if(r===e)return n;if(r==="TABLE")break;n=n.parentNode}return null}var gK=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[n_]})}}return i})();var HTe=[[["caption"]],[["colgroup"],["col"]],"*"],jTe=["caption","colgroup, col","*"];function $Te(i,t){i&1&&dt(0,2)}function GTe(i,t){i&1&&(b(0,"thead",0),vr(1,1),v(),b(2,"tbody",2),vr(3,3)(4,4),v(),b(5,"tfoot",0),vr(6,5),v())}function WTe(i,t){i&1&&vr(0,1)(1,3)(2,4)(3,5)}var QS=(()=>{class i extends U3{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275cmp=rt({type:i,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(n,r){n&2&&qe("mdc-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[Bt([{provide:U3,useExisting:i},{provide:Na,useExisting:i},{provide:qS,useClass:A3},{provide:i_,useClass:rp},{provide:XS,useValue:null}]),It,Dt],ngContentSelectors:jTe,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,r){n&1&&(Oi(HTe),dt(0),dt(1,1),ve(2,$Te,1,0)(3,GTe,7,0)(4,WTe,4,0)),n&2&&(P(2),Zt(2,r._isServer?2:-1),P(),Zt(3,r._isNativeHtmlTable?3:4))},dependencies:[L3,F3,V3,B3],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}}return i})(),JS=(()=>{class i extends YS{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["","matCellDef",""]],standalone:!0,features:[Bt([{provide:YS,useExisting:i}]),It]})}}return i})(),e1=(()=>{class i extends ZS{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[Bt([{provide:ZS,useExisting:i}]),It]})}}return i})();var t1=(()=>{class i extends kf{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["","matColumnDef",""]],inputs:{name:[ie.None,"matColumnDef","name"]},standalone:!0,features:[Bt([{provide:kf,useExisting:i},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),It]})}}return i})(),i1=(()=>{class i extends mK{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[It]})}}return i})();var n1=(()=>{class i extends pK{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[It]})}}return i})();var r1=(()=>{class i extends pb{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[ie.None,"matHeaderRowDef","columns"],sticky:[ie.HasDecoratorInputTransform,"matHeaderRowDefSticky","sticky",Je]},standalone:!0,features:[Bt([{provide:pb,useExisting:i}]),zt,It]})}}return i})();var o1=(()=>{class i extends KS{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["","matRowDef",""]],inputs:{columns:[ie.None,"matRowDefColumns","columns"],when:[ie.None,"matRowDefWhen","when"]},standalone:!0,features:[Bt([{provide:KS,useExisting:i}]),It]})}}return i})(),s1=(()=>{class i extends N3{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275cmp=rt({type:i,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[Bt([{provide:N3,useExisting:i}]),It,Dt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){n&1&&vr(0,0)},dependencies:[Yh],encapsulation:2})}}return i})();var a1=(()=>{class i extends R3{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275cmp=rt({type:i,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[Bt([{provide:R3,useExisting:i}]),It,Dt],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){n&1&&vr(0,0)},dependencies:[Yh],encapsulation:2})}}return i})();var c1=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,gK,Vt]})}}return i})();function qTe(i,t){i&1&&(b(0,"mat-error"),M(1," Image URL is required "),v())}function XTe(i,t){if(i&1&&(b(0,"div",19)(1,"mat-icon"),M(2,"info"),v(),b(3,"div")(4,"strong"),M(5,"Current Shelf:"),v(),M(6),v()()),i&2){let e=G();P(6),mg(" ",e.selectedShelf.name," (",e.selectedShelf.width," x ",e.selectedShelf.height," cm) ")}}function YTe(i,t){i&1&&(b(0,"div",20)(1,"mat-icon"),M(2,"warning"),v(),b(3,"div")(4,"strong"),M(5,"No shelf selected."),v(),M(6," Please select a shelf from the Visual Space Mapper to add detected medicines. "),v()())}function ZTe(i,t){i&1&&(b(0,"div",21)(1,"mat-icon"),M(2,"inventory_2"),v(),b(3,"p"),M(4,"No medicines detected yet. Upload an image to start detection."),v()())}function KTe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Medicine Name"),v())}function QTe(i,t){if(i&1&&(b(0,"mat-cell")(1,"strong"),M(2),v()()),i&2){let e=t.$implicit;P(2),ft(e.name)}}function JTe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Class"),v())}function eIe(i,t){if(i&1&&(b(0,"mat-cell")(1,"mat-chip-set",32)(2,"mat-chip",33),M(3),v()()()),i&2){let e=t.$implicit;P(3),ft(e.name)}}function tIe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Confidence"),v())}function iIe(i,t){if(i&1&&(b(0,"mat-cell"),Fe(1,"mat-progress-bar",34),M(2),v()),i&2){let e=t.$implicit;P(),q("value",e.confidence*100),P(),gt(" ",(e.confidence*100).toFixed(1),"% ")}}function nIe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Position"),v())}function rIe(i,t){if(i&1&&(b(0,"mat-cell")(1,"div",35)(2,"span"),M(3),v(),b(4,"span"),M(5),v()()()),i&2){let e=t.$implicit;P(3),gt("X: ",e.x,""),P(2),gt("Y: ",e.y,"")}}function oIe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Actions"),v())}function sIe(i,t){if(i&1){let e=ot();b(0,"mat-cell")(1,"button",36),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.addMedicineToShelf(r))}),b(2,"mat-icon"),M(3,"add_location_alt"),v()(),b(4,"button",37),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.removeMedicine(r.id))}),b(5,"mat-icon"),M(6,"delete"),v()()()}if(i&2){let e=G(2);P(),q("disabled",!e.selectedShelf)}}function aIe(i,t){i&1&&Fe(0,"mat-header-row")}function cIe(i,t){i&1&&Fe(0,"mat-row")}function lIe(i,t){if(i&1&&(b(0,"mat-table",22),Mo(1,23),ve(2,KTe,2,0,"mat-header-cell",24)(3,QTe,3,1,"mat-cell",25),Co(),Mo(4,26),ve(5,JTe,2,0,"mat-header-cell",24)(6,eIe,4,1,"mat-cell",25),Co(),Mo(7,27),ve(8,tIe,2,0,"mat-header-cell",24)(9,iIe,3,2,"mat-cell",25),Co(),Mo(10,28),ve(11,nIe,2,0,"mat-header-cell",24)(12,rIe,6,2,"mat-cell",25),Co(),Mo(13,29),ve(14,oIe,2,0,"mat-header-cell",24)(15,sIe,7,1,"mat-cell",25),Co(),ve(16,aIe,1,0,"mat-header-row",30)(17,cIe,1,0,"mat-row",31),v()),i&2){let e=G();q("dataSource",e.detectedMedicines),P(16),q("matHeaderRowDef",e.displayedColumns),P(),q("matRowDefColumns",e.displayedColumns)}}function dIe(i,t){if(i&1&&(b(0,"div",38)(1,"h3"),M(2,"Detection Summary"),v(),b(3,"mat-card",39)(4,"mat-card-content")(5,"div",40)(6,"span"),M(7,"Total Objects Detected:"),v(),b(8,"strong"),M(9),v()(),b(10,"div",40)(11,"span"),M(12,"Image Dimensions:"),v(),b(13,"strong"),M(14),v()(),b(15,"div",40)(16,"span"),M(17,"Detection Time:"),v(),b(18,"strong"),M(19),ia(20,"date"),v()()()()()),i&2){let e=G();P(9),ft(e.detectionResult.objects.length),P(5),Dr("",e.detectionResult.imageWidth," x ",e.detectionResult.imageHeight," px"),P(5),ft(Yl(20,4,e.detectionResult.timestamp,"short"))}}var l1=(()=>{class i{constructor(e,n,r,o,s){this.formBuilder=e,this.imageDetectionService=n,this.shelfMappingService=r,this.medicineService=o,this.snackBar=s,this.detectionResult=null,this.isLoading=!1,this.selectedShelf=null,this.medicines=[],this.detectedMedicines=[],this.displayedColumns=["name","class","confidence","position","actions"],this.createForm()}ngOnInit(){this.medicineService.getMedicinesObservable().subscribe(e=>{this.medicines=e}),this.imageDetectionService.getLoadingState().subscribe(e=>{this.isLoading=e}),this.imageDetectionService.getDetectionResults().subscribe(e=>{this.detectionResult=e,e&&this.processDetectionResults(e)}),this.shelfMappingService.getCurrentShelf().subscribe(e=>{this.selectedShelf=e,e&&(this.detectedMedicines=this.shelfMappingService.getMedicinesByShelf(e.id))})}createForm(){this.form=this.formBuilder.group({imageUrl:["",ra.required],minConfidence:[.5,[ra.required,ra.min(0),ra.max(1)]],filterClass:[""]})}detectFromUrl(){return oe(this,null,function*(){let e=this.form.get("imageUrl")?.value;if(e){let n=yield this.imageDetectionService.detectMedicines(e);n&&this.snackBar.open(`Detected ${n.objects.length} objects`,"Close",{duration:3e3})}})}processDetectionResults(e){let n=this.form.get("minConfidence")?.value||.5,r=this.form.get("filterClass")?.value,o=e.objects.filter(s=>s.score>=n);r&&(o=o.filter(s=>s.class.toLowerCase().includes(r.toLowerCase()))),this.detectedMedicines=o.map((s,a)=>({id:`detected_${a}_${Date.now()}`,name:this.getMedicineNameByClass(s.class),barcode:"",x:Math.round(s.x),y:Math.round(s.y),width:Math.round(s.bbox[2]),height:Math.round(s.bbox[3]),confidence:s.score,shelfId:this.selectedShelf?.id||"",detectionTime:new Date}))}getMedicineNameByClass(e){return this.medicines.find(r=>r.name.toLowerCase().includes(e.toLowerCase())||r.category?.toLowerCase().includes(e.toLowerCase()))?.name||e}addMedicineToShelf(e){if(!this.selectedShelf){this.snackBar.open("Please select a shelf first","Close",{duration:3e3});return}this.shelfMappingService.addMedicineToShelf(this.selectedShelf.id,e),this.snackBar.open(`${e.name} added to shelf`,"Close",{duration:3e3})}removeMedicine(e){this.selectedShelf&&(this.shelfMappingService.removeMedicineFromShelf(this.selectedShelf.id,e),this.detectedMedicines=this.detectedMedicines.filter(n=>n.id!==e),this.snackBar.open("Medicine removed","Close",{duration:3e3}))}updatePosition(e,n,r){this.selectedShelf&&(this.shelfMappingService.updateMedicineLocation(this.selectedShelf.id,e,n,r),this.snackBar.open("Position updated","Close",{duration:2e3}))}filterDetections(){this.detectionResult&&this.processDetectionResults(this.detectionResult)}getPositionText(e){return`(${e.x}, ${e.y})`}static{this.\u0275fac=function(n){return new(n||i)(F(g5),F(CM),F(HS),F(SM),F(Xh))}}static{this.\u0275cmp=rt({type:i,selectors:[["app-medicine-detection"]],decls:50,vars:11,consts:[[1,"medicine-detection-container"],[1,"detection-card"],[1,"settings-accordion"],[1,"settings-form",3,"formGroup"],["appearance","fill",1,"full-width"],["matInput","","formControlName","imageUrl","placeholder","Enter image URL"],[4,"ngIf"],[1,"form-row"],["appearance","fill"],["matInput","","type","number","formControlName","minConfidence","min","0","max","1","step","0.1"],["matInput","","formControlName","filterClass","placeholder","e.g., bottle, box"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-button","",3,"click","disabled"],["class","shelf-info",4,"ngIf"],["class","warning-info",4,"ngIf"],[1,"detected-medicines-section"],["class","empty-state",4,"ngIf"],["class","medicines-table",3,"dataSource",4,"ngIf"],["class","detection-summary",4,"ngIf"],[1,"shelf-info"],[1,"warning-info"],[1,"empty-state"],[1,"medicines-table",3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","class"],["matColumnDef","confidence"],["matColumnDef","position"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],["aria-label","Class"],["selected",""],["mode","determinate",1,"confidence-bar",3,"value"],[1,"position-display"],["mat-icon-button","","matTooltip","Add to shelf","color","accent",3,"click","disabled"],["mat-icon-button","","matTooltip","Remove","color","warn",3,"click"],[1,"detection-summary"],[1,"summary-card"],[1,"summary-row"]],template:function(n,r){if(n&1&&(b(0,"div",0)(1,"mat-card",1)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),M(5,"local_pharmacy"),v(),M(6," Medicine Detection & Placement "),v(),b(7,"mat-card-subtitle"),M(8,"Detect medicines from images and map them to shelf locations"),v()(),b(9,"mat-card-content")(10,"mat-accordion",2)(11,"mat-expansion-panel")(12,"mat-expansion-panel-header")(13,"mat-panel-title")(14,"mat-icon"),M(15,"settings"),v(),M(16," Detection Settings "),v()(),b(17,"form",3)(18,"mat-form-field",4)(19,"mat-label"),M(20,"Image URL"),v(),Fe(21,"input",5),ve(22,qTe,2,0,"mat-error",6),v(),b(23,"div",7)(24,"mat-form-field",8)(25,"mat-label"),M(26,"Min Confidence"),v(),Fe(27,"input",9),b(28,"mat-hint"),M(29,"0.0 - 1.0"),v()(),b(30,"mat-form-field",8)(31,"mat-label"),M(32,"Filter by Class"),v(),Fe(33,"input",10),v()(),b(34,"button",11),ne("click",function(){return r.detectFromUrl()}),b(35,"mat-icon"),M(36,"search"),v(),M(37),v(),b(38,"button",12),ne("click",function(){return r.filterDetections()}),b(39,"mat-icon"),M(40,"filter_list"),v(),M(41," Apply Filters "),v()()()(),ve(42,XTe,7,3,"div",13)(43,YTe,7,0,"div",14),b(44,"div",15)(45,"h3"),M(46),v(),ve(47,ZTe,5,0,"div",16)(48,lIe,18,3,"mat-table",17),v(),ve(49,dIe,21,7,"div",18),v()()()),n&2){let o;P(17),q("formGroup",r.form),P(5),q("ngIf",(o=r.form.get("imageUrl"))==null?null:o.hasError("required")),P(12),q("disabled",r.isLoading),P(3),gt(" ",r.isLoading?"Detecting...":"Detect Medicines"," "),P(),q("disabled",!r.detectionResult),P(4),q("ngIf",r.selectedShelf),P(),q("ngIf",!r.selectedShelf),P(3),gt("Detected Medicines (",r.detectedMedicines.length,")"),P(),q("ngIf",r.detectedMedicines.length===0),P(),q("ngIf",r.detectedMedicines.length>0),P(),q("ngIf",r.detectionResult)}},dependencies:[As,a5,Ps,sa,Za,Qz,Wc,Cg,Nu,II,pc,Ld,Km,Jm,ep,Sx,Qm,Ud,Vd,IM,_X,Wp,ud,jS,S3,KZ,Yp,cK,I3,D3,aK,QS,e1,r1,t1,JS,o1,i1,n1,s1,a1,Cy],styles:[".medicine-detection-container[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);min-height:100vh}.medicine-detection-container[_ngcontent-%COMP%]   .detection-card[_ngcontent-%COMP%]{box-shadow:0 8px 16px #0000001a}.medicine-detection-container[_ngcontent-%COMP%]   .detection-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.medicine-detection-container[_ngcontent-%COMP%]   .detection-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;color:#00c853}.medicine-detection-container[_ngcontent-%COMP%]   .detection-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.medicine-detection-container[_ngcontent-%COMP%]   .settings-accordion[_ngcontent-%COMP%]{margin-bottom:30px}.medicine-detection-container[_ngcontent-%COMP%]   .settings-accordion[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.medicine-detection-container[_ngcontent-%COMP%]   .settings-accordion[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]   mat-panel-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.medicine-detection-container[_ngcontent-%COMP%]   .settings-accordion[_ngcontent-%COMP%]   .settings-form[_ngcontent-%COMP%]{padding:20px 0}.medicine-detection-container[_ngcontent-%COMP%]   .settings-accordion[_ngcontent-%COMP%]   .settings-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.medicine-detection-container[_ngcontent-%COMP%]   .settings-accordion[_ngcontent-%COMP%]   .settings-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:15px;margin-bottom:15px}.medicine-detection-container[_ngcontent-%COMP%]   .settings-accordion[_ngcontent-%COMP%]   .settings-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.medicine-detection-container[_ngcontent-%COMP%]   .settings-accordion[_ngcontent-%COMP%]   .settings-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-right:10px;margin-top:10px}.medicine-detection-container[_ngcontent-%COMP%]   .shelf-info[_ngcontent-%COMP%], .medicine-detection-container[_ngcontent-%COMP%]   .warning-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;margin-bottom:20px;border-radius:8px}.medicine-detection-container[_ngcontent-%COMP%]   .shelf-info[_ngcontent-%COMP%]{background:#e8f5e9;border-left:4px solid #4caf50}.medicine-detection-container[_ngcontent-%COMP%]   .shelf-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.medicine-detection-container[_ngcontent-%COMP%]   .warning-info[_ngcontent-%COMP%]{background:#fff3e0;border-left:4px solid #ff9800}.medicine-detection-container[_ngcontent-%COMP%]   .warning-info[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]{margin:30px 0;padding:20px;background:#fff;border-radius:8px}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;border-bottom:2px solid #1976d2;padding-bottom:10px}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#999}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;opacity:.3;margin-bottom:20px}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]{width:100%;margin-top:20px}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#1976d2;background:#f5f5f5}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]:hover{background:#f9f9f9}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]   .confidence-bar[_ngcontent-%COMP%]{margin-bottom:5px}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]   .position-display[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;font-size:12px;color:#666}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]   .position-display[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:monospace}.medicine-detection-container[_ngcontent-%COMP%]   .detected-medicines-section[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0 5px}.medicine-detection-container[_ngcontent-%COMP%]   .detection-summary[_ngcontent-%COMP%]{margin:30px 0;padding:20px;background:#fff;border-radius:8px}.medicine-detection-container[_ngcontent-%COMP%]   .detection-summary[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-top:0;color:#333;border-bottom:2px solid #1976d2;padding-bottom:10px}.medicine-detection-container[_ngcontent-%COMP%]   .detection-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]{background:#f5f5f5;border-left:4px solid #1976d2}.medicine-detection-container[_ngcontent-%COMP%]   .detection-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 0;border-bottom:1px solid #e0e0e0}.medicine-detection-container[_ngcontent-%COMP%]   .detection-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.medicine-detection-container[_ngcontent-%COMP%]   .detection-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666;font-weight:500}.medicine-detection-container[_ngcontent-%COMP%]   .detection-summary[_ngcontent-%COMP%]   .summary-card[_ngcontent-%COMP%]   .summary-row[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#1976d2;font-family:monospace}.medicine-detection-container[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:15px}.medicine-detection-container[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%], .medicine-detection-container[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]{border-radius:4px;text-transform:uppercase;font-weight:500;letter-spacing:.5px}.medicine-detection-container[_ngcontent-%COMP%]   button[mat-raised-button][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .medicine-detection-container[_ngcontent-%COMP%]   button[mat-button][_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}@media (max-width: 768px){.medicine-detection-container[_ngcontent-%COMP%]{padding:10px}.medicine-detection-container[_ngcontent-%COMP%]   .settings-form[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{grid-template-columns:1fr}.medicine-detection-container[_ngcontent-%COMP%]   .medicines-table[_ngcontent-%COMP%]{font-size:12px!important}}"]})}}return i})();var bK=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[Vt,Vt]})}}return i})();var hIe=["*"],mIe='@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape);--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape)}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color)}',pIe=["unscopedContent"],fIe=["text"],gIe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],_Ie=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var bIe=new _e("ListOption"),z3=(()=>{class i{constructor(e){this._elementRef=e}static{this.\u0275fac=function(n){return new(n||i)(F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0})}}return i})(),H3=(()=>{class i{constructor(e){this._elementRef=e}static{this.\u0275fac=function(n){return new(n||i)(F(Re))}}static{this.\u0275dir=Me({type:i,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0})}}return i})(),j3=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0})}}return i})(),vK=(()=>{class i{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static{this.\u0275fac=function(n){return new(n||i)(F(bIe,8))}}static{this.\u0275dir=Me({type:i,hostVars:4,hostBindings:function(n,r){n&2&&qe("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())},standalone:!0})}}return i})(),vIe=(()=>{class i extends vK{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[It]})}}return i})(),$3=(()=>{class i extends vK{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275dir=Me({type:i,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[It]})}}return i})(),yIe=new _e("MAT_LIST_CONFIG"),d1=(()=>{class i{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=ye(yIe,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Jr(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Jr(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=Me({type:i,hostVars:1,hostBindings:function(n,r){n&2&&Tt("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}}return i})(),xIe=(()=>{class i{set lines(e){this._explicitLines=Ja(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=Jr(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=Jr(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,n,r,o,s,a){this._elementRef=e,this._ngZone=n,this._listBase=r,this._platform=o,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new Yt,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=s||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=a==="NoopAnimations",r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new Jg(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(rr(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();let n=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",n===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",n===3),this._hasUnscopedTextContent){let o=this._titles.length===0&&n===1;r.classList.toggle("mdc-list-item__primary-text",o),r.classList.toggle("mdc-list-item__secondary-text",!o)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!!(e.textContent&&e.textContent.trim()))}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Ne),F(d1,8),F(li),F(ld,8),F($i,8))}}static{this.\u0275dir=Me({type:i,contentQueries:function(n,r,o){if(n&1&&(ri(o,vIe,4),ri(o,$3,4)),n&2){let s;Be(s=Ve())&&(r._avatars=s),Be(s=Ve())&&(r._icons=s)}},hostVars:4,hostBindings:function(n,r){n&2&&(Tt("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),qe("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}}return i})();var yK=(()=>{class i extends d1{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=Yi(i)))(r||i)}})()}static{this.\u0275cmp=rt({type:i,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],standalone:!0,features:[Bt([{provide:d1,useExisting:i}]),It,Dt],ngContentSelectors:hIe,decls:1,vars:0,template:function(n,r){n&1&&(Oi(),dt(0))},styles:[mIe],encapsulation:2,changeDetection:0})}}return i})(),xK=(()=>{class i extends xIe{get activated(){return this._activated}set activated(e){this._activated=Jr(e)}constructor(e,n,r,o,s,a){super(e,n,r,o,s,a),this._activated=!1}_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}static{this.\u0275fac=function(n){return new(n||i)(F(Re),F(Ne),F(d1,8),F(li),F(ld,8),F($i,8))}}static{this.\u0275cmp=rt({type:i,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(n,r,o){if(n&1&&(ri(o,H3,5),ri(o,z3,5),ri(o,j3,5)),n&2){let s;Be(s=Ve())&&(r._lines=s),Be(s=Ve())&&(r._titles=s),Be(s=Ve())&&(r._meta=s)}},viewQuery:function(n,r){if(n&1&&(Lt(pIe,5),Lt(fIe,5)),n&2){let o;Be(o=Ve())&&(r._unscopedContent=o.first),Be(o=Ve())&&(r._itemText=o.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(n,r){n&2&&(Tt("aria-current",r._getAriaCurrent()),qe("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[It,Dt],ngContentSelectors:_Ie,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(n,r){if(n&1){let o=ot();Oi(gIe),dt(0),b(1,"span",1),dt(2,1),dt(3,2),b(4,"span",2,0),ne("cdkObserveContent",function(){return Q(o),J(r._updateItemLines(!0))}),dt(6,3),v()(),dt(7,4),dt(8,5),Fe(9,"div",3)}},dependencies:[dx],encapsulation:2,changeDetection:0})}}return i})();var wK=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[qm,kr,Vt,Hu,qD,bK]})}}return i})();function MIe(i,t){if(i&1){let e=ot();b(0,"mat-list-item",7),ne("click",function(){let r=Q(e).$implicit,o=G();return J(o.selectVisualSpace(r))}),b(1,"mat-icon",8),M(2,"location_on"),v(),b(3,"div",9),M(4),v(),b(5,"div",10),M(6),v(),b(7,"div",11),M(8),ia(9,"date"),v()()}if(i&2){let e=t.$implicit,n=G();qe("active",e.id===(n.selectedSpace==null?null:n.selectedSpace.id)),P(4),ft(e.name),P(2),Dr("",e.location," | ",e.shelves.length," shelves"),P(2),gt(" Updated: ",Yl(9,6,e.lastUpdated,"short")," ")}}function CIe(i,t){i&1&&(b(0,"mat-card",12)(1,"mat-card-content")(2,"mat-icon"),M(3,"folder_open"),v(),b(4,"p"),M(5,"No pharmacy locations found"),v()()())}function SIe(i,t){if(i&1){let e=ot();b(0,"mat-list-item",15),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.selectShelf(r))}),b(1,"mat-icon",8),M(2,"inventory_2"),v(),b(3,"div",9),M(4),v(),b(5,"div",10),M(6),v(),b(7,"button",16),ne("click",function(r){let o=Q(e).$implicit,s=G(2);return s.deleteShelf(s.selectedSpace.id,o.id),J(r.stopPropagation())}),b(8,"mat-icon",17),M(9,"delete"),v()()()}if(i&2){let e=t.$implicit,n=G(2);qe("active",e.id===(n.selectedShelf==null?null:n.selectedShelf.id)),P(4),ft(e.name),P(2),mg(" Size: ",e.width," \xD7 ",e.height," cm | Medicines: ",e.medicines.length," ")}}function EIe(i,t){i&1&&(b(0,"mat-card",12)(1,"mat-card-content")(2,"mat-icon"),M(3,"inbox"),v(),b(4,"p"),M(5,"No shelves in this location"),v()()())}function TIe(i,t){if(i&1&&(b(0,"div",1)(1,"mat-card",13)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),M(5,"inventory"),v(),M(6),v()(),b(7,"mat-card-content")(8,"mat-list"),ve(9,SIe,10,6,"mat-list-item",14),v(),ve(10,EIe,6,0,"mat-card",4),v()()()),i&2){let e=G();P(6),gt(" Shelves in ",e.selectedSpace.name," "),P(3),q("ngForOf",e.selectedSpace.shelves),P(),q("ngIf",e.selectedSpace.shelves.length===0)}}function IIe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Medicine Name"),v())}function DIe(i,t){if(i&1&&(b(0,"mat-cell")(1,"strong"),M(2),v()()),i&2){let e=t.$implicit;P(2),ft(e.name)}}function kIe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Position (X, Y)"),v())}function AIe(i,t){if(i&1&&(b(0,"mat-cell")(1,"code",47),M(2),v()()),i&2){let e=t.$implicit;P(2),Dr("",e.x,", ",e.y,"")}}function PIe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Confidence"),v())}function OIe(i,t){if(i&1&&(b(0,"mat-cell"),Fe(1,"mat-progress-bar",48),b(2,"span",49),M(3),v()()),i&2){let e=t.$implicit;P(),q("value",e.confidence*100),P(2),gt("",(e.confidence*100).toFixed(1),"%")}}function NIe(i,t){i&1&&(b(0,"mat-header-cell"),M(1,"Actions"),v())}function RIe(i,t){if(i&1){let e=ot();b(0,"mat-cell")(1,"button",50),ne("click",function(){let r=Q(e).$implicit,o=G(3);return J(o.removeMedicine(r.id))}),b(2,"mat-icon"),M(3,"delete"),v()()()}}function FIe(i,t){i&1&&Fe(0,"mat-header-row")}function LIe(i,t){i&1&&Fe(0,"mat-row")}function BIe(i,t){if(i&1&&(b(0,"mat-table",38),Mo(1,39),ve(2,IIe,2,0,"mat-header-cell",40)(3,DIe,3,1,"mat-cell",41),Co(),Mo(4,42),ve(5,kIe,2,0,"mat-header-cell",40)(6,AIe,3,2,"mat-cell",41),Co(),Mo(7,43),ve(8,PIe,2,0,"mat-header-cell",40)(9,OIe,4,2,"mat-cell",41),Co(),Mo(10,44),ve(11,NIe,2,0,"mat-header-cell",40)(12,RIe,4,0,"mat-cell",41),Co(),ve(13,FIe,1,0,"mat-header-row",45)(14,LIe,1,0,"mat-row",46),v()),i&2){let e=G(2);q("dataSource",e.medicines),P(13),q("matHeaderRowDef",e.displayedMedicineColumns),P(),q("matRowDefColumns",e.displayedMedicineColumns)}}function VIe(i,t){i&1&&(b(0,"div",51)(1,"mat-icon"),M(2,"shopping_cart"),v(),b(3,"p"),M(4,"No medicines on this shelf"),v()())}function UIe(i,t){if(i&1){let e=ot();b(0,"div",1)(1,"mat-card",18)(2,"mat-card-header")(3,"mat-card-title")(4,"mat-icon"),M(5,"local_pharmacy"),v(),M(6),v(),b(7,"mat-card-subtitle"),M(8),v()(),b(9,"mat-card-content")(10,"mat-card",19)(11,"mat-card-content")(12,"h4"),M(13,"Add Medicine Manually"),v(),b(14,"div",20)(15,"mat-form-field",21)(16,"mat-label"),M(17,"Medicine Name"),v(),b(18,"input",22),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.manualMedicine.name,r)||(o.manualMedicine.name=r),J(r)}),v()()(),b(19,"div",20)(20,"mat-form-field",21)(21,"mat-label"),M(22,"Barcode (optional)"),v(),b(23,"input",23),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.manualMedicine.barcode,r)||(o.manualMedicine.barcode=r),J(r)}),v()()(),b(24,"div",20)(25,"mat-form-field",24)(26,"mat-label"),M(27,"X"),v(),b(28,"input",25),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.manualMedicine.x,r)||(o.manualMedicine.x=r),J(r)}),v()(),b(29,"mat-form-field",24)(30,"mat-label"),M(31,"Y"),v(),b(32,"input",25),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.manualMedicine.y,r)||(o.manualMedicine.y=r),J(r)}),v()(),b(33,"mat-form-field",24)(34,"mat-label"),M(35,"Width"),v(),b(36,"input",25),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.manualMedicine.width,r)||(o.manualMedicine.width=r),J(r)}),v()(),b(37,"mat-form-field",24)(38,"mat-label"),M(39,"Height"),v(),b(40,"input",25),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.manualMedicine.height,r)||(o.manualMedicine.height=r),J(r)}),v()()(),b(41,"div",20)(42,"mat-form-field",24)(43,"mat-label"),M(44,"Confidence"),v(),b(45,"input",26),hi("ngModelChange",function(r){Q(e);let o=G();return gi(o.manualMedicine.confidence,r)||(o.manualMedicine.confidence=r),J(r)}),v()()(),b(46,"button",27),ne("click",function(){Q(e);let r=G();return J(r.addManualMedicine())}),b(47,"mat-icon"),M(48,"add"),v(),M(49," Add Medicine to Shelf "),v()()(),b(50,"div",28)(51,"mat-card",29)(52,"div",30)(53,"mat-icon"),M(54,"inventory_2"),v()(),b(55,"div",31)(56,"h3"),M(57,"Total Medicines"),v(),b(58,"p"),M(59),v()()(),b(60,"mat-card",29)(61,"div",30)(62,"mat-icon"),M(63,"check_circle"),v()(),b(64,"div",31)(65,"h3"),M(66,"Avg Confidence"),v(),b(67,"p"),M(68),v()()(),b(69,"mat-card",29)(70,"div",30)(71,"mat-icon"),M(72,"aspect_ratio"),v()(),b(73,"div",31)(74,"h3"),M(75,"Shelf Size"),v(),b(76,"p"),M(77),v()()()(),b(78,"div",32),ve(79,BIe,15,3,"mat-table",33)(80,VIe,5,0,"div",34),v(),b(81,"div",35)(82,"button",36),ne("click",function(){Q(e);let r=G();return J(r.exportShelfData())}),b(83,"mat-icon"),M(84,"download"),v(),M(85," Export Data "),v(),b(86,"button",37),ne("click",function(){Q(e);let r=G();return J(r.printShelfData())}),b(87,"mat-icon"),M(88,"print"),v(),M(89," Print "),v()()()()()}if(i&2){let e=G();P(6),gt(" Medicines on Shelf: ",e.selectedShelf.name," "),P(2),Dr(" Total: ",e.medicines.length," | Avg Confidence: ",(e.getAverageConfidence()*100).toFixed(1),"% "),P(10),ui("ngModel",e.manualMedicine.name),P(5),ui("ngModel",e.manualMedicine.barcode),P(5),ui("ngModel",e.manualMedicine.x),P(4),ui("ngModel",e.manualMedicine.y),P(4),ui("ngModel",e.manualMedicine.width),P(4),ui("ngModel",e.manualMedicine.height),P(5),ui("ngModel",e.manualMedicine.confidence),P(14),ft(e.medicines.length),P(9),gt("",(e.getAverageConfidence()*100).toFixed(1),"%"),P(9),Dr("",e.selectedShelf.width," \xD7 ",e.selectedShelf.height," cm"),P(2),q("ngIf",e.medicines.length>0),P(),q("ngIf",e.medicines.length===0),P(2),q("disabled",!e.selectedShelf),P(4),q("disabled",!e.selectedShelf)}}function zIe(i,t){i&1&&(b(0,"mat-card",52)(1,"mat-card-content")(2,"mat-icon"),M(3,"touch_app"),v(),b(4,"p"),M(5,"Select a location and shelf to view and manage medicines"),v()()())}var u1=(()=>{class i{constructor(e,n){this.shelfMappingService=e,this.snackBar=n,this.visualSpaces=[],this.selectedSpace=null,this.selectedShelf=null,this.medicines=[],this.manualMedicine={name:"",barcode:"",x:0,y:0,width:50,height:50,confidence:.9},this.displayedMedicineColumns=["name","position","confidence","actions"]}ngOnInit(){this.shelfMappingService.getVisualSpaces().subscribe(e=>{this.visualSpaces=e}),this.shelfMappingService.getCurrentShelf().subscribe(e=>{this.selectedShelf=e,e&&(this.medicines=this.shelfMappingService.getMedicinesByShelf(e.id))})}selectVisualSpace(e){this.selectedSpace=e,this.shelfMappingService.setCurrentVisualSpace(e.id),this.selectedShelf=null,this.medicines=[]}selectShelf(e){this.selectedShelf=e,this.shelfMappingService.setCurrentShelf(e.id),this.medicines=this.shelfMappingService.getMedicinesByShelf(e.id)}deleteShelf(e,n){confirm("Are you sure you want to delete this shelf?")&&(this.shelfMappingService.deleteShelf(e,n),this.selectedShelf?.id===n&&(this.selectedShelf=null,this.medicines=[]),this.snackBar.open("Shelf deleted","Close",{duration:3e3}))}removeMedicine(e){this.selectedShelf&&(this.shelfMappingService.removeMedicineFromShelf(this.selectedShelf.id,e),this.medicines=this.medicines.filter(n=>n.id!==e),this.snackBar.open("Medicine removed from shelf","Close",{duration:3e3}))}addManualMedicine(){if(!this.selectedShelf){this.snackBar.open("Please select a shelf first","Close",{duration:3e3});return}let e=this.manualMedicine.name.trim();if(!e){this.snackBar.open("Medicine name is required","Close",{duration:3e3});return}let n={id:this.generateId(),name:e,barcode:this.manualMedicine.barcode.trim()||void 0,x:Number(this.manualMedicine.x)||0,y:Number(this.manualMedicine.y)||0,width:Number(this.manualMedicine.width)||50,height:Number(this.manualMedicine.height)||50,confidence:Number(this.manualMedicine.confidence)||.9,shelfId:this.selectedShelf.id,detectionTime:new Date};this.shelfMappingService.addMedicineToShelf(this.selectedShelf.id,n),this.medicines=this.shelfMappingService.getMedicinesByShelf(this.selectedShelf.id),this.manualMedicine={name:"",barcode:"",x:0,y:0,width:50,height:50,confidence:.9},this.snackBar.open("Medicine added to shelf","Close",{duration:3e3})}exportShelfData(){if(!this.selectedShelf){this.snackBar.open("Please select a shelf","Close",{duration:3e3});return}let e={shelf:this.selectedShelf,medicines:this.medicines,exportDate:new Date,totalMedicines:this.medicines.length},n=JSON.stringify(e,null,2),r=new Blob([n],{type:"application/json"}),o=URL.createObjectURL(r),s=document.createElement("a");s.href=o,s.download=`${this.selectedShelf.name}_data_${Date.now()}.json`,s.click(),this.snackBar.open("Data exported successfully","Close",{duration:3e3})}printShelfData(){if(!this.selectedShelf){this.snackBar.open("Please select a shelf","Close",{duration:3e3});return}window.print()}getAverageConfidence(){return this.medicines.length===0?0:this.medicines.reduce((n,r)=>n+r.confidence,0)/this.medicines.length}generateId(){return"_"+Math.random().toString(36).substr(2,9)}static{this.\u0275fac=function(n){return new(n||i)(F(HS),F(Xh))}}static{this.\u0275cmp=rt({type:i,selectors:[["app-shelf-management"]],decls:15,vars:5,consts:[[1,"shelf-management-container"],[1,"management-section"],[1,"spaces-card"],["class","space-item",3,"active","click",4,"ngFor","ngForOf"],["class","empty-card",4,"ngIf"],["class","management-section",4,"ngIf"],["class","selection-prompt",4,"ngIf"],[1,"space-item",3,"click"],["matListItemIcon",""],["matListItemTitle",""],["matListItemLine",""],["matListItemLine","",1,"timestamp"],[1,"empty-card"],[1,"shelves-card"],["class","shelf-item",3,"active","click",4,"ngFor","ngForOf"],[1,"shelf-item",3,"click"],["mat-icon-button","","matTooltip","Delete shelf","matListItemMeta","",3,"click"],["color","warn"],[1,"medicines-card"],[1,"info-card","manual-add-card"],[1,"form-row"],["appearance","fill",1,"full-width"],["matInput","","placeholder","e.g., Paracetamol 500mg",3,"ngModelChange","ngModel"],["matInput","","placeholder","e.g., 8901234567890",3,"ngModelChange","ngModel"],["appearance","fill"],["matInput","","type","number",3,"ngModelChange","ngModel"],["matInput","","type","number","step","0.01","min","0","max","1",3,"ngModelChange","ngModel"],["mat-raised-button","","color","primary",3,"click"],[1,"statistics"],[1,"stat-card"],[1,"stat-icon"],[1,"stat-content"],[1,"medicines-table-wrapper"],[3,"dataSource",4,"ngIf"],["class","empty-table",4,"ngIf"],[1,"action-buttons"],["mat-raised-button","","color","primary",3,"click","disabled"],["mat-button","",3,"click","disabled"],[3,"dataSource"],["matColumnDef","name"],[4,"matHeaderCellDef"],[4,"matCellDef"],["matColumnDef","position"],["matColumnDef","confidence"],["matColumnDef","actions"],[4,"matHeaderRowDef"],[4,"matRowDef","matRowDefColumns"],[1,"position-code"],["mode","determinate",1,"confidence-bar",3,"value"],[1,"confidence-text"],["mat-icon-button","","matTooltip","Remove medicine","color","warn",3,"click"],[1,"empty-table"],[1,"selection-prompt"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"div",1)(2,"mat-card",2)(3,"mat-card-header")(4,"mat-card-title")(5,"mat-icon"),M(6,"store"),v(),M(7," Pharmacy Locations "),v()(),b(8,"mat-card-content")(9,"mat-list"),ve(10,MIe,10,9,"mat-list-item",3),v(),ve(11,CIe,6,0,"mat-card",4),v()()(),ve(12,TIe,11,3,"div",5)(13,UIe,90,18,"div",5)(14,zIe,6,0,"mat-card",6),v()),n&2&&(P(10),q("ngForOf",r.visualSpaces),P(),q("ngIf",r.visualSpaces.length===0),P(),q("ngIf",r.selectedSpace),P(),q("ngIf",r.selectedShelf),P(),q("ngIf",!r.selectedShelf&&r.visualSpaces.length>0))},dependencies:[Ya,As,Ps,sa,Za,Wc,Cg,Gc,pc,Ld,Km,Jm,ep,Sx,Qm,Ud,Vd,Wp,ud,yK,xK,$3,H3,z3,j3,jS,Yp,QS,e1,r1,t1,JS,o1,i1,n1,s1,a1,Cy],styles:[".shelf-management-container[_ngcontent-%COMP%]{padding:20px;background:linear-gradient(135deg,#f5f7fa,#c3cfe2);min-height:100vh;display:grid;grid-template-columns:1fr 1fr;gap:20px}.shelf-management-container[_ngcontent-%COMP%]   .management-section[_ngcontent-%COMP%]{display:flex;flex-direction:column}.shelf-management-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{box-shadow:0 8px 16px #0000001a;transition:transform .2s,box-shadow .2s}.shelf-management-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 12px 24px #00000026}.shelf-management-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin-bottom:20px}.shelf-management-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px}.shelf-management-container[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px;margin:0}.shelf-management-container[_ngcontent-%COMP%]   .spaces-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#d32f2f}.shelf-management-container[_ngcontent-%COMP%]   .shelves-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.shelf-management-container[_ngcontent-%COMP%]   .medicines-card[_ngcontent-%COMP%]{grid-column:1/-1}.shelf-management-container[_ngcontent-%COMP%]   .medicines-card[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#00c853}.shelf-management-container[_ngcontent-%COMP%]   .space-item[_ngcontent-%COMP%], .shelf-management-container[_ngcontent-%COMP%]   .shelf-item[_ngcontent-%COMP%]{cursor:pointer;border-left:4px solid transparent;transition:all .2s}.shelf-management-container[_ngcontent-%COMP%]   .space-item[_ngcontent-%COMP%]:hover, .shelf-management-container[_ngcontent-%COMP%]   .shelf-item[_ngcontent-%COMP%]:hover{background:#f5f5f5;border-left-color:#1976d2}.shelf-management-container[_ngcontent-%COMP%]   .space-item[selected=true][_ngcontent-%COMP%], .shelf-management-container[_ngcontent-%COMP%]   .shelf-item[selected=true][_ngcontent-%COMP%]{background:#e3f2fd;border-left-color:#1976d2}.shelf-management-container[_ngcontent-%COMP%]   .space-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%], .shelf-management-container[_ngcontent-%COMP%]   .shelf-item[_ngcontent-%COMP%]   .timestamp[_ngcontent-%COMP%]{font-size:12px;color:#999}.shelf-management-container[_ngcontent-%COMP%]   .empty-card[_ngcontent-%COMP%]{background:#f5f5f5;border-left:4px solid #999;text-align:center}.shelf-management-container[_ngcontent-%COMP%]   .empty-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:10px;padding:40px 20px}.shelf-management-container[_ngcontent-%COMP%]   .empty-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.3}.shelf-management-container[_ngcontent-%COMP%]   .empty-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#999}.shelf-management-container[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:15px;margin-bottom:30px}.shelf-management-container[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;padding:15px;border-radius:8px}.shelf-management-container[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:50%;background:#f5f5f5}.shelf-management-container[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.shelf-management-container[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{flex:1}.shelf-management-container[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#999;text-transform:uppercase;letter-spacing:.5px}.shelf-management-container[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:5px 0 0;font-size:24px;font-weight:600;color:#1976d2}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]{margin-bottom:20px}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]{width:100%;background:#fff;border-radius:8px;overflow:hidden}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   mat-header-cell[_ngcontent-%COMP%]{font-weight:600;color:#1976d2;background:#f5f5f5;border-bottom:2px solid #e0e0e0}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]{border-bottom:1px solid #e0e0e0}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   mat-row[_ngcontent-%COMP%]:hover{background:#f9f9f9}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   .position-code[_ngcontent-%COMP%]{font-family:monospace;font-size:12px;background:#f5f5f5;padding:4px 8px;border-radius:4px;color:#333}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   .confidence-bar[_ngcontent-%COMP%]{margin-bottom:8px;height:6px}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]   .confidence-text[_ngcontent-%COMP%]{font-size:12px;font-weight:500;color:#1976d2}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   .empty-table[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#999;background:#fff;border-radius:8px}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   .empty-table[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;opacity:.3;margin-bottom:20px}.shelf-management-container[_ngcontent-%COMP%]   .medicines-table-wrapper[_ngcontent-%COMP%]   .empty-table[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin:0}.shelf-management-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px;padding-top:20px;border-top:1px solid #e0e0e0}.shelf-management-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.shelf-management-container[_ngcontent-%COMP%]   .selection-prompt[_ngcontent-%COMP%]{grid-column:1/-1;text-align:center;background:#e3f2fd;border-left:4px solid #1976d2}.shelf-management-container[_ngcontent-%COMP%]   .selection-prompt[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:15px;padding:60px 20px}.shelf-management-container[_ngcontent-%COMP%]   .selection-prompt[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#1976d2}.shelf-management-container[_ngcontent-%COMP%]   .selection-prompt[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#1976d2;font-size:18px}@media (max-width: 1200px){.shelf-management-container[_ngcontent-%COMP%]{grid-template-columns:1fr}.shelf-management-container[_ngcontent-%COMP%]   .medicines-card[_ngcontent-%COMP%]{grid-column:1}}@media (max-width: 768px){.shelf-management-container[_ngcontent-%COMP%]{padding:10px}.shelf-management-container[_ngcontent-%COMP%]   .statistics[_ngcontent-%COMP%]{grid-template-columns:1fr}.shelf-management-container[_ngcontent-%COMP%]   mat-table[_ngcontent-%COMP%]{font-size:12px!important}.shelf-management-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex-direction:column}.shelf-management-container[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})}}return i})();function jIe(i,t){i&1&&(b(0,"mat-icon",6),M(1,"landscape"),v(),b(2,"span"),M(3,"Visual Mapper"),v())}function $Ie(i,t){i&1&&(b(0,"mat-icon",6),M(1,"local_pharmacy"),v(),b(2,"span"),M(3,"Medicine Detection"),v())}function GIe(i,t){i&1&&(b(0,"mat-icon",6),M(1,"inventory"),v(),b(2,"span"),M(3,"Shelf Management"),v())}function WIe(i,t){i&1&&(b(0,"mat-icon",6),M(1,"shopping_cart"),v(),b(2,"span"),M(3,"Products"),v())}function qIe(i,t){i&1&&(b(0,"mat-icon",6),M(1,"receipt"),v(),b(2,"span"),M(3,"Orders"),v())}function XIe(i,t){if(i&1){let e=ot();b(0,"mat-card",10),ne("click",function(){let r=Q(e).$implicit,o=G(2);return J(o.navigateTo(r.route))}),b(1,"mat-card-header")(2,"mat-icon",11),M(3),v(),b(4,"mat-card-title"),M(5),v()(),b(6,"mat-card-content")(7,"p"),M(8),v()()()}if(i&2){let e=t.$implicit;P(3),ft(e.icon),P(2),ft(e.label),P(3),ft(e.description)}}function YIe(i,t){if(i&1&&(b(0,"div",7)(1,"h2"),M(2,"Quick Start"),v(),b(3,"div",8),ve(4,XIe,9,3,"mat-card",9),v()()),i&2){let e=G();P(4),q("ngForOf",e.navItems)}}var MK=(()=>{class i{constructor(e){this.router=e,this.navItems=[{label:"Visual Space Mapper",route:"/visual-mapper",icon:"landscape",description:"Create and manage pharmacy shelf layouts"},{label:"Medicine Detection",route:"/medicine-detection",icon:"local_pharmacy",description:"Detect medicines from images automatically"},{label:"Shelf Management",route:"/shelf-management",icon:"inventory",description:"Manage and organize shelf medicines"},{label:"Products",route:"/products",icon:"shopping_cart",description:"View and manage product catalog"},{label:"Orders",route:"/orders",icon:"receipt",description:"Manage pharmacy orders"}]}navigateTo(e){this.router.navigate([e])}static{this.\u0275fac=function(n){return new(n||i)(F(Xc))}}static{this.\u0275cmp=rt({type:i,selectors:[["app-pharmacy-dashboard"]],decls:21,vars:1,consts:[[1,"pharmacy-dashboard"],["animationDuration","300",1,"dashboard-tabs"],["mat-tab-label",""],[1,"orders-tab"],[1,"orders-tab-intro"],["class","quick-start-section",4,"ngIf"],[1,"tab-icon"],[1,"quick-start-section"],[1,"cards-grid"],["class","nav-card",3,"click",4,"ngFor","ngForOf"],[1,"nav-card",3,"click"],[1,"card-icon"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"mat-tab-group",1)(2,"mat-tab"),ve(3,jIe,4,0,"ng-template",2),Fe(4,"app-visual-space-mapper"),v(),b(5,"mat-tab"),ve(6,$Ie,4,0,"ng-template",2),Fe(7,"app-medicine-detection"),v(),b(8,"mat-tab"),ve(9,GIe,4,0,"ng-template",2),Fe(10,"app-shelf-management"),v(),b(11,"mat-tab"),ve(12,WIe,4,0,"ng-template",2),Fe(13,"app-product-list"),v(),b(14,"mat-tab"),ve(15,qIe,4,0,"ng-template",2),b(16,"div",3)(17,"div",4),M(18,"Orders workspace"),v(),Fe(19,"app-order-management"),v()()(),ve(20,YIe,5,1,"div",5),v()),n&2&&(P(20),q("ngIf",!1))},dependencies:[Ya,As,Km,Jm,ep,Qm,ud,rk,ok,d8,NM,RM,zS,l1,u1],styles:[".pharmacy-dashboard[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:40px 20px;border-radius:12px;margin-bottom:30px;box-shadow:0 8px 32px #0000001a}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{display:flex;align-items:center;gap:15px;margin:0 0 15px;font-size:32px;font-weight:600}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:16px;opacity:.9;line-height:1.6}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 8px 16px #0000001a;margin-bottom:30px}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]   .tab-icon[_ngcontent-%COMP%]{margin-right:8px;color:#667eea}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]     .mat-tab-labels{background:#f5f5f5;border-radius:8px 8px 0 0}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]     .mat-tab-label{min-width:160px;display:flex;align-items:center;justify-content:center;font-weight:500}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]     .mat-tab-label.mat-tab-label-active{background:#667eea;color:#fff}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]     .mat-tab-label.mat-tab-label-active .tab-icon{color:#fff}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]     .mat-tab-body{min-height:600px}.pharmacy-dashboard[_ngcontent-%COMP%]   .orders-tab[_ngcontent-%COMP%]{padding:12px 16px 16px;background:#f8fafc}.pharmacy-dashboard[_ngcontent-%COMP%]   .orders-tab-intro[_ngcontent-%COMP%]{background:#0f172a;color:#f8fafc;padding:8px 12px;border-radius:10px;font-size:13px;margin-bottom:12px}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#333;margin-bottom:20px;font-size:24px;font-weight:600}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .nav-card[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s,box-shadow .3s;background:#fff}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .nav-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 32px #00000026}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .nav-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:15px;margin-bottom:15px}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .nav-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   .card-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;color:#667eea}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .nav-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{margin:0;color:#333;font-size:18px}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]   .nav-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px;line-height:1.5}@media (max-width: 768px){.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]{padding:20px}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:24px}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]     .mat-tab-label{min-width:120px;padding:8px!important}.pharmacy-dashboard[_ngcontent-%COMP%]   .dashboard-tabs[_ngcontent-%COMP%]     .mat-tab-label span{display:none}.pharmacy-dashboard[_ngcontent-%COMP%]   .quick-start-section[_ngcontent-%COMP%]   .cards-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return i})();var CK=(()=>{class i{constructor(e){this.sanitizer=e,this.editorUrl=this.sanitizer.bypassSecurityTrustResourceUrl("assets/three-editor/editor/index.html")}static{this.\u0275fac=function(n){return new(n||i)(F(Dg))}}static{this.\u0275cmp=rt({type:i,selectors:[["app-three-editor"]],decls:9,vars:1,consts:[[1,"editor-page"],[1,"editor-header"],[1,"title"],["aria-hidden","true",1,"material-icons"],[1,"hint"],[1,"editor-frame",3,"src"]],template:function(n,r){n&1&&(b(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),M(4,"view_in_ar"),v(),M(5," 3D Shelf Editor "),v(),b(6,"div",4),M(7," Use File > Save to sync shelves back into Visual Mapper. "),v()(),Fe(8,"iframe",5),v()),n&2&&(P(8),q("src",r.editorUrl,q4))},styles:[".editor-page[_ngcontent-%COMP%]{height:100vh;display:flex;flex-direction:column}.editor-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:10px 16px;background:#0f172a;color:#f8fafc;font-size:14px}.title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:600}.hint[_ngcontent-%COMP%]{opacity:.8}.editor-frame[_ngcontent-%COMP%]{flex:1;width:100%;border:none}"]})}}return i})();var ZIe=[{path:"",component:MK,children:[{path:"products",component:NM},{path:"orders",component:RM},{path:"visual-mapper",component:zS},{path:"visual-editor",component:CK},{path:"medicine-detection",component:l1},{path:"shelf-management",component:u1},{path:"",redirectTo:"visual-mapper",pathMatch:"full"}]}],SK=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[ID.forChild(ZIe),ID]})}}return i})();var EK=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[kr,Vy,By,Bd,Ex,Sh,wX,Dx,wK,u8,$Z,SX,IX,QZ,PM,zZ,lK,c1,qX,AM]})}}return i})();var LTt=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=$e({type:i})}static{this.\u0275inj=je({imports:[kr,By,Vy,SK,EK,c1,Dx,Ex,Bd]})}}return i})();export{ge as a,zK as b,pt as c,we as d,je as e,pe as f,ye as g,rt as h,$e as i,$i as j,vv as k,Qf as l,Ne as m,b as n,v as o,Fe as p,M as q,kt as r,C5 as s,bFe as t,vFe as u,Jc as v,X3e as w,Y3e as x,Wn as y,e8 as z,t8 as A,Z3e as B,Use as C,ID as D,Dx as E,LTt as F};
